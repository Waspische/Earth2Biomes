(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{538:function(e,t,o){var content=o(619);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(23).default)("60863223",content,!1,{sourceMap:!1})},618:function(e,t,o){"use strict";o(538)},619:function(e,t,o){var n=o(22)(!1);n.push([e.i,"#map-wrapper[data-v-20e0962b]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.v-btn--example[data-v-20e0962b]{bottom:0;position:absolute;margin:0 0 16px 16px;z-index:4;left:50%;transform:translateX(-50%)}#features[data-v-20e0962b]{position:relative;z-index:3;max-height:650px;overflow-y:auto}",""]),e.exports=n},648:function(e,t,o){"use strict";o.r(t);o(10),o(7),o(16),o(17);var n=o(2),r=o(21),l=(o(83),o(63),o(3),o(8),o(27),o(30),o(35),o(9),o(20),o(49),o(34),o(479)),c=o.n(l),d=o(1),m=o(473);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={name:"MapboxMap",components:{},data:function(){return{drawer:!0,mini:!1,show:!1,message:"",timeout:5e3,editedJewelLocation:{profileId:"",jewels:""},jewels:[],names:[],accessToken:"pk.eyJ1Ijoid2FzcGlzY2hlIiwiYSI6ImNrazBidGRsNzBmdmIyeHJyYThjZG0wYzYifQ.qZQp-6ddFiyakTvvyCv8Gw",mapStyle:"mapbox://styles/mapbox/dark-v10",dialog:!1,jewelsLocation:{id:"jewelsLocation",source:"urban",type:"symbol",layout:{"icon-image":["coalesce",["image",["get","jewel"]],["image","rocket-15"]],"icon-size":.5,"icon-allow-overlap":!0,"text-font":["Open Sans Bold","Arial Unicode MS Bold"]},paint:{"text-color":"#202","text-halo-color":"#fff","text-halo-width":2}},jewelsTypes:[{name:"black",file:"BlackCrystal.png"},{name:"blue",file:"BlueCrystal.png"},{name:"grey",file:"GreyCrystal.png"},{name:"brown",file:"BrownCrystal.png"},{name:"ochre",file:"OchreCrystal.png"},{name:"sandy",file:"SandyCrystal.png"},{name:"yellow",file:"YellowCrystal.png"}]}},watch:{dialog:function(e){e||this.close()}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.a.accessToken=e.accessToken,e.map=new c.a.Map({container:"map",style:e.mapStyle,zoom:1,sprite:"mapbox://sprites/mapbox/bright-v8"}),e.map.addControl(new c.a.NavigationControl,"top-right"),e.map.on("load",e.onMapLoad),t.next=6,fetch("./data/jewels.json").then((function(e){return e.json()}));case 6:data=t.sent,e.names=data.results.filter((function(e){return!!e.name})).map((function(e){return e.name}));case 8:case"end":return t.stop()}}),t)})))()},methods:{loadImages:function(){var e=this;return this.jewelsTypes.map((function(t){return new Promise((function(n,r){e.map.loadImage(o(508)("./"+t.file),(function(e,data){e?(console.log("Error with ".concat(t.name)),console.error(e),r(e)):n([t,data])}))}))}))},onMapLoad:function(e){var t=this;Promise.all(this.loadImages()).then((function(e){e.forEach((function(e){var o=e[0],data=e[1];t.map.addImage(o.name,data)})),console.log(e.map((function(e){return t.map.hasImage(e[0].name)}))),t.map.addSource("urban",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.map.addLayer(t.jewelsLocation),t.jewels=t.getJewels()}))},getJewels:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./data/1-namelessJewels.json").then((function(e){return e.json()}));case 2:return data=t.sent,o=data.results.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.landfield.center.split(" ")[0],t.landfield.center.split(" ")[1]]},properties:v(v({},t),{},{jewel:e.colorToString(t)})}})),e.map.getSource("urban").setData({type:"FeatureCollection",features:o}),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()},colorToString:function(e){return 0===e.color?"blue":1===e.color?"black":2===e.color?"brown":3===e.color?"ochre":4===e.color?"grey":5===e.color?"sandy":6===e.color?"yellow":null},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedCity=Object.assign({},e.defaultCity),e.editedIndex=-1}))},save:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o={}).city=e.editedCity,o.id=null,t.prev=3,t.next=6,e.$axios.$post("/city-contributions",o);case 6:n=t.sent,data=n.data,console.log(data),e.show=!0,e.message="Thank you for your contribution ! I'll review it as soon as possible. You can follow confirmed cities on Discord.",e.close(),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),t.t0.response?(console.log(t.t0.response.data),console.log(t.t0.response.status),console.log(t.t0.response.headers)):t.t0.request?console.log(t.t0.request):console.log("Error",t.t0.message),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))()},onCityClick:function(e){var t=e.features[0],o=t.properties.id;console.log(t),this.$router.push("/cities/"+o)},onMouseEnterCity:function(e){this.map.getCanvas().style.cursor="pointer";for(var t=e.features[0],o=void 0===t.properties.cityName?"":t.properties.cityName,n=e.features[0].geometry.coordinates.slice();Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;var r=new d.a(v(v({},m.default),{},{parent:this,propsData:{popupName:o,type:"urban"}})).$mount();new c.a.Popup({closeButton:!1}).setLngLat(n).setDOMContent(r.$el).addTo(this.map)},onMouseOutCity:function(){this.map.getCanvas().style.cursor="";var e=document.getElementsByClassName("mapboxgl-popup");e[0]&&e[0].remove()}},head:function(){return{title:"Jewels"}}},w=(o(618),o(72)),y=o(77),x=o.n(y),j=o(250),_=o(474),k=o(471),C=o(465),O=o(470),T=o(532),S=o(227),I=o(467),M=o(507),P=o(464),component=Object(w.a)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",{attrs:{fluid:""}},[o("v-snackbar",{attrs:{timeout:e.timeout,color:"info"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("v-row",[o("v-col",{attrs:{cols:"12",sm:"10"}},[e._v("\n        "+e._s(e.message)+"\n      ")]),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"2"}},[o("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://discord.gg/ZvU5Qvqrz6",color:"secondary",text:""}},[o("v-icon",{attrs:{dark:""}},[e._v("\n            mdi-open-in-new\n          ")]),e._v(" Discord\n        ")],1)],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[o("v-btn",e._g(e._b({staticClass:"ml-4 mt-4 v-btn--example",attrs:{id:"cities-dialog-btn",color:"primary darken-1",elevation:"2",large:"",rounded:"",absolute:"",bottom:""}},"v-btn",r,!1),n),[e._v("\n        Share your jewels location\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[e._v("Share your jewels location")])]),e._v(" "),o("v-card-text",[o("v-row",{attrs:{dense:""}},[o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e._v("\n            The goal is to discover if there is som factors in the location of jewels spawn. Thanks for participating to the experience.\n          ")]),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e._v("\n            Click\n            "),o("a",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://app.earth2.io/api/v2/my/jewels/?color=&expires__isnull=true&limit=1000&offset=0"}},[e._v("\n              this link\n            ")]),e._v(" and copy paste the result in discord to Wasp#1975. Their is no personal data here, just jewels locations."),o("b",[e._v("It might be a too long message on mobile")])]),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("p",[e._v("Thanks to :")]),e._v(" "),e._l(e.names,(function(t){return o("span",{key:t},[e._v("\n              "+e._s(t)+",\n            ")])}))],2)],1)],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n          Close\n        ")])],1)],1)],1),e._v(" "),o("v-row",{attrs:{id:"map-wrapper",fluid:"","no-gutters":""}},[o("v-col",{attrs:{id:"map",cols:"12"}})],1)],1)}),[],!1,null,"20e0962b",null);t.default=component.exports;x()(component,{VBtn:j.a,VCard:_.a,VCardActions:k.a,VCardText:k.b,VCardTitle:k.c,VCol:C.a,VContainer:O.a,VDialog:T.a,VIcon:S.a,VRow:I.a,VSnackbar:M.a,VSpacer:P.a})}}]);