(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{472:function(e,t,o){var content=o(476);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(23).default)("f43c1400",content,!1,{sourceMap:!1})},473:function(e,t,o){"use strict";o.r(t);var r=o(2),n=(o(3),o(73),o(10),o(7),o(8),o(16),o(9),o(17),o(121));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}var l={name:"MapPopup",props:["popupName","lat","lng","type","data"],data:function(){return{snackbar:!1,text:"Position copied in clipboard. It can be unprecised, so look around ;)",popupData:this.data,title:this.popupName,popupType:this.type}},computed:{geoposition:function(){return"quarry"===this.type||"well"===this.type?this.lat.toString().substring(0,8)+", "+this.lng.toString().substring(0,8):null}},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({onCopy:function(e){console.log(e)},onCopyError:function(e){console.log(e)},snackTime:function(e){console.log("snacktime"),this.setSnack(this.text)}},Object(n.b)({setSnack:"snackbar/setSnack"}))},m=l,d=(o(475),o(72)),y=o(77),f=o.n(y),v=o(250),h=o(474),k=o(471),x=o(227),component=Object(d.a)(m,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"popup-wrapper"},[o("v-card",{staticClass:"rounded-lg mx-2 transparent-card",attrs:{"max-width":"300px",flat:""}},[o("v-card-title",{staticClass:"pa-0 text-center h6"},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),"quarry"===e.popupType||"well"===e.popupType?o("v-card-text",{staticClass:"pa-0 text-center"},[o("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.geoposition,expression:"geoposition",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.snackTime,expression:"snackTime",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{icon:""}},[o("v-icon",{attrs:{dark:""}},[e._v("\n          mdi-content-copy\n        ")])],1),e._v("\n      "+e._s(e.geoposition)+"\n    ")],1):e._e(),e._v(" "),"urban"===e.popupType?o("v-card-text",{staticClass:"pb-1 text-center"},[e._v("\n      "+e._s(e.$t("cities.mapDetails"))+"\n    ")]):e._e(),e._v(" "),"property"===e.popupType?o("v-card-text",{staticClass:"pb-1"},[o("div",[e._v("Owner: "+e._s(e.popupData.ownerName))]),e._v(" "),o("div",[e._v("Price: "+e._s(e.popupData.price)+" E$ | Tiles: "+e._s(e.popupData.tileCount))]),e._v(" "),o("div",[e._v("Tier: "+e._s(e.popupData.landfieldTier)+" | Class: "+e._s(e.popupData.tileClass))]),e._v(" "),o("div",{staticClass:"text-center body-2"},[e._v("\n        "+e._s(e.$t("cities.openEarth2"))+"\n      ")])]):e._e(),e._v(" "),"quarry"===e.popupType||"well"===e.popupType?o("v-card-actions",{staticClass:"justify-center"},[o("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://www.openstreetmap.org/search?query="+e.lat+"%2C"+e.lng,small:"",color:"primary darken-1"}},[o("v-icon",{attrs:{dark:""}},[e._v("\n          mdi-open-in-new\n        ")]),e._v(" OpenStreetMap\n      ")],1)],1):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VBtn:v.a,VCard:h.a,VCardActions:k.a,VCardText:k.b,VCardTitle:k.c,VIcon:x.a})},475:function(e,t,o){"use strict";o(472)},476:function(e,t,o){var r=o(22)(!1);r.push([e.i,'.mapboxgl-popup-close-button{display:none}.mapboxgl-popup-content{font:400 15px/22px "Source Sans Pro","Helvetica Neue",Sans-serif;background-color:hsla(0,0%,45.9%,.75);padding:0;border-radius:8px}.mapboxgl-popup-tip{border:15px solid transparent}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{border-top-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{border-right-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{border-left-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{border-bottom-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{border-top-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{border-bottom-color:hsla(0,0%,45.9%,.75)}.transparent-card{background-color:hsla(0,0%,45.9%,0)!important}',""]),e.exports=r},487:function(e,t,o){var content=o(496);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(23).default)("556c5f0e",content,!1,{sourceMap:!1})},493:function(e,t,o){"use strict";o.r(t);var r={name:"Snackbar",data:function(){return{show:!1,message:"",timeout:4e3}},created:function(){var e=this;this.$store.watch((function(e){return e.snackbar.snack}),(function(){console.log("snack"),""!==e.$store.state.snackbar.snack&&(e.show=!0,e.message=e.$store.state.snackbar.snack,e.$store.commit("snackbar/setSnack",""))}))}},n=(o(495),o(72)),c=o(77),l=o.n(c),m=o(250),d=o(227),y=o(507),component=Object(n.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-snackbar",{staticClass:"snack",attrs:{timeout:e.timeout},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v("\n  "+e._s(e.message)+"\n  "),o("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://app.earth2.io/#thegrid/",color:"primary",text:""}},[o("v-icon",{attrs:{dark:""}},[e._v("\n      mdi-open-in-new\n    ")]),e._v(" Earth2 map\n  ")],1)],1)}),[],!1,null,"07f069d8",null);t.default=component.exports;l()(component,{VBtn:m.a,VIcon:d.a,VSnackbar:y.a})},495:function(e,t,o){"use strict";o(487)},496:function(e,t,o){var r=o(22)(!1);r.push([e.i,".snack[data-v-07f069d8]{z-index:999}",""]),e.exports=r},537:function(e,t,o){var content=o(597);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(23).default)("ea8b070c",content,!1,{sourceMap:!1})},596:function(e,t,o){"use strict";o(537)},597:function(e,t,o){var r=o(22)(!1);r.push([e.i,"#menu-wrapper{position:relative;z-index:3}#map-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}",""]),e.exports=r},647:function(e,t,o){"use strict";o.r(t);var r=o(2),n=o(21),c=(o(83),o(8),o(3),o(63),o(31),o(44),o(27),o(10),o(7),o(16),o(9),o(17),o(1)),l=o(479),m=o.n(l),d=o(633),y=o(493),f=o(473);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={name:"Resources",components:{Snackbar:y.default},data:function(){return{drawer:!0,mini:!1,selectedLanduse:null,previousLanduse:null,selectedSource:"MRDS",datasources:[{key:"OSM",label:"OpenStreet Map"},{key:"MRDS",label:"MRDS Data"}],biomes:{name:"Resources",icon:"mdi-earth",categories:[{id:"osm_mmm",name:"Most mined minerals",datasource:"OSM",tooltip:"Tooltip",landuses:[{key:"coal",name:"Coal",color:"#36454f",type:"quarry"},{key:"iron_ore",name:"Iron",color:"#4e4f55",type:"quarry"},{key:"bauxite",name:"Bauxite",color:"#665e5a",type:"quarry"},{key:"phosphate",name:"Phosphate",color:"#4e4f55",type:"quarry"},{key:"gypsum",name:"Gypsum",color:"#c6c9ca",type:"quarry"}]},{id:"osm_other",name:"Other minerals",datasource:"OSM",landuses:[{key:"gold",name:"Gold",color:"#FFD700",type:"quarry"},{key:"uranium",name:"Uranium",color:"#757575",type:"quarry"},{key:"silver",name:"Silver",color:"#C0C0C0",type:"quarry"},{key:"copper",name:"Copper",color:"#b87333",type:"quarry"},{key:"marble",name:"Marble",color:"#596e7f",type:"quarry"}]},{id:"osm_gem",name:"Gem stones",datasource:"OSM",landuses:[{key:"diamond",name:"Diamond",color:"#b9f2ff",type:"quarry"},{key:"opal",name:"Opal",color:"#a8c3bc",type:"quarry"},{key:"amethyst",name:"Amethyst",color:"#9966cc",type:"quarry"},{key:"quartz",name:"Quartz",color:"#DDDDDF",type:"quarry"},{key:"ruby",name:"Ruby",color:"#e0115f",type:"quarry"}]},{id:"osm_petrol",name:"Petroleum well",datasource:"OSM",landuses:[{name:"Oil",fileName:"oilWells",color:"#494c4f",type:"well"},{name:"Gas",fileName:"gasWells",color:"#ffdf46",type:"well"},{name:"Offshore",fileName:"offshoreWells",color:"#cad7d9",type:"well"}]},{id:"mrds_mmm",name:"Most mined minerals",datasource:"MRDS",tooltip:"Tooltip",landuses:[{key:"coal",name:"Coal",color:"#36454f",type:"quarry"},{key:"iron",name:"Iron",color:"#4e4f55",type:"quarry"},{key:"bauxite",name:"Bauxite",color:"#665e5a",type:"quarry"},{key:"phosphate",name:"Phosphate",color:"#4e4f55",type:"quarry"},{key:"gypsum",name:"Gypsum",color:"#c6c9ca",type:"quarry"}]},{id:"mrds_quarries",name:"Quarries",datasource:"MRDS",landuses:[{key:"nickel",name:"Nickel",color:"#727472",type:"quarry"},{key:"aluminum",name:"Aluminum",color:"#848789",type:"quarry"},{key:"copper",name:"Copper",color:"#b87333",type:"quarry"},{key:"lead",name:"Lead",color:"#212121",type:"quarry"},{key:"pge",name:"PGE",color:"#bdcdde",type:"quarry"},{key:"gold",name:"Gold",color:"#FFD700",type:"quarry"},{key:"rare earth elements",name:"Rare Earths",color:"#665647",type:"quarry"},{key:"potash",name:"Potash",color:"#e07757",type:"quarry"},{key:"silver",name:"Silver",color:"#C0C0C0",type:"quarry"}]},{id:"mrds_gem",name:"Gem stones",datasource:"MRDS",landuses:[{key:"diamond",name:"Diamond",color:"#b9f2ff",type:"quarry"},{key:"sapphire",name:"Sapphire",color:"#0f52ba",type:"quarry"},{key:"amethyst",name:"Amethyst",color:"#9966cc",type:"quarry"},{key:"emerald",name:"Emerald",color:"#50C878",type:"quarry"},{key:"jade",name:"Jade",color:"#00a86b",type:"quarry"},{key:"ruby",name:"Ruby",color:"#e0115f",type:"quarry"}]}]},depositsTypes:[],accessToken:"pk.eyJ1Ijoid2FzcGlzY2hlIiwiYSI6ImNrazBidGRsNzBmdmIyeHJyYThjZG0wYzYifQ.qZQp-6ddFiyakTvvyCv8Gw",mapStyle:"mapbox://styles/mapbox/light-v10",landuseLocation:{id:"landuseLocation",source:"landuse",type:"circle",paint:{"circle-radius":4,"circle-stroke-color":"#000","circle-stroke-width":1,"circle-opacity":.6}}}},head:function(){return{title:"Resources"}},computed:{filteredBiomes:function(){var e=this;return this.biomes.categories.filter((function(t){return t.datasource===e.selectedSource||void 0===t.datasource}))}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.a.accessToken=e.accessToken,e.map=new m.a.Map({container:"map",style:e.mapStyle,zoom:1,sprite:"mapbox://sprites/mapbox/bright-v8"}),e.map.addControl(new m.a.NavigationControl,"top-right"),e.map.on("load",e.onMapLoad),e.map.on("zoom",e.onZoom),t.next=7,fetch("./data/mines/"+e.selectedSource+"_depositsTypes.json").then((function(e){return e.json()}));case 7:e.depositsTypes=t.sent,window.map=e.map;case 9:case"end":return t.stop()}}),t)})))()},methods:{onMapLoad:function(e){this.map.addSource("landuse",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer(this.landuseLocation),this.map.setLayoutProperty("landuseLocation","visibility","none"),this.map.on("click","landuseLocation",this.onFeatureClick),this.map.on("mouseover","landuseLocation",this.onMouseEnter),this.map.on("mouseleave","landuseLocation",this.onMouseOut)},onDatasourceSelection:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./data/mines/"+e.selectedSource+"_depositsTypes.json").then((function(e){return e.json()}));case 2:e.depositsTypes=t.sent;case 3:case"end":return t.stop()}}),t)})))()},onLanduseSelection:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.trackBiomeClick(e),t.selectedLanduse===t.previousLanduse){o.next=21;break}if((r=document.getElementsByClassName("mapboxgl-popup"))[0]&&r[0].remove(),t.previousLanduse=t.selectedLanduse,"quarry"!==e.type){o.next=15;break}return o.next=9,t.map.getSource("landuse").setData("./data/mines/"+t.selectedSource+"_mineralDeposits.json");case 9:n=t.depositsTypes.filter((function(t){return t.includes(e.key)})),t.map.setFilter("landuseLocation",["match",["get","resource"],n,!0,!1]),t.map.setLayoutProperty("landuseLocation","visibility","visible"),t.map.setPaintProperty("landuseLocation","circle-color",e.color),o.next=21;break;case 15:if("well"!==e.type){o.next=21;break}return o.next=18,t.map.getSource("landuse").setData("./data/"+e.fileName+".json");case 18:t.map.setFilter("landuseLocation",null),t.map.setLayoutProperty("landuseLocation","visibility","visible"),t.map.setPaintProperty("landuseLocation","circle-color",e.color);case 21:case"end":return o.stop()}}),o)})))()},onZoom:function(){console.log(this.map.getZoom())},onMouseEnter:function(){this.map.getCanvas().style.cursor="pointer"},onMouseOut:function(){this.map.getCanvas().style.cursor=""},onFeatureClick:function(e){var t,o,r=e.features[0],n=document.getElementsByClassName("mapboxgl-popup");if(n[0]&&n[0].remove(),"Polygon"===r.geometry.type){var l=Object(d.a)(e.features[0]);t=l.geometry.coordinates[1],o=l.geometry.coordinates[0]}else"Point"===r.geometry.type&&(t=r.geometry.coordinates[1],o=r.geometry.coordinates[0]);var y=void 0===r.properties.name?this.selectedLanduse.name:r.properties.name,v=new c.a(h(h({},f.default),{},{parent:this,propsData:{popupName:y,lat:t,lng:o,type:this.selectedLanduse.type}})).$mount();new m.a.Popup({closeButton:!1}).setLngLat(e.lngLat).setDOMContent(v.$el).addTo(this.map)},trackBiomeClick:function(e){this.$gtag.event("click",{event_category:"biome",event_label:e.key})}}},x=(o(596),o(72)),_=o(77),w=o.n(_),O=o(250),C=o(465),S=o(470),j=o(511),L=o(227),D=o(228),P=o(229),M=o(135),T=o(230),V=o(96),R=o(463),E=o(636),N=o(637),I=o(467),B=o(548),component=Object(x.a)(k,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[o("Snackbar"),e._v(" "),o("v-navigation-drawer",{staticClass:"rounded ml-4 mt-4",attrs:{id:"menu-wrapper","mini-variant":e.mini,permanent:"",width:"300"},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[o("v-list-item",{staticClass:"px-2"},[o("v-list-item-avatar",[o("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[o("v-icon",[e._v("mdi-menu")])],1)],1),e._v(" "),o("v-list-item-title",[e._v(e._s(e.biomes.name))]),e._v(" "),o("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[o("v-icon",[e._v("mdi-chevron-left")])],1)],1),e._v(" "),o("v-divider"),e._v(" "),o("v-list",{attrs:{dense:""}},[o("v-select",{staticClass:"pr-4 pt-4 pl-16",attrs:{items:e.datasources,"item-text":"label","item-value":"key",label:"Datasource","hide-details":"auto",dense:""},on:{change:e.onDatasourceSelection},model:{value:e.selectedSource,callback:function(t){e.selectedSource=t},expression:"selectedSource"}}),e._v(" "),e._l(e.filteredBiomes,(function(t){return o("v-list-group",{key:t.id,staticClass:"mt-0",attrs:{"sub-group":"","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[o("v-list-item-content",[o("v-list-item-title",[e._v(e._s(t.name))])],1)]},proxy:!0}],null,!0)},[e._v(" "),o("v-list-item",[o("v-radio-group",{staticClass:"ma-0",attrs:{"hide-details":"auto"},model:{value:e.selectedLanduse,callback:function(t){e.selectedLanduse=t},expression:"selectedLanduse"}},e._l(t.landuses,(function(t){return o("v-radio",{key:t.name,attrs:{value:t,label:""+t.name},on:{click:function(o){return e.onLanduseSelection(t)}}})})),1)],1)],1)}))],2)],1),e._v(" "),o("v-row",{attrs:{id:"map-wrapper",fluid:"","no-gutters":""}},[o("v-col",{attrs:{id:"map",cols:"12"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;w()(component,{Snackbar:o(493).default}),w()(component,{VBtn:O.a,VCol:C.a,VContainer:S.a,VDivider:j.a,VIcon:L.a,VList:D.a,VListGroup:P.a,VListItem:M.a,VListItemAvatar:T.a,VListItemContent:V.a,VListItemTitle:V.c,VNavigationDrawer:R.a,VRadio:E.a,VRadioGroup:N.a,VRow:I.a,VSelect:B.a})}}]);