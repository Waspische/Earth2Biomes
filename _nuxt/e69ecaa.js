(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{472:function(t,e,o){var content=o(476);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(23).default)("f43c1400",content,!1,{sourceMap:!1})},473:function(t,e,o){"use strict";o.r(e);var r=o(2),n=(o(3),o(73),o(10),o(7),o(8),o(16),o(9),o(17),o(121));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var l={name:"MapPopup",props:["popupName","lat","lng","type","data"],data:function(){return{snackbar:!1,text:"Position copied in clipboard. It can be unprecised, so look around ;)",popupData:this.data,title:this.popupName,popupType:this.type}},computed:{geoposition:function(){return"quarry"===this.type||"well"===this.type?this.lat.toString().substring(0,8)+", "+this.lng.toString().substring(0,8):null}},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({onCopy:function(t){console.log(t)},onCopyError:function(t){console.log(t)},snackTime:function(t){console.log("snacktime"),this.setSnack(this.text)}},Object(n.b)({setSnack:"snackbar/setSnack"}))},d=l,m=(o(475),o(72)),v=o(77),f=o.n(v),h=o(250),y=o(474),x=o(471),w=o(227),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"popup-wrapper"},[o("v-card",{staticClass:"rounded-lg mx-2 transparent-card",attrs:{"max-width":"300px",flat:""}},[o("v-card-title",{staticClass:"pa-0 text-center h6"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),"quarry"===t.popupType||"well"===t.popupType?o("v-card-text",{staticClass:"pa-0 text-center"},[o("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.geoposition,expression:"geoposition",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.snackTime,expression:"snackTime",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{icon:""}},[o("v-icon",{attrs:{dark:""}},[t._v("\n          mdi-content-copy\n        ")])],1),t._v("\n      "+t._s(t.geoposition)+"\n    ")],1):t._e(),t._v(" "),"urban"===t.popupType?o("v-card-text",{staticClass:"pb-1 text-center"},[t._v("\n      "+t._s(t.$t("cities.mapDetails"))+"\n    ")]):t._e(),t._v(" "),"property"===t.popupType?o("v-card-text",{staticClass:"pb-1"},[o("div",[t._v("Owner: "+t._s(t.popupData.ownerName))]),t._v(" "),o("div",[t._v("Price: "+t._s(t.popupData.price)+" E$ | Tiles: "+t._s(t.popupData.tileCount))]),t._v(" "),o("div",[t._v("Tier: "+t._s(t.popupData.landfieldTier)+" | Class: "+t._s(t.popupData.tileClass))]),t._v(" "),o("div",{staticClass:"text-center body-2"},[t._v("\n        "+t._s(t.$t("cities.openEarth2"))+"\n      ")])]):t._e(),t._v(" "),"quarry"===t.popupType||"well"===t.popupType?o("v-card-actions",{staticClass:"justify-center"},[o("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://www.openstreetmap.org/search?query="+t.lat+"%2C"+t.lng,small:"",color:"primary darken-1"}},[o("v-icon",{attrs:{dark:""}},[t._v("\n          mdi-open-in-new\n        ")]),t._v(" OpenStreetMap\n      ")],1)],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;f()(component,{VBtn:h.a,VCard:y.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VIcon:w.a})},475:function(t,e,o){"use strict";o(472)},476:function(t,e,o){var r=o(22)(!1);r.push([t.i,'.mapboxgl-popup-close-button{display:none}.mapboxgl-popup-content{font:400 15px/22px "Source Sans Pro","Helvetica Neue",Sans-serif;background-color:hsla(0,0%,45.9%,.75);padding:0;border-radius:8px}.mapboxgl-popup-tip{border:15px solid transparent}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{border-top-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{border-right-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{border-left-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{border-bottom-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{border-top-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{border-bottom-color:hsla(0,0%,45.9%,.75)}.transparent-card{background-color:hsla(0,0%,45.9%,0)!important}',""]),t.exports=r},534:function(t,e,o){var content=o(591);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(23).default)("e01f749c",content,!1,{sourceMap:!1})},590:function(t,e,o){"use strict";o(534)},591:function(t,e,o){var r=o(22)(!1);r.push([t.i,"#features[data-v-8b112340]{position:relative;z-index:3;max-height:650px;overflow-y:auto}#map-wrapper[data-v-8b112340]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}",""]),t.exports=r},643:function(t,e,o){"use strict";o.r(e);o(10),o(7),o(16),o(17);var r=o(2),n=o(21),c=(o(83),o(74),o(20),o(182),o(8),o(3),o(27),o(31),o(44),o(63),o(9),o(24),o(34),o(479)),l=o.n(c),d=o(1),m=o(473);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"HoloBuildings",components:{},data:function(){return{drawer:!0,mini:!1,headers:[{text:"Name",align:"start",value:"name"},{text:"Vertex",align:"start",value:"total_vertex_count"}],holobuildings:[],search:"",citiesDialog:!1,editedCity:{cityName:"",url:"",discord:"",website:"",description:""},accessToken:"pk.eyJ1Ijoid2FzcGlzY2hlIiwiYSI6ImNrazBidGRsNzBmdmIyeHJyYThjZG0wYzYifQ.qZQp-6ddFiyakTvvyCv8Gw",mapStyle:"mapbox://styles/mapbox/dark-v10",holoLocation:{id:"holoLocation",source:"urban",type:"fill-extrusion",paint:{"fill-extrusion-color":"#21CFF3","fill-extrusion-height":["get","extrusionHeight"],"fill-extrusion-base":["get","extrusionBase"],"fill-extrusion-opacity":1,"fill-extrusion-vertical-gradient":!0}}}},head:function(){return{title:"HoloBuildings"}},computed:{onSearch:function(){var t=this.search.trim().toLowerCase(),e=this.holobuildings.filter((function(e){return e.name.trim().toLowerCase().includes(t)}));return e.length&&this.map.setFilter("holoLocation",["match",["get","name"],e.map((function(t){return t.name})),!0,!1]),this.search},loadingData:function(){return 0===this.holobuildings.length}},mounted:function(){l.a.accessToken=this.accessToken,this.map=new l.a.Map({container:"map",style:this.mapStyle,zoom:1,pitch:40,sprite:"mapbox://sprites/mapbox/bright-v8"}),this.map.addControl(new l.a.NavigationControl,"top-right"),this.map.on("load",this.onMapLoad)},methods:{onMapLoad:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.map.addSource("urban",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.map.addLayer(e.holoLocation),t.next=4,e.getHolobuildings();case 4:e.holobuildings=t.sent;case 5:case"end":return t.stop()}}),t)})))()},getHolobuildings:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var data,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/holobuildings-details-v1.json").then((function(t){return t.json()}));case 2:return data=e.sent,o=[],data.forEach((function(t){o=o.concat(t.geojson.features.map((function(e){var o=f(f({},e.properties),{},{id:t.id,name:t.name});return e.properties=o,e})))})),t.map.getSource("urban").setData({type:"FeatureCollection",features:o}),e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)})))()},flyToCity:function(t){this.$vuetify.goTo(0),this.map.jumpTo({center:t.geojson.features[0].geometry.coordinates[0][0],zoom:19})},onMouseEnterCity:function(t){console.log(t),this.map.getCanvas().style.cursor="pointer";var e=t.features[0];console.log(e);var o=void 0===e.properties.name?"":e.properties.name,r=e.geometry.coordinates[0][0].slice();for(console.log(r);Math.abs(t.lngLat.lng-r[0])>180;)r[0]+=t.lngLat.lng>r[0]?360:-360;var n=new d.a(f(f({},m.default),{},{parent:this,propsData:{popupName:o,type:"urban"}})).$mount();new l.a.Popup({closeButton:!1}).setLngLat(r).setDOMContent(n.$el).addTo(this.map)},onMouseOutCity:function(){this.map.getCanvas().style.cursor="";var t=document.getElementsByClassName("mapboxgl-popup");t[0]&&t[0].remove()}}},y=(o(590),o(72)),x=o(77),w=o.n(x),_=o(250),O=o(465),C=o(470),j=o(640),k=o(511),T=o(227),D=o(135),P=o(230),S=o(96),V=o(463),L=o(467),N=o(549),E=o(62),component=Object(y.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{fluid:""}},[o("v-navigation-drawer",{staticClass:"rounded ml-4 mt-4",attrs:{id:"features","mini-variant":t.mini,permanent:"",width:"400"},on:{"update:miniVariant":function(e){t.mini=e},"update:mini-variant":function(e){t.mini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[o("v-list-item",{staticClass:"px-2"},[o("v-list-item-avatar",[o("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[o("v-icon",[t._v("mdi-menu")])],1)],1),t._v(" "),o("v-list-item-title",[t._v("HoloBuildings")]),t._v(" "),o("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[o("v-icon",[t._v("mdi-chevron-left")])],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.mini,expression:"!mini"}],staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.holobuildings,"items-per-page":5,search:t.onSearch,loading:t.loadingData,"loading-text":"Loading... Please wait"},on:{"click:row":t.flyToCity},scopedSlots:t._u([{key:"top",fn:function(){return[o("v-toolbar",{attrs:{flat:""}},[o("v-text-field",{attrs:{label:"Search holobuilding name"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0}])})],1),t._v(" "),o("v-row",{attrs:{id:"map-wrapper",fluid:"","no-gutters":""}},[o("v-col",{attrs:{id:"map",cols:"12"}})],1)],1)}),[],!1,null,"8b112340",null);e.default=component.exports;w()(component,{VBtn:_.a,VCol:O.a,VContainer:C.a,VDataTable:j.a,VDivider:k.a,VIcon:T.a,VListItem:D.a,VListItemAvatar:P.a,VListItemTitle:S.c,VNavigationDrawer:V.a,VRow:L.a,VTextField:N.a,VToolbar:E.a})}}]);