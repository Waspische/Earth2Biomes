/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[18,31,32],{472:function(t,e,n){var content=n(476);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("f43c1400",content,!1,{sourceMap:!1})},473:function(t,e,n){"use strict";n.r(e);var r=n(2),o=(n(3),n(73),n(10),n(7),n(8),n(16),n(9),n(17),n(121));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var h={name:"MapPopup",props:["popupName","lat","lng","type","data"],data:function(){return{snackbar:!1,text:"Position copied in clipboard. It can be unprecised, so look around ;)",popupData:this.data,title:this.popupName,popupType:this.type}},computed:{geoposition:function(){return"quarry"===this.type||"well"===this.type?this.lat.toString().substring(0,8)+", "+this.lng.toString().substring(0,8):null}},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({onCopy:function(t){console.log(t)},onCopyError:function(t){console.log(t)},snackTime:function(t){console.log("snacktime"),this.setSnack(this.text)}},Object(o.b)({setSnack:"snackbar/setSnack"}))},c=h,f=(n(475),n(72)),d=n(77),y=n.n(d),v=n(250),m=n(474),x=n(471),w=n(227),component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup-wrapper"},[n("v-card",{staticClass:"rounded-lg mx-2 transparent-card",attrs:{"max-width":"300px",flat:""}},[n("v-card-title",{staticClass:"pa-0 text-center h6"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),"quarry"===t.popupType||"well"===t.popupType?n("v-card-text",{staticClass:"pa-0 text-center"},[n("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.geoposition,expression:"geoposition",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.snackTime,expression:"snackTime",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{icon:""}},[n("v-icon",{attrs:{dark:""}},[t._v("\n          mdi-content-copy\n        ")])],1),t._v("\n      "+t._s(t.geoposition)+"\n    ")],1):t._e(),t._v(" "),"urban"===t.popupType?n("v-card-text",{staticClass:"pb-1 text-center"},[t._v("\n      "+t._s(t.$t("cities.mapDetails"))+"\n    ")]):t._e(),t._v(" "),"property"===t.popupType?n("v-card-text",{staticClass:"pb-1"},[n("div",[t._v("Owner: "+t._s(t.popupData.ownerName))]),t._v(" "),n("div",[t._v("Price: "+t._s(t.popupData.price)+" E$ | Tiles: "+t._s(t.popupData.tileCount))]),t._v(" "),n("div",[t._v("Tier: "+t._s(t.popupData.landfieldTier)+" | Class: "+t._s(t.popupData.tileClass))]),t._v(" "),n("div",{staticClass:"text-center body-2"},[t._v("\n        "+t._s(t.$t("cities.openEarth2"))+"\n      ")])]):t._e(),t._v(" "),"quarry"===t.popupType||"well"===t.popupType?n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://www.openstreetmap.org/search?query="+t.lat+"%2C"+t.lng,small:"",color:"primary darken-1"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n          mdi-open-in-new\n        ")]),t._v(" OpenStreetMap\n      ")],1)],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;y()(component,{VBtn:v.a,VCard:m.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VIcon:w.a})},475:function(t,e,n){"use strict";n(472)},476:function(t,e,n){var r=n(22)(!1);r.push([t.i,'.mapboxgl-popup-close-button{display:none}.mapboxgl-popup-content{font:400 15px/22px "Source Sans Pro","Helvetica Neue",Sans-serif;background-color:hsla(0,0%,45.9%,.75);padding:0;border-radius:8px}.mapboxgl-popup-tip{border:15px solid transparent}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{border-top-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{border-right-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{border-left-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{border-bottom-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{border-top-color:hsla(0,0%,45.9%,.75)}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{border-bottom-color:hsla(0,0%,45.9%,.75)}.transparent-card{background-color:hsla(0,0%,45.9%,0)!important}',""]),t.exports=r},477:function(t,e,n){var r=n(6),o=Math.ceil,l=Math.floor;r({target:"Math",stat:!0},{trunc:function(t){return(t>0?l:o)(t)}})},489:function(t,e,n){var content=n(490);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("5db1c400",content,!1,{sourceMap:!1})},490:function(t,e,n){var r=n(22)(!1);r.push([t.i,'.theme--light.v-alert .v-alert--prominent .v-alert__icon:after{background:rgba(0,0,0,.12)}.theme--dark.v-alert .v-alert--prominent .v-alert__icon:after{background:hsla(0,0%,100%,.12)}.v-sheet.v-alert{border-radius:4px}.v-sheet.v-alert:not(.v-sheet--outlined){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.v-sheet.v-alert.v-sheet--shaped{border-radius:24px 4px}.v-alert{display:block;font-size:16px;margin-bottom:16px;padding:16px;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-alert:not(.v-sheet--tile){border-radius:4px}.v-application--is-ltr .v-alert>.v-alert__content,.v-application--is-ltr .v-alert>.v-icon{margin-right:16px}.v-application--is-rtl .v-alert>.v-alert__content,.v-application--is-rtl .v-alert>.v-icon{margin-left:16px}.v-application--is-ltr .v-alert>.v-icon+.v-alert__content{margin-right:0}.v-application--is-rtl .v-alert>.v-icon+.v-alert__content{margin-left:0}.v-application--is-ltr .v-alert>.v-alert__content+.v-icon{margin-right:0}.v-application--is-rtl .v-alert>.v-alert__content+.v-icon{margin-left:0}.v-alert__border{border-style:solid;border-width:4px;content:"";position:absolute}.v-alert__border:not(.v-alert__border--has-color){opacity:.26}.v-alert__border--left,.v-alert__border--right{bottom:0;top:0}.v-alert__border--bottom,.v-alert__border--top{left:0;right:0}.v-alert__border--bottom{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0}.v-application--is-ltr .v-alert__border--left{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.v-application--is-ltr .v-alert__border--right,.v-application--is-rtl .v-alert__border--left{border-top-right-radius:inherit;border-bottom-right-radius:inherit;right:0}.v-application--is-rtl .v-alert__border--right{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.v-alert__border--top{border-top-left-radius:inherit;border-top-right-radius:inherit;top:0}.v-alert__content{flex:1 1 auto}.v-application--is-ltr .v-alert__dismissible{margin:-16px -8px -16px 8px}.v-application--is-rtl .v-alert__dismissible{margin:-16px 8px -16px -8px}.v-alert__icon{align-self:flex-start;border-radius:50%;height:24px;min-width:24px;position:relative}.v-application--is-ltr .v-alert__icon{margin-right:16px}.v-application--is-rtl .v-alert__icon{margin-left:16px}.v-alert__icon.v-icon{font-size:24px}.v-alert__wrapper{align-items:center;border-radius:inherit;display:flex}.v-application--is-ltr .v-alert--border.v-alert--prominent .v-alert__icon{margin-left:8px}.v-application--is-rtl .v-alert--border.v-alert--prominent .v-alert__icon{margin-right:8px}.v-alert--dense{padding-top:8px;padding-bottom:8px}.v-alert--dense .v-alert__border{border-width:medium}.v-alert--outlined{background:transparent!important;border:thin solid!important}.v-alert--outlined .v-alert__icon{color:inherit!important}.v-alert--prominent .v-alert__icon{align-self:center;height:48px;min-width:48px}.v-alert--prominent .v-alert__icon.v-icon{font-size:32px}.v-alert--prominent .v-alert__icon.v-icon:after{background:currentColor!important;border-radius:50%;bottom:0;content:"";left:0;opacity:.16;position:absolute;right:0;top:0}.v-alert--prominent.v-alert--dense .v-alert__icon.v-icon:after{transform:scale(1)}.v-alert--text{background:transparent!important}.v-alert--text:before{background-color:currentColor;border-radius:inherit;bottom:0;content:"";left:0;opacity:.12;position:absolute;pointer-events:none;right:0;top:0}',""]),t.exports=r},492:function(t,e,n){"use strict";var r=n(103),o=n(1);e.a=o.a.extend({name:"rippleable",directives:{ripple:r.a},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(data.staticClass="v-input--selection-controls__ripple",data.directives=data.directives||[],data.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",data)):null}}})},499:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(500),o=n.n(r),l={name:"DiscordIcon",props:{size:{type:String,default:"24",validator:function(s){return!isNaN(s)||s.length>=2&&!isNaN(s.slice(0,s.length-1))&&"x"===s.slice(-1)}}},functional:!0,render:function(t,e){var n="x"===e.props.size.slice(-1)?e.props.size.slice(0,e.props.size.length-1)+"em":parseInt(e.props.size)+"px",r=e.data.attrs||{};return r.width=r.width||n,r.height=r.height||n,e.data.attrs=r,t("svg",o()([{attrs:{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},e.data]),[t("title",["Discord"]),t("path",{attrs:{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"}})])}}},500:function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function r(a,b){return function(){a&&a.apply(this,arguments),b&&b.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(a,b){var t,e,o,l,h;for(o in b)if(t=a[o],e=b[o],t&&n.test(o))if("class"===o&&("string"==typeof t&&(h=t,a[o]=t={},t[h]=!0),"string"==typeof e&&(h=e,b[o]=e={},e[h]=!0)),"on"===o||"nativeOn"===o||"hook"===o)for(l in e)t[l]=r(t[l],e[l]);else if(Array.isArray(t))a[o]=t.concat(e);else if(Array.isArray(e))a[o]=[t].concat(e);else for(l in e)t[l]=e[l];else a[o]=b[o];return a}),{})}},501:function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));n(3),n(73),n(8);var r=n(486),o=n(492),l=n(253),h=n(11);function c(t){t.preventDefault()}e.a=Object(h.a)(r.a,o.a,l.a).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,input=this.internalValue;return this.isMultiple?!!Array.isArray(input)&&input.some((function(n){return t.valueComparator(n,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,input):Boolean(input):this.valueComparator(input,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var label=r.a.options.methods.genLabel.call(this);return label?(label.data.on={click:c},label):label},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onBlur:function(){this.isFocused=!1},onClick:function(t){this.onChange(),this.$emit("click",t)},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,input=this.internalValue;if(this.isMultiple){Array.isArray(input)||(input=[]);var n=input.length;(input=input.filter((function(n){return!t.valueComparator(n,e)}))).length===n&&input.push(e)}else input=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(input,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(input,e)?null:e:!input;this.validate(!0,input),this.internalValue=input,this.hasColor=input}},onFocus:function(){this.isFocused=!0},onKeydown:function(t){}}})},502:function(t,e,n){var content=n(503);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("2e2bc7da",content,!1,{sourceMap:!1})},503:function(t,e,n){var r=n(22)(!1);r.push([t.i,'.v-input--selection-controls{margin-top:16px;padding-top:4px}.v-input--selection-controls>.v-input__append-outer,.v-input--selection-controls>.v-input__prepend-outer{margin-top:0;margin-bottom:0}.v-input--selection-controls:not(.v-input--hide-details)>.v-input__slot{margin-bottom:12px}.v-input--selection-controls .v-input__slot,.v-input--selection-controls .v-radio{cursor:pointer}.v-input--selection-controls .v-input__slot>.v-label,.v-input--selection-controls .v-radio>.v-label{align-items:center;display:inline-flex;flex:1 1 auto;height:auto}.v-input--selection-controls__input{color:inherit;display:inline-flex;flex:0 0 auto;height:24px;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1);transition-property:transform;width:24px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-input--selection-controls__input .v-icon{width:100%}.v-application--is-ltr .v-input--selection-controls__input{margin-right:8px}.v-application--is-rtl .v-input--selection-controls__input{margin-left:8px}.v-input--selection-controls__input input[role=checkbox],.v-input--selection-controls__input input[role=radio],.v-input--selection-controls__input input[role=switch]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-input--selection-controls__input+.v-label{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-input--selection-controls__ripple{border-radius:50%;cursor:pointer;height:34px;position:absolute;transition:inherit;width:34px;left:-12px;top:calc(50% - 24px);margin:7px}.v-input--selection-controls__ripple:before{border-radius:inherit;bottom:0;content:"";position:absolute;opacity:.2;left:0;right:0;top:0;transform-origin:center center;transform:scale(.2);transition:inherit}.v-input--selection-controls__ripple>.v-ripple__container{transform:scale(1.2)}.v-input--selection-controls.v-input--dense .v-input--selection-controls__ripple{width:28px;height:28px;left:-9px}.v-input--selection-controls.v-input--dense:not(.v-input--switch) .v-input--selection-controls__ripple{top:calc(50% - 21px)}.v-input--selection-controls.v-input{flex:0 1 auto}.v-input--selection-controls.v-input--is-focused .v-input--selection-controls__ripple:before,.v-input--selection-controls .v-radio--is-focused .v-input--selection-controls__ripple:before{background:currentColor;transform:scale(1.2)}.v-input--selection-controls.v-input--is-disabled:not(.v-input--indeterminate) .v-icon{color:inherit}.v-input--selection-controls__input:hover .v-input--selection-controls__ripple:before{background:currentColor;transform:scale(1.2);transition:none}',""]),t.exports=r},504:function(t,e,n){(function(t){!function(e){"use strict";var n=6371008.8,r={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*n,kilometers:6371.0088,kilometres:6371.0088,meters:n,metres:n,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:n/1852,radians:1,yards:6967335.223679999},o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133},i={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){switch(t){case"Point":return a(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return y(e).geometry;case"MultiLineString":return g(e).geometry;case"MultiPolygon":return v(e).geometry;default:throw new Error(t+" is invalid")}}function a(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(t[0])||!k(t[1]))throw new Error("coordinates must contain numbers");return l({type:"Point",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return a(t,e)})),n)}function h(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return l({type:"Polygon",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return h(t,e)})),n)}function f(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return l({type:"LineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return f(t,e)})),n)}function d(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function g(t,e,n){return void 0===n&&(n={}),l({type:"MultiLineString",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),l({type:"MultiPoint",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),l({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),l({type:"GeometryCollection",geometries:t},e,n)}function x(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function w(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t*n}function _(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t/n}function S(t,e){return C(_(t,e))}function b(t){var e=t%360;return e<0&&(e+=360),e}function C(t){return t%(2*Math.PI)*180/Math.PI}function E(t){return t%360*Math.PI/180}function A(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return w(_(t,e),n)}function I(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=i[e];if(!r)throw new Error("invalid original units");var o=i[n];if(!o)throw new Error("invalid final units");return t/r*o}function k(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function P(t){return!!t&&t.constructor===Object}function L(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!k(t))throw new Error("bbox must only contain numbers")}))}function M(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var N=Object.freeze({__proto__:null,earthRadius:n,factors:r,unitsFactors:o,areaFactors:i,feature:l,geometry:s,point:a,points:u,polygon:h,polygons:c,lineString:f,lineStrings:p,featureCollection:d,multiLineString:g,multiPoint:y,multiPolygon:v,geometryCollection:m,round:x,radiansToLength:w,lengthToRadians:_,lengthToDegrees:S,bearingToAzimuth:b,radiansToDegrees:C,degreesToRadians:E,convertLength:A,convertArea:I,isNumber:k,isObject:P,validateBBox:L,validateId:M});function T(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,h,c=0,p=0,f=t.type,g="FeatureCollection"===f,d="Feature"===f,y=g?t.features.length:1,v=0;v<y;v++){a=(h=!!(l=g?t.features[v].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var x=0,w=0;if(null!==(s=h?l.geometries[m]:l)){u=s.coordinates;var _=s.type;switch(c=!n||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===e(u,p,v,x,w))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,v,x,w))return!1;p++,"MultiPoint"===_&&x++}"LineString"===_&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],p,v,x,w))return!1;p++}"MultiLineString"===_&&x++,"Polygon"===_&&w++}"Polygon"===_&&x++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(w=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],p,v,x,w))return!1;p++}w++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===T(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function O(t,e,n,r){var i=n;return T(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i}function R(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function D(t,e,n){var r=n;return R(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function F(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function z(t,e,n){var r=n;return F(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function X(t){var e=[];return T(t,(function(t){e.push(t)})),e}function q(t,e){var n,r,i,o,s,a,u,l,h,c,p=0,f="FeatureCollection"===t.type,g="Feature"===t.type,d=f?t.features.length:1;for(n=0;n<d;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,l=f?t.features[n].properties:g?t.properties:{},h=f?t.features[n].bbox:g?t.bbox:void 0,c=f?t.features[n].id:g?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,h,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,h,c))return!1;p++}}function Y(t,e,n){var r=n;return q(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r}function B(t,e){q(t,(function(t,n,r,i,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(l(t,r,{bbox:i,id:s}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var o=0;o<t.coordinates.length;o++){var h=t.coordinates[o];if(!1===e(l({type:a,coordinates:h},r),n,o))return!1}}))}function G(t,e,n){var r=n;return B(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function V(t,e){B(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==T(t,(function(o,h,p,c,g){if(void 0===s||n>a||c>u||g>l)return s=o,a=n,u=c,l=g,void(i=0);var d=f([s,o],t.properties);if(!1===e(d,n,r,g,i))return!1;i++,s=o}))&&void 0}}}))}function H(t,e,n){var r=n,i=!1;return V(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r}function j(t,e){if(!t)throw new Error("geojson is required");B(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(f(o[s],t.properties),n,r,s))return!1}}}))}function W(t,e,n){var r=n;return j(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r}function U(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),f([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),f([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),f([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),f([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function Z(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return a(l,u,e);case"MultiPoint":return i<0&&(i=l.length+i),a(l[i],u,e);case"LineString":return s<0&&(s=l.length+s),a(l[s],u,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a(l[o][s],u,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),a(l[i][s],u,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s),a(l[i][o][s],u,e)}throw new Error("geojson is invalid")}var $=Object.freeze({__proto__:null,coordAll:X,coordEach:T,coordReduce:O,featureEach:F,featureReduce:z,findPoint:Z,findSegment:U,flattenEach:B,flattenReduce:G,geomEach:q,geomReduce:Y,lineEach:j,lineReduce:W,propEach:R,propReduce:D,segmentEach:V,segmentReduce:H});function J(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Q(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function K(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&k(t[0])&&k(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function it(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function rt(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}J.default=J;var st=Object.freeze({__proto__:null,getCoord:Q,getCoords:K,containsNumber:tt,geojsonType:et,featureOf:it,collectionOf:nt,getGeom:rt,getType:ot}),at=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;function ct(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ut=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=ct(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))lt.call(n,s)&&(i[s]=n[s]);if(at){r=at(n);for(var a=0;a<r.length;a++)ht.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},pt={successCallback:null,verbose:!1},ft={};function gt(t,e,n){n=n||{};for(var r=Object.keys(pt),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:pt[o],ft[o]=s}ft.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0,r=1e-7;return t.cells.forEach((function(i,o){i.forEach((function(i,s){if(void 0!==i&&5!==(f=i).cval&&10!==f.cval&&!dt(i)){var a=function(t,e,n){var r,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],h=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],p=c.cval,f=l[p],g=mt(c,f);s.push([n+g[0],e+g[1]]),g=mt(c,f=h[p]),s.push([n+g[0],e+g[1]]),vt(c);for(var d=n+a[p],y=e+u[p],v=p;d>=0&&y>=0&&y<o&&(d!=n||y!=e)&&void 0!==(c=t[y][d]);){if(0===(p=c.cval)||15===p)return{path:s,info:"mergeable"};f=h[p],r=a[p],i=u[p],5!==p&&10!==p||(5===p?c.flipped?-1===u[v]?(f="left",r=-1,i=0):(f="right",r=1,i=0):-1===a[v]&&(f="bottom",r=0,i=-1):10===p&&(c.flipped?-1===a[v]?(f="top",r=0,i=1):(f="bottom",r=0,i=-1):1===u[v]&&(f="left",r=-1,i=0))),g=mt(c,f),s.push([d+g[0],y+g[1]]),vt(c),d+=r,y+=i,v=p}return{path:s,info:"closed"}}(t.cells,o,s),u=!1;if("mergeable"===a.info)for(var l=a.path[a.path.length-1][0],h=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-l)<=r&&Math.abs(e[c][0][1]-h)<=r){for(var p=a.path.length-2;p>=0;--p)e[c].unshift(a.path[p]);u=!0;break}u||(e[n++]=a.path)}var f}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],h=t[o][s+1],c=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(h)||isNaN(c))){a|=u>=e?8:0,a|=l>=e?4:0,a|=h>=e?2:0;var p,f,g,d,y=!1;if(5==(a|=c>=e?1:0)||10===a){var v=(u+l+h+c)/4;5===a&&v<e?(a=10,y=!0):10===a&&v<e&&(a=5,y=!0)}0!==a&&15!==a&&(p=f=g=d=.5,1===a?(g=1-yt(e,u,c),f=1-yt(e,h,c)):2===a?(f=yt(e,c,h),d=1-yt(e,l,h)):3===a?(g=1-yt(e,u,c),d=1-yt(e,l,h)):4===a?(p=yt(e,u,l),d=yt(e,h,l)):5===a?(p=yt(e,u,l),d=yt(e,h,l),f=1-yt(e,h,c),g=1-yt(e,u,c)):6===a?(f=yt(e,c,h),p=yt(e,u,l)):7===a?(g=1-yt(e,u,c),p=yt(e,u,l)):8===a?(g=yt(e,c,u),p=1-yt(e,l,u)):9===a?(f=1-yt(e,h,c),p=1-yt(e,l,u)):10===a?(p=1-yt(e,l,u),d=1-yt(e,l,h),f=yt(e,c,h),g=yt(e,c,u)):11===a?(p=1-yt(e,l,u),d=1-yt(e,l,h)):12===a?(g=yt(e,c,u),d=yt(e,h,l)):13===a?(f=1-yt(e,h,c),d=yt(e,h,l)):14===a?(g=yt(e,c,u),f=yt(e,c,h)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:y,top:p,right:d,bottom:f,left:g})}}}return i}(t,e));return"function"==typeof ft.successCallback&&ft.successCallback(a),a}function yt(t,e,n){return(t-e)/(n-e)}function dt(t){return 0===t.cval||15===t.cval}function vt(t){dt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function xt(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return F(t,(function(t){var e=K(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return K(t)[0]-K(e)[0]}))})).sort((function(t,n){return e?K(t[0])[1]-K(n[0])[1]:K(n[0])[1]-K(t[0])[1]}))}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}var bt=_t,wt=_t;function _t(t,e,n,r,i){St(t,e,n||0,r||t.length-1,i||Et)}function St(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);St(t,e,Math.max(n,Math.floor(e-s*u/o+l)),Math.min(r,Math.floor(e+(o-s)*u/o+l)),i)}var h=t[e],c=n,p=r;for(Ct(t,n,e),i(t[r],h)>0&&Ct(t,n,r);c<p;){for(Ct(t,c,p),c++,p--;i(t[c],h)<0;)c++;for(;i(t[p],h)>0;)p--}0===i(t[n],h)?Ct(t,n,p):Ct(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function Ct(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Et(t,e){return t<e?-1:t>e?1:0}bt.default=wt;var At=kt,It=kt;function kt(t,e){if(!(this instanceof kt))return new kt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Pt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Lt(t,e){Mt(t,0,t.children.length,e,t)}function Mt(t,e,n,r,i){i||(i=Xt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Nt(i,t.leaf?r(o):o);return i}function Nt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Tt(t,e){return t.minX-e.minX}function Ot(t,e){return t.minY-e.minY}function Rt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Dt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ft(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function zt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Xt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Yt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,bt(t,o,e,n,i),s.push(e,o,o,n))}function Bt(t){var e={exports:{}};return t(e,e.exports),e.exports}kt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!zt(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],zt(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Ft(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!zt(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],zt(t,s=e.leaf?n(o):o)){if(e.leaf||Ft(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Xt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=Pt(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Ft(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Tt,compareMinY:Ot,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Lt(i=Xt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Xt([])).leaf=!1,i.height=r;var a,u,l,h,c=Math.ceil(o/s),p=c*Math.ceil(Math.sqrt(s));for(Yt(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(Yt(t,a,l=Math.min(a+p-1,n),c,this.compareMinY),u=a;u<=l;u+=c)h=Math.min(u+c-1,l),i.children.push(this._build(t,u,h,r-1));return Lt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,h,c,p,f;r.push(e),!e.leaf&&r.length-1!==n;){for(h=c=1/0,i=0,o=e.children.length;i<o;i++)u=Rt(s=e.children[i]),p=t,f=s,(l=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u)<c?(c=l,h=u<h?u:h,a=s):l===c&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Nt(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Xt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Lt(n,this.toBBox),Lt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Xt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Lt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,h,c,p,f,g,d,y;for(u=l=1/0,r=e;r<=n-e;r++)c=i=Mt(t,0,r,this.toBBox),p=o=Mt(t,r,n,this.toBBox),f=void 0,g=void 0,d=void 0,y=void 0,f=Math.max(c.minX,p.minX),g=Math.max(c.minY,p.minY),d=Math.min(c.maxX,p.maxX),y=Math.min(c.maxY,p.maxY),s=Math.max(0,d-f)*Math.max(0,y-g),a=Rt(i)+Rt(o),s<u?(u=s,h=r,l=a<l?a:l):s===u&&a<l&&(l=a,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Tt,i=t.leaf?this.compareMinY:Ot;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Mt(t,0,e,s),u=Mt(t,n-e,n,s),l=Dt(a)+Dt(u);for(i=e;i<n-e;i++)o=t.children[i],Nt(a,t.leaf?s(o):o),l+=Dt(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Nt(u,t.leaf?s(o):o),l+=Dt(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Nt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Lt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},At.default=It;var Gt=function(t,e,n){var r=t*e,i=Vt*t,o=i-(i-t),s=t-o,a=Vt*e,u=a-(a-e),l=e-u,h=s*l-(r-o*u-s*u-o*l);return n?(n[0]=h,n[1]=r,n):[h,r]},Vt=+(Math.pow(2,27)+1),Ht=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,h=Math.abs,c=t[u],p=h(c),f=e[l],g=h(f);p<g?(o=c,(u+=1)<n&&(p=h(c=t[u]))):(o=f,(l+=1)<r&&(g=h(f=e[l]))),u<n&&p<g||l>=r?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=f,(l+=1)<r&&(g=h(f=e[l])));for(var d,y,v=i+o,m=v-i,x=o-m,w=x,_=v;u<n&&l<r;)p<g?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=f,(l+=1)<r&&(g=h(f=e[l]))),(x=(o=w)-(m=(v=i+o)-i))&&(s[a++]=x),w=_-((d=_+v)-(y=d-_))+(v-y),_=d;for(;u<n;)(x=(o=w)-(m=(v=(i=c)+o)-i))&&(s[a++]=x),w=_-((d=_+v)-(y=d-_))+(v-y),_=d,(u+=1)<n&&(c=t[u]);for(;l<r;)(x=(o=w)-(m=(v=(i=f)+o)-i))&&(s[a++]=x),w=_-((d=_+v)-(y=d-_))+(v-y),_=d,(l+=1)<r&&(f=e[l]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s},jt=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},Wt=function(t,e){var n=t.length;if(1===n){var r=Gt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Gt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Gt(t[u],e,s);var l=o[1];jt(l,s[0],o),o[0]&&(i[a++]=o[0]);var h=s[1],c=o[1],p=h+c,f=c-(p-h);o[1]=p,f&&(i[a++]=f)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},qt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,h=Math.abs,c=t[u],p=h(c),f=-e[l],g=h(f);p<g?(o=c,(u+=1)<n&&(p=h(c=t[u]))):(o=f,(l+=1)<r&&(g=h(f=-e[l]))),u<n&&p<g||l>=r?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=f,(l+=1)<r&&(g=h(f=-e[l])));for(var d,y,v=i+o,m=v-i,x=o-m,w=x,_=v;u<n&&l<r;)p<g?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=f,(l+=1)<r&&(g=h(f=-e[l]))),(x=(o=w)-(m=(v=i+o)-i))&&(s[a++]=x),w=_-((d=_+v)-(y=d-_))+(v-y),_=d;for(;u<n;)(x=(o=w)-(m=(v=(i=c)+o)-i))&&(s[a++]=x),w=_-((d=_+v)-(y=d-_))+(v-y),_=d,(u+=1)<n&&(c=t[u]);for(;l<r;)(x=(o=w)-(m=(v=(i=f)+o)-i))&&(s[a++]=x),w=_-((d=_+v)-(y=d-_))+(v-y),_=d,(l+=1)<r&&(f=-e[l]);return w&&(s[a++]=w),_&&(s[a++]=_),a||(s[a++]=0),s.length=a,s},Ut=Bt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return i;var s}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,r(e(s,u))):o.push.apply(o,r(e(s,u))),a.push("m"+u);var l=n(i),h=n(o),c="orientation"+t+"Exact",p=["function ",c,"(",a.join(),"){var p=",l,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",c].join("");return new Function("sum","prod","scale","sub",p)(Ht,Gt,Wt,qt)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;r=i+s}else{if(!(i<0))return a;if(s>=0)return a;r=-(i+s)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],h=n[1]-r[1],c=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],g=o*h,d=a*l,y=a*u,v=i*h,m=i*l,x=o*u,w=c*(g-d)+p*(y-v)+f*(m-x),_=7771561172376103e-31*((Math.abs(g)+Math.abs(d))*Math.abs(c)+(Math.abs(y)+Math.abs(v))*Math.abs(p)+(Math.abs(m)+Math.abs(x))*Math.abs(f));return w>_||-w>_?w:s(t,e,n,r)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[u].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()})),Zt=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],l=o.length;l>1&&$t(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&$t(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var h=0,c=(r=0,o.length);r<c;++r)n[h++]=o[r];for(var p=s.length-2;p>0;--p)n[h++]=s[p];return n},$t=Ut[3],Jt=Kt,Qt=Kt;function Kt(t,e){if(!(this instanceof Kt))return new Kt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||te,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function te(t,e){return t<e?-1:t>e?1:0}Kt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Jt.default=Qt;var ee=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],h=e[s][1];u>r!=h>r&&n<(l-a)*(r-u)/(h-u)+a&&(i=!i)}return i},ie=Ut[3],ne=oe,re=oe;function oe(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)ee(t[o],a)||u.push(t[o]);var l=Zt(u),h=[];for(o=0;o<l.length;o++)h.push(u[l[o]]);return h}(t),o=At(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=pe(u,r),s.push(r)}var l=At(16);for(a=0;a<s.length;a++)l.insert(ue(s[a]));for(var h=e*e,c=n*n;s.length;){var p=s.shift(),f=p.p,g=p.next.p,d=fe(f,g);if(!(d<c)){var y=d/h;(u=se(o,p.prev.p,f,g,p.next.next.p,y,l))&&Math.min(fe(u,f),fe(u,g))<=y&&(s.push(p),s.push(pe(u,p)),o.remove(u),l.remove(p),l.insert(ue(p)),l.insert(ue(p.next)))}}p=r;var v=[];do{v.push(p.p),p=p.next}while(p!==r);return v.push(p.p),v}function se(t,e,n,r,i,o,s){for(var a=new Jt(null,ae),u=t.data;u;){for(var l=0;l<u.children.length;l++){var h=u.children[l],c=u.leaf?de(h,n,r):le(n,r,h);c>o||a.push({node:h,dist:c})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,g=de(f,e,n),d=de(f,r,i);if(p.dist<g&&p.dist<d&&ce(n,f,s)&&ce(r,f,s))return f}(u=a.pop())&&(u=u.node)}return null}function ae(t,e){return t.dist-e.dist}function le(t,e,n){if(he(t,n)||he(e,n))return 0;var r=ge(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=ge(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=ge(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=ge(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function he(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ce(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),c=n.search({minX:a,minY:u,maxX:l,maxY:h}),p=0;p<c.length;p++)if(r=c[p].p,i=c[p].next.p,o=t,r!==(s=e)&&i!==o&&ie(r,i,o)>0!=ie(r,i,s)>0&&ie(o,s,r)>0!=ie(o,s,i)>0)return!1;return!0}function ue(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function pe(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function fe(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function de(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function ge(t,e,n,r,i,o,s,a){var u,l,h,c,p=n-t,f=r-e,g=s-i,d=a-o,y=t-i,v=e-o,m=p*p+f*f,x=p*g+f*d,w=g*g+d*d,_=p*y+f*v,b=g*y+d*v,S=m*w-x*x,C=S,E=S;0===S?(l=0,C=1,c=b,E=w):(c=m*b-x*_,(l=x*b-w*_)<0?(l=0,c=b,E=w):l>C&&(l=C,c=b+x,E=w)),c<0?(c=0,-_<0?l=0:-_>m?l=C:(l=-_,C=m)):c>E&&(c=E,-_+x<0?l=0:-_+x>m?l=C:(l=-_+x,C=m));var A=(1-(h=0===c?0:c/E))*i+h*s-((1-(u=0===l?0:l/C))*t+u*n),I=(1-h)*o+h*a-((1-u)*e+u*r);return A*A+I*I}function ye(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(T(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=ne(n,e.concavity);return r.length>3?h([r]):null}function ve(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Q(t),i=rt(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(me(r,a[l][0],n.ignoreBoundary)){for(var h=!1,c=1;c<a[l].length&&!h;)me(r,a[l][c],!n.ignoreBoundary)&&(h=!0),c++;h||(u=!0)}return u}function me(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}function xe(t,e){var n=[];return F(t,(function(t){var r=!1;if("Point"===t.geometry.type)q(e,(function(e){ve(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];q(e,(function(e){T(t,(function(t){ve(t,e)&&(r=!0,i.push(t))}))})),r&&n.push(y(i))}})),d(n)}function be(t,e,n){void 0===n&&(n={});var r=Q(t),i=Q(e),o=E(i[1]-r[1]),s=E(i[0]-r[0]),a=E(r[1]),u=E(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return w(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function we(t,e){var n=!1;return d(function(t){if(t.length<3)return[];t.sort(Se);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,h=t[a].y,c=h,p=1e-12;a--;)t[a].y<h&&(h=t[a].y),t[a].y>c&&(c=t[a].y);var f,g=l-u,d=c-h,y=g>d?g:d,v=.5*(l+u),m=.5*(c+h),x=[new _e({__sentinel:!0,x:v-20*y,y:m-y},{__sentinel:!0,x:v,y:m+20*y},{__sentinel:!0,x:v+20*y,y:m-y})],w=[],_=[];for(a=t.length;a--;){for(_.length=0,f=x.length;f--;)(g=t[a].x-x[f].x)>0&&g*g>x[f].r?(w.push(x[f]),x.splice(f,1)):g*g+(d=t[a].y-x[f].y)*d>x[f].r||(_.push(x[f].a,x[f].b,x[f].b,x[f].c,x[f].c,x[f].a),x.splice(f,1));for(Ce(_),f=_.length;f;)n=_[--f],e=_[--f],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>p&&x.push(new _e(e,n,r))}for(Array.prototype.push.apply(w,x),a=w.length;a--;)(w[a].a.__sentinel||w[a].b.__sentinel||w[a].c.__sentinel)&&w.splice(a,1);return w}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},h([[e,r,i,e]],o)})))}ne.default=re;var _e=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),h=a*(t.x+n.x)+u*(t.y+n.y),c=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*h)/c,this.y=(o*h-a*l)/c,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function Se(t,e){return e.x-t.x}function Ce(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Ee(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ae(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Ae(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return ke(t);default:throw new Error("unknown GeoJSON type")}}function Ae(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Ie(t.properties),e.geometry=ke(t.geometry),e}function Ie(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Ie(r):e[n]=r})),e):e}function ke(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return ke(t)})),e):(e.coordinates=Pe(t.coordinates),e)}function Pe(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Pe(t)}))}function Le(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ee(t));var r=[],i=W(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Me(r[0]),s=Me(r[r.length-1]),a=Me(i[0]),u=Me(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return f(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:g(r.map((function(t){return t.coordinates}))):null}function Me(t){return t[0].toString()+","+t[1].toString()}function Ne(t){return t}function Te(t,e){var n=function(t){if(null==t)return Ne;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,h=new Array(l);for(h[0]=(e+=t[0])*r+o,h[1]=(n+=t[1])*i+s;u<l;)h[u]=t[u],++u;return h}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function Oe(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var h=o===n?n:o.concat(n);r[h.start=o.start]=i[h.end=n.end]=h}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=u]=n})),a(i,r),a(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function Re(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Te(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=Oe(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<r;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i})).filter((function(t){return t.length>0}))}}var De=Object.prototype.hasOwnProperty;function Fe(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;function h(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l]=o;if(++c>=t)throw new Error("full hashmap");h=s[l=l+1&u]}return s[l]=r,a[l]=o,o}function c(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l];if(++c>=t)throw new Error("full hashmap");h=s[l=l+1&u]}return s[l]=r,a[l]=o,o}function p(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l];if(++c>=t)break;h=s[l=l+1&u]}return o}function f(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}return{set:h,maybeSet:c,get:p,keys:f}}function ze(t,e){return t[0]===e[0]&&t[1]===e[1]}var Xe=new ArrayBuffer(16),Ye=new Float64Array(Xe),Be=new Uint32Array(Xe);function Ge(t){Ye[0]=t[0],Ye[1]=t[1];var e=Be[0]^Be[1];return 2147483647&(e<<5^e>>7^Be[2]^Be[3])}function Ve(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=Fe(1.4*o.length,_,b,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),h=new Int32Array(o.length),c=new Int32Array(o.length),p=new Int8Array(o.length),f=0;for(e=0,n=o.length;e<n;++e)l[e]=h[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var g=s[e],d=g[0],y=g[1];for(r=u[d],i=u[++d],++f,p[r]=1;++d<=y;)w(e,r,r=i,i=u[d]);++f,p[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var v=a[e],m=v[0]+1,x=v[1];for(w(e,u[x-1],r=u[m-1],i=u[m]);++m<=x;)w(e,r,r=i,i=u[m])}function w(t,e,n,r){if(l[n]!==t){l[n]=t;var i=h[n];if(i>=0){var o=c[n];i===e&&o===r||i===r&&o===e||(++f,p[n]=1)}else h[n]=e,c[n]=r}}function _(t){return Ge(o[t])}function b(t,e){return ze(o[t],o[e])}l=h=c=null;var S,C=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function u(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0}function l(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1}function h(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:u,has:l,values:h}}(1.4*f,Ge,ze);for(e=0,n=o.length;e<n;++e)p[S=u[e]]&&C.add(o[S]);return C}function He(t,e,n,r){je(t,e,n),je(t,e,e+r),je(t,e+r,n)}function je(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function We(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?qe:"Feature"===n.type?Ue:Ze)(n);return r}function qe(t){var e={type:"GeometryCollection",geometries:t.features.map(Ue)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ue(t){var e,n=Ze(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Ze(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ze)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function $e(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var h in t)o(t[h]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=We(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=o-r?(n-1)/(o-r):1,u=s-i?(n-1)/(s-i):1;function l(t){return[Math.round((t[0]-r)*a),Math.round((t[1]-i)*u)]}function h(t,e){for(var n,o,s,l,h,c=-1,p=0,f=t.length,g=new Array(f);++c<f;)n=t[c],l=Math.round((n[0]-r)*a),h=Math.round((n[1]-i)*u),l===o&&h===s||(g[p++]=[o=l,s=h]);for(g.length=p;p<e;)p=g.push([g[0][0],g[0][1]]);return g}function c(t){return h(t,2)}function p(t){return h(t,4)}function f(t){return t.map(p)}function g(t){null!=t&&De.call(d,t.type)&&d[t.type](t)}var d={GeometryCollection:function(t){t.geometries.forEach(g)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=f(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(f)}};for(var y in t)g(t[y]);return{scale:[1/a,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++u;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++u;var l=Fe(2*u*1.4,Ge,ze),h=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{c(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{c(n)}while(n=n.next);else p(n);function c(t){var e,n,r,i,s,a,u,c;if(r=l.get(e=o[t[0]]))for(u=0,c=r.length;u<c;++u)if(f(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(n=o[t[1]]))for(u=0,c=s.length;u<c;++u)if(g(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),h.push(t)}function p(t){var e,n,r,i,s;if(n=l.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(d(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+v(t)]))for(i=0,s=n.length;i<s;++i){if(d(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),h.push(t)}function f(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!ze(o[n],o[r]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1],s=e[1];if(n-i!=r-s)return!1;for(;n<=i;++n,--s)if(!ze(o[n],o[s]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=v(t),a=v(e),u=0;u<i;++u)if(!ze(o[n+(u+s)%i],o[r+(u+a)%i]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1],s=e[1],a=i-n;if(a!==s-r)return!1;for(var u=v(t),l=a-v(e),h=0;h<a;++h)if(!ze(o[n+(h+u)%a],o[s-(h+l)%a]))return!1;return!0}function v(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=Ve(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],h=u[1];++l<h;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var c=a[n],p=c[0],f=p,g=c[1],d=i.has(o[p]);++f<g;)i.has(o[f])&&(d?(e={0:f,1:c[1]},c[1]=f,c=c.next=e):(He(o,p,g,g-f),o[g]=o[p],d=!0,f=p));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function l(t){return t.map(u)}for(var h in t)o(t[h]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,s=Fe(1.4*i.arcs.length,Je,Qe);function a(t){t&&De.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};function l(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function h(t){return t.map(l)}for(var c in t)a(t[c]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,l=o[0],h=l[0],c=l[1];++s<u;)r=(l=o[s])[0],i=l[1],r===h&&i===c||(o[a++]=[r-h,i-c],h=r,c=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function Je(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Qe(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Ke(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Ee(t));var n=[];B(t,(function(t){n.push(t.geometry)}));var r=$e({geoms:m(n).geometry});return function(t){return Te(t,Re.apply(this,arguments))}(r,r.objects.geoms.geometries)}function ti(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ee(t));var r=function(t){var e={};B(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return Le(i,e);case"Polygon":return Ke(i,e);default:throw new Error(r+" is not supported")}}function ei(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=ot(t),i=[];switch(r){case"LineString":i=ii(t);break;case"MultiLineString":case"Polygon":K(t).forEach((function(t){i.push(ii(t))}));break;case"MultiPolygon":K(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(ii(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var s={};K(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(s,e)||(i.push(t),s[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):l({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function ii(t){var e=K(t);if(2===e.length&&!ni(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(i=n.length)>2&&ri(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,ni(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return ri(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function ni(t,e){return t[0]===e[0]&&t[1]===e[1]}function ri(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,h=u-s;return 0==(r-o)*h-(i-s)*l&&(Math.abs(l)>=Math.abs(h)?l>0?o<=r&&r<=a:a<=r&&r<=o:h>0?s<=i&&i<=u:u<=i&&i<=s)}function oi(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function si(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=oi(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&si(t,e,o,r,i),i.push(t[o]),n-o>1&&si(t,o,n,r,i))}function ai(t,e){var n=t.length-1,r=[t[0]];return si(t,0,n,e,r),r.push(t[n]),r}function hi(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return ai(t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],l=1,h=t.length;l<h;l++)i=a,o=void 0,s=void 0,(o=(r=n=t[l]).x-i.x)*o+(s=r.y-i.y)*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),r)}function ci(t,e,n){return hi(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function ui(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=hi(r,e,n).map((function(t){return[t.x,t.y]}));!pi(i);)i=hi(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function pi(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fi=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function di(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=rt(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new fi({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),f(i,e.properties)}function gi(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return h([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function yi(t){return gi(J(t))}function vi(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(be(t.slice(0,2),[r,n])>=be(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function mi(t,e,n,r){void 0===r&&(r={});var i=Q(t),o=E(i[0]),s=E(i[1]),u=E(n),l=_(e,r.units),h=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(u));return a([C(o+Math.atan2(Math.sin(u)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(h))),C(h)],r.properties)}function xi(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(mi(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),h([o],i)}function bi(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=bi(e,t);return(n+180)%360}(t,e);var r=Q(t),i=Q(e),o=E(r[0]),s=E(i[0]),a=E(r[1]),u=E(i[1]),l=Math.sin(s-o)*Math.cos(u),h=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return C(Math.atan2(l,h))}function wi(t,e){void 0===e&&(e={});var n=J(t);return a([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function _i(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return T(t,(function(t){n+=t[0],r+=t[1],i++}),!0),a([n/i,r/i],e.properties)}function Si(t){var e=[];return"FeatureCollection"===t.type?F(t,(function(t){T(t,(function(n){e.push(a(n,t.properties))}))})):T(t,(function(n){e.push(a(n,t.properties))})),d(e)}var Ci=Ai,Ei=Ai;function Ai(t,e,n){n=n||2;var r,i,o,s,a,u,l,h=e&&e.length,c=h?e[0]*n:t.length,p=Ii(t,0,c,n,!0),f=[];if(!p)return f;if(h&&(p=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Ii(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(Fi(s));for(a.sort(Oi),i=0;i<a.length;i++)Ri(a[i],n),n=ki(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var g=n;g<c;g+=n)(a=t[g])<r&&(r=a),(u=t[g+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-r,s-i))?1/l:0}return Pi(p,f,n,r,i,l),f}function Ii(t,e,n,r,i){var o,s;if(i===Ui(t,e,n,r)>0)for(o=e;o<n;o+=r)s=ji(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=ji(o,t[o],t[o+1],s);return s&&Bi(s,s.next)&&(Wi(s),s=s.next),s}function ki(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Bi(r,r.next)&&0!==Yi(r.prev,r,r.next))r=r.next;else{if(Wi(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Pi(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Di(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,r,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Mi(t,r,i,o):Li(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Wi(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?Pi(t=Ni(t,e,n),e,n,r,i,o,2):2===s&&Ti(t,e,n,r,i,o):Pi(ki(t),e,n,r,i,o,1);break}}}function Li(t){var e=t.prev,n=t,r=t.next;if(Yi(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(zi(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Yi(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Mi(t,e,n,r){var i=t.prev,o=t,s=t.next;if(Yi(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=Di(a,u,e,n,r),p=Di(l,h,e,n,r),f=t.prevZ,g=t.nextZ;f&&f.z>=c&&g&&g.z<=p;){if(f!==t.prev&&f!==t.next&&zi(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Yi(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,g!==t.prev&&g!==t.next&&zi(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&Yi(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&zi(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Yi(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;g&&g.z<=p;){if(g!==t.prev&&g!==t.next&&zi(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&Yi(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function Ni(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Bi(i,o)&&Gi(i,r,r.next,o)&&Vi(i,o)&&Vi(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Wi(r),Wi(r.next),r=t=o),r=r.next}while(r!==t);return r}function Ti(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Xi(s,a)){var u=Hi(s,a);return s=ki(s,s.next),u=ki(u,u.next),Pi(s,e,n,r,i,o),void Pi(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function Oi(t,e){return t.x-e.x}function Ri(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,l=n,h=n.x,c=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=h&&i!==r.x&&zi(o<c?i:s,o,h,c,o<c?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Vi(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=Hi(e,t);ki(n,n.next)}}function Di(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fi(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function zi(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Xi(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Gi(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Vi(t,e)&&Vi(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Yi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Bi(t,e){return t.x===e.x&&t.y===e.y}function Gi(t,e,n,r){return!!(Bi(t,e)&&Bi(n,r)||Bi(t,r)&&Bi(n,e))||Yi(t,e,n)>0!=Yi(t,e,r)>0&&Yi(n,r,t)>0!=Yi(n,r,e)>0}function Vi(t,e){return Yi(t.prev,t,t.next)<0?Yi(t,e,t.next)>=0&&Yi(t,t.prev,e)>=0:Yi(t,e,t.prev)<0||Yi(t,t.next,e)<0}function Hi(t,e){var n=new qi(t.i,t.x,t.y),r=new qi(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ji(t,e,n,r){var i=new qi(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Wi(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function qi(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ui(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Zi(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=Ci(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(h([s]))}return r}function $i(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return F(e,(function(e,n){var o=be(t,e);o<r&&(i=n,r=o)})),(n=Ee(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function Ji(t){if(!t)throw new Error("geojson is required");var e=[];return B(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=K(r);break;case"LineString":n=[K(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=f([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),d(e)}Ai.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Ui(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Ui(t,l,h,n))}var c=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,g=r[a+2]*n;c+=Math.abs((t[p]-t[g])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[g+1]-t[p+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},Ai.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Ci.default=Ei;var Qi=Bt((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=h,e.lengthToRadians=c,e.lengthToDegrees=function(t,e){return p(c(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return h(c(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function Ki(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,h,c=0,p=0,f=t.type,g="FeatureCollection"===f,d="Feature"===f,y=g?t.features.length:1,v=0;v<y;v++){a=(h=!!(l=g?t.features[v].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var x=0,w=0;if(null!==(s=h?l.geometries[m]:l)){u=s.coordinates;var _=s.type;switch(c=!n||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===e(u,p,v,x,w))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,v,x,w))return!1;p++,"MultiPoint"===_&&x++}"LineString"===_&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],p,v,x,w))return!1;p++}"MultiLineString"===_&&x++,"Polygon"===_&&w++}"Polygon"===_&&x++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(w=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],p,v,x,w))return!1;p++}w++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Ki(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function tr(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function en(t,e){var n,r,i,o,s,a,u,l,h,c,p=0,f="FeatureCollection"===t.type,g="Feature"===t.type,d=f?t.features.length:1;for(n=0;n<d;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,l=f?t.features[n].properties:g?t.properties:{},h=f?t.features[n].bbox:g?t.bbox:void 0,c=f?t.features[n].id:g?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,h,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,h,c))return!1;p++}}function nn(t,e){en(t,(function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Qi.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Qi.feature(l,r),n,u))return!1}}))}function rn(t,e){nn(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==Ki(t,(function(o,h,c,p,f){if(void 0===s||n>a||p>u||f>l)return s=o,a=n,u=p,l=f,void(i=0);var g=Qi.lineString([s,o],t.properties);if(!1===e(g,n,r,f,i))return!1;i++,s=o}))&&void 0}}}))}function on(t,e){if(!t)throw new Error("geojson is required");nn(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Qi.lineString(o[s],t.properties),n,r,s))return!1}}}))}var sn=function(t){var e=[];return Ki(t,(function(t){e.push(t)})),e},an=Ki,ln=function(t,e,n,r){var i=n;return Ki(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i},hn=tr,cn=function(t,e,n){var r=n;return tr(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},un=function(t,e){if(e=e||{},!Qi.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Qi.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Qi.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Qi.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Qi.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Qi.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Qi.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},hr=function(t,e){if(e=e||{},!Qi.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Qi.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Qi.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Qi.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Qi.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},pn=nn,fn=function(t,e,n){var r=n;return nn(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},dn=en,gn=function(t,e,n){var r=n;return en(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r},yn=on,vn=function(t,e,n){var r=n;return on(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r},mn=tn,xn=function(t,e,n){var r=n;return tn(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},bn=rn,wn=function(t,e,n){var r=n,i=!1;return rn(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r},br=Object.defineProperty({coordAll:sn,coordEach:an,coordReduce:ln,featureEach:hn,featureReduce:cn,findPoint:un,findSegment:hr,flattenEach:pn,flattenReduce:fn,geomEach:dn,geomReduce:gn,lineEach:yn,lineReduce:vn,propEach:mn,propReduce:xn,segmentEach:bn,segmentReduce:wn},"__esModule",{value:!0});function _n(t){var e=[1/0,1/0,-1/0,-1/0];return br.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}_n.default=_n;var Sn=_n,Cn=Object.defineProperty({default:Sn},"__esModule",{value:!0}).default,En=br.featureEach,An=(br.coordEach,Qi.polygon,Qi.featureCollection);function In(t){var e=At(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Cn(t),At.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Cn(t),e.push(t)})):En(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Cn(t),e.push(t)})),At.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Cn(t),At.prototype.remove.call(this,t,e)},e.clear=function(){return At.prototype.clear.call(this)},e.search=function(t){var e=At.prototype.search.call(this,this.toBBox(t));return An(e)},e.collides=function(t){return At.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=At.prototype.all.call(this);return An(t)},e.toJSON=function(){return At.prototype.toJSON.call(this)},e.fromJSON=function(t){return At.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Cn(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Cn(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var kn=In,Pn=In;function Ln(t,e){var n={},r=[];if("LineString"===t.type&&(t=l(t)),"LineString"===e.type&&(e=l(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Mn(t,e);return i&&r.push(i),d(r)}var s=kn();return s.load(Ji(e)),F(Ji(t),(function(t){F(s.search(t),(function(e){var i=Mn(t,e);if(i){var o=K(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),d(r)}function Mn(t,e){var n=K(t),r=K(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],u=n[1][1],l=r[0][0],h=r[0][1],c=r[1][0],p=r[1][1],f=(p-h)*(s-i)-(c-l)*(u-o);if(0===f)return null;var d=((c-l)*(o-h)-(p-h)*(i-l))/f,y=((s-i)*(o-h)-(u-o)*(i-l))/f;return d>=0&&d<=1&&y>=0&&y<=1?a([i+d*(s-i),o+d*(u-o)]):null}function Nn(t,e,n){void 0===n&&(n={});var r=a([1/0,1/0],{dist:1/0}),i=0;return B(t,(function(t){for(var o=K(t),s=0;s<o.length-1;s++){var u=a(o[s]);u.properties.dist=be(e,u,n);var l=a(o[s+1]);l.properties.dist=be(e,l,n);var h=be(u,l,n),p=Math.max(u.properties.dist,l.properties.dist),c=bi(u,l),g=mi(e,p,c+90,n),d=mi(e,p,c-90,n),y=Ln(f([g.geometry.coordinates,d.geometry.coordinates]),f([u.geometry.coordinates,l.geometry.coordinates])),v=null;y.features.length>0&&((v=y.features[0]).properties.dist=be(e,v,n),v.properties.location=i+be(u,v,n)),u.properties.dist<r.properties.dist&&((r=u).properties.index=s,r.properties.location=i),l.properties.dist<r.properties.dist&&((r=l).properties.index=s+1,r.properties.location=i+h),v&&v.properties.dist<r.properties.dist&&((r=v).properties.index=s),i+=h}})),r}function Tn(t,e,r){void 0===r&&(r={});var i=Q(t),o=Q(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,A(function(t,e,r){var i=r=void 0===r?n:Number(r),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),h=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+h*h*u*u)*i}(i,o),"meters",r.units)}function On(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=a(t):"Point"===t.type?t=l(t):it(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=l(e):it(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return V(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=Rn([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return Dn(t,e,{method:r.method,units:"degrees"});var s=Rn(i,i);if(s<=o)return Dn(t,n,{method:r.method,units:"degrees"});var a=o/s;return Dn(t,[e[0]+a*i[0],e[1]+a*i[1]],{method:r.method,units:"degrees"})}(i,e,o,n);s<r&&(r=s)})),A(r,"degrees",n.units)}function Rn(t,e){return t[0]*e[0]+t[1]*e[1]}function Dn(t,e,n){return"planar"===n.method?Tn(t,e,n):be(t,e,n)}function Fn(t,e,n,r,i,o,s,a){var u,l,h,c,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==p.x&&null!==p.y&&p:(c=(n-t)*(l=e-o)-(r-e)*(h=t-i),l=((s-i)*l-(a-o)*h)/u,h=c/u,p.x=t+l*(n-t),p.y=e+l*(r-e),l>=0&&l<=1&&(p.onLine1=!0),h>=0&&h<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}function zn(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?d([l(t)]):d([t]):t}(t),n=wi(e),r=!1,i=0;!r&&i<e.features.length;){var s,u=e.features[i].geometry,o=!1;if("Point"===u.type)n.geometry.coordinates[0]===u.coordinates[0]&&n.geometry.coordinates[1]===u.coordinates[1]&&(r=!0);else if("MultiPoint"===u.type){var h=!1;for(s=0;!h&&s<u.coordinates.length;)n.geometry.coordinates[0]===u.coordinates[s][0]&&n.geometry.coordinates[1]===u.coordinates[s][1]&&(r=!0,h=!0),s++}else if("LineString"===u.type)for(s=0;!o&&s<u.coordinates.length-1;)Xn(n.geometry.coordinates[0],n.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(o=!0,r=!0),s++;else if("MultiLineString"===u.type)for(var c=0;c<u.coordinates.length;){o=!1,s=0;for(var p=u.coordinates[c];!o&&s<p.length-1;)Xn(n.geometry.coordinates[0],n.geometry.coordinates[1],p[s][0],p[s][1],p[s+1][0],p[s+1][1])&&(o=!0,r=!0),s++;c++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||ve(n,u)&&(r=!0);i++}if(r)return n;var g=d([]);for(i=0;i<e.features.length;i++)g.features=g.features.concat(Si(e.features[i]).features);return a($i(n,g).geometry.coordinates)}function Xn(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}kn.default=Pn;var Yn=6378137;function Bn(t){return Y(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Gn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Gn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Gn(t){var e=0;if(t&&t.length>0){e+=Math.abs(Vn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Vn(t[n]))}return e}function Vn(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(Hn(t[o][0])-Hn(e[0]))*Math.sin(Hn(n[1]));a=a*Yn*Yn/2}return a}function Hn(t){return t*Math.PI/180}function jn(t,e){return void 0===e&&(e={}),H(t,(function(t,n){var r=n.geometry.coordinates;return t+be(r[0],r[1],e)}),0)}function Wn(t,e,n,r){if(!P(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,h=0,p=0;p<i.length&&!(e>=h&&p===i.length-1);p++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(i[p]),f(o);a=bi(i[p],i[p-1])-180,u=mi(i[p],s,a,r),o.push(u.geometry.coordinates)}if(h>=n)return(s=n-h)?(a=bi(i[p],i[p-1])-180,u=mi(i[p],s,a,r),o.push(u.geometry.coordinates),f(o)):(o.push(i[p]),f(o));if(h>=e&&o.push(i[p]),p===i.length-1)return f(o);h+=be(i[p],i[p+1],r)}if(h<e&&i.length===l)throw new Error("Start position is beyond line");var c=i[i.length-1];return f([c,c])}function qn(t,e,n){void 0===n&&(n={});for(var r=Q(t),i=K(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Un(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Un(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],h=e[1],c=l-a,p=h-u,f=(n[0]-a)*p-(n[1]-u)*c;if(null!==i){if(Math.abs(f)>i)return!1}else if(0!==f)return!1;return r?"start"===r?Math.abs(c)>=Math.abs(p)?c>0?a<o&&o<=l:l<=o&&o<a:p>0?u<s&&s<=h:h<=s&&s<u:"end"===r?Math.abs(c)>=Math.abs(p)?c>0?a<=o&&o<l:l<o&&o<=a:p>0?u<=s&&s<h:h<s&&s<=u:"both"===r&&(Math.abs(c)>=Math.abs(p)?c>0?a<o&&o<l:l<o&&o<a:p>0?u<s&&s<h:h<s&&s<u):Math.abs(c)>=Math.abs(p)?c>0?a<=o&&o<=l:l<=o&&o<=a:p>0?u<=s&&s<=h:h<=s&&s<=u}function Zn(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Jn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return qn(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ve(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Jn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!qn(t.coordinates[r],e))return!1;n||(n=qn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=ve(t.coordinates[1],e))){n=!1;break}r=ve(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!qn(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!$n(J(e),J(t)))return!1;for(var i=!1,n=0;n<t.coordinates.length-1;n++){if(!ve(t.coordinates[n],e))return!1;i||(i=ve(t.coordinates[n],e,{ignoreBoundary:!0})),i||(i=ve(Qn(t.coordinates[n],t.coordinates[n+1]),e,{ignoreBoundary:!0}))}return i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=J(t);if(!$n(J(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!ve(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function $n(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Jn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Qn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Kn(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],u=t[3],l=e/be([i,o],[s,o],n)*(s-i),h=e/be([i,o],[i,u],n)*(u-o),c=s-i,p=u-o,g=Math.floor(c/l),f=(p-Math.floor(p/h)*h)/2,y=i+(c-g*l)/2;y<=s;){for(var v=o+f;v<=u;){var m=a([y,v],n.properties);n.mask?Zn(m,n.mask)&&r.push(m):r.push(m),v+=h}y+=l}return d(r)}function er(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return T(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function ir(t){if(!t)throw new Error("geojson is required");var e=[];return B(t,(function(t){e.push(t)})),d(e)}function nr(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(d(a,u));var l=At();l.load(s)}for(var h=0;h<r.length;h++)for(var c=0;c<r[h].length-1;c++)if(n)l.search(d(h,c)).forEach((function(t){var e=t.ring,n=t.edge;g(h,c,e,n)}));else for(var p=0;p<r.length;p++)for(var f=0;f<r[p].length-1;f++)g(h,c,p,f);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function g(t,n,s,a){var u,l,h=r[t][n],c=r[t][n+1],p=r[s][a],f=r[s][a+1],g=function(t,e,n,r){if(rr(t,n)||rr(t,r)||rr(e,n)||rr(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],h=r[0],c=r[1],p=(i-s)*(l-c)-(o-a)*(u-h);return 0===p?null:[((i*a-o*s)*(u-h)-(i-s)*(u*c-l*h))/p,((i*a-o*s)*(l-c)-(o-a)*(u*c-l*h))/p]}(h,c,p,f);if(null!==g&&(u=c[0]!==h[0]?(g[0]-h[0])/(c[0]-h[0]):(g[1]-h[1])/(c[1]-h[1]),l=f[0]!==p[0]?(g[0]-p[0])/(f[0]-p[0]):(g[1]-p[1])/(f[1]-p[1]),!(u>=1||u<=0||l>=1||l<=0))){var d=g,y=!o[d];y&&(o[d]=!0),e?i.push(e(g,t,n,h,c,u,s,a,p,f,l,y)):i.push(g)}}function d(t,e){var n,i,o,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function rr(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!rr(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function or(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];cr(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=nr(t,(function(t,e,n,r,i,o,s,a,u,l,h,c){return[t,e,n,r,i,o,s,a,u,l,h,c]})),a=s.length;if(0==a){var u=[];for(r=0;r<e;r++)u.push(h([t.geometry.coordinates[r]],{parent:-1,winding:li(t.geometry.coordinates[r])}));var l=d(u);return z(),q(),l}var c=[],p=[];for(r=0;r<e;r++){c.push([]);for(var g=0;g<t.geometry.coordinates[r].length-1;g++)c[r].push([new sr(t.geometry.coordinates[r][ur(g+1,t.geometry.coordinates[r].length-1)],1,[r,g],[r,ur(g+1,t.geometry.coordinates[r].length-1)],void 0)]),p.push(new ar(t.geometry.coordinates[r][g],[r,ur(g-1,t.geometry.coordinates[r].length-1)],[r,g],void 0,void 0,!1,!0))}for(r=0;r<a;r++)c[s[r][1]][s[r][2]].push(new sr(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&p.push(new ar(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var f=p.length;for(r=0;r<c.length;r++)for(g=0;g<c[r].length;g++)c[r][g].sort((function(t,e){return t.param<e.param?-1:1}));var y=[];for(r=0;r<f;r++)y.push({minX:p[r].coord[0],minY:p[r].coord[1],maxX:p[r].coord[0],maxY:p[r].coord[1],index:r});var v=At();for(v.load(y),r=0;r<c.length;r++)for(g=0;g<c[r].length;g++)for(var m=0;m<c[r][g].length;m++){w=m==c[r][g].length-1?c[r][ur(g+1,t.geometry.coordinates[r].length-1)][0].coord:c[r][g][m+1].coord;var x=v.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0];c[r][g][m].nxtIsectAlongEdgeIn=x.index}for(r=0;r<c.length;r++)for(g=0;g<c[r].length;g++)for(m=0;m<c[r][g].length;m++){var w=c[r][g][m].coord,_=(x=v.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0]).index;_<o?p[_].nxtIsectAlongRingAndEdge2=c[r][g][m].nxtIsectAlongEdgeIn:cr(p[_].ringAndEdge1,c[r][g][m].ringAndEdgeIn)?p[_].nxtIsectAlongRingAndEdge1=c[r][g][m].nxtIsectAlongEdgeIn:p[_].nxtIsectAlongRingAndEdge2=c[r][g][m].nxtIsectAlongEdgeIn}var b=[];for(r=0,g=0;g<e;g++){var S=r;for(m=0;m<t.geometry.coordinates[g].length-1;m++)p[r].coord[0]<p[S].coord[0]&&(S=r),r++;var C=p[S].nxtIsectAlongRingAndEdge2;for(m=0;m<p.length;m++)if(p[m].nxtIsectAlongRingAndEdge1==S||p[m].nxtIsectAlongRingAndEdge2==S){var E=m;break}var A=lr([p[E].coord,p[S].coord,p[C].coord],!0)?1:-1;b.push({isect:S,parent:-1,winding:A})}for(b.sort((function(t,e){return p[t.isect].coord>p[e.isect].coord?-1:1})),u=[];b.length>0;){var I=b.pop(),k=I.isect,P=I.parent,L=I.winding,M=u.length,N=[p[k].coord],T=k;if(p[k].ringAndEdge1Walkable)var O=p[k].ringAndEdge1,R=p[k].nxtIsectAlongRingAndEdge1;else O=p[k].ringAndEdge2,R=p[k].nxtIsectAlongRingAndEdge2;for(;!cr(p[k].coord,p[R].coord);){N.push(p[R].coord);var D=void 0;for(r=0;r<b.length;r++)if(b[r].isect==R){D=r;break}if(null!=D&&b.splice(D,1),cr(O,p[R].ringAndEdge1)){if(O=p[R].ringAndEdge2,p[R].ringAndEdge2Walkable=!1,p[R].ringAndEdge1Walkable){var F={isect:R};lr([p[T].coord,p[R].coord,p[p[R].nxtIsectAlongRingAndEdge2].coord],1==L)?(F.parent=P,F.winding=-L):(F.parent=M,F.winding=L),b.push(F)}T=R,R=p[R].nxtIsectAlongRingAndEdge2}else O=p[R].ringAndEdge1,p[R].ringAndEdge1Walkable=!1,p[R].ringAndEdge2Walkable&&(F={isect:R},lr([p[T].coord,p[R].coord,p[p[R].nxtIsectAlongRingAndEdge1].coord],1==L)?(F.parent=P,F.winding=-L):(F.parent=M,F.winding=L),b.push(F)),T=R,R=p[R].nxtIsectAlongRingAndEdge1}N.push(p[R].coord),u.push(h([N],{index:M,parent:P,winding:L,netWinding:void 0}))}function z(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<l.features.length;r++)t[e]!=r&&ve(l.features[t[e]].geometry.coordinates[0][0],l.features[r],{ignoreBoundary:!0})&&Bn(l.features[r])<1/0&&(n=r);l.features[t[e]].properties.parent=n}}function q(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,X(t,e)}}function X(t,e){for(var n=0;n<l.features.length;n++)if(l.features[n].properties.parent==t){var r=e+l.features[n].properties.winding;l.features[n].properties.netWinding=r,X(n,r)}}return l=d(u),z(),q(),l}var sr=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},ar=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function lr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function li(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(lr([t[ur(e-1,t.length-1)],t[e],t[ur(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function cr(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!cr(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function ur(t,e){return(t%e+e)%e}var pr=Math.PI/180,fr=180/Math.PI,dr=function(t,e){this.lon=t,this.lat=e,this.x=pr*t,this.y=pr*e};dr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},dr.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new dr(e,t)};var gr=function(){this.coords=[],this.length=0};gr.prototype.move_to=function(t){this.length++,this.coords.push(t)};var yr=function(t){this.properties=t||{},this.geometries=[]};yr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},yr.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var vr=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new dr(t.x,t.y),this.end=new dr(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function mr(t,e){var n=[],r=kn();return B(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=wr(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),F(xr(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=xr(t,e).features).forEach((function(t){t.bbox||(t.bbox=vi(J(t)))})),r.load(d(n))})),d(n)}function xr(t,e){var n=[],r=K(t)[0],i=K(t)[t.geometry.coordinates.length-1];if(_r(r,Q(e))||_r(i,Q(e)))return d([t]);var o=kn(),s=Ji(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=wr(e,a),l=z(s,(function(t,r,i){var o=K(r)[1],s=Q(e);return i===u.id?(t.push(s),n.push(f(t)),_r(s,o)?[s]:[s,o]):(t.push(o),t)}),[r]);return l.length>1&&n.push(f(l)),d(n)}function wr(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return F(e,(function(e){var i=Nn(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function _r(t,e){return t[0]===e[0]&&t[1]===e[1]}function Sr(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,s=Cr(n),a=Cr(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return f(xi(t,e,i).geometry.coordinates[0],u);for(var l=s,h=s<a?a:a+360,p=l,c=[],g=0;p<h;)c.push(mi(t,e,p,i).geometry.coordinates),p=l+360*++g/o;return p>h&&c.push(mi(t,e,h,i).geometry.coordinates),f(c,u)}function Cr(t){var e=t%360;return e<0&&(e+=360),e}function Er(t,e){void 0===e&&(e={});var n=rt(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Ar(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=rt(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(Ir(t,r))})),d(i)}(n,e);default:throw new Error("invalid poly")}}function Ar(t,e){return void 0===e&&(e={}),Ir(rt(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Ir(t,e){return t.length>1?g(t,e):f(t[0],e)}function kr(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(r=e.orderCoords)||void 0===r||r;if("FeatureCollection"===(null!==(i=e.mutate)&&void 0!==i&&i||(t=Ee(t)),t.type)){var u=[];return t.features.forEach((function(t){u.push(K(Pr(t,{},s,a)))})),v(u,o)}return Pr(t,o,s,a)}function Pr(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=rt(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=Lr(o)),h([o],e);case"MultiLineString":var a=[],u=0;return o.forEach((function(t){if(n&&(t=Lr(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(J(f(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)})),h(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Lr(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Mr(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Tr(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Tr(a=t[s],e)&r))!==o&&n.push(Nr(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function Nr(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Tr(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Or(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Mr(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}vr.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=fr*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[fr*Math.atan2(i,r),s]},vr.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,h=180-l,c=-180+l,p=360-l,f=1;f<n.length;++f){var g=n[f-1][0],d=n[f][0],y=Math.abs(d-g);y>p&&(d>h&&g<c||g>h&&d<c)?a=!0:y>u&&(u=y)}var v=[];if(a&&u<l){var m=[];v.push(m);for(var x=0;x<n.length;++x){var w=parseFloat(n[x][0]);if(x>0&&Math.abs(w-n[x-1][0])>p){var _=parseFloat(n[x-1][0]),b=parseFloat(n[x-1][1]),S=parseFloat(n[x][0]),C=parseFloat(n[x][1]);if(_>-180&&_<c&&180===S&&x+1<n.length&&n[x-1][0]>-180&&n[x-1][0]<c){m.push([-180,n[x][1]]),x++,m.push([n[x][0],n[x][1]]);continue}if(_>h&&_<180&&-180===S&&x+1<n.length&&n[x-1][0]>h&&n[x-1][0]<180){m.push([180,n[x][1]]),x++,m.push([n[x][0],n[x][1]]);continue}if(_<c&&S>h){var E=_;_=S,S=E;var A=b;b=C,C=A}if(_>h&&S<c&&(S+=360),_<=180&&S>=180&&_<S){var I=(180-_)/(S-_),k=I*C+(1-I)*b;m.push([n[x-1][0]>h?180:-180,k]),(m=[]).push([n[x-1][0]>h?-180:180,k]),v.push(m)}else m=[],v.push(m);m.push([w,n[x][1]])}else m.push([n[x][0],n[x][1]])}}else{var P=[];v.push(P);for(var L=0;L<n.length;++L)P.push([n[L][0],n[L][1]])}for(var M=new yr(this.properties),N=0;N<v.length;++N){var T=new gr;M.geometries.push(T);for(var O=v[N],R=0;R<O.length;++R)T.move_to(O[R])}return M};var Rr=Bt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Dr=Bt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),Fr=Bt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(Dr(t))return!!Dr(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=Rr(t),h=Rr(o)}catch(t){return!1}if(l.length!=h.length)return!1;for(l.sort(),h.sort(),a=l.length-1;a>=0;a--)if(l[a]!=h[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!n(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}}));function zr(t,e,n){if(void 0===n&&(n={}),!P(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=kn(),a=Ji(t);return s.load(a),V(e,(function(t){var e=!1;t&&(F(s.search(t),(function(n){if(!1===e){var o=K(t).sort(),s=K(n).sort();Fr(o,s)||(0===i?qn(o[0],n)&&qn(o[1],n):Nn(n,o[0]).properties.dist<=i&&Nn(n,o[1]).properties.dist<=i)?(e=!0,r=r?Xr(r,t):t):(0===i?qn(s[0],t)&&qn(s[1],t):Nn(t,s[0]).properties.dist<=i&&Nn(t,s[1]).properties.dist<=i)&&(r=r?Xr(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0))})),r&&o.push(r),d(o)}function Xr(t,e){var n=K(e),r=K(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Fr(n[0],i)?s.unshift(n[1]):Fr(n[0],o)?s.push(n[1]):Fr(n[1],i)?s.unshift(n[0]):Fr(n[1],o)&&s.push(n[0]),t}function Yr(t){var e=t%360;return e<0&&(e+=360),e}function Br(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?Gr(Q(e),Q(t)):Gr(Q(t),Q(e)))>180?-(360-r):r}function Gr(t,e){var n=E(t[1]),r=E(e[1]),i=E(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(C(Math.atan2(i,o))+360)%360}function Vr(t,e,r,i){void 0===i&&(i={});var o=e<0,s=A(Math.abs(e),i.units,"meters");o&&(s=-Math.abs(s));var u=Q(t),l=function(t,e,r,i){var o=e/(i=void 0===i?n:Number(i)),s=t[0]*Math.PI/180,a=E(t[1]),u=E(r),l=o*Math.cos(u),h=a+l;Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h);var c=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),p=Math.abs(c)>1e-11?l/c:Math.cos(a);return[(180*(s+o*Math.sin(u)/p)/Math.PI+540)%360-180,180*h/Math.PI]}(u,s,r);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,a(l,i.properties)}function Hr(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Wr(a,u,e),n<=0&&r>0?Wr(e,a,i)<0||(i=a):n>0&&r<=0&&(jr(e,a,o)||(o=a)),n=r}return[i,o]}function jr(t,e,n){return Wr(t,e,n)>0}function Wr(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function qr(t){for(var e,n,r=K(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Ur(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return q(t,(function(t){Ur(t,e)})),t;case"LineString":return Zr(K(t),e),t;case"Polygon":return $r(K(t),e),t;case"MultiLineString":return K(t).forEach((function(t){Zr(t,e)})),t;case"MultiPolygon":return K(t).forEach((function(t){$r(t,e)})),t;case"Point":case"MultiPoint":return t}}function Zr(t,e){qr(t)===e&&t.reverse()}function $r(t,e){qr(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)qr(t[n])===e&&t[n].reverse()}function Jr(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return F(t,(function(t){var e=K(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return K(t)[0]-K(e)[0]}))})).sort((function(t,n){return e?K(t[0])[1]-K(n[0])[1]:K(n[0])[1]-K(t[0])[1]}))}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}var Qr={successCallback:null,verbose:!1,polygons:!1},Kr={};function to(t,e,n,r){r=r||{};for(var i=Object.keys(Qr),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:Qr[s],Kr[s]=a}Kr.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,h=t[a+1][u],c=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(h)||isNaN(c)||isNaN(p)||isNaN(f))){l|=h<e?0:h>s?128:64,l|=c<e?0:c>s?32:16,l|=p<e?0:p>s?8:4;var g=+(l|=f<e?0:f>s?2:1),d=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var y=(h+c+p+f)/4;d=y>s?2:y<e?0:1,34===l?1===d?l=35:0===d&&(l=136):136===l?1===d?(l=35,d=4):0===d&&(l=34):17===l?1===d?(l=155,d=4):0===d&&(l=153):68===l?1===d?(l=103,d=4):0===d&&(l=102):153===l?1===d&&(l=155):102===l?1===d&&(l=103):152===l?d<2&&(l=156,d=1):137===l?d<2&&(l=139,d=1):98===l?d<2&&(l=99,d=1):38===l?d<2&&(l=39,d=1):18===l?d>0?(l=156,d=4):l=152:33===l?d>0?(l=139,d=4):l=137:72===l?d>0?(l=99,d=4):l=98:132===l&&(d>0?(l=39,d=4):l=38)}if(0!=l&&170!=l){var v,m,x,w,_,b,S,C;v=m=x=w=_=b=S=C=.5;var E=[];1===l?(x=1-jo(e,p,f),C=1-jo(e,h,f),E.push(Xo[l])):169===l?(x=jo(s,f,p),C=jo(s,f,h),E.push(Xo[l])):4===l?(b=1-jo(e,c,p),w=jo(e,f,p),E.push(Fo[l])):166===l?(b=jo(s,p,c),w=1-jo(s,p,f),E.push(Fo[l])):16===l?(_=jo(e,p,c),m=jo(e,h,c),E.push(Do[l])):154===l?(_=1-jo(s,c,p),m=1-jo(s,c,h),E.push(Do[l])):64===l?(S=jo(e,f,h),v=1-jo(e,c,h),E.push(Bo[l])):106===l?(S=1-jo(s,h,f),v=jo(s,h,c),E.push(Bo[l])):168===l?(w=jo(s,f,p),x=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),E.push(zo[l]),E.push(Xo[l])):2===l?(w=1-jo(e,p,f),x=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),E.push(zo[l]),E.push(Xo[l])):162===l?(_=jo(s,p,c),b=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),E.push(zo[l]),E.push(Xo[l])):8===l?(_=1-jo(e,c,p),b=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),E.push(Do[l]),E.push(Fo[l])):138===l?(_=1-jo(e,c,p),b=1-jo(s,c,p),v=1-jo(s,c,h),m=1-jo(e,c,h),E.push(Do[l]),E.push(Fo[l])):32===l?(_=jo(s,p,c),b=jo(e,p,c),v=jo(e,h,c),m=jo(s,h,c),E.push(Do[l]),E.push(Fo[l])):42===l?(C=1-jo(s,h,f),S=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c),E.push(Yo[l]),E.push(Bo[l])):128===l&&(C=jo(e,f,h),S=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h),E.push(Yo[l]),E.push(Bo[l])),5===l?(b=1-jo(e,c,p),C=1-jo(e,h,f),E.push(Fo[l])):165===l?(b=jo(s,p,c),C=jo(s,f,h),E.push(Fo[l])):20===l?(w=jo(e,f,p),m=jo(e,h,c),E.push(zo[l])):150===l?(w=1-jo(s,p,f),m=1-jo(s,c,h),E.push(zo[l])):80===l?(_=jo(e,p,c),S=jo(e,f,h),E.push(Do[l])):90===l?(_=1-jo(s,c,p),S=1-jo(s,h,f),E.push(Do[l])):65===l?(x=1-jo(e,p,f),v=1-jo(e,c,h),E.push(Xo[l])):105===l?(x=jo(s,f,p),v=jo(s,h,c),E.push(Xo[l])):160===l?(_=jo(s,p,c),b=jo(e,p,c),C=jo(e,f,h),S=jo(s,f,h),E.push(Do[l]),E.push(Fo[l])):10===l?(_=1-jo(e,c,p),b=1-jo(s,c,p),C=1-jo(s,h,f),S=1-jo(e,h,f),E.push(Do[l]),E.push(Fo[l])):130===l?(w=1-jo(e,p,f),x=1-jo(s,p,f),v=1-jo(s,c,h),m=1-jo(e,c,h),E.push(zo[l]),E.push(Xo[l])):40===l?(w=jo(s,f,p),x=jo(e,f,p),v=jo(e,h,c),m=jo(s,h,c),E.push(zo[l]),E.push(Xo[l])):101===l?(b=jo(s,p,c),v=jo(s,h,c),E.push(Fo[l])):69===l?(b=1-jo(e,c,p),v=1-jo(e,c,h),E.push(Fo[l])):149===l?(C=jo(s,f,h),m=1-jo(s,c,h),E.push(Yo[l])):21===l?(C=1-jo(e,h,f),m=jo(e,h,c),E.push(Yo[l])):86===l?(w=1-jo(s,p,f),S=1-jo(s,h,f),E.push(zo[l])):84===l?(w=jo(e,f,p),S=jo(e,f,h),E.push(zo[l])):89===l?(_=1-jo(s,c,p),x=jo(s,f,p),E.push(Xo[l])):81===l?(_=jo(e,p,c),x=1-jo(e,p,f),E.push(Xo[l])):96===l?(_=jo(s,p,c),b=jo(e,p,c),S=jo(e,f,h),v=jo(s,h,c),E.push(Do[l]),E.push(Fo[l])):74===l?(_=1-jo(e,c,p),b=1-jo(s,c,p),S=1-jo(s,h,f),v=1-jo(e,c,h),E.push(Do[l]),E.push(Fo[l])):24===l?(_=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),m=jo(e,h,c),E.push(Do[l]),E.push(Xo[l])):146===l?(_=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),m=1-jo(s,c,h),E.push(Do[l]),E.push(Xo[l])):6===l?(b=1-jo(e,c,p),w=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),E.push(Fo[l]),E.push(zo[l])):164===l?(b=jo(s,p,c),w=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),E.push(Fo[l]),E.push(zo[l])):129===l?(x=1-jo(e,p,f),C=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h),E.push(Xo[l]),E.push(Yo[l])):41===l?(x=jo(s,f,p),C=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c),E.push(Xo[l]),E.push(Yo[l])):66===l?(w=1-jo(e,p,f),x=1-jo(s,p,f),S=1-jo(s,h,f),v=1-jo(e,c,h),E.push(zo[l]),E.push(Xo[l])):104===l?(w=jo(s,f,p),x=jo(e,f,p),S=jo(e,f,h),v=jo(s,h,c),E.push(Xo[l]),E.push(Go[l])):144===l?(_=jo(e,p,c),C=jo(e,f,h),S=jo(s,f,h),m=1-jo(s,c,h),E.push(Do[l]),E.push(Bo[l])):26===l?(_=1-jo(s,c,p),C=1-jo(s,h,f),S=1-jo(e,h,f),m=jo(e,h,c),E.push(Do[l]),E.push(Bo[l])):36===l?(b=jo(s,p,c),w=jo(e,f,p),v=jo(e,h,c),m=jo(s,h,c),E.push(Fo[l]),E.push(zo[l])):134===l?(b=1-jo(e,c,p),w=1-jo(s,p,f),v=1-jo(s,c,h),m=1-jo(e,c,h),E.push(Fo[l]),E.push(zo[l])):9===l?(_=1-jo(e,c,p),b=1-jo(s,c,p),x=jo(s,f,p),C=1-jo(e,h,f),E.push(Do[l]),E.push(Fo[l])):161===l?(_=jo(s,p,c),b=jo(e,p,c),x=1-jo(e,p,f),C=jo(s,f,h),E.push(Do[l]),E.push(Fo[l])):37===l?(b=jo(s,p,c),C=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c),E.push(Fo[l]),E.push(Yo[l])):133===l?(b=1-jo(e,c,p),C=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h),E.push(Fo[l]),E.push(Yo[l])):148===l?(w=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),m=1-jo(s,c,h),E.push(zo[l]),E.push(Bo[l])):22===l?(w=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),m=jo(e,h,c),E.push(zo[l]),E.push(Bo[l])):82===l?(_=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),S=1-jo(s,h,f),E.push(Do[l]),E.push(Xo[l])):88===l?(_=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),S=jo(e,f,h),E.push(Do[l]),E.push(Xo[l])):73===l?(_=1-jo(e,c,p),b=1-jo(s,c,p),x=jo(s,f,p),v=1-jo(e,c,h),E.push(Do[l]),E.push(Fo[l])):97===l?(_=jo(s,p,c),b=jo(e,p,c),x=1-jo(e,p,f),v=jo(s,h,c),E.push(Do[l]),E.push(Fo[l])):145===l?(_=jo(e,p,c),x=1-jo(e,p,f),C=jo(s,f,h),m=1-jo(s,c,h),E.push(Do[l]),E.push(Yo[l])):25===l?(_=1-jo(s,c,p),x=jo(s,f,p),C=1-jo(e,h,f),m=jo(e,h,c),E.push(Do[l]),E.push(Yo[l])):70===l?(b=1-jo(e,c,p),w=1-jo(s,p,f),S=1-jo(s,h,f),v=1-jo(e,c,h),E.push(Fo[l]),E.push(zo[l])):100===l?(b=jo(s,p,c),w=jo(e,f,p),S=jo(e,f,h),v=jo(s,h,c),E.push(Fo[l]),E.push(zo[l])):34===l?(0===d?(_=1-jo(e,c,p),b=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h)):(_=jo(s,p,c),b=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c)),E.push(Do[l]),E.push(Fo[l]),E.push(Yo[l]),E.push(Bo[l])):35===l?(4===d?(_=1-jo(e,c,p),b=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h)):(_=jo(s,p,c),b=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c)),E.push(Do[l]),E.push(Fo[l]),E.push(Xo[l]),E.push(Bo[l])):136===l?(0===d?(_=jo(s,p,c),b=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c)):(_=1-jo(e,c,p),b=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h)),E.push(Do[l]),E.push(Fo[l]),E.push(Yo[l]),E.push(Bo[l])):153===l?(0===d?(_=jo(e,p,c),x=1-jo(e,p,f),C=1-jo(e,h,f),m=jo(e,h,c)):(_=1-jo(s,c,p),x=jo(s,f,p),C=jo(s,f,h),m=1-jo(s,c,h)),E.push(Do[l]),E.push(Xo[l])):102===l?(0===d?(b=1-jo(e,c,p),w=jo(e,f,p),S=jo(e,f,h),v=1-jo(e,c,h)):(b=jo(s,p,c),w=1-jo(s,p,f),S=1-jo(s,h,f),v=jo(s,h,c)),E.push(Fo[l]),E.push(Bo[l])):155===l?(4===d?(_=jo(e,p,c),x=1-jo(e,p,f),C=1-jo(e,h,f),m=jo(e,h,c)):(_=1-jo(s,c,p),x=jo(s,f,p),C=jo(s,f,h),m=1-jo(s,c,h)),E.push(Do[l]),E.push(Yo[l])):103===l?(4===d?(b=1-jo(e,c,p),w=jo(e,f,p),S=jo(e,f,h),v=1-jo(e,c,h)):(b=jo(s,p,c),w=1-jo(s,p,f),S=1-jo(s,h,f),v=jo(s,h,c)),E.push(Fo[l]),E.push(zo[l])):152===l?(0===d?(_=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),m=jo(e,h,c)):(_=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),m=1-jo(s,c,h)),E.push(Do[l]),E.push(zo[l]),E.push(Xo[l])):156===l?(4===d?(_=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),m=jo(e,h,c)):(_=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),m=1-jo(s,c,h)),E.push(Do[l]),E.push(Xo[l]),E.push(Bo[l])):137===l?(0===d?(_=jo(s,p,c),b=jo(e,p,c),x=1-jo(e,p,f),C=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c)):(_=1-jo(e,c,p),b=1-jo(s,c,p),x=jo(s,f,p),C=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h)),E.push(Do[l]),E.push(Fo[l]),E.push(Xo[l])):139===l?(4===d?(_=jo(s,p,c),b=jo(e,p,c),x=1-jo(e,p,f),C=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c)):(_=1-jo(e,c,p),b=1-jo(s,c,p),x=jo(s,f,p),C=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h)),E.push(Do[l]),E.push(Fo[l]),E.push(Yo[l])):98===l?(0===d?(_=1-jo(e,c,p),b=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),S=jo(e,f,h),v=1-jo(e,c,h)):(_=jo(s,p,c),b=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),S=1-jo(s,h,f),v=jo(s,h,c)),E.push(Do[l]),E.push(Fo[l]),E.push(Bo[l])):99===l?(4===d?(_=1-jo(e,c,p),b=1-jo(s,c,p),w=jo(s,f,p),x=jo(e,f,p),S=jo(e,f,h),v=1-jo(e,c,h)):(_=jo(s,p,c),b=jo(e,p,c),w=1-jo(e,p,f),x=1-jo(s,p,f),S=1-jo(s,h,f),v=jo(s,h,c)),E.push(Do[l]),E.push(Fo[l]),E.push(Xo[l])):38===l?(0===d?(b=1-jo(e,c,p),w=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h)):(b=jo(s,p,c),w=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c)),E.push(Fo[l]),E.push(Yo[l]),E.push(Bo[l])):39===l?(4===d?(b=1-jo(e,c,p),w=jo(e,f,p),C=jo(e,f,h),S=jo(s,f,h),v=1-jo(s,c,h),m=1-jo(e,c,h)):(b=jo(s,p,c),w=1-jo(s,p,f),C=1-jo(s,h,f),S=1-jo(e,h,f),v=jo(e,h,c),m=jo(s,h,c)),E.push(Fo[l]),E.push(zo[l]),E.push(Bo[l])):85===l&&(_=1,b=0,w=1,x=0,C=0,S=1,v=0,m=1),(v<0||v>1||m<0||m>1||_<0||_>1||w<0||w>1||C<0||C>1||S<0||S>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+g+" "+h+","+c+","+p+","+f+" "+d+" "+v+" "+m+" "+_+" "+b+" "+w+" "+x+" "+C+" "+S),o.cells[a][u]={cval:l,cval_real:g,flipped:d,topleft:v,topright:m,righttop:_,rightbottom:b,bottomright:w,bottomleft:x,leftbottom:C,lefttop:S,edges:E}}}}}return o}(t,e,n);return Kr.polygons?(Kr.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=Ho[t.cval](t);"object"==typeof o&&Wo(o)?"object"==typeof o[0]&&Wo(o[0])?"object"==typeof o[0][0]&&Wo(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(l)):(Kr.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Uo(t.cells[o][s]),u=null,l=s,h=o;null!==a&&i.push([a.p[0]+l,a.p[1]+h]);do{if(null===(u=Zo(t.cells[h][l],a.x,a.y,a.o)))break;if(i.push([u.p[0]+l,u.p[1]+h]),l+=u.x,a=u,(h+=u.y)<0||h>=n||l<0||l>=r||void 0===t.cells[h][l]){var c=qo(t,l-=u.x,h-=u.y,u.x,u.y,u.o);if(null===c)break;c.path.forEach((function(t){i.push(t)})),l=c.i,h=c.j,a=c}}while(void 0!==t.cells[h][l]&&t.cells[h][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof Kr.successCallback&&Kr.successCallback(u),u}var eo=64,io=16,no=[],ro=[],oo=[],so=[],ao=[],lo=[],ho=[],co=[],uo=[],po=[],fo=[],go=[],yo=[],vo=[],mo=[],xo=[],bo=[],wo=[],_o=[],So=[],Co=[],Eo=[],Ao=[],Io=[];ho[85]=po[85]=-1,co[85]=fo[85]=0,uo[85]=go[85]=1,_o[85]=Eo[85]=1,So[85]=Ao[85]=0,Co[85]=Io[85]=1,no[85]=so[85]=0,ro[85]=ao[85]=-1,oo[85]=mo[85]=0,xo[85]=yo[85]=0,bo[85]=vo[85]=1,lo[85]=wo[85]=1,Eo[1]=Eo[169]=0,Ao[1]=Ao[169]=-1,Io[1]=Io[169]=0,yo[1]=yo[169]=-1,vo[1]=vo[169]=0,mo[1]=mo[169]=0,po[4]=po[166]=0,fo[4]=fo[166]=-1,go[4]=go[166]=1,xo[4]=xo[166]=1,bo[4]=bo[166]=0,wo[4]=wo[166]=0,ho[16]=ho[154]=0,co[16]=co[154]=1,uo[16]=uo[154]=1,so[16]=so[154]=1,ao[16]=ao[154]=0,lo[16]=lo[154]=1,_o[64]=_o[106]=0,So[64]=So[106]=1,Co[64]=Co[106]=0,no[64]=no[106]=-1,ro[64]=ro[106]=0,oo[64]=oo[106]=1,_o[2]=_o[168]=0,So[2]=So[168]=-1,Co[2]=Co[168]=1,Eo[2]=Eo[168]=0,Ao[2]=Ao[168]=-1,Io[2]=Io[168]=0,yo[2]=yo[168]=-1,vo[2]=vo[168]=0,mo[2]=mo[168]=0,xo[2]=xo[168]=-1,bo[2]=bo[168]=0,wo[2]=wo[168]=1,ho[8]=ho[162]=0,co[8]=co[162]=-1,uo[8]=uo[162]=0,po[8]=po[162]=0,fo[8]=fo[162]=-1,go[8]=go[162]=1,yo[8]=yo[162]=1,vo[8]=vo[162]=0,mo[8]=mo[162]=1,xo[8]=xo[162]=1,bo[8]=bo[162]=0,wo[8]=wo[162]=0,ho[32]=ho[138]=0,co[32]=co[138]=1,uo[32]=uo[138]=1,po[32]=po[138]=0,fo[32]=fo[138]=1,go[32]=go[138]=0,no[32]=no[138]=1,ro[32]=ro[138]=0,oo[32]=oo[138]=0,so[32]=so[138]=1,ao[32]=ao[138]=0,lo[32]=lo[138]=1,Eo[128]=Eo[42]=0,Ao[128]=Ao[42]=1,Io[128]=Io[42]=1,_o[128]=_o[42]=0,So[128]=So[42]=1,Co[128]=Co[42]=0,no[128]=no[42]=-1,ro[128]=ro[42]=0,oo[128]=oo[42]=1,so[128]=so[42]=-1,ao[128]=ao[42]=0,lo[128]=lo[42]=0,po[5]=po[165]=-1,fo[5]=fo[165]=0,go[5]=go[165]=0,Eo[5]=Eo[165]=1,Ao[5]=Ao[165]=0,Io[5]=Io[165]=0,xo[20]=xo[150]=0,bo[20]=bo[150]=1,wo[20]=wo[150]=1,so[20]=so[150]=0,ao[20]=ao[150]=-1,lo[20]=lo[150]=1,ho[80]=ho[90]=-1,co[80]=co[90]=0,uo[80]=uo[90]=1,_o[80]=_o[90]=1,So[80]=So[90]=0,Co[80]=Co[90]=1,yo[65]=yo[105]=0,vo[65]=vo[105]=1,mo[65]=mo[105]=0,no[65]=no[105]=0,ro[65]=ro[105]=-1,oo[65]=oo[105]=0,ho[160]=ho[10]=-1,co[160]=co[10]=0,uo[160]=uo[10]=1,po[160]=po[10]=-1,fo[160]=fo[10]=0,go[160]=go[10]=0,Eo[160]=Eo[10]=1,Ao[160]=Ao[10]=0,Io[160]=Io[10]=0,_o[160]=_o[10]=1,So[160]=So[10]=0,Co[160]=Co[10]=1,xo[130]=xo[40]=0,bo[130]=bo[40]=1,wo[130]=wo[40]=1,yo[130]=yo[40]=0,vo[130]=vo[40]=1,mo[130]=mo[40]=0,no[130]=no[40]=0,ro[130]=ro[40]=-1,oo[130]=oo[40]=0,so[130]=so[40]=0,ao[130]=ao[40]=-1,lo[130]=lo[40]=1,po[37]=po[133]=0,fo[37]=fo[133]=1,go[37]=go[133]=1,Eo[37]=Eo[133]=0,Ao[37]=Ao[133]=1,Io[37]=Io[133]=0,no[37]=no[133]=-1,ro[37]=ro[133]=0,oo[37]=oo[133]=0,so[37]=so[133]=1,ao[37]=ao[133]=0,lo[37]=lo[133]=0,xo[148]=xo[22]=-1,bo[148]=bo[22]=0,wo[148]=wo[22]=0,Eo[148]=Eo[22]=0,Ao[148]=Ao[22]=-1,Io[148]=Io[22]=1,_o[148]=_o[22]=0,So[148]=So[22]=1,Co[148]=Co[22]=1,so[148]=so[22]=-1,ao[148]=ao[22]=0,lo[148]=lo[22]=1,ho[82]=ho[88]=0,co[82]=co[88]=-1,uo[82]=uo[88]=1,xo[82]=xo[88]=1,bo[82]=bo[88]=0,wo[82]=wo[88]=1,yo[82]=yo[88]=-1,vo[82]=vo[88]=0,mo[82]=mo[88]=1,_o[82]=_o[88]=0,So[82]=So[88]=-1,Co[82]=Co[88]=0,ho[73]=ho[97]=0,co[73]=co[97]=1,uo[73]=uo[97]=0,po[73]=po[97]=0,fo[73]=fo[97]=-1,go[73]=go[97]=0,yo[73]=yo[97]=1,vo[73]=vo[97]=0,mo[73]=mo[97]=0,no[73]=no[97]=1,ro[73]=ro[97]=0,oo[73]=oo[97]=1,ho[145]=ho[25]=0,co[145]=co[25]=-1,uo[145]=uo[25]=0,yo[145]=yo[25]=1,vo[145]=vo[25]=0,mo[145]=mo[25]=1,Eo[145]=Eo[25]=0,Ao[145]=Ao[25]=1,Io[145]=Io[25]=1,so[145]=so[25]=-1,ao[145]=ao[25]=0,lo[145]=lo[25]=0,po[70]=po[100]=0,fo[70]=fo[100]=1,go[70]=go[100]=0,xo[70]=xo[100]=-1,bo[70]=bo[100]=0,wo[70]=wo[100]=1,_o[70]=_o[100]=0,So[70]=So[100]=-1,Co[70]=Co[100]=1,no[70]=no[100]=1,ro[70]=ro[100]=0,oo[70]=oo[100]=0,po[101]=po[69]=0,fo[101]=fo[69]=1,go[101]=go[69]=0,no[101]=no[69]=1,ro[101]=ro[69]=0,oo[101]=oo[69]=0,Eo[149]=Eo[21]=0,Ao[149]=Ao[21]=1,Io[149]=Io[21]=1,so[149]=so[21]=-1,ao[149]=ao[21]=0,lo[149]=lo[21]=0,xo[86]=xo[84]=-1,bo[86]=bo[84]=0,wo[86]=wo[84]=1,_o[86]=_o[84]=0,So[86]=So[84]=-1,Co[86]=Co[84]=1,ho[89]=ho[81]=0,co[89]=co[81]=-1,uo[89]=uo[81]=0,yo[89]=yo[81]=1,vo[89]=vo[81]=0,mo[89]=mo[81]=1,ho[96]=ho[74]=0,co[96]=co[74]=1,uo[96]=uo[74]=0,po[96]=po[74]=-1,fo[96]=fo[74]=0,go[96]=go[74]=1,_o[96]=_o[74]=1,So[96]=So[74]=0,Co[96]=Co[74]=0,no[96]=no[74]=1,ro[96]=ro[74]=0,oo[96]=oo[74]=1,ho[24]=ho[146]=0,co[24]=co[146]=-1,uo[24]=uo[146]=1,xo[24]=xo[146]=1,bo[24]=bo[146]=0,wo[24]=wo[146]=1,yo[24]=yo[146]=0,vo[24]=vo[146]=1,mo[24]=mo[146]=1,so[24]=so[146]=0,ao[24]=ao[146]=-1,lo[24]=lo[146]=0,po[6]=po[164]=-1,fo[6]=fo[164]=0,go[6]=go[164]=1,xo[6]=xo[164]=-1,bo[6]=bo[164]=0,wo[6]=wo[164]=0,Eo[6]=Eo[164]=0,Ao[6]=Ao[164]=-1,Io[6]=Io[164]=1,_o[6]=_o[164]=1,So[6]=So[164]=0,Co[6]=Co[164]=0,yo[129]=yo[41]=0,vo[129]=vo[41]=1,mo[129]=mo[41]=1,Eo[129]=Eo[41]=0,Ao[129]=Ao[41]=1,Io[129]=Io[41]=0,no[129]=no[41]=-1,ro[129]=ro[41]=0,oo[129]=oo[41]=0,so[129]=so[41]=0,ao[129]=ao[41]=-1,lo[129]=lo[41]=0,xo[66]=xo[104]=0,bo[66]=bo[104]=1,wo[66]=wo[104]=0,yo[66]=yo[104]=-1,vo[66]=vo[104]=0,mo[66]=mo[104]=1,_o[66]=_o[104]=0,So[66]=So[104]=-1,Co[66]=Co[104]=0,no[66]=no[104]=0,ro[66]=ro[104]=-1,oo[66]=oo[104]=1,ho[144]=ho[26]=-1,co[144]=co[26]=0,uo[144]=uo[26]=0,Eo[144]=Eo[26]=1,Ao[144]=Ao[26]=0,Io[144]=Io[26]=1,_o[144]=_o[26]=0,So[144]=So[26]=1,Co[144]=Co[26]=1,so[144]=so[26]=-1,ao[144]=ao[26]=0,lo[144]=lo[26]=1,po[36]=po[134]=0,fo[36]=fo[134]=1,go[36]=go[134]=1,xo[36]=xo[134]=0,bo[36]=bo[134]=1,wo[36]=wo[134]=0,no[36]=no[134]=0,ro[36]=ro[134]=-1,oo[36]=oo[134]=1,so[36]=so[134]=1,ao[36]=ao[134]=0,lo[36]=lo[134]=0,ho[9]=ho[161]=-1,co[9]=co[161]=0,uo[9]=uo[161]=0,po[9]=po[161]=0,fo[9]=fo[161]=-1,go[9]=go[161]=0,yo[9]=yo[161]=1,vo[9]=vo[161]=0,mo[9]=mo[161]=0,Eo[9]=Eo[161]=1,Ao[9]=Ao[161]=0,Io[9]=Io[161]=1,ho[136]=0,co[136]=1,uo[136]=1,po[136]=0,fo[136]=1,go[136]=0,xo[136]=-1,bo[136]=0,wo[136]=1,yo[136]=-1,vo[136]=0,mo[136]=0,Eo[136]=0,Ao[136]=-1,Io[136]=0,_o[136]=0,So[136]=-1,Co[136]=1,no[136]=1,ro[136]=0,oo[136]=0,so[136]=1,ao[136]=0,lo[136]=1,ho[34]=0,co[34]=-1,uo[34]=0,po[34]=0,fo[34]=-1,go[34]=1,xo[34]=1,bo[34]=0,wo[34]=0,yo[34]=1,vo[34]=0,mo[34]=1,Eo[34]=0,Ao[34]=1,Io[34]=1,_o[34]=0,So[34]=1,Co[34]=0,no[34]=-1,ro[34]=0,oo[34]=1,so[34]=-1,ao[34]=0,lo[34]=0,ho[35]=0,co[35]=1,uo[35]=1,po[35]=0,fo[35]=-1,go[35]=1,xo[35]=1,bo[35]=0,wo[35]=0,yo[35]=-1,vo[35]=0,mo[35]=0,Eo[35]=0,Ao[35]=-1,Io[35]=0,_o[35]=0,So[35]=1,Co[35]=0,no[35]=-1,ro[35]=0,oo[35]=1,so[35]=1,ao[35]=0,lo[35]=1,ho[153]=0,co[153]=1,uo[153]=1,yo[153]=-1,vo[153]=0,mo[153]=0,Eo[153]=0,Ao[153]=-1,Io[153]=0,so[153]=1,ao[153]=0,lo[153]=1,po[102]=0,fo[102]=-1,go[102]=1,xo[102]=1,bo[102]=0,wo[102]=0,_o[102]=0,So[102]=1,Co[102]=0,no[102]=-1,ro[102]=0,oo[102]=1,ho[155]=0,co[155]=-1,uo[155]=0,yo[155]=1,vo[155]=0,mo[155]=1,Eo[155]=0,Ao[155]=1,Io[155]=1,so[155]=-1,ao[155]=0,lo[155]=0,po[103]=0,fo[103]=1,go[103]=0,xo[103]=-1,bo[103]=0,wo[103]=1,_o[103]=0,So[103]=-1,Co[103]=1,no[103]=1,ro[103]=0,oo[103]=0,ho[152]=0,co[152]=1,uo[152]=1,xo[152]=-1,bo[152]=0,wo[152]=1,yo[152]=-1,vo[152]=0,mo[152]=0,Eo[152]=0,Ao[152]=-1,Io[152]=0,_o[152]=0,So[152]=-1,Co[152]=1,so[152]=1,ao[152]=0,lo[152]=1,ho[156]=0,co[156]=-1,uo[156]=1,xo[156]=1,bo[156]=0,wo[156]=1,yo[156]=-1,vo[156]=0,mo[156]=0,Eo[156]=0,Ao[156]=-1,Io[156]=0,_o[156]=0,So[156]=1,Co[156]=1,so[156]=-1,ao[156]=0,lo[156]=1,ho[137]=0,co[137]=1,uo[137]=1,po[137]=0,fo[137]=1,go[137]=0,yo[137]=-1,vo[137]=0,mo[137]=0,Eo[137]=0,Ao[137]=-1,Io[137]=0,no[137]=1,ro[137]=0,oo[137]=0,so[137]=1,ao[137]=0,lo[137]=1,ho[139]=0,co[139]=1,uo[139]=1,po[139]=0,fo[139]=-1,go[139]=0,yo[139]=1,vo[139]=0,mo[139]=0,Eo[139]=0,Ao[139]=1,Io[139]=0,no[139]=-1,ro[139]=0,oo[139]=0,so[139]=1,ao[139]=0,lo[139]=1,ho[98]=0,co[98]=-1,uo[98]=0,po[98]=0,fo[98]=-1,go[98]=1,xo[98]=1,bo[98]=0,wo[98]=0,yo[98]=1,vo[98]=0,mo[98]=1,_o[98]=0,So[98]=1,Co[98]=0,no[98]=-1,ro[98]=0,oo[98]=1,ho[99]=0,co[99]=1,uo[99]=0,po[99]=0,fo[99]=-1,go[99]=1,xo[99]=1,bo[99]=0,wo[99]=0,yo[99]=-1,vo[99]=0,mo[99]=1,_o[99]=0,So[99]=-1,Co[99]=0,no[99]=1,ro[99]=0,oo[99]=1,po[38]=0,fo[38]=-1,go[38]=1,xo[38]=1,bo[38]=0,wo[38]=0,Eo[38]=0,Ao[38]=1,Io[38]=1,_o[38]=0,So[38]=1,Co[38]=0,no[38]=-1,ro[38]=0,oo[38]=1,so[38]=-1,ao[38]=0,lo[38]=0,po[39]=0,fo[39]=1,go[39]=1,xo[39]=-1,bo[39]=0,wo[39]=0,Eo[39]=0,Ao[39]=-1,Io[39]=1,_o[39]=0,So[39]=1,Co[39]=0,no[39]=-1,ro[39]=0,oo[39]=1,so[39]=1,ao[39]=0,lo[39]=0;var ko=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Po=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Lo=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Mo=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},No=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},To=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Oo=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ro=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Do=[],Fo=[],zo=[],Xo=[],Yo=[],Bo=[],Go=[],Vo=[];Xo[1]=Yo[1]=18,Xo[169]=Yo[169]=18,zo[4]=Fo[4]=12,zo[166]=Fo[166]=12,Do[16]=Vo[16]=4,Do[154]=Vo[154]=4,Bo[64]=Go[64]=22,Bo[106]=Go[106]=22,zo[2]=Bo[2]=17,Xo[2]=Yo[2]=18,zo[168]=Bo[168]=17,Xo[168]=Yo[168]=18,Do[8]=Xo[8]=9,Fo[8]=zo[8]=12,Do[162]=Xo[162]=9,Fo[162]=zo[162]=12,Do[32]=Vo[32]=4,Fo[32]=Go[32]=1,Do[138]=Vo[138]=4,Fo[138]=Go[138]=1,Yo[128]=Vo[128]=21,Bo[128]=Go[128]=22,Yo[42]=Vo[42]=21,Bo[42]=Go[42]=22,Fo[5]=Yo[5]=14,Fo[165]=Yo[165]=14,zo[20]=Vo[20]=6,zo[150]=Vo[150]=6,Do[80]=Bo[80]=11,Do[90]=Bo[90]=11,Xo[65]=Go[65]=3,Xo[105]=Go[105]=3,Do[160]=Bo[160]=11,Fo[160]=Yo[160]=14,Do[10]=Bo[10]=11,Fo[10]=Yo[10]=14,zo[130]=Vo[130]=6,Xo[130]=Go[130]=3,zo[40]=Vo[40]=6,Xo[40]=Go[40]=3,Fo[101]=Go[101]=1,Fo[69]=Go[69]=1,Yo[149]=Vo[149]=21,Yo[21]=Vo[21]=21,zo[86]=Bo[86]=17,zo[84]=Bo[84]=17,Do[89]=Xo[89]=9,Do[81]=Xo[81]=9,Do[96]=Go[96]=0,Fo[96]=Bo[96]=15,Do[74]=Go[74]=0,Fo[74]=Bo[74]=15,Do[24]=zo[24]=8,Xo[24]=Vo[24]=7,Do[146]=zo[146]=8,Xo[146]=Vo[146]=7,Fo[6]=Bo[6]=15,zo[6]=Yo[6]=16,Fo[164]=Bo[164]=15,zo[164]=Yo[164]=16,Xo[129]=Vo[129]=7,Yo[129]=Go[129]=20,Xo[41]=Vo[41]=7,Yo[41]=Go[41]=20,zo[66]=Go[66]=2,Xo[66]=Bo[66]=19,zo[104]=Go[104]=2,Xo[104]=Bo[104]=19,Do[144]=Yo[144]=10,Bo[144]=Vo[144]=23,Do[26]=Yo[26]=10,Bo[26]=Vo[26]=23,Fo[36]=Vo[36]=5,zo[36]=Go[36]=2,Fo[134]=Vo[134]=5,zo[134]=Go[134]=2,Do[9]=Yo[9]=10,Fo[9]=Xo[9]=13,Do[161]=Yo[161]=10,Fo[161]=Xo[161]=13,Fo[37]=Vo[37]=5,Yo[37]=Go[37]=20,Fo[133]=Vo[133]=5,Yo[133]=Go[133]=20,zo[148]=Yo[148]=16,Bo[148]=Vo[148]=23,zo[22]=Yo[22]=16,Bo[22]=Vo[22]=23,Do[82]=zo[82]=8,Xo[82]=Bo[82]=19,Do[88]=zo[88]=8,Xo[88]=Bo[88]=19,Do[73]=Go[73]=0,Fo[73]=Xo[73]=13,Do[97]=Go[97]=0,Fo[97]=Xo[97]=13,Do[145]=Xo[145]=9,Yo[145]=Vo[145]=21,Do[25]=Xo[25]=9,Yo[25]=Vo[25]=21,Fo[70]=Go[70]=1,zo[70]=Bo[70]=17,Fo[100]=Go[100]=1,zo[100]=Bo[100]=17,Do[34]=Xo[34]=9,Fo[34]=zo[34]=12,Yo[34]=Vo[34]=21,Bo[34]=Go[34]=22,Do[136]=Vo[136]=4,Fo[136]=Go[136]=1,zo[136]=Bo[136]=17,Xo[136]=Yo[136]=18,Do[35]=Vo[35]=4,Fo[35]=zo[35]=12,Xo[35]=Yo[35]=18,Bo[35]=Go[35]=22,Do[153]=Vo[153]=4,Xo[153]=Yo[153]=18,Fo[102]=zo[102]=12,Bo[102]=Go[102]=22,Do[155]=Xo[155]=9,Yo[155]=Vo[155]=23,Fo[103]=Go[103]=1,zo[103]=Bo[103]=17,Do[152]=Vo[152]=4,zo[152]=Bo[152]=17,Xo[152]=Yo[152]=18,Do[156]=zo[156]=8,Xo[156]=Yo[156]=18,Bo[156]=Vo[156]=23,Do[137]=Vo[137]=4,Fo[137]=Go[137]=1,Xo[137]=Yo[137]=18,Do[139]=Vo[139]=4,Fo[139]=Xo[139]=13,Yo[139]=Go[139]=20,Do[98]=Xo[98]=9,Fo[98]=zo[98]=12,Bo[98]=Go[98]=22,Do[99]=Go[99]=0,Fo[99]=zo[99]=12,Xo[99]=Bo[99]=19,Fo[38]=zo[38]=12,Yo[38]=Vo[38]=21,Bo[38]=Go[38]=22,Fo[39]=Vo[39]=5,zo[39]=Yo[39]=16,Bo[39]=Go[39]=22;var Ho=[];function jo(t,e,n){return(t-e)/(n-e)}function Wo(t){return t.constructor.toString().indexOf("Array")>-1}function qo(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,l=n+i,h=[],c=!1;!c;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=r,a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(1&a)h.push([u,l]),r=-1,i=0,o=0;else{if(!(4&a)){h.push([u+s.bottomright,l]),r=0,i=1,o=1,c=!0;break}h.push([u+1,l]),r=1,i=0,o=0}else{if(!(1&a)){if(4&a){h.push([u+s.bottomright,l]),r=0,i=1,o=1,c=!0;break}h.push([u+s.bottomleft,l]),r=0,i=1,o=0,c=!0;break}h.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&io)){if(a&eo){h.push([u+s.topleft,l+1]),r=0,i=-1,o=0,c=!0;break}h.push([u+s.topright,l+1]),r=0,i=-1,o=1,c=!0;break}h.push([u+1,l+1]),r=1,i=0,o=1}else h.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&eo)){if(1&a){h.push([u,l+s.leftbottom]),r=1,i=0,o=0,c=!0;break}h.push([u,l+s.lefttop]),r=1,i=0,o=1,c=!0;break}h.push([u,l+1]),r=0,i=1,o=0}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: wtf");break}h.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){h.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,c=!0;break}h.push([u+1,l]),r=0,i=-1,o=1}else{if(!(4&a)){if(a&io){h.push([u+1,l+s.righttop]),r=-1,i=0,o=1;break}h.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,c=!0;break}h.push([u+1,l]),r=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(1&a)){h.push([u+s.bottomright,l]),r=0,i=1,o=1,c=!0;break}h.push([u,l])}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(a&io)){h.push([u+s.topleft,l+1]),r=0,i=-1,o=0,c=!0;break}h.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(4&a)){h.push([u+1,l+s.righttop]),r=-1,i=0,o=1,c=!0;break}h.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(a&eo)){h.push([u,l+s.leftbottom]),r=1,i=0,o=0,c=!0;break}h.push([u,l+1]),r=0,i=1,o=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:h,i:u,j:l,x:r,y:i,o:o}}function Uo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&io?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&io?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&eo?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&eo?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&eo?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&io?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&io?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Zo(t,e,n,r){var i,o,s,a,u,l=t.cval;switch(e){case-1:0===r?(i=Fo[l],s=po[l],a=fo[l],u=go[l]):(i=Do[l],s=ho[l],a=co[l],u=uo[l]);break;case 1:0===r?(i=Yo[l],s=Eo[l],a=Ao[l],u=Io[l]):(i=Bo[l],s=_o[l],a=So[l],u=Co[l]);break;default:switch(n){case-1:0===r?(i=Go[l],s=no[l],a=ro[l],u=oo[l]):(i=Vo[l],s=so[l],a=ao[l],u=lo[l]);break;case 1:0===r?(i=Xo[l],s=yo[l],a=vo[l],u=mo[l]):(i=zo[l],s=xo[l],a=bo[l],u=wo[l])}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&io?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&l?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&l?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&l?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&io?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&l?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&l?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&l?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&l?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&l?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&l?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&eo?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&l?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&l?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&l?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&eo?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&l?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&eo?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&l?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&eo?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&eo?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&io?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&eo?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&io?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function $o(t){var e=[],n=[];t.forEach((function(t){var r=Bn(h([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function Jo(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!Ko(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=h([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||Qo(h([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function Qo(t,e){for(var n=Si(t),r=0;r<n.features.length;r++)if(!ve(n.features[r],e))return!1;return!0}function Ko(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function ts(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=_i(t)),!1!==i&&void 0!==i||(t=Ee(t)),T(t,(function(t){var n=Br(r,t)+e,i=Tn(r,t),o=K(Vr(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function es(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Ee(t)),"FeatureCollection"!==t.type||o?is(t,e,r):(F(t,(function(n,i){t.features[i]=is(n,e,r)})),t)}function is(t,e,n){var r="Point"===ot(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return Q(e);var n=t.bbox?t.bbox:J(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return a([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return a([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return a([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return a([o,s]);case"center":return wi(t);case void 0:case null:case"centroid":return _i(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||T(t,(function(t){var r=Tn(n,t),i=Br(n,t),o=K(Vr(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ns(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function rs(t,e){return t[0]*e[1]-e[0]*t[1]}function os(t,e){return!function(t,e){return 0===rs(ns(t),ns(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=ns(t),s=e[0],a=ns(e),u=rs(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(rs((r=i,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,o))}(t,e)}function ss(t,e,n){var r=[],i=S(e,n),o=K(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(l=t,h=o[e+1],c=i,p=Math.sqrt((l[0]-h[0])*(l[0]-h[0])+(l[1]-h[1])*(l[1]-h[1])),f=l[0]+c*(h[1]-l[1])/p,g=h[0]+c*(h[1]-l[1])/p,[[f,l[1]+c*(l[0]-h[0])/p],[g,h[1]+c*(l[0]-h[0])/p]]);if(r.push(n),e>0){var a=r[e-1],u=os(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var l,h,c,p,f,g})),f(s,t.properties)}function as(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function ls(t,e){return e.geometry.coordinates[0].every((function(e){return ve(a(e),t)}))}Ho[1]=Ho[169]=ko,Ho[4]=Ho[166]=Po,Ho[16]=Ho[154]=Lo,Ho[64]=Ho[106]=Mo,Ho[168]=Ho[2]=No,Ho[162]=Ho[8]=To,Ho[138]=Ho[32]=Oo,Ho[42]=Ho[128]=Ro,Ho[5]=Ho[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Ho[20]=Ho[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Ho[80]=Ho[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Ho[65]=Ho[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ho[160]=Ho[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Ho[130]=Ho[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Ho[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ho[101]=Ho[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Ho[149]=Ho[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Ho[86]=Ho[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Ho[89]=Ho[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Ho[96]=Ho[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Ho[24]=Ho[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Ho[6]=Ho[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Ho[129]=Ho[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Ho[66]=Ho[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ho[144]=Ho[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ho[36]=Ho[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Ho[9]=Ho[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ho[37]=Ho[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ho[148]=Ho[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ho[82]=Ho[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Ho[73]=Ho[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ho[145]=Ho[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ho[70]=Ho[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ho[34]=function(t){return[Ro(t),To(t)]},Ho[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ho[136]=function(t){return[Oo(t),No(t)]},Ho[153]=function(t){return[Lo(t),ko(t)]},Ho[102]=function(t){return[Po(t),Mo(t)]},Ho[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ho[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ho[152]=function(t){return[Lo(t),No(t)]},Ho[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ho[137]=function(t){return[Oo(t),ko(t)]},Ho[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ho[98]=function(t){return[To(t),Mo(t)]},Ho[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ho[38]=function(t){return[Po(t),Ro(t)]},Ho[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var hs=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=as(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),cs=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return as(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),us=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=as(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return y(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=h([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=yi(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,s,u,l,h,c,p=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=i,u=(o=p).geometry.coordinates[0].map((function(t){return t[0]})),l=o.geometry.coordinates[0].map((function(t){return t[1]})),h=s.geometry.coordinates[0].map((function(t){return t[0]})),c=s.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,u)!==Math.max.apply(null,h)||Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,h)||Math.min.apply(null,l)!==Math.min.apply(null,c))&&ls(p,i)){for(var f=t.map((function(t){return t.from.coordinates})),g=void 0,d=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(g=t)},y=0,v=f;y<v.length;y++)d(v[y]);g&&e.inside(a(g))&&(r&&!ls(n,p)||(r=e))}})),r},t.prototype.inside=function(t){return ve(t,this.toPolygon())},t}(),ps=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return B(e,(function(t){it(t,"LineString","Graph::fromGeoJson"),O(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=hs.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new hs(t)),n},t.prototype.addEdge=function(t,e){var n=new cs(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new us;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function fs(t,e){var n=!0;return B(t,(function(t){B(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!ds(e,t);case"Polygon":return!ve(t,e)}break;case"LineString":switch(e.type){case"Point":return!ds(t,e);case"LineString":return!function(t,e){return Ln(t,e).features.length>0}(t,e);case"Polygon":return!gs(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ve(e,t);case"LineString":return!gs(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(ve(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(ve(o[i],t))return!0;return Ln(Er(t),Er(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function ds(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(ys(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function gs(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(ve(r[n],t))return!0;return Ln(e,Er(t)).features.length>0}function ys(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function vs(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function ms(t,e){return t[0]===e[0]&&t[1]===e[1]}function xs(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function bs(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Ss(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function ws(t,e){return Ln(t,Ar(e)).features.length>0}function _s(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)ve(a(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function Ss(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Cs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Is};function Es(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function As(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Is(t,e){return Fr(t,e,{strict:!0})}Cs.prototype.compare=function(t,e){if(t.type!==e.type||!As(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Es(t),i=Es(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},Cs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Cs.prototype.compareLine=function(t,e,n,r){if(!As(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Cs.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Cs.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Cs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},Cs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Cs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Cs.prototype.removePseudo=function(t){return t};var ks=Cs;function Ps(t,e){var n=!1;return B(t,(function(t){B(e,(function(e){if(!0===n)return!0;n=!fs(t.geometry,e.geometry)}))})),n}var Ls=Bt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ms=Bt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(h),a=0,u=0;u<h;u++)s[u]=0;for(var l=0;l<n;l++){var h=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<h;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<h;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ns=Bt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),Ts=Bt((function(t){if(t.exports)var e=Ns;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),Os=Bt((function(t){t.exports&&(t.exports={DBSCAN:Ls,KMEANS:Ms,OPTICS:Ts,PriorityQueue:Ns})})),Rs=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},Ds=Rs,Fs=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},zs=Rs,Xs=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},Ys=function(t,e){var n=t[0].length?Ds:Fs,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,h=[],c=0;c<i;c++){for(var p=1/0,f=0;f<u;f++){var g=n(t[c],r[f]);g<=p&&(p=g)}a[c]=p}for(var d=0;d<i;d++)l+=a[d];for(var y=0;y<i;y++)h[y]={i:y,v:t[y],pr:a[y]/l,cs:0};h.sort((function(t,e){return t.pr-e.pr})),h[0].cs=h[0].pr;for(var v=1;v<i;v++)h[v].cs=h[v-1].cs+h[v].pr;for(var m=Math.random(),x=0;x<i-1&&h[x++].cs<m;);r.push(h[x-1].v)}return r};function Bs(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var Gs=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,l=r||1e4,h=t.length,c=t[0].length,p=c>0,f=[];if(n)i="kmrand"==n?Xs(t,e):"kmpp"==n?Ys(t,e):n;else for(var g={};i.length<e;){var d=Math.floor(Math.random()*h);g[d]||(g[d]=!0,i.push(t[d]))}do{Bs(e,0,f);for(var y=0;y<h;y++){for(var v=1/0,m=0,x=0;x<e;x++)(a=p?zs(t[y],i[x]):Math.abs(t[y]-i[x]))<=v&&(v=a,m=x);s[y]=m,f[m]++}for(var w=[],_=(o=[],0);_<e;_++)w[_]=p?Bs(c,0,w[_]):0,o[_]=i[_];if(p){for(var b=0;b<e;b++)i[b]=[];for(var S=0;S<h;S++)for(var C=w[s[S]],E=t[S],A=0;A<c;A++)C[A]+=E[A];u=!0;for(var I=0;I<e;I++){for(var k=i[I],P=w[I],L=o[I],M=f[I],N=0;N<c;N++)k[N]=P[N]/M||0;if(u)for(var T=0;T<c;T++)if(L[T]!=k[T]){u=!1;break}}}else{for(var O=0;O<h;O++)w[s[O]]+=t[O];for(var R=0;R<e;R++)i[R]=w[R]/f[R]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}};function Vs(t,e){return b(Br(t[0],t[1]))===b(Br(e[0],e[1]))}function Hs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function js(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Ws={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Ws.heuristics.manhattan,o=r.closest||!1,s=new Zs((function(t){return t.f})),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return js(u);u.closed=!0;for(var l=t.neighbors(u),h=0,c=l.length;h<c;++h){var p=l[h];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),g=p.visited;(!g||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),g?s.rescoreElement(p):s.push(p))}}}return o?js(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function qs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Us(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Us(t,e,n){this.x=t,this.y=e,this.weight=n}function Zs(t){this.content=[],this.scoreFunction=t}function $s(t,e){for(var n=0;n<e.features.length;n++)if(ve(t,e.features[n]))return!0;return!1}function Js(t){return function(){return t}}function Qs(t){return t[0]}function Ks(t){return t[1]}function ta(){this._=null}function ea(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ia(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function na(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ra(t){for(;t.L;)t=t.L;return t}function oa(t,e,n,r){var i=[null,null],o=Pa.push(i)-1;return i.left=t,i.right=e,n&&aa(i,t,e,n),r&&aa(i,e,t,r),Ia[t.index].halfedges.push(o),Ia[e.index].halfedges.push(o),i}function sa(t,e,n){var r=[e,n];return r.left=t,r}function aa(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function la(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],h=0,c=1,p=a[0]-u,f=a[1]-l;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>h&&(h=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<c&&(c=o)}if(o=n-l,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>h&&(h=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[u+h*p,l+h*f]),c<1&&(t[1]=[u+c*p,l+c*f]),!0)}}}}}function ha(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,h=t.right,c=l[0],p=l[1],f=h[0],g=h[1],d=(c+f)/2,y=(p+g)/2;if(g===p){if(d<e||d>=r)return;if(c>f){if(u){if(u[1]>=i)return}else u=[d,n];o=[d,i]}else{if(u){if(u[1]<n)return}else u=[d,i];o=[d,n]}}else if(a=y-(s=(c-f)/(g-p))*d,s<-1||s>1)if(c>f){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<g){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ca(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function ua(t,e){return e[+(e.left!==t.site)]}function pa(t,e){return e[+(e.left===t.site)]}qs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Ws.cleanNode(this.nodes[t])},qs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Ws.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},qs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},qs.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},qs.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Us.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Us.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Us.prototype.isWall=function(){return 0===this.weight},Zs.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},ta.prototype={constructor:ta,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ra(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ia(this,n),n=(t=n).U),n.C=!1,r.C=!0,na(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(na(this,n),n=(t=n).U),n.C=!1,r.C=!0,ia(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ra(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ia(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,na(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ia(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,na(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ia(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,na(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var fa,da=[];function ga(){ea(this),this.x=this.y=this.arc=this.site=this.cy=null}function ya(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,h=o[0]-s,c=o[1]-a,p=2*(u*c-l*h);if(!(p>=-Ma)){var f=u*u+l*l,g=h*h+c*c,d=(c*f-l*g)/p,y=(u*g-h*f)/p,v=da.pop()||new ga;v.arc=t,v.site=i,v.x=d+s,v.y=(v.cy=y+a)+Math.sqrt(d*d+y*y),t.circle=v;for(var m=null,x=ka._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}ka.insert(m,v),m||(fa=v)}}}}function va(t){var e=t.circle;e&&(e.P||(fa=e.N),ka.remove(e),da.push(e),ea(e),t.circle=null)}var ma=[];function xa(){ea(this),this.edge=this.site=this.circle=null}function ba(t){var e=ma.pop()||new xa;return e.site=t,e}function wa(t){va(t),Aa.remove(t),ma.push(t),ea(t)}function _a(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];wa(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<La&&Math.abs(r-u.circle.cy)<La;)o=u.P,a.unshift(u),wa(u),u=o;a.unshift(u),va(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<La&&Math.abs(r-l.circle.cy)<La;)s=l.N,a.push(l),wa(l),l=s;a.push(l),va(l);var h,c=a.length;for(h=1;h<c;++h)l=a[h],u=a[h-1],aa(l.edge,u.site,l.site,i);u=a[0],(l=a[c-1]).edge=oa(u.site,l.site,null,i),ya(u),ya(l)}function Sa(t){for(var e,n,r,i,o=t[0],s=t[1],a=Aa._;a;)if((r=Ca(a,s)-o)>La)a=a.L;else{if(!((i=o-Ea(a,s))>La)){r>-La?(e=a.P,n=a):i>-La?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ia[t.index]={site:t,halfedges:[]}}(t);var u=ba(t);if(Aa.insert(e,u),e||n){if(e===n)return va(e),n=ba(e.site),Aa.insert(u,n),u.edge=n.edge=oa(e.site,u.site),ya(e),void ya(n);if(n){va(e),va(n);var l=e.site,h=l[0],c=l[1],p=t[0]-h,f=t[1]-c,g=n.site,d=g[0]-h,y=g[1]-c,v=2*(p*y-f*d),m=p*p+f*f,x=d*d+y*y,w=[(y*m-f*x)/v+h,(p*x-d*m)/v+c];aa(n.edge,l,g,w),u.edge=oa(l,t,null,w),n.edge=oa(t,g,null,w),ya(e),ya(n)}else u.edge=oa(e.site,u.site)}}function Ca(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var h=a-r,c=1/o-1/l,p=h/l;return c?(-p+Math.sqrt(p*p-2*c*(h*h/(-2*l)-u+l/2+i-o/2)))/c+r:(r+a)/2}function Ea(t,e){var n=t.N;if(n)return Ca(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Aa,Ia,ka,Pa,La=1e-6,Ma=1e-12;function Na(t,e){return e[1]-t[1]||e[0]-t[0]}function Ta(t,e){var n,r,i,o=t.sort(Na).pop();for(Pa=[],Ia=new Array(t.length),Aa=new ta,ka=new ta;;)if(i=fa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Sa(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;_a(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ia.length;i<o;++i)if((t=Ia[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=ca(t,Pa[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=Pa.length;o--;)ha(i=Pa[o],t,e,n,r)&&la(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>La||Math.abs(i[0][1]-i[1][1])>La)||delete Pa[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,h,c,p,f,g,d,y=Ia.length,v=!0;for(i=0;i<y;++i)if(o=Ia[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Pa[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)g=(f=pa(o,Pa[u[a]]))[0],d=f[1],c=(h=ua(o,Pa[u[++a%l]]))[0],p=h[1],(Math.abs(g-c)>La||Math.abs(d-p)>La)&&(u.splice(a,0,Pa.push(sa(s,f,Math.abs(g-t)<La&&r-d>La?[t,Math.abs(c-t)<La?p:r]:Math.abs(d-r)<La&&n-g>La?[Math.abs(p-r)<La?c:n,r]:Math.abs(g-n)<La&&d-e>La?[n,Math.abs(c-n)<La?p:e]:Math.abs(d-e)<La&&g-t>La?[Math.abs(p-e)<La?c:t,e]:null))-1),++l);l&&(v=!1)}if(v){var m,x,w,_=1/0;for(i=0,v=null;i<y;++i)(o=Ia[i])&&(w=(m=(s=o.site)[0]-t)*m+(x=s[1]-e)*x)<_&&(_=w,v=o);if(v){var b=[t,e],S=[t,r],C=[n,r],E=[n,e];v.halfedges.push(Pa.push(sa(s=v.site,b,S))-1,Pa.push(sa(s,S,C))-1,Pa.push(sa(s,C,E))-1,Pa.push(sa(s,E,b))-1)}}for(i=0;i<y;++i)(o=Ia[i])&&(o.halfedges.length||delete Ia[i])}(s,a,u,l)}this.edges=Pa,this.cells=Ia,Aa=ka=Pa=Ia=null}function Oa(t){return(t=t.slice()).push(t[0]),h([t])}function Ra(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!P(r))throw new Error("options must be an object");if(!k(i))throw new Error("steps must be a number");if(!k(s))throw new Error("angle must be a number");var l=Q(t);if("degrees"===o)var c=E(s);else e=Vr(t,e,90,{units:o}),n=Vr(t,n,0,{units:o}),e=Q(e)[0]-l[0],n=Q(n)[1]-l[1];for(var p=[],f=0;f<i;f+=1){var g=-360*f/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Da(g),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Da(g),2));if(g<-90&&g>=-270&&(d=-d),g<-180&&g>=-360&&(y=-y),"degrees"===o){var v=d*Math.cos(c)+y*Math.sin(c),m=y*Math.cos(c)-d*Math.sin(c);d=v,y=m}p.push([d+l[0],y+l[1]])}return p.push(p[0]),"degrees"===o?h([p],u):ts(h([p],u),s,{pivot:a})}function Da(t){var e=t*Math.PI/180;return Math.tan(e)}function Fa(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return q(t,(function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!k(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&T(t,(function(t){n+=t[0]*a,r+=t[1]*a,i+=a}))})),a([n/i,r/i],e.properties,e)}function za(t,e,n,r,i){var o=r.tolerance||.001,s=0,u=0,l=0,h=0;if(F(n,(function(e){var n,r=null===(n=e.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!k(i=Number(i)))throw new Error("weight value must be a number");if(i>0){h+=1;var o=i*be(e,t);0===o&&(o=1);var a=i/o;s+=e.geometry.coordinates[0]*a,u+=e.geometry.coordinates[1]*a,l+=a}})),h<1)throw new Error("no features to measure");var c=s/l,p=u/l;return 1===h||0===i||Math.abs(c-e[0])<o&&Math.abs(p-e[1])<o?a([c,p],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([c,p]),za([c,p],t,n,r,i-1))}function Xa(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Ya(t,e){var n=0,r=0;T(t,(function(i,o,s,a,u){u>n&&(n=u,r=o,e.push([]));var l=o-r,h=t.coordinates[u][l+1],c=i[0],p=i[1],f=h[0],g=h[1];e[u].push([.75*c+.25*f,.75*p+.25*g]),e[u].push([.25*c+.75*f,.25*p+.75*g])}),!0),e.forEach((function(t){t.push(t[0])}))}function Ba(t,e){var n=0,r=0,i=0;T(t,(function(o,s,a,u,l){u>i&&(i=u,r=s,e.push([[]])),l>n&&(n=l,r=s,e[u].push([]));var h=s-r,c=t.coordinates[u][l][h+1],p=o[0],f=o[1],g=c[0],d=c[1];e[u][l].push([.75*p+.25*g,.75*f+.25*d]),e[u][l].push([.25*p+.75*g,.25*f+.75*d])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function Ga(t,e,n){void 0===n&&(n=2);var r=Q(t),i=Q(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function Va(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];F(t,(function(t){a.push(_i(t))}));for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var h=l;h<a.length;h++){l===h&&(u[l][h]=0);var c=Ga(a[l],a[h],r);u[l][h]=c,u[h][l]=c}for(l=0;l<a.length;l++)for(h=0;h<a.length;h++)0!==(c=u[l][h])&&(u[l][h]=i?c<=n?1:0:c<=n?Math.pow(c,o):0);if(s)for(l=0;l<a.length;l++){var p=u[l].reduce((function(t,e){return t+e}),0);for(h=0;h<a.length;h++)u[l][h]=u[l][h]/p}return u}function Ha(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function ja(t,e){return void 0===e&&(e={}),qa(t,"mercator",e)}function Wa(t,e){return void 0===e&&(e={}),qa(t,"wgs84",e)}function qa(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&k(t[0])?t="mercator"===e?Ua(t):Za(t):(!0!==r&&(t=Ee(t)),T(t,(function(t){var n="mercator"===e?Ua(t):Za(t);t[0]=n[0],t[1]=n[1]}))),t}function Ua(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Za(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}Ta.prototype={constructor:Ta,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return ua(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,l,h=n.site,c=-1,p=e[i[o-1]],f=p.left===h?p.right:p.left;++c<o;)s=f,f=(p=e[i[c]]).left===h?p.right:p.left,s&&f&&r<s.index&&r<f.index&&(u=s,l=f,((a=h)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([h.data,s.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],h=u*u+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],l=e-a[1],c=u*u+l*l;c<h&&(h=c,s=a.index)}}))}while(null!==s);return o._found=r,null==n||h<=n*n?i.site:null}};var $a=Object.freeze({__proto__:null,toMercator:ja,toWgs84:Wa}),Ja=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function Qa(t){return Array.isArray(t)?nl(t):t&&t.bbox?nl(t.bbox):[360*il(),180*il()]}function Ka(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(a(Qa(e.bbox)));return d(n)}function tl(t,e){void 0===e&&(e={}),null==t&&(t=1),k(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),k(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=Ja(Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),i[i.length-1]=i[0],i=i.map((r=Qa(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(h([i]))},i=0;i<t;i++)r();return d(n)}function el(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!k(r)||void 0===r||r<2)&&(r=10),k(i)&&void 0!==i||(i=1e-4),k(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Qa(n)],l=0;l<r-1;l++){var h=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*i;u.push([u[l][0]+p*Math.cos(h),u[l][1]+p*Math.sin(h)])}s.push(f(u))}return d(s)}function il(){return Math.random()-.5}function nl(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var rl=Object.freeze({__proto__:null,randomPosition:Qa,randomPoint:Ka,randomPolygon:tl,randomLineString:el});function sl(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return F(t,(function(t){cl(t.properties,e)&&n.push(t)})),d(n)}function al(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=hl(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(d(u),s,o)}}function ll(t,e,n,r){var i=r;return al(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function hl(t,e){var n={};return F(t,(function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}})),n}function cl(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!cl(t,e[r]))return!1;return!0}return pl(t,e)}function pl(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function fl(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var gl=Object.freeze({__proto__:null,getCluster:sl,clusterEach:al,clusterReduce:ll,createBins:hl,applyFilter:cl,propertiesContainsFilter:pl,filterProperties:fl}),yl=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function vl(t,e){return t>e?1:t<e?-1:0}function ml(t,e,n){for(var r=new yl(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function xl(t,e,n,r){var i=new yl(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=ml(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function bl(t,e,n){var r=null,i=null;if(e){var o=n((e=ml(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function wl(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&wl(t.left,o,!1,r,i),t.right&&wl(t.right,o,!0,r,i)}}var _l=function(){function t(t){void 0===t&&(t=vl),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=xl(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new yl(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=ml(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=ml(t,e,n)).key)?(null===e.left?r=e.right:(r=ml(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=ml(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=ml(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new yl(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&El(t,e,0,r-1,i),null===this._root)this._root=Sl(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new yl(null,null),i=r,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return null!==o?i.next=o:null!==s&&(i.next=s),r.next}(this.toList(),function(t,e){for(var n=new yl(null,null),r=n,i=0;i<t.length;i++)r=r.next=new yl(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=Cl({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return wl(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=bl(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=xl(e,n,s,r):o=xl(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=ml(t.key,e,n)).left=t),e)}(o,s,r)},t.prototype.split=function(t){return bl(t,this._root,this._comparator)},t}();function Sl(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=t[o],a=e[o],u=new yl(s,a);return u.left=Sl(t,e,n,o),u.right=Sl(t,e,o+1,r),u}return null}function Cl(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=Cl(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=Cl(t,i+1,n),s}return null}function El(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}El(t,e,n,a,i),El(t,e,a+1,r,i)}}function Al(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Il(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kl(t,e,n){return e&&Il(t.prototype,e),n&&Il(t,n),t}var Pl=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Ll=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Ml=Number.EPSILON;void 0===Ml&&(Ml=Math.pow(2,-52));var Nl=Ml*Ml,Tl=function(t,e){if(-Ml<t&&t<Ml&&-Ml<e&&e<Ml)return 0;var n=t-e;return n*n<Nl*t*e?0:t<e?-1:1},Ol=function(){function t(){Al(this,t),this.reset()}return kl(t,[{key:"reset",value:function(){this.xRounder=new Rl,this.yRounder=new Rl}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Rl=function(){function t(){Al(this,t),this.tree=new _l,this.round(0)}return kl(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Tl(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===Tl(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),Dl=new Ol,Fl=function(t,e){return t.x*e.y-t.y*e.x},zl=function(t,e){return t.x*e.x+t.y*e.y},Xl=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=Fl(r,i);return Tl(o,0)},Yl=function(t){return Math.sqrt(zl(t,t))},Bl=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return zl(i,r)/Yl(i)/Yl(r)},Gl=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},Vl=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},Hl=function(){function t(e,n){Al(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return kl(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Wl.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),kl(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,u,l=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},Fl(u,a)/Yl(u)/Yl(a)),cosine:Bl(e.point,t.point,l.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),jl=0,Wl=function(){function t(e,n,r,i){Al(this,t),this.id=++jl,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return kl(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n>r){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var f=t.comparePoint(e.rightSE.point);return f<0?1:f>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var g=e.comparePoint(t.rightSE.point);if(0!==g)return g}if(i>o){var d=t.comparePoint(e.rightSE.point);if(d<0)return 1;if(d>0)return-1}if(i!==o){var y=u-s,v=i-n,m=l-a,x=o-r;if(y>v&&m<x)return 1;if(y<v&&m>x)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),kl(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=Ll(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Pl(e,s)&&0===this.comparePoint(s),l=Pl(n,i)&&0===t.comparePoint(i),h=Pl(e,a)&&0===this.comparePoint(a),c=Pl(n,o)&&0===t.comparePoint(o);if(l&&u)return c&&!h?o:!c&&h?a:null;if(l)return h&&i.x===a.x&&i.y===a.y?null:i;if(u)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&h)return null;if(c)return o;if(h)return a;var p=function(t,e,n,r){if(0===e.x)return Vl(n,r,t.x);if(0===r.x)return Vl(t,e,n.x);if(0===e.y)return Gl(n,r,t.y);if(0===r.y)return Gl(t,e,n.y);var i=Fl(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=Fl(o,e)/i,a=Fl(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===p?null:Pl(r,p)?Dl.round(p.x,p.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new Hl(e,!0),o=new Hl(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return Hl.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Hl.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],h=r.windings[a],c=n.rings.indexOf(l);-1===c?(n.rings.push(l),n.windings.push(h)):n.windings[c]+=h}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],h=[],c=0,p=e.length;c<p;c++)if(0!==n[c]){var f=e[c],g=f.poly;if(-1===h.indexOf(g))if(f.isExterior)l.push(g);else{-1===h.indexOf(g)&&h.push(g);var d=l.indexOf(f.poly);-1!==d&&l.splice(d,1)}}for(var y=0,v=l.length;y<v;y++){var m=l[y].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(nh.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===nh.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(nh.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=Hl.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new Hl(i,!0),new Hl(o,!1),[r],[s])}}]),t}(),ql=function(){function t(e,n,r){if(Al(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Dl.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Dl.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Wl.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(Wl.fromRing(o,i,this))}return kl(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),Ul=function(){function t(e,n){if(Al(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ql(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new ql(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return kl(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Zl=function(){function t(e,n){if(Al(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new Ul(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return kl(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),$l=function(){function t(e){Al(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return kl(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],h=a.point,c=[];s=a,a=u,l.push(a),a.point!==h;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var f=l[0].point,g=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(1===p.length){u=p[0].otherSE;break}for(var d=null,y=0,v=c.length;y<v;y++)if(c[y].point===a.point){d=y;break}if(null===d){c.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=p.sort(m)[0].otherSE;break}var x=c.splice(d)[0],w=l.splice(x.index);w.unshift(w[0].otherSE),n.push(new t(w.reverse()))}n.push(new t(l))}}return n}}]),kl(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==Xl(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Xl(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,c=[],p=l;p!=h;p+=u)c.push([e[p].x,e[p].y]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];Hl.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Jl=function(){function t(e){Al(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return kl(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),Ql=function(){function t(e){Al(this,t),this.rings=e,this.polys=this._composePolys(e)}return kl(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Jl(i));else{var o=i.enclosingRing();o.poly||e.push(new Jl(o)),o.poly.addInterior(i)}}return e}}]),t}(),Kl=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wl.compare;Al(this,t),this.queue=e,this.tree=new _l(n),this.segments=[]}return kl(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var h=this._splitSafely(s,l),c=0,p=h.length;c<p;c++)n.push(h[c])}var f=null;if(a){var g=a.getIntersection(e);if(null!==g&&(e.isAnEndpoint(g)||(f=g),!a.isAnEndpoint(g)))for(var d=this._splitSafely(a,g),y=0,v=d.length;y<v;y++)n.push(d[y])}if(null!==u||null!==f){var m=null;m=null===u?f:null===f||Hl.comparePoints(u,f)<=0?u:f,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var x=e.split(m),w=0,_=x.length;w<_;w++)n.push(x[w])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var b=s.getIntersection(a);if(null!==b){if(!s.isAnEndpoint(b))for(var S=this._splitSafely(s,b),C=0,E=S.length;C<E;C++)n.push(S[C]);if(!a.isAnEndpoint(b))for(var A=this._splitSafely(a,b),I=0,k=A.length;I<k;I++)n.push(A[I])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),eh=void 0!==t&&t.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ih=void 0!==t&&t.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,nh=new(function(){function t(){Al(this,t)}return kl(t,[{key:"run",value:function(t,e,n){nh.type=t,Dl.reset();for(var r=[new Zl(e,!0)],i=0,o=n.length;i<o;i++)r.push(new Zl(n[i],!1));if(nh.numMultiPolys=r.length,"difference"===nh.type)for(var s=r[0],a=1;a<r.length;)null!==Ll(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===nh.type)for(var u=0,l=r.length;u<l;u++)for(var h=r[u],c=u+1,p=r.length;c<p;c++)if(null===Ll(h.bbox,r[c].bbox))return[];for(var f=new _l(Hl.compare),g=0,d=r.length;g<d;g++)for(var y=r[g].getSweepEvents(),v=0,m=y.length;v<m;v++)if(f.insert(y[v]),f.size>eh)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new Kl(f),w=f.size,_=f.pop();_;){var b=_.key;if(f.size===w){var S=b.segment;throw new Error("Unable to pop() ".concat(b.isLeft?"left":"right"," SweepEvent ")+"[".concat(b.point.x,", ").concat(b.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>eh)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>ih)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var C=x.process(b),E=0,A=C.length;E<A;E++){var I=C[E];void 0===I.consumedBy&&f.insert(I)}w=f.size,_=f.pop()}Dl.reset();var k=$l.factory(x.segments);return new Ql(k).getGeom()}}]),t}()),rh={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nh.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nh.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nh.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nh.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var oh=function(){};oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var sh=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ah=function(){},lh={MAX_VALUE:{configurable:!0}};ah.isNaN=function(t){return Number.isNaN(t)},ah.doubleToLongBits=function(t){return t},ah.longBitsToDouble=function(t){return t},ah.isInfinite=function(t){return!Number.isFinite(t)},lh.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ah,lh);var hh=function(){},ol=function(){},ch=function(){};function uh(){}var ul=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},ph={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ul.prototype.setOrdinate=function(t,e){switch(t){case ul.X:this.x=e;break;case ul.Y:this.y=e;break;case ul.Z:this.z=e;break;default:throw new sh("Invalid ordinate index: "+t)}},ul.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!oh.equalsWithTolerance(this.x,e.x,n)&&!!oh.equalsWithTolerance(this.y,e.y,n)}},ul.prototype.getOrdinate=function(t){switch(t){case ul.X:return this.x;case ul.Y:return this.y;case ul.Z:return this.z}throw new sh("Invalid ordinate index: "+t)},ul.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||ah.isNaN(this.z))&&ah.isNaN(t.z)},ul.prototype.equals=function(t){return t instanceof ul&&this.equals2D(t)},ul.prototype.equalInZ=function(t,e){return oh.equalsWithTolerance(this.z,t.z,e)},ul.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},ul.prototype.clone=function(){},ul.prototype.copy=function(){return new ul(this)},ul.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ul.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},ul.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},ul.prototype.hashCode=function(){var t=17;return 37*(t=37*t+ul.hashCode(this.x))+ul.hashCode(this.y)},ul.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ul.prototype.interfaces_=function(){return[hh,ol,uh]},ul.prototype.getClass=function(){return ul},ul.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=ah.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},ph.DimensionalComparator.get=function(){return fh},ph.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},ph.NULL_ORDINATE.get=function(){return ah.NaN},ph.X.get=function(){return 0},ph.Y.get=function(){return 1},ph.Z.get=function(){return 2},Object.defineProperties(ul,ph);var fh=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new sh("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};fh.prototype.compare=function(t,e){var n=t,r=e,i=fh.compare(n.x,r.x);if(0!==i)return i;var o=fh.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:fh.compare(n.z,r.z)},fh.prototype.interfaces_=function(){return[ch]},fh.prototype.getClass=function(){return fh},fh.compare=function(t,e){return t<e?-1:t>e?1:ah.isNaN(t)?ah.isNaN(e)?0:-1:ah.isNaN(e)?1:0};var dh=function(){};dh.prototype.create=function(){},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var gh=function(){},yh={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh},gh.toLocationSymbol=function(t){switch(t){case gh.EXTERIOR:return"e";case gh.BOUNDARY:return"b";case gh.INTERIOR:return"i";case gh.NONE:return"-"}throw new sh("Unknown location value: "+t)},yh.INTERIOR.get=function(){return 0},yh.BOUNDARY.get=function(){return 1},yh.EXTERIOR.get=function(){return 2},yh.NONE.get=function(){return-1},Object.defineProperties(gh,yh);var vh=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},dl=function(){},mh={LOG_10:{configurable:!0}};dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},dl.log10=function(t){var e=Math.log(t);return ah.isInfinite(e)||ah.isNaN(e)?e:e/dl.LOG_10},dl.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},dl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},dl.wrap=function(t,e){return t<0?e- -t%e:t%e},dl.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],s=arguments[2],a=arguments[3],u=arguments[0];return r>u&&(u=r),s>u&&(u=s),a>u&&(u=a),u}},dl.average=function(t,e){return(t+e)/2},mh.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(dl,mh);var xh=function(t){this.str=t};xh.prototype.append=function(t){this.str+=t},xh.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},xh.prototype.toString=function(t){return this.str};var bh=function(t){this.value=t};bh.prototype.intValue=function(){return this.value},bh.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},bh.isNaN=function(t){return Number.isNaN(t)};var wh=function(){};wh.isWhitespace=function(t){return t<=32&&t>=0||127===t},wh.toUpperCase=function(t){return t.toUpperCase()};var _h=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}},Sh={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};_h.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},_h.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=_h.magnitude(n._hi),i=_h.TEN.pow(r);(n=n.divide(i)).gt(_h.TEN)?(n=n.divide(_h.TEN),r+=1):n.lt(_h.ONE)&&(n=n.multiply(_h.TEN),r-=1);for(var o=r+1,s=new xh,a=_h.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var h=!1,c=0;l>9?(h=!0,c="9"):c="0"+l,s.append(c),n=n.subtract(_h.valueOf(l)).multiply(_h.TEN),h&&n.selfAdd(_h.TEN);var p=!0,f=_h.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},_h.prototype.sqr=function(){return this.multiply(this)},_h.prototype.doubleValue=function(){return this._hi+this._lo},_h.prototype.subtract=function(){if(arguments[0]instanceof _h){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},_h.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},_h.prototype.isZero=function(){return 0===this._hi&&0===this._lo},_h.prototype.selfSubtract=function(){if(arguments[0]instanceof _h){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},_h.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},_h.prototype.min=function(t){return this.le(t)?this:t},_h.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof _h){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,h=null,c=null;return u=this._hi/n,c=(i=(l=_h.SPLIT*u)-(i=l-u))*(s=(c=_h.SPLIT*n)-(s=c-n))-(h=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,c=u+(l=(this._hi-h-c+this._lo-u*r)/n),this._hi=c,this._lo=u-c+l,this}},_h.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},_h.prototype.divide=function(){if(arguments[0]instanceof _h){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=_h.SPLIT*o)-(e=s-o)),u=e*(r=(u=_h.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi);return new _h(l,o-u+s)}if("number"==typeof arguments[0]){var h=arguments[0];return ah.isNaN(h)?_h.createNaN():_h.copy(this).selfDivide(h,0)}},_h.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},_h.prototype.pow=function(t){if(0===t)return _h.valueOf(1);var e=new _h(this),n=_h.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},_h.prototype.ceil=function(){if(this.isNaN())return _h.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new _h(t,e)},_h.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},_h.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},_h.prototype.setValue=function(){if(arguments[0]instanceof _h){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},_h.prototype.max=function(t){return this.ge(t)?this:t},_h.prototype.sqrt=function(){if(this.isZero())return _h.valueOf(0);if(this.isNegative())return _h.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=_h.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},_h.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof _h){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],h=null,c=null,p=null,f=null,g=null,d=null,y=null;f=this._hi+u,c=this._lo+l,g=f-(d=f-this._hi),p=c-(y=c-this._lo);var v=(h=f+(d=(g=u-d+(this._hi-g))+c))+(d=(p=l-y+(this._lo-p))+(d+(f-h))),m=d+(h-v);return this._hi=v,this._lo=m,this}},_h.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof _h){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=_h.SPLIT*this._hi)-this._hi,l=_h.SPLIT*n,i=u-i,o=this._hi-i,s=l-n;var h=(u=this._hi*n)+(l=i*(s=l-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),c=l+(i=u-h);return this._hi=h,this._lo=c,this}},_h.prototype.selfSqr=function(){return this.selfMultiply(this)},_h.prototype.floor=function(){if(this.isNaN())return _h.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new _h(t,e)},_h.prototype.negate=function(){return this.isNaN()?this:new _h(-this._hi,-this._lo)},_h.prototype.clone=function(){},_h.prototype.multiply=function(){if(arguments[0]instanceof _h){var t=arguments[0];return t.isNaN()?_h.createNaN():_h.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return ah.isNaN(e)?_h.createNaN():_h.copy(this).selfMultiply(e,0)}},_h.prototype.isNaN=function(){return ah.isNaN(this._hi)},_h.prototype.intValue=function(){return Math.trunc(this._hi)},_h.prototype.toString=function(){var t=_h.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},_h.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+_h.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+_h.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},_h.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=_h.SPLIT*n)-(i=s-n)),o=(a=_h.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new _h(u,n-u+s)},_h.prototype.toSciNotation=function(){if(this.isZero())return _h.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=_h.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},_h.prototype.abs=function(){return this.isNaN()?_h.NaN:this.isNegative()?this.negate():new _h(this)},_h.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},_h.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},_h.prototype.add=function(){if(arguments[0]instanceof _h){var t=arguments[0];return _h.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _h.copy(this).selfAdd(e)}},_h.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof _h){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},_h.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},_h.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},_h.prototype.trunc=function(){return this.isNaN()?_h.NaN:this.isPositive()?this.floor():this.ceil()},_h.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},_h.prototype.interfaces_=function(){return[uh,hh,ol]},_h.prototype.getClass=function(){return _h},_h.sqr=function(t){return _h.valueOf(t).selfMultiply(t)},_h.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return _h.parse(t)}if("number"==typeof arguments[0])return new _h(arguments[0])},_h.sqrt=function(t){return _h.valueOf(t).sqrt()},_h.parse=function(t){for(var e=0,n=t.length;wh.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new _h,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,wh.isDigit(l)){var h=l-"0";o.selfMultiply(_h.TEN),o.selfAdd(h),s++}else{if("."!==l){if("e"===l||"E"===l){var c=t.substring(e);try{u=bh.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var g=_h.TEN.pow(f);p=o.divide(g)}else if(f<0){var d=_h.TEN.pow(-f);p=o.multiply(d)}return r?p.negate():p},_h.createNaN=function(){return new _h(ah.NaN,ah.NaN)},_h.copy=function(t){return new _h(t)},_h.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},_h.stringOfChar=function(t,e){for(var n=new xh,r=0;r<e;r++)n.append(t);return n.toString()},Sh.PI.get=function(){return new _h(3.141592653589793,12246467991473532e-32)},Sh.TWO_PI.get=function(){return new _h(6.283185307179586,24492935982947064e-32)},Sh.PI_2.get=function(){return new _h(1.5707963267948966,6123233995736766e-32)},Sh.E.get=function(){return new _h(2.718281828459045,14456468917292502e-32)},Sh.NaN.get=function(){return new _h(ah.NaN,ah.NaN)},Sh.EPS.get=function(){return 123259516440783e-46},Sh.SPLIT.get=function(){return 134217729},Sh.MAX_PRINT_DIGITS.get=function(){return 32},Sh.TEN.get=function(){return _h.valueOf(10)},Sh.ONE.get=function(){return _h.valueOf(1)},Sh.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Sh.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(_h,Sh);var Ch=function(){},Eh={DP_SAFE_EPSILON:{configurable:!0}};Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.orientationIndex=function(t,e,n){var r=Ch.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=_h.valueOf(e.x).selfAdd(-t.x),o=_h.valueOf(e.y).selfAdd(-t.y),s=_h.valueOf(n.x).selfAdd(-e.x),a=_h.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},Ch.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Ch.intersection=function(t,e,n,r){var i=_h.valueOf(r.y).selfSubtract(n.y).selfMultiply(_h.valueOf(e.x).selfSubtract(t.x)),o=_h.valueOf(r.x).selfSubtract(n.x).selfMultiply(_h.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=_h.valueOf(r.x).selfSubtract(n.x).selfMultiply(_h.valueOf(t.y).selfSubtract(n.y)),u=_h.valueOf(r.y).selfSubtract(n.y).selfMultiply(_h.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),h=_h.valueOf(t.x).selfAdd(_h.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),c=_h.valueOf(e.x).selfSubtract(t.x).selfMultiply(_h.valueOf(t.y).selfSubtract(n.y)),p=_h.valueOf(e.y).selfSubtract(t.y).selfMultiply(_h.valueOf(t.x).selfSubtract(n.x)),f=c.subtract(p).selfDivide(s).doubleValue(),g=_h.valueOf(n.y).selfAdd(_h.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new ul(h,g)},Ch.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return Ch.signum(s);r=i+o}else{if(!(i<0))return Ch.signum(s);if(o>=0)return Ch.signum(s);r=-i-o}var a=Ch.DP_SAFE_EPSILON*r;return s>=a||-s>=a?Ch.signum(s):2},Ch.signum=function(t){return t>0?1:t<0?-1:0},Eh.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Ch,Eh);var Ah=function(){},Ih={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Ih.X.get=function(){return 0},Ih.Y.get=function(){return 1},Ih.Z.get=function(){return 2},Ih.M.get=function(){return 3},Ah.prototype.setOrdinate=function(t,e,n){},Ah.prototype.size=function(){},Ah.prototype.getOrdinate=function(t,e){},Ah.prototype.getCoordinate=function(){},Ah.prototype.getCoordinateCopy=function(t){},Ah.prototype.getDimension=function(){},Ah.prototype.getX=function(t){},Ah.prototype.clone=function(){},Ah.prototype.expandEnvelope=function(t){},Ah.prototype.copy=function(){},Ah.prototype.getY=function(t){},Ah.prototype.toCoordinateArray=function(){},Ah.prototype.interfaces_=function(){return[ol]},Ah.prototype.getClass=function(){return Ah},Object.defineProperties(Ah,Ih);var kh=function(){},Ph=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kh),Lh=function(){};Lh.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Lh.getProperty=function(t){return{"line.separator":"\n"}[t]};var Mh=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ul&&arguments[1]instanceof ul){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2];this.x=u,this.y=l,this.w=h}else if(4===arguments.length){var c=arguments[0],p=arguments[1],f=arguments[2],g=arguments[3],d=c.y-p.y,y=p.x-c.x,v=c.x*p.y-p.x*c.y,m=f.y-g.y,x=g.x-f.x,w=f.x*g.y-g.x*f.y;this.x=y*w-x*v,this.y=m*v-d*w,this.w=d*x-m*y}};Mh.prototype.getY=function(){var t=this.y/this.w;if(ah.isNaN(t)||ah.isInfinite(t))throw new Ph;return t},Mh.prototype.getX=function(){var t=this.x/this.w;if(ah.isNaN(t)||ah.isInfinite(t))throw new Ph;return t},Mh.prototype.getCoordinate=function(){var t=new ul;return t.x=this.getX(),t.y=this.getY(),t},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,h=i*u-a*o,c=(o*l-u*s)/h,p=(a*s-i*l)/h;if(ah.isNaN(c)||ah.isInfinite(c)||ah.isNaN(p)||ah.isInfinite(p))throw new Ph;return new ul(c,p)};var Nh=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ul){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Th={serialVersionUID:{configurable:!0}};Nh.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Nh.prototype.equals=function(t){if(!(t instanceof Nh))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Nh.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Nh;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Nh(e,r,n,i)},Nh.prototype.isNull=function(){return this._maxx<this._minx},Nh.prototype.getMaxX=function(){return this._maxx},Nh.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Nh){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Nh.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Nh){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ul){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Nh.prototype.getMinY=function(){return this._miny},Nh.prototype.getMinX=function(){return this._minx},Nh.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Nh){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Nh.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Nh.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Nh.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Nh.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Nh.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Nh.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Nh.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Nh.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Nh.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Nh.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Nh){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof ul){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Nh.prototype.centre=function(){return this.isNull()?null:new ul((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Nh.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Nh){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Nh.prototype.getMaxY=function(){return this._maxy},Nh.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Nh.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+ul.hashCode(this._minx))+ul.hashCode(this._maxx))+ul.hashCode(this._miny))+ul.hashCode(this._maxy)},Nh.prototype.interfaces_=function(){return[hh,uh]},Nh.prototype.getClass=function(){return Nh},Nh.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return!(l>u||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),h=Math.max(r.y,i.y),l>u||h<a))}},Th.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Nh,Th);var Oh={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Rh=function(t){this.geometryFactory=t||new xu};Rh.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Oh.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Oh.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Fh[n]&&(e=Fh[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Rh.prototype.write=function(t){return this.extractGeometry(t)},Rh.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Dh[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Dh[e].apply(this,[t])+")"};var Dh={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Dh.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Dh.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Dh.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Dh.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Dh.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Dh.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Dh.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Dh.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Fh={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Oh.spaces);return this.geometryFactory.createPoint(new ul(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Oh.trimParens,"$1"),r.push(Fh.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Oh.spaces),r.push(new ul(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Oh.spaces),r.push(new ul(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Oh.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Oh.trimParens,"$1"),r.push(Fh.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Oh.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Oh.trimParens,"$1"),n=Fh.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Oh.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Oh.trimParens,"$1"),r.push(Fh.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},zh=function(t){this.parser=new Rh(t)};zh.prototype.write=function(t){return this.parser.write(t)},zh.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Xh=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Yh=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xh),Bh=function(){};Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.shouldNeverReachHere=function(){if(0===arguments.length)Bh.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Yh("Should never reach here"+(null!==t?": "+t:""))}},Bh.isTrue=function(){var t;if(1===arguments.length)Bh.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Yh:new Yh(t)},Bh.equals=function(){var t,e,n;if(2===arguments.length)Bh.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new Yh("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Gh=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ul,this._intPt[1]=new ul,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Vh={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Gh.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Gh.prototype.getTopologySummary=function(){var t=new xh;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Gh.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Gh.prototype.getIntersectionNum=function(){return this._result},Gh.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Gh.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Gh.prototype.setPrecisionModel=function(t){this._precisionModel=t},Gh.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},Gh.prototype.getIntersection=function(t){return this._intPt[t]},Gh.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Gh.prototype.hasIntersection=function(){return this._result!==Gh.NO_INTERSECTION},Gh.prototype.getEdgeDistance=function(t,e){return Gh.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Gh.prototype.isCollinear=function(){return this._result===Gh.COLLINEAR_INTERSECTION},Gh.prototype.toString=function(){return zh.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+zh.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Gh.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Gh.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Gh.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Gh.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Bh.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Gh.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return Bh.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Vh.DONT_INTERSECT.get=function(){return 0},Vh.DO_INTERSECT.get=function(){return 1},Vh.COLLINEAR.get=function(){return 2},Vh.NO_INTERSECTION.get=function(){return 0},Vh.POINT_INTERSECTION.get=function(){return 1},Vh.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Gh,Vh);var Hh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Nh(this._inputLines[0][0],this._inputLines[0][1]),n=new Nh(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Nh.intersects(n,r,e)&&0===qh.orientationIndex(n,r,e)&&0===qh.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Mh.intersection(t,n,r,i)}catch(l){if(!(l instanceof Ph))throw l;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new ul(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Ch.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Lh.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Lh.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new ul(t),o=new ul(e),s=new ul(n),a=new ul(r),u=new ul;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Nh.intersects(e,n,r),s=Nh.intersects(e,n,i),a=Nh.intersects(r,i,e),u=Nh.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,h=n.y<r.y?n.y:r.y,c=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>l?o:l)+(a<c?a:c))/2,g=((s>h?s:h)+(u<p?u:p))/2;i.x=f,i.y=g,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Nh.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=qh.orientationIndex(e,n,r),s=qh.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=qh.orientationIndex(r,i,e),u=qh.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new ul(r):0===s?this._intPt[0]=new ul(i):0===a?this._intPt[0]=new ul(e):0===u&&(this._intPt[0]=new ul(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=qh.distancePointLine(t,n,r),s=qh.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=qh.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=qh.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(Gh),jh=function(){};jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return jh.signOfDet2x2(r,i,o,s)},jh.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Wh=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Wh.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=jh.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Wh.prototype.isPointInPolygon=function(){return this.getLocation()!==gh.EXTERIOR},Wh.prototype.getLocation=function(){return this._isPointOnSegment?gh.BOUNDARY:this._crossingCount%2==1?gh.INTERIOR:gh.EXTERIOR},Wh.prototype.isOnSegment=function(){return this._isPointOnSegment},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh},Wh.locatePointInRing=function(){if(arguments[0]instanceof ul&&vh(arguments[1],Ah)){for(var t=arguments[1],e=new Wh(arguments[0]),n=new ul,i=new ul,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof ul&&arguments[1]instanceof Array){for(var a=arguments[1],u=new Wh(arguments[0]),o=1;o<a.length;o++){var l=a[o],h=a[o-1];if(u.countSegment(l,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var qh=function(){},Uh={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh},qh.orientationIndex=function(t,e,n){return Ch.orientationIndex(t,e,n)},qh.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(vh(arguments[0],Ah)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new ul,h=new ul,c=new ul;a.getCoordinate(0,h),a.getCoordinate(1,c);var p=h.x;c.x-=p;for(var f=0,g=1;g<u-1;g++)l.y=h.y,h.x=c.x,h.y=c.y,a.getCoordinate(g+1,c),c.x-=p,f+=h.x*(l.y-c.y);return f/2}},qh.distanceLineLine=function(t,e,n,r){if(t.equals(e))return qh.distancePointLine(t,n,r);if(n.equals(r))return qh.distancePointLine(r,t,e);var i=!1;if(Nh.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?dl.min(qh.distancePointLine(t,n,r),qh.distancePointLine(e,n,r),qh.distancePointLine(n,t,e),qh.distancePointLine(r,t,e)):0},qh.isPointInRing=function(t,e){return qh.locatePointInRing(t,e)!==gh.EXTERIOR},qh.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new ul;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,h=u-o;n+=Math.sqrt(l*l+h*h),i=a,o=u}return n},qh.isCCW=function(t){var e=t.length-1;if(e<3)throw new sh("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var h=qh.computeOrientation(u,n,l);return 0===h?u.x>l.x:h>0},qh.locatePointInRing=function(t,e){return Wh.locatePointInRing(t,e)},qh.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},qh.computeOrientation=function(t,e,n){return qh.orientationIndex(t,e,n)},qh.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new sh("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=qh.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var h=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(h)*Math.sqrt(u)}},qh.isOnLine=function(t,e){for(var n=new Hh,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Uh.CLOCKWISE.get=function(){return-1},Uh.RIGHT.get=function(){return qh.CLOCKWISE},Uh.COUNTERCLOCKWISE.get=function(){return 1},Uh.LEFT.get=function(){return qh.COUNTERCLOCKWISE},Uh.COLLINEAR.get=function(){return 0},Uh.STRAIGHT.get=function(){return qh.COLLINEAR},Object.defineProperties(qh,Uh);var Zh=function(){};Zh.prototype.filter=function(t){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var $h=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Jh={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};$h.prototype.isGeometryCollection=function(){return this.getSortIndex()===$h.SORTINDEX_GEOMETRYCOLLECTION},$h.prototype.getFactory=function(){return this._factory},$h.prototype.getGeometryN=function(t){return this},$h.prototype.getArea=function(){return 0},$h.prototype.isRectangle=function(){return!1},$h.prototype.equals=function(){if(arguments[0]instanceof $h){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof $h))return!1;var n=e;return this.equalsExact(n)}},$h.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},$h.prototype.geometryChanged=function(){this.apply($h.geometryChangedFilter)},$h.prototype.geometryChangedAction=function(){this._envelope=null},$h.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},$h.prototype.getLength=function(){return 0},$h.prototype.getNumGeometries=function(){return 1},$h.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},$h.prototype.getUserData=function(){return this._userData},$h.prototype.getSRID=function(){return this._SRID},$h.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},$h.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===$h.SORTINDEX_GEOMETRYCOLLECTION)throw new sh("This method does not support GeometryCollection arguments")},$h.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},$h.prototype.norm=function(){var t=this.copy();return t.normalize(),t},$h.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},$h.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Nh(this._envelope)},$h.prototype.setSRID=function(t){this._SRID=t},$h.prototype.setUserData=function(t){this._userData=t},$h.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},$h.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},$h.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===$h.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===$h.SORTINDEX_MULTIPOINT||this.getSortIndex()===$h.SORTINDEX_MULTILINESTRING||this.getSortIndex()===$h.SORTINDEX_MULTIPOLYGON},$h.prototype.interfaces_=function(){return[ol,hh,uh]},$h.prototype.getClass=function(){return $h},$h.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},$h.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Jh.serialVersionUID.get=function(){return 0x799ea46522854c00},Jh.SORTINDEX_POINT.get=function(){return 0},Jh.SORTINDEX_MULTIPOINT.get=function(){return 1},Jh.SORTINDEX_LINESTRING.get=function(){return 2},Jh.SORTINDEX_LINEARRING.get=function(){return 3},Jh.SORTINDEX_MULTILINESTRING.get=function(){return 4},Jh.SORTINDEX_POLYGON.get=function(){return 5},Jh.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Jh.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Jh.geometryChangedFilter.get=function(){return Qh},Object.defineProperties($h,Jh);var Qh=function(){};Qh.interfaces_=function(){return[Zh]},Qh.filter=function(t){t.geometryChangedAction()};var Kh=function(){};Kh.prototype.filter=function(t){},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var tc=function(){},ec={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};tc.prototype.isInBoundary=function(t){},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},ec.Mod2BoundaryNodeRule.get=function(){return ic},ec.EndPointBoundaryNodeRule.get=function(){return nc},ec.MultiValentEndPointBoundaryNodeRule.get=function(){return rc},ec.MonoValentEndPointBoundaryNodeRule.get=function(){return oc},ec.MOD2_BOUNDARY_RULE.get=function(){return new ic},ec.ENDPOINT_BOUNDARY_RULE.get=function(){return new nc},ec.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new rc},ec.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new oc},ec.OGC_SFS_BOUNDARY_RULE.get=function(){return tc.MOD2_BOUNDARY_RULE},Object.defineProperties(tc,ec);var ic=function(){};ic.prototype.isInBoundary=function(t){return t%2==1},ic.prototype.interfaces_=function(){return[tc]},ic.prototype.getClass=function(){return ic};var nc=function(){};nc.prototype.isInBoundary=function(t){return t>0},nc.prototype.interfaces_=function(){return[tc]},nc.prototype.getClass=function(){return nc};var rc=function(){};rc.prototype.isInBoundary=function(t){return t>1},rc.prototype.interfaces_=function(){return[tc]},rc.prototype.getClass=function(){return rc};var oc=function(){};oc.prototype.isInBoundary=function(t){return 1===t},oc.prototype.interfaces_=function(){return[tc]},oc.prototype.getClass=function(){return oc};var sc=function(){};function ac(t){this.message=t||""}sc.prototype.add=function(){},sc.prototype.addAll=function(){},sc.prototype.isEmpty=function(){},sc.prototype.iterator=function(){},sc.prototype.size=function(){},sc.prototype.toArray=function(){},sc.prototype.remove=function(){},ac.prototype=new Error,ac.prototype.name="IndexOutOfBoundsException";var lc=function(){};lc.prototype.hasNext=function(){},lc.prototype.next=function(){},lc.prototype.remove=function(){};var hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(sc);function cc(t){this.message=t||""}cc.prototype=new Error,cc.prototype.name="NoSuchElementException";var uc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof sc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,sc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new pc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new ac;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(hc),pc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new cc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(lc),fc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[1],i=!1,r=arguments[0].iterator();r.hasNext();)e.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof ul&&"boolean"==typeof arguments[1]){var o=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(o))return null;t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var h=arguments[0],c=arguments[1];if(arguments[2])for(var f=0;f<h.length;f++)e.add(h[f],c);else for(var g=h.length-1;g>=0;g--)e.add(h[g],c);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ul){var d=arguments[0],y=arguments[1];if(!arguments[2]){var v=this.size();if(v>0){if(d>0&&this.get(d-1).equals2D(y))return null;if(d<v&&this.get(d).equals2D(y))return null}}t.prototype.add.call(this,d,y)}}else if(4===arguments.length){var m=arguments[0],b=arguments[1],x=arguments[2],w=arguments[3],_=1;x>w&&(_=-1);for(var S=x;S!==w;S+=_)e.add(m[S],b);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ul(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(uc),dc=function(){},gc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};gc.ForwardComparator.get=function(){return yc},gc.BidirectionalComparator.get=function(){return vc},gc.coordArrayType.get=function(){return new Array(0).fill(null)},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc},dc.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},dc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(dc.indexOf(r,e)<0)return r}return null},dc.scroll=function(t,e){var n=dc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Lh.arraycopy(t,n,r,0,t.length-n),Lh.arraycopy(t,0,r,t.length-n,n),Lh.arraycopy(r,0,t,0,t.length)},dc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},dc.intersection=function(t,e){for(var n=new fc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},dc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},dc.removeRepeatedPoints=function(t){return dc.hasRepeatedPoints(t)?new fc(t,!1).toCoordinateArray():t},dc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},dc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},dc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new ul(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new ul(r[i+u])},dc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},dc.envelope=function(t){for(var e=new Nh,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},dc.toCoordinateArray=function(t){return t.toArray(dc.coordArrayType)},dc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},dc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},dc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},dc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},dc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},dc.extract=function(t,e,n){e=dl.clamp(e,0,t.length);var r=(n=dl.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(dc,gc);var yc=function(){};yc.prototype.compare=function(t,e){return dc.compare(t,e)},yc.prototype.interfaces_=function(){return[ch]},yc.prototype.getClass=function(){return yc};var vc=function(){};vc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=dc.compare(n,r);return dc.isEqualReversed(n,r)?0:i},vc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=dc.increasingDirection(n),o=dc.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0},vc.prototype.interfaces_=function(){return[ch]},vc.prototype.getClass=function(){return vc};var mc=function(){};mc.prototype.get=function(){},mc.prototype.put=function(){},mc.prototype.size=function(){},mc.prototype.values=function(){},mc.prototype.entrySet=function(){};var xc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mc);function bc(t){this.message=t||""}function wc(){}bc.prototype=new Error,bc.prototype.name="OperationNotSupported",wc.prototype=new sc,wc.prototype.contains=function(){};var _c=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof sc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Sc(this)},e}(wc),Sc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new cc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new bc},e}(lc);function Cc(t){return null===t?0:t.color}function Ec(t){return null===t?null:t.parent}function Ac(t,e){null!==t&&(t.color=e)}function Ic(t){return null===t?null:t.left}function kc(t){return null===t?null:t.right}function Pc(){this.root_=null,this.size_=0}Pc.prototype=new xc,Pc.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Pc.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Pc.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ec(t)===Ic(Ec(Ec(t)))){var n=kc(Ec(Ec(t)));1===Cc(n)?(Ac(Ec(t),0),Ac(n,0),Ac(Ec(Ec(t)),1),t=Ec(Ec(t))):(t===kc(Ec(t))&&(t=Ec(t),e.rotateLeft(t)),Ac(Ec(t),0),Ac(Ec(Ec(t)),1),e.rotateRight(Ec(Ec(t))))}else{var r=Ic(Ec(Ec(t)));1===Cc(r)?(Ac(Ec(t),0),Ac(r,0),Ac(Ec(Ec(t)),1),t=Ec(Ec(t))):(t===Ic(Ec(t))&&(t=Ec(t),e.rotateRight(t)),Ac(Ec(t),0),Ac(Ec(Ec(t)),1),e.rotateLeft(Ec(Ec(t))))}this.root_.color=0},Pc.prototype.values=function(){var t=new uc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Pc.successor(e));)t.add(e.value);return t},Pc.prototype.entrySet=function(){var t=new _c,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Pc.successor(e));)t.add(e);return t},Pc.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Pc.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Pc.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Pc.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Pc.prototype.size=function(){return this.size_};var Lc=function(){};function Mc(){}function Nc(){this.array_=[],arguments[0]instanceof sc&&this.addAll(arguments[0])}Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Mc.prototype=new wc,Nc.prototype=new Mc,Nc.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Nc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Nc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Nc.prototype.remove=function(t){throw new bc},Nc.prototype.size=function(){return this.array_.length},Nc.prototype.isEmpty=function(){return 0===this.array_.length},Nc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Nc.prototype.iterator=function(){return new Tc(this)};var Tc=function(t){this.treeSet_=t,this.position_=0};Tc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new cc;return this.treeSet_.array_[this.position_++]},Tc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Tc.prototype.remove=function(){throw new bc};var Oc=function(){};Oc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Oc.asList=function(t){for(var e=new uc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Rc=function(){},Dc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Dc.P.get=function(){return 0},Dc.L.get=function(){return 1},Dc.A.get=function(){return 2},Dc.FALSE.get=function(){return-1},Dc.TRUE.get=function(){return-2},Dc.DONTCARE.get=function(){return-3},Dc.SYM_FALSE.get=function(){return"F"},Dc.SYM_TRUE.get=function(){return"T"},Dc.SYM_DONTCARE.get=function(){return"*"},Dc.SYM_P.get=function(){return"0"},Dc.SYM_L.get=function(){return"1"},Dc.SYM_A.get=function(){return"2"},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},Rc.toDimensionSymbol=function(t){switch(t){case Rc.FALSE:return Rc.SYM_FALSE;case Rc.TRUE:return Rc.SYM_TRUE;case Rc.DONTCARE:return Rc.SYM_DONTCARE;case Rc.P:return Rc.SYM_P;case Rc.L:return Rc.SYM_L;case Rc.A:return Rc.SYM_A}throw new sh("Unknown dimension value: "+t)},Rc.toDimensionValue=function(t){switch(wh.toUpperCase(t)){case Rc.SYM_FALSE:return Rc.FALSE;case Rc.SYM_TRUE:return Rc.TRUE;case Rc.SYM_DONTCARE:return Rc.DONTCARE;case Rc.SYM_P:return Rc.P;case Rc.SYM_L:return Rc.L;case Rc.SYM_A:return Rc.A}throw new sh("Unknown dimension symbol: "+t)},Object.defineProperties(Rc,Dc);var Fc=function(){};Fc.prototype.filter=function(t){},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var zc=function(){};zc.prototype.filter=function(t,e){},zc.prototype.isDone=function(){},zc.prototype.isGeometryChanged=function(){},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Xc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new sh("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Nh,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Oc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Rc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Rc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Nc(Oc.asList(this._geometries)),r=new Nc(Oc.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var o=arguments[1],s=arguments[0],a=this.getNumGeometries(),u=s.getNumGeometries(),l=0;l<a&&l<u;){var h=t.getGeometryN(l),c=s.getGeometryN(l),p=h.compareToSameClass(c,o);if(0!==p)return p;l++}return l<a?1:l<u?-1:0}},e.prototype.apply=function(){var t=this;if(vh(arguments[0],Kh))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(vh(arguments[0],zc)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(vh(arguments[0],Fc)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(vh(arguments[0],Zh)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Bh.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}($h),Yc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $h.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Bc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Xc),Bc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=tc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Bc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Bc.prototype.getBoundary=function(){return this._geom instanceof Qc?this.boundaryLineString(this._geom):this._geom instanceof Yc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Bc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Bc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Bc.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new uc;this._endpointMap=new Pc;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return dc.toCoordinateArray(n)},Bc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Gc,this._endpointMap.put(t,e)),e.count++},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.getBoundary=function(){return 1===arguments.length?new Bc(arguments[0]).getBoundary():2===arguments.length?new Bc(arguments[0],arguments[1]).getBoundary():void 0};var Gc=function(){this.count=null};function Vc(){}function Hc(){}Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var jc=function(){};function Wc(){}function qc(){}function Uc(){}var Zc=function(){},$c={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Zc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Wc,n=new Vc(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new Uc(new Hc(Zc.getStackTrace(r))),u=0;u<i;u++)try{o+=a.readLine()+Zc.NEWLINE}catch(t){if(!(t instanceof qc))throw t;Bh.shouldNeverReachHere()}return o}},Zc.split=function(t,e){for(var n=e.length,r=new uc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Zc.toString=function(){if(1===arguments.length){var t=arguments[0];return Zc.SIMPLE_ORDINATE_FORMAT.format(t)}},Zc.spaces=function(t){return Zc.chars(" ",t)},$c.NEWLINE.get=function(){return Lh.getProperty("line.separator")},$c.SIMPLE_ORDINATE_FORMAT.get=function(){return new jc("0.#")},Object.defineProperties(Zc,$c);var Jc=function(){};Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Jc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Ah.X)===t.getOrdinate(e-1,Ah.X)&&t.getOrdinate(0,Ah.Y)===t.getOrdinate(e-1,Ah.Y)},Jc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||ah.isNaN(s)&&ah.isNaN(a)))return!1}return!0},Jc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Jc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Jc.copy(e,i-1,r,o,1);return r},Jc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Jc.swap(t,r,e-r)},Jc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Jc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Jc.copyCoord(t,e+o,n,r+o)},Jc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new xh;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Zc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Jc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Jc.createClosedRing(t,e,4):e.getOrdinate(0,Ah.X)===e.getOrdinate(n-1,Ah.X)&&e.getOrdinate(0,Ah.Y)===e.getOrdinate(n-1,Ah.Y)?e:Jc.createClosedRing(t,e,n+1)},Jc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Jc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Jc.copy(e,0,r,o,1);return r};var Qc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Nh:this._points.expandEnvelope(new Nh)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Jc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return qh.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Jc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0,i=0;n<this._points.size()&&i<e._points.size();){var r=t._points.getCoordinate(n).compareTo(e._points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this._points.size()?1:i<e._points.size()?-1:0}if(2===arguments.length){var u=arguments[0];return arguments[1].compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(vh(arguments[0],Kh))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(vh(arguments[0],zc)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else(vh(arguments[0],Fc)||vh(arguments[0],Zh))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Bc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new sh("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}($h),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var tu=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Nh;var t=new Nh;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(vh(arguments[0],Kh)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(vh(arguments[0],zc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(vh(arguments[0],Fc)||vh(arguments[0],Zh))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Bh.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}($h),eu=function(){};eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu};var th=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new sh("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new sh("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(qh.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(qh.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,s=i._shell;if(!o.equalsExact(s,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Oc.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Lh.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=dc.minCoordinate(n.getCoordinates());dc.scroll(i,o),Lh.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],qh.isCCW(n.getCoordinates())===r&&dc.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var o=arguments[1],s=arguments[0],a=this._shell,u=s._shell,l=a.compareToSameClass(u,o);if(0!==l)return l;for(var h=this.getNumInteriorRing(),c=s.getNumInteriorRing(),p=0;p<h&&p<c;){var f=t.getInteriorRingN(p),g=s.getInteriorRingN(p),d=f.compareToSameClass(g,o);if(0!==d)return d;p++}return p<h?1:p<c?-1:0}},e.prototype.apply=function(t){var e=this;if(vh(t,Kh)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(vh(t,zc)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(vh(t,Fc))t.filter(this);else if(vh(t,Zh)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[eu]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}($h),iu=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $h.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Xc),nu=function(t){function e(e,n){e instanceof ul&&n instanceof xu&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $h.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Jc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new sh("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new sh("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Qc),ru=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $h.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new uc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[eu]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Xc),ou=function(t){this._factory=t||null,this._isUserDataCopied=!1},su={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ou.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ou.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ou.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Xc?this.editGeometryCollection(t,e):t instanceof th?this.editPolygon(t,e):t instanceof tu||t instanceof Qc?e.edit(t,this._factory):(Bh.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ou.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new uc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===iu?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Yc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ru?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},ou.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new uc,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},ou.prototype.interfaces_=function(){return[]},ou.prototype.getClass=function(){return ou},ou.GeometryEditorOperation=function(){},su.NoOpGeometryOperation.get=function(){return au},su.CoordinateOperation.get=function(){return lu},su.CoordinateSequenceOperation.get=function(){return hu},Object.defineProperties(ou,su);var au=function(){};au.prototype.edit=function(t,e){return t},au.prototype.interfaces_=function(){return[ou.GeometryEditorOperation]},au.prototype.getClass=function(){return au};var lu=function(){};lu.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof nu?e.createLinearRing(n):t instanceof Qc?e.createLineString(n):t instanceof tu?n.length>0?e.createPoint(n[0]):e.createPoint():t},lu.prototype.interfaces_=function(){return[ou.GeometryEditorOperation]},lu.prototype.getClass=function(){return lu};var hu=function(){};hu.prototype.edit=function(t,e){return t instanceof nu?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof tu?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},hu.prototype.interfaces_=function(){return[ou.GeometryEditorOperation]},hu.prototype.getClass=function(){return hu};var cu=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new ul}else if(vh(arguments[0],Ah)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new ul}},uu={serialVersionUID:{configurable:!0}};cu.prototype.setOrdinate=function(t,e,n){switch(e){case Ah.X:this._coordinates[t].x=n;break;case Ah.Y:this._coordinates[t].y=n;break;case Ah.Z:this._coordinates[t].z=n;break;default:throw new sh("invalid ordinateIndex")}},cu.prototype.size=function(){return this._coordinates.length},cu.prototype.getOrdinate=function(t,e){switch(e){case Ah.X:return this._coordinates[t].x;case Ah.Y:return this._coordinates[t].y;case Ah.Z:return this._coordinates[t].z}return ah.NaN},cu.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},cu.prototype.getCoordinateCopy=function(t){return new ul(this._coordinates[t])},cu.prototype.getDimension=function(){return this._dimension},cu.prototype.getX=function(t){return this._coordinates[t].x},cu.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new cu(t,this._dimension)},cu.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},cu.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new cu(t,this._dimension)},cu.prototype.toString=function(){if(this._coordinates.length>0){var t=new xh(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},cu.prototype.getY=function(t){return this._coordinates[t].y},cu.prototype.toCoordinateArray=function(){return this._coordinates},cu.prototype.interfaces_=function(){return[Ah,uh]},cu.prototype.getClass=function(){return cu},uu.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(cu,uu);var pu=function(){},fu={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};pu.prototype.readResolve=function(){return pu.instance()},pu.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new cu(arguments[0]);if(vh(arguments[0],Ah))return new cu(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new cu(t):new cu(t,e)}},pu.prototype.interfaces_=function(){return[dh,uh]},pu.prototype.getClass=function(){return pu},pu.instance=function(){return pu.instanceObject},fu.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fu.instanceObject.get=function(){return new pu},Object.defineProperties(pu,fu);var du=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new uc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new _c;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(mc),gu=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof vu){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},yu={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};gu.prototype.equals=function(t){if(!(t instanceof gu))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},gu.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new bh(n).compareTo(new bh(r))},gu.prototype.getScale=function(){return this._scale},gu.prototype.isFloating=function(){return this._modelType===gu.FLOATING||this._modelType===gu.FLOATING_SINGLE},gu.prototype.getType=function(){return this._modelType},gu.prototype.toString=function(){var t="UNKNOWN";return this._modelType===gu.FLOATING?t="Floating":this._modelType===gu.FLOATING_SINGLE?t="Floating-Single":this._modelType===gu.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},gu.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return ah.isNaN(t)||this._modelType===gu.FLOATING_SINGLE?t:this._modelType===gu.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ul){var e=arguments[0];if(this._modelType===gu.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},gu.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===gu.FLOATING?t=16:this._modelType===gu.FLOATING_SINGLE?t=6:this._modelType===gu.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},gu.prototype.setScale=function(t){this._scale=Math.abs(t)},gu.prototype.interfaces_=function(){return[uh,hh]},gu.prototype.getClass=function(){return gu},gu.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},yu.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},yu.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(gu,yu);var vu=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},mu={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};vu.prototype.readResolve=function(){return vu.nameToTypeMap.get(this._name)},vu.prototype.toString=function(){return this._name},vu.prototype.interfaces_=function(){return[uh]},vu.prototype.getClass=function(){return vu},mu.serialVersionUID.get=function(){return-552860263173159e4},mu.nameToTypeMap.get=function(){return new du},Object.defineProperties(vu,mu),gu.Type=vu,gu.FIXED=new vu("FIXED"),gu.FLOATING=new vu("FLOATING"),gu.FLOATING_SINGLE=new vu("FLOATING SINGLE");var xu=function t(){this._precisionModel=new gu,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?vh(arguments[0],dh)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof gu&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},bu={serialVersionUID:{configurable:!0}};xu.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ul(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ul(t.getMinX(),t.getMinY()),new ul(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ul(t.getMinX(),t.getMinY()),new ul(t.getMinX(),t.getMaxY()),new ul(t.getMaxX(),t.getMaxY()),new ul(t.getMaxX(),t.getMinY()),new ul(t.getMinX(),t.getMinY())]),null)},xu.prototype.createLineString=function(t){return t?t instanceof Array?new Qc(this.getCoordinateSequenceFactory().create(t),this):vh(t,Ah)?new Qc(t,this):void 0:new Qc(this.getCoordinateSequenceFactory().create([]),this)},xu.prototype.createMultiLineString=function(){return 0===arguments.length?new Yc(null,this):1===arguments.length?new Yc(arguments[0],this):void 0},xu.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(xu.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof th)return this.createMultiPolygon(xu.toPolygonArray(t));if(a instanceof Qc)return this.createMultiLineString(xu.toLineStringArray(t));if(a instanceof tu)return this.createMultiPoint(xu.toPointArray(t));Bh.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},xu.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},xu.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(vh(arguments[0],Ah))return new tu(arguments[0],this)}},xu.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},xu.prototype.createPolygon=function(){if(0===arguments.length)return new th(null,null,this);if(1===arguments.length){if(vh(arguments[0],Ah)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nu){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new th(arguments[0],arguments[1],this)},xu.prototype.getSRID=function(){return this._SRID},xu.prototype.createGeometryCollection=function(){return 0===arguments.length?new Xc(null,this):1===arguments.length?new Xc(arguments[0],this):void 0},xu.prototype.createGeometry=function(t){return new ou(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},xu.prototype.getPrecisionModel=function(){return this._precisionModel},xu.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(vh(arguments[0],Ah))return new nu(arguments[0],this)}},xu.prototype.createMultiPolygon=function(){return 0===arguments.length?new ru(null,this):1===arguments.length?new ru(arguments[0],this):void 0},xu.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new iu(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new iu(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(vh(arguments[0],Ah)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var s=t.getCoordinateSequenceFactory().create(1,n.getDimension());Jc.copy(n,r,s,0,1),i[r]=t.createPoint(s)}return this.createMultiPoint(i)}}},xu.prototype.interfaces_=function(){return[uh]},xu.prototype.getClass=function(){return xu},xu.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.getDefaultCoordinateSequenceFactory=function(){return pu.instance()},xu.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xu.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},bu.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(xu,bu);var wu=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_u=function(t){this.geometryFactory=t||new xu};_u.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Su[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==wu.indexOf(n)?Su[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Su[n].apply(this,[e.geometries]):Su[n].apply(this,[e])},_u.prototype.write=function(t){var e=t.getGeometryType();if(!Cu[e])throw new Error("Geometry is not supported");return Cu[e].apply(this,[t])};var Su={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Su[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Su.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new ul(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ul(t[0],t[1]),new ul(t[2],t[1]),new ul(t[2],t[3]),new ul(t[0],t[3]),new ul(t[0],t[1])])},Point:function(t){var e=new ul(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Su.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Su.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Su.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Su.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Su.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Su.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Cu={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Cu.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Cu.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Cu.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Cu.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Cu.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Cu.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Cu.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Cu[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Eu=function(t){this.geometryFactory=t||new xu,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _u(this.geometryFactory)};Eu.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===gu.FIXED&&this.reducePrecision(e),e},Eu.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Au=function(){this.parser=new _u(this.geometryFactory)};Au.prototype.write=function(t){return this.parser.write(t)};var Iu=function(){},ku={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Pu(t){this.message=t||""}function Lu(){this.array_=[]}Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.opposite=function(t){return t===Iu.LEFT?Iu.RIGHT:t===Iu.RIGHT?Iu.LEFT:t},ku.ON.get=function(){return 0},ku.LEFT.get=function(){return 1},ku.RIGHT.get=function(){return 2},Object.defineProperties(Iu,ku),Pu.prototype=new Error,Pu.prototype.name="EmptyStackException",Lu.prototype=new hc,Lu.prototype.add=function(t){return this.array_.push(t),!0},Lu.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Lu.prototype.push=function(t){return this.array_.push(t),t},Lu.prototype.pop=function(t){if(0===this.array_.length)throw new Pu;return this.array_.pop()},Lu.prototype.peek=function(){if(0===this.array_.length)throw new Pu;return this.array_[this.array_.length-1]},Lu.prototype.empty=function(){return 0===this.array_.length},Lu.prototype.isEmpty=function(){return this.empty()},Lu.prototype.search=function(t){return this.array_.indexOf(t)},Lu.prototype.size=function(){return this.array_.length},Lu.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Mu=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Mu.prototype.getCoordinate=function(){return this._minCoord},Mu.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Mu.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Bh.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=qh.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===qh.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===qh.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Mu.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Iu.LEFT;return n[e].y<n[e+1].y&&(r=Iu.RIGHT),r},Mu.prototype.getEdge=function(){return this._orientedDe},Mu.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},Mu.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Mu.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Bh.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Iu.LEFT&&(this._orientedDe=this._minDe.getSym())},Mu.prototype.interfaces_=function(){return[]},Mu.prototype.getClass=function(){return Mu};var Nu=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new ul(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Xh),Tu=function(){this.array_=[]};Tu.prototype.addLast=function(t){this.array_.push(t)},Tu.prototype.removeFirst=function(){return this.array_.shift()},Tu.prototype.isEmpty=function(){return 0===this.array_.length};var Ou=function(){this._finder=null,this._dirEdgeList=new uc,this._nodes=new uc,this._rightMostCoord=null,this._env=null,this._finder=new Mu};Ou.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ou.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ou.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Nu("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ou.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Iu.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ou.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ou.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Iu.RIGHT)>=1&&e.getDepth(Iu.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ou.prototype.computeDepths=function(t){var e=new _c,n=new Tu,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Ou.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ou.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Nh,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ou.prototype.addReachable=function(t){var e=new Lu;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ou.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Iu.LEFT,t.getDepth(Iu.RIGHT)),e.setDepth(Iu.RIGHT,t.getDepth(Iu.LEFT))},Ou.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ou.prototype.getNodes=function(){return this._nodes},Ou.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ou.prototype.interfaces_=function(){return[hh]},Ou.prototype.getClass=function(){return Ou};var Ru=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Iu.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[Iu.ON]=s,this.location[Iu.LEFT]=a,this.location[Iu.RIGHT]=u}};Ru.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ru.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==gh.NONE)return!1;return!0},Ru.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===gh.NONE&&(this.location[e]=t)},Ru.prototype.isLine=function(){return 1===this.location.length},Ru.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Iu.ON]=this.location[Iu.ON],e[Iu.LEFT]=gh.NONE,e[Iu.RIGHT]=gh.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===gh.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ru.prototype.getLocations=function(){return this.location},Ru.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Iu.LEFT];this.location[Iu.LEFT]=this.location[Iu.RIGHT],this.location[Iu.RIGHT]=t},Ru.prototype.toString=function(){var t=new xh;return this.location.length>1&&t.append(gh.toLocationSymbol(this.location[Iu.LEFT])),t.append(gh.toLocationSymbol(this.location[Iu.ON])),this.location.length>1&&t.append(gh.toLocationSymbol(this.location[Iu.RIGHT])),t.toString()},Ru.prototype.setLocations=function(t,e,n){this.location[Iu.ON]=t,this.location[Iu.LEFT]=e,this.location[Iu.RIGHT]=n},Ru.prototype.get=function(t){return t<this.location.length?this.location[t]:gh.NONE},Ru.prototype.isArea=function(){return this.location.length>1},Ru.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===gh.NONE)return!0;return!1},Ru.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Iu.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Ru.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(gh.NONE)},Ru.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ru.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru};var Du=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ru(e),this.elt[1]=new Ru(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ru(n.elt[0]),this.elt[1]=new Ru(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ru(gh.NONE),this.elt[1]=new Ru(gh.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Ru(o,s,a),this.elt[1]=new Ru(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Ru(gh.NONE,gh.NONE,gh.NONE),this.elt[1]=new Ru(gh.NONE,gh.NONE,gh.NONE),this.elt[u].setLocations(l,h,c)}};Du.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Du.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Du.prototype.isNull=function(t){return this.elt[t].isNull()},Du.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Du.prototype.isLine=function(t){return this.elt[t].isLine()},Du.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Ru(t.elt[n]):e.elt[n].merge(t.elt[n])},Du.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Du.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Iu.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Du.prototype.toString=function(){var t=new xh;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Du.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Du.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Du.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Iu.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Du.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Du.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Du.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ru(this.elt[t].location[0]))},Du.prototype.interfaces_=function(){return[]},Du.prototype.getClass=function(){return Du},Du.toLineLabel=function(t){for(var e=new Du(gh.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Fu=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new uc,this._pts=new uc,this._label=new Du(gh.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new uc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Fu.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=qh.isCCW(this._ring.getCoordinates())},Fu.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Fu.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Nu("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Nu("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();Bh.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Fu.prototype.getLinearRing=function(){return this._ring},Fu.prototype.getCoordinate=function(t){return this._pts.get(t)},Fu.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Fu.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Fu.prototype.isHole=function(){return this._isHole},Fu.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Fu.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!qh.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Fu.prototype.addHole=function(t){this._holes.add(t)},Fu.prototype.isShell=function(){return null===this._shell},Fu.prototype.getLabel=function(){return this._label},Fu.prototype.getEdges=function(){return this._edges},Fu.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Fu.prototype.getShell=function(){return this._shell},Fu.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Iu.RIGHT);if(n===gh.NONE)return null;if(this._label.getLocation(e)===gh.NONE)return this._label.setLocation(e,n),null}},Fu.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Fu.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu};var zu=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fu),Xu=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new uc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new zu(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fu),Yu=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Yu.prototype.setVisited=function(t){this._isVisited=t},Yu.prototype.setInResult=function(t){this._isInResult=t},Yu.prototype.isCovered=function(){return this._isCovered},Yu.prototype.isCoveredSet=function(){return this._isCoveredSet},Yu.prototype.setLabel=function(t){this._label=t},Yu.prototype.getLabel=function(){return this._label},Yu.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Yu.prototype.updateIM=function(t){Bh.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Yu.prototype.isInResult=function(){return this._isInResult},Yu.prototype.isVisited=function(){return this._isVisited},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu};var Bu=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Du(0,gh.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=gh.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==gh.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Du(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Du)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i);t._label.getLocation(i)===gh.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=gh.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case gh.BOUNDARY:n=gh.INTERIOR;break;case gh.INTERIOR:default:n=gh.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yu),Gu=function(){this.nodeMap=new Pc,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Gu.prototype.find=function(t){return this.nodeMap.get(t)},Gu.prototype.addNode=function(){if(arguments[0]instanceof ul){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Bu){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Gu.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Gu.prototype.iterator=function(){return this.nodeMap.values().iterator()},Gu.prototype.values=function(){return this.nodeMap.values()},Gu.prototype.getBoundaryNodes=function(t){for(var e=new uc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===gh.BOUNDARY&&e.add(r)}return e},Gu.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu};var Vu=function(){},Hu={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu},Vu.isNorthern=function(t){return t===Vu.NE||t===Vu.NW},Vu.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Vu.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Vu.isInHalfPlane=function(t,e){return e===Vu.SE?t===Vu.SE||t===Vu.SW:t===e||t===e+1},Vu.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new sh("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Vu.NE:Vu.SE:e>=0?Vu.NW:Vu.SW}if(arguments[0]instanceof ul&&arguments[1]instanceof ul){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new sh("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Vu.NE:Vu.SE:r.y>=n.y?Vu.NW:Vu.SW}},Hu.NE.get=function(){return 0},Hu.NW.get=function(){return 1},Hu.SW.get=function(){return 2},Hu.SE.get=function(){return 3},Object.defineProperties(Vu,Hu);var ju=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};ju.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:qh.computeOrientation(t._p0,t._p1,this._p1)},ju.prototype.getDy=function(){return this._dy},ju.prototype.getCoordinate=function(){return this._p0},ju.prototype.setNode=function(t){this._node=t},ju.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},ju.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},ju.prototype.getDirectedCoordinate=function(){return this._p1},ju.prototype.getDx=function(){return this._dx},ju.prototype.getLabel=function(){return this._label},ju.prototype.getEdge=function(){return this._edge},ju.prototype.getQuadrant=function(){return this._quadrant},ju.prototype.getNode=function(){return this._node},ju.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},ju.prototype.computeLabel=function(t){},ju.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Vu.quadrant(this._dx,this._dy),Bh.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ju.prototype.interfaces_=function(){return[hh]},ju.prototype.getClass=function(){return ju};var Wu=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Du(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Nu("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Iu.LEFT)===gh.INTERIOR&&t._label.getLocation(n,Iu.RIGHT)===gh.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Iu.LEFT]+"/"+this._depth[Iu.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,gh.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,gh.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Iu.LEFT&&(r=-1);var i=Iu.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===gh.EXTERIOR&&e===gh.INTERIOR?1:t===gh.INTERIOR&&e===gh.EXTERIOR?-1:0},e}(ju),qu=function(){};qu.prototype.createNode=function(t){return new Bu(t,null)},qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu};var Uu=function(){if(this._edges=new uc,this._nodes=null,this._edgeEndList=new uc,0===arguments.length)this._nodes=new Gu(new qu);else if(1===arguments.length){var t=arguments[0];this._nodes=new Gu(t)}};Uu.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Uu.prototype.find=function(t){return this._nodes.find(t)},Uu.prototype.addNode=function(){if(arguments[0]instanceof Bu){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof ul){var e=arguments[0];return this._nodes.addNode(e)}},Uu.prototype.getNodeIterator=function(){return this._nodes.iterator()},Uu.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Uu.prototype.debugPrintln=function(t){Lh.out.println(t)},Uu.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===gh.BOUNDARY},Uu.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Uu.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&qh.computeOrientation(t,e,r)===qh.COLLINEAR&&Vu.quadrant(t,e)===Vu.quadrant(n,r)},Uu.prototype.getEdgeEnds=function(){return this._edgeEndList},Uu.prototype.debugPrint=function(t){Lh.out.print(t)},Uu.prototype.getEdgeIterator=function(){return this._edges.iterator()},Uu.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Uu.prototype.insertEdge=function(t){this._edges.add(t)},Uu.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Uu.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Wu(r,!0),o=new Wu(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Uu.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Uu.prototype.getNodes=function(){return this._nodes.values()},Uu.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Zu=function(){this._geometryFactory=null,this._shellList=new uc;var t=arguments[0];this._geometryFactory=t};Zu.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Zu.prototype.computePolygons=function(t){for(var e=new uc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Zu.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Nu("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Zu.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new uc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Zu.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Zu.prototype.buildMaximalEdgeRings=function(t){for(var e=new uc,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Xu(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Zu.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Zu.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Zu.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(r)&&qh.isPointInRing(i,l.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(o=u)}return o},Zu.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Bh.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Zu.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Uu.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new uc,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Zu.prototype.interfaces_=function(){return[]},Zu.prototype.getClass=function(){return Zu};var $u=function(){};$u.prototype.getBounds=function(){},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u};var Ju=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Ju.prototype.getItem=function(){return this._item},Ju.prototype.getBounds=function(){return this._bounds},Ju.prototype.interfaces_=function(){return[$u,uh]},Ju.prototype.getClass=function(){return Ju};var Qu=function(){this._size=null,this._items=null,this._size=0,this._items=new uc,this._items.add(null)};Qu.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Qu.prototype.size=function(){return this._size},Qu.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Qu.prototype.clear=function(){this._size=0,this._items.clear()},Qu.prototype.isEmpty=function(){return 0===this._size},Qu.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu};var Ku=function(){};Ku.prototype.visitItem=function(t){},Ku.prototype.interfaces_=function(){return[]},Ku.prototype.getClass=function(){return Ku};var tp=function(){};tp.prototype.insert=function(t,e){},tp.prototype.remove=function(t,e){},tp.prototype.query=function(){},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){if(this._childBoundables=new uc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},ip={serialVersionUID:{configurable:!0}};ep.prototype.getLevel=function(){return this._level},ep.prototype.size=function(){return this._childBoundables.size()},ep.prototype.getChildBoundables=function(){return this._childBoundables},ep.prototype.addChildBoundable=function(t){Bh.isTrue(null===this._bounds),this._childBoundables.add(t)},ep.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ep.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},ep.prototype.interfaces_=function(){return[$u,uh]},ep.prototype.getClass=function(){return ep},ip.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(ep,ip);var np=function(){};np.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},np.min=function(t){return np.sort(t),t.get(0)},np.sort=function(t,e){var n=t.toArray();e?Oc.sort(n,e):Oc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},np.singletonList=function(t){var e=new uc;return e.add(t),e};var rp=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};rp.prototype.expandToQueue=function(t,e){var n=rp.isComposite(this._boundable1),r=rp.isComposite(this._boundable2);if(n&&r)return rp.area(this._boundable1)>rp.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new sh("neither boundable is composite")},rp.prototype.isLeaves=function(){return!(rp.isComposite(this._boundable1)||rp.isComposite(this._boundable2))},rp.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},rp.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new rp(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},rp.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},rp.prototype.getDistance=function(){return this._distance},rp.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},rp.prototype.interfaces_=function(){return[hh]},rp.prototype.getClass=function(){return rp},rp.area=function(t){return t.getBounds().getArea()},rp.isComposite=function(t){return t instanceof ep};var op=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new uc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];Bh.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},sp={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};op.prototype.getNodeCapacity=function(){return this._nodeCapacity},op.prototype.lastNode=function(t){return t.get(t.size()-1)},op.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof ep?e+=t.size(i):i instanceof Ju&&(e+=1)}return e}},op.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ju&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},op.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new uc:e}if(1===arguments.length){for(var n=arguments[0],r=new uc,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof ep){var s=t.itemsTree(o);null!==s&&r.add(s)}else o instanceof Ju?r.add(o.getItem()):Bh.shouldNeverReachHere()}return r.size()<=0?null:r}},op.prototype.insert=function(t,e){Bh.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ju(t,e))},op.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new uc;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(Bh.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof ep?t.boundablesAtLevel(r,a,o):(Bh.isTrue(a instanceof Ju),-1===r&&o.add(a))}return null}},op.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new uc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(vh(arguments[2],Ku)&&arguments[0]instanceof Object&&arguments[1]instanceof ep)for(var o=arguments[0],a=arguments[2],u=arguments[1].getChildBoundables(),l=0;l<u.size();l++){var h=u.get(l);t.getIntersectsOp().intersects(h.getBounds(),o)&&(h instanceof ep?t.query(o,h,a):h instanceof Ju?a.visitItem(h.getItem()):Bh.shouldNeverReachHere())}else if(vh(arguments[2],hc)&&arguments[0]instanceof Object&&arguments[1]instanceof ep)for(var c=arguments[0],f=arguments[2],g=arguments[1].getChildBoundables(),d=0;d<g.size();d++){var y=g.get(d);t.getIntersectsOp().intersects(y.getBounds(),c)&&(y instanceof ep?t.query(c,y,f):y instanceof Ju?f.add(y.getItem()):Bh.shouldNeverReachHere())}},op.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},op.prototype.getRoot=function(){return this.build(),this._root},op.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof ep&&(s=t.remove(r,l,o))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},op.prototype.createHigherLevels=function(t,e){Bh.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},op.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof ep){var r=t.depth(i);r>e&&(e=r)}}return e+1}},op.prototype.createParentBoundables=function(t,e){var n=this;Bh.isTrue(!t.isEmpty());var r=new uc;r.add(this.createNode(e));var i=new uc(t);np.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},op.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},op.prototype.interfaces_=function(){return[uh]},op.prototype.getClass=function(){return op},op.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},sp.IntersectsOp.get=function(){return ap},sp.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},sp.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(op,sp);var ap=function(){},lp=function(){};lp.prototype.distance=function(t,e){},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp};var hp=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Bh.isTrue(t.length>0);for(var n=new uc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new cp(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new uc;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(vh(arguments[2],Ku)&&arguments[0]instanceof Object&&arguments[1]instanceof ep){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(vh(arguments[2],hc)&&arguments[0]instanceof Object&&arguments[1]instanceof ep){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Bh.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new uc(t);np.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(vh(arguments[0],lp)){var t=arguments[0],n=new rp(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof rp){var r=arguments[0];return this.nearestNeighbour(r,ah.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&vh(arguments[1],lp)){var i=arguments[0],o=arguments[1],s=new rp(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof rp&&"number"==typeof arguments[1]){var a=arguments[0],l=arguments[1],h=null,c=new Qu;for(c.add(a);!c.isEmpty()&&l>0;){var p=c.poll(),f=p.getDistance();if(f>=l)break;p.isLeaves()?(l=f,h=p):p.expandToQueue(c,l)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[2],y=new Ju(arguments[0],arguments[1]),v=new rp(this.getRoot(),y,d);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[tp,uh]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return cp},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[ch]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[ch]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(op),cp=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Nh(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ep),up=function(){};up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.relativeSign=function(t,e){return t<e?-1:t>e?1:0},up.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=up.relativeSign(e.x,n.x),i=up.relativeSign(e.y,n.y);switch(t){case 0:return up.compareValue(r,i);case 1:return up.compareValue(i,r);case 2:return up.compareValue(i,-r);case 3:return up.compareValue(-r,i);case 4:return up.compareValue(-r,-i);case 5:return up.compareValue(-i,-r);case 6:return up.compareValue(-i,r);case 7:return up.compareValue(r,-i)}return Bh.shouldNeverReachHere("invalid octant value"),0},up.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var pp=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new ul(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};pp.prototype.getCoordinate=function(){return this.coord},pp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},pp.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:up.compare(this._segmentOctant,this.coord,e.coord)},pp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},pp.prototype.isInterior=function(){return this._isInterior},pp.prototype.interfaces_=function(){return[hh]},pp.prototype.getClass=function(){return pp};var fp=function(){this._nodeMap=new Pc,this._edge=null;var t=arguments[0];this._edge=t};fp.prototype.getSplitCoordinates=function(){var t=new fc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},fp.prototype.addCollapsedNodes=function(){var t=new uc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},fp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},fp.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new bh(e+1))}},fp.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new ul(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new ul(e.coord))},fp.prototype.iterator=function(){return this._nodeMap.values().iterator()},fp.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},fp.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},fp.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new bh(e[0])),r=i}},fp.prototype.getEdge=function(){return this._edge},fp.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},fp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new ul(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new ul(e.coord)),new vp(o,this._edge.getData())},fp.prototype.add=function(t,e){var n=new pp(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(Bh.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},fp.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Xh("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Xh("bad split edge end point at "+i)},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var dp=function(){};dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new sh("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof ul&&arguments[1]instanceof ul){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new sh("Cannot compute the octant for two identical points "+i);return dp.octant(s,a)}};var gp=function(){};gp.prototype.getCoordinates=function(){},gp.prototype.size=function(){},gp.prototype.getCoordinate=function(t){},gp.prototype.isClosed=function(){},gp.prototype.setData=function(t){},gp.prototype.getData=function(){},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp};var yp=function(){};yp.prototype.addIntersection=function(t,e){},yp.prototype.interfaces_=function(){return[gp]},yp.prototype.getClass=function(){return yp};var vp=function(){this._nodeList=new fp(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};vp.prototype.getCoordinates=function(){return this._pts},vp.prototype.size=function(){return this._pts.length},vp.prototype.getCoordinate=function(t){return this._pts[t]},vp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},vp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},vp.prototype.setData=function(t){this._data=t},vp.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:dp.octant(t,e)},vp.prototype.getData=function(){return this._data},vp.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new ul(arguments[0].getIntersection(i));this.addIntersection(r,n)}},vp.prototype.toString=function(){return zh.toLineString(new cu(this._pts))},vp.prototype.getNodeList=function(){return this._nodeList},vp.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},vp.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},vp.prototype.interfaces_=function(){return[yp]},vp.prototype.getClass=function(){return vp},vp.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new uc;return vp.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var mp=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ul,this.p1=new ul;else if(1===arguments.length){var t=arguments[0];this.p0=new ul(t.p0),this.p1=new ul(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new ul(e,n),this.p1=new ul(r,i)}},xp={serialVersionUID:{configurable:!0}};mp.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mp.prototype.orientationIndex=function(){if(arguments[0]instanceof mp){var t=arguments[0],e=qh.orientationIndex(this.p0,this.p1,t.p0),n=qh.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof ul){var r=arguments[0];return qh.orientationIndex(this.p0,this.p1,r)}},mp.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},mp.prototype.isVertical=function(){return this.p0.x===this.p1.x},mp.prototype.equals=function(t){if(!(t instanceof mp))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},mp.prototype.intersection=function(t){var e=new Hh;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},mp.prototype.project=function(){if(arguments[0]instanceof ul){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ul(t);var e=this.projectionFactor(t),n=new ul;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof mp){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new mp(s,a)}},mp.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mp.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mp.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},mp.prototype.distancePerpendicular=function(t){return qh.distancePointLinePerpendicular(t,this.p0,this.p1)},mp.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mp.prototype.midPoint=function(){return mp.midPoint(this.p0,this.p1)},mp.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?ah.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},mp.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=ah.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},mp.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},mp.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mp.prototype.getLength=function(){return this.p0.distance(this.p1)},mp.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},mp.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},mp.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},mp.prototype.lineIntersection=function(t){try{return Mh.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Ph))throw t}return null},mp.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mp.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new ul(n-u,r+a)},mp.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},mp.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||ah.isNaN(e))&&(e=1),e},mp.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mp.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mp.prototype.distance=function(){if(arguments[0]instanceof mp){var t=arguments[0];return qh.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ul){var e=arguments[0];return qh.distancePointLine(e,this.p0,this.p1)}},mp.prototype.pointAlong=function(t){var e=new ul;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},mp.prototype.hashCode=function(){var t=ah.doubleToLongBits(this.p0.x);t^=31*ah.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=ah.doubleToLongBits(this.p1.x);return n^=31*ah.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},mp.prototype.interfaces_=function(){return[hh,uh]},mp.prototype.getClass=function(){return mp},mp.midPoint=function(t,e){return new ul((t.x+e.x)/2,(t.y+e.y)/2)},xp.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mp,xp);var bp=function(){this.tempEnv1=new Nh,this.tempEnv2=new Nh,this._overlapSeg1=new mp,this._overlapSeg2=new mp};bp.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var wp=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};wp.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},wp.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},wp.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},wp.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},wp.prototype.setId=function(t){this._id=t},wp.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},wp.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Nh(t,e)}return this._env},wp.prototype.getEndIndex=function(){return this._end},wp.prototype.getStartIndex=function(){return this._start},wp.prototype.getContext=function(){return this._context},wp.prototype.getId=function(){return this._id},wp.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var h=Math.trunc((t+e)/2),c=Math.trunc((r+i)/2);t<h&&(r<c&&this.computeOverlapsInternal(t,h,n,r,c,o),c<i&&this.computeOverlapsInternal(t,h,n,c,i,o)),h<e&&(r<c&&this.computeOverlapsInternal(h,e,n,r,c,o),c<i&&this.computeOverlapsInternal(h,e,n,c,i,o))},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp};var _p=function(){};_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.getChainStartIndices=function(t){var e=0,n=new uc;n.add(new bh(e));do{var r=_p.findChainEnd(t,e);n.add(new bh(r)),e=r}while(e<t.length-1);return _p.toIntArray(n)},_p.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Vu.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Vu.quadrant(t[i-1],t[i])===r);)i++;return i-1},_p.getChains=function(){if(1===arguments.length){var t=arguments[0];return _p.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new uc,i=_p.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new wp(e,i[o],i[o+1],n);r.add(s)}return r}},_p.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Sp=function(){};Sp.prototype.computeNodes=function(t){},Sp.prototype.getNodedSubstrings=function(){},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var Cp=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Cp.prototype.setSegmentIntersector=function(t){this._segInt=t},Cp.prototype.interfaces_=function(){return[Sp]},Cp.prototype.getClass=function(){return Cp};var Ep=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new uc,this._index=new hp,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return vp.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=_p.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Ap(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Ap},Object.defineProperties(e,n),e}(Cp),Ap=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),s=n.getContext();this._si.processIntersections(r,e,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bp),Ip=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},kp={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ip.prototype.getEndCapStyle=function(){return this._endCapStyle},Ip.prototype.isSingleSided=function(){return this._isSingleSided},Ip.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Ip.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ip.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Ip.JOIN_ROUND&&(this._quadrantSegments=Ip.DEFAULT_QUADRANT_SEGMENTS)},Ip.prototype.getJoinStyle=function(){return this._joinStyle},Ip.prototype.setJoinStyle=function(t){this._joinStyle=t},Ip.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Ip.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ip.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ip.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Ip.prototype.getMitreLimit=function(){return this._mitreLimit},Ip.prototype.setMitreLimit=function(t){this._mitreLimit=t},Ip.prototype.setSingleSided=function(t){this._isSingleSided=t},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip},Ip.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},kp.CAP_ROUND.get=function(){return 1},kp.CAP_FLAT.get=function(){return 2},kp.CAP_SQUARE.get=function(){return 3},kp.JOIN_ROUND.get=function(){return 1},kp.JOIN_MITRE.get=function(){return 2},kp.JOIN_BEVEL.get=function(){return 3},kp.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},kp.DEFAULT_MITRE_LIMIT.get=function(){return 5},kp.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Ip,kp);var Pp=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=qh.COUNTERCLOCKWISE,this._inputLine=t||null},Lp={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Pp.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Pp.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Pp.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},Pp.prototype.isShallowConcavity=function(t,e,n,r){return qh.computeOrientation(t,e,n)===this._angleOrientation&&qh.distancePointLine(e,t,n)<r},Pp.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Pp.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Pp.prototype.isConcave=function(t,e,n){return qh.computeOrientation(t,e,n)===this._angleOrientation},Pp.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=qh.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Pp.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Pp.DELETE;)e++;return e},Pp.prototype.isShallow=function(t,e,n,r){return qh.distancePointLine(e,t,n)<r},Pp.prototype.collapseLine=function(){for(var t=new fc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Pp.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.simplify=function(t,e){return new Pp(t).simplify(e)},Lp.INIT.get=function(){return 0},Lp.DELETE.get=function(){return 1},Lp.KEEP.get=function(){return 1},Lp.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Pp,Lp);var Mp=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new uc},Np={COORDINATE_ARRAY_TYPE:{configurable:!0}};Mp.prototype.getCoordinates=function(){return this._ptList.toArray(Mp.COORDINATE_ARRAY_TYPE)},Mp.prototype.setPrecisionModel=function(t){this._precisionModel=t},Mp.prototype.addPt=function(t){var e=new ul(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Mp.prototype.revere=function(){},Mp.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Mp.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Mp.prototype.toString=function(){return(new xu).createLineString(this.getCoordinates()).toString()},Mp.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ul(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Mp.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Np.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Mp,Np);var Tp=function(){},Op={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp},Tp.toDegrees=function(t){return 180*t/Math.PI},Tp.normalize=function(t){for(;t>Math.PI;)t-=Tp.PI_TIMES_2;for(;t<=-Math.PI;)t+=Tp.PI_TIMES_2;return t},Tp.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Tp.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Tp.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Tp.interiorAngle=function(t,e,n){var r=Tp.angle(e,t),i=Tp.angle(e,n);return Math.abs(i-r)},Tp.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Tp.PI_TIMES_2;t>=Tp.PI_TIMES_2&&(t=0)}else{for(;t>=Tp.PI_TIMES_2;)t-=Tp.PI_TIMES_2;t<0&&(t=0)}return t},Tp.angleBetween=function(t,e,n){var r=Tp.angle(e,t),i=Tp.angle(e,n);return Tp.diff(r,i)},Tp.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Tp.toRadians=function(t){return t*Math.PI/180},Tp.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Tp.COUNTERCLOCKWISE:n<0?Tp.CLOCKWISE:Tp.NONE},Tp.angleBetweenOriented=function(t,e,n){var r=Tp.angle(e,t),i=Tp.angle(e,n)-r;return i<=-Math.PI?i+Tp.PI_TIMES_2:i>Math.PI?i-Tp.PI_TIMES_2:i},Op.PI_TIMES_2.get=function(){return 2*Math.PI},Op.PI_OVER_2.get=function(){return Math.PI/2},Op.PI_OVER_4.get=function(){return Math.PI/4},Op.COUNTERCLOCKWISE.get=function(){return qh.COUNTERCLOCKWISE},Op.CLOCKWISE.get=function(){return qh.CLOCKWISE},Op.NONE.get=function(){return qh.COLLINEAR},Object.defineProperties(Tp,Op);var Rp=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mp,this._seg1=new mp,this._offset0=new mp,this._offset1=new mp,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Hh,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Ip.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Dp={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rp.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=qh.computeOrientation(this._s0,this._s1,this._s2),r=n===qh.CLOCKWISE&&this._side===Iu.LEFT||n===qh.COUNTERCLOCKWISE&&this._side===Iu.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rp.prototype.addLineEndCap=function(t,e){var n=new mp(t,e),r=new mp;this.computeOffsetSegment(n,Iu.LEFT,this._distance,r);var i=new mp;this.computeOffsetSegment(n,Iu.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Ip.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,qh.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Ip.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Ip.CAP_SQUARE:var u=new ul;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new ul(r.p1.x+u.x,r.p1.y+u.y),h=new ul(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}},Rp.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rp.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Mh.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Ph))throw t;o=new ul(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rp.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);r===qh.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,h,r,i),this._segList.addPt(n)},Rp.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rp.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ip.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ip.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rp.prototype.createSquare=function(t){this._segList.addPt(new ul(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ul(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ul(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ul(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rp.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rp.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rp.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rp.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rp.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Tp.angle(i,this._seg0.p0),s=Tp.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Tp.normalize(o+s),u=Tp.normalize(a+Math.PI),l=r*n,h=n-l*Math.abs(Math.sin(s)),c=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),f=new ul(c,p),g=new mp(i,f),d=g.pointAlongOffset(1,h),y=g.pointAlongOffset(1,-h);this._side===Iu.LEFT?(this._segList.addPt(d),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(d))},Rp.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Iu.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Rp.prototype.addFilletArc=function(t,e,n,r,i){var o=r===qh.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,h=new ul;l<s;){var c=e+o*l;h.x=t.x+i*Math.cos(c),h.y=t.y+i*Math.sin(c),this._segList.addPt(h),l+=u}},Rp.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new ul((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new ul((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rp.prototype.createCircle=function(t){var e=new ul(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rp.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rp.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Mp,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rp.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ip.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ip.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,qh.CLOCKWISE,this._distance))},Rp.prototype.closeRing=function(){this._segList.closeRing()},Rp.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Dp.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dp.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rp,Dp);var Fp=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Fp.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&dc.reverse(o),o},Fp.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Pp.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Iu.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Pp.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Iu.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Fp.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Iu.RIGHT&&(r=-r);var i=Pp.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Fp.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Pp.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Iu.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Pp.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Iu.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Fp.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Ip.CAP_ROUND:e.createCircle(t);break;case Ip.CAP_SQUARE:e.createSquare(t)}},Fp.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Fp.prototype.getBufferParameters=function(){return this._bufParams},Fp.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Fp.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Fp.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Fp.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Pp.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Iu.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Pp.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Iu.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Fp.prototype.getSegGen=function(t){return new Rp(this._precisionModel,this._bufParams,t)},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},Fp.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new ul(t[n]);return e};var zp=function(){this._subgraphs=null,this._seg=new mp,this._cga=new qh;var t=arguments[0];this._subgraphs=t},Xp={DepthSegment:{configurable:!0}};zp.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new uc,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(vh(arguments[2],hc)&&arguments[0]instanceof ul&&arguments[1]instanceof Wu){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),h=0;h<l.length-1;h++)if(t._seg.p0=l[h],t._seg.p1=l[h+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||qh.computeOrientation(t._seg.p0,t._seg.p1,s)===qh.RIGHT)){var p=a.getDepth(Iu.LEFT);t._seg.p0.equals(l[h])||(p=a.getDepth(Iu.RIGHT));var c=new Yp(t._seg,p);u.add(c)}}else if(vh(arguments[2],hc)&&arguments[0]instanceof ul&&vh(arguments[1],hc))for(var g=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var y=d.next();y.isForward()&&t.findStabbedSegments(g,y,f)}},zp.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:np.min(e)._leftDepth},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},Xp.DepthSegment.get=function(){return Yp},Object.defineProperties(zp,Xp);var Yp=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new mp(t),this._leftDepth=e};Yp.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Yp.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Yp.prototype.toString=function(){return this._upwardSeg.toString()},Yp.prototype.interfaces_=function(){return[hh]},Yp.prototype.getClass=function(){return Yp};var Bp=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Bp.prototype.area=function(){return Bp.area(this.p0,this.p1,this.p2)},Bp.prototype.signedArea=function(){return Bp.signedArea(this.p0,this.p1,this.p2)},Bp.prototype.interpolateZ=function(t){if(null===t)throw new sh("Supplied point is null.");return Bp.interpolateZ(t,this.p0,this.p1,this.p2)},Bp.prototype.longestSideLength=function(){return Bp.longestSideLength(this.p0,this.p1,this.p2)},Bp.prototype.isAcute=function(){return Bp.isAcute(this.p0,this.p1,this.p2)},Bp.prototype.circumcentre=function(){return Bp.circumcentre(this.p0,this.p1,this.p2)},Bp.prototype.area3D=function(){return Bp.area3D(this.p0,this.p1,this.p2)},Bp.prototype.centroid=function(){return Bp.centroid(this.p0,this.p1,this.p2)},Bp.prototype.inCentre=function(){return Bp.inCentre(this.p0,this.p1,this.p2)},Bp.prototype.interfaces_=function(){return[]},Bp.prototype.getClass=function(){return Bp},Bp.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Bp.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Bp.det=function(t,e,n,r){return t*r-e*n},Bp.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,h=s*l-a*u,c=t.x-i,p=t.y-o,f=(l*c-a*p)/h,g=(-u*c+s*p)/h;return e.z+f*(n.z-e.z)+g*(r.z-e.z)},Bp.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Bp.isAcute=function(t,e,n){return!!Tp.isAcute(t,e,n)&&!!Tp.isAcute(e,n,t)&&!!Tp.isAcute(n,t,e)},Bp.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*Bp.det(o,s,a,u),h=Bp.det(s,o*o+s*s,u,a*a+u*u),c=Bp.det(o,o*o+s*s,a,a*a+u*u);return new ul(r-h/l,i+c/l)},Bp.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Mh(t.x+n/2,t.y+r/2,1),o=new Mh(t.x-r+n/2,t.y+n+r/2,1);return new Mh(i,o)},Bp.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new ul(t.x+i*o,t.y+i*s)},Bp.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=i*u-o*a,h=o*s-r*u,c=r*a-i*s,p=l*l+h*h+c*c;return Math.sqrt(p)/2},Bp.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new ul(r,i)},Bp.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new ul(a,u)};var Gp=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new uc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Gp.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,gh.EXTERIOR,gh.INTERIOR)},Gp.prototype.addPolygon=function(t){var e=this,n=this._distance,r=Iu.LEFT;this._distance<0&&(n=-this._distance,r=Iu.RIGHT);var i=t.getExteriorRing(),o=dc.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,gh.EXTERIOR,gh.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=dc.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,Iu.opposite(r),gh.INTERIOR,gh.EXTERIOR)}},Gp.prototype.isTriangleErodedCompletely=function(t,e){var n=new Bp(t[0],t[1],t[2]),r=n.inCentre();return qh.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Gp.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=dc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,gh.EXTERIOR,gh.INTERIOR)},Gp.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new vp(t,new Du(0,gh.BOUNDARY,e,n));this._curveList.add(r)},Gp.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Gp.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<nu.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=nu.MINIMUM_VALID_SIZE&&qh.isCCW(t)&&(o=i,s=r,n=Iu.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Gp.prototype.add=function(t){if(t.isEmpty())return null;t instanceof th?this.addPolygon(t):t instanceof Qc?this.addLineString(t):t instanceof tu?this.addPoint(t):(t instanceof iu||t instanceof Yc||t instanceof ru||t instanceof Xc)&&this.addCollection(t)},Gp.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Gp.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp};var Vp=function(){};Vp.prototype.locate=function(t){},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp};var Hp=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Hp.prototype.next=function(){if(this._atStart)return this._atStart=!1,Hp.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new cc;var t=this._parent.getGeometryN(this._index++);return t instanceof Xc?(this._subcollectionIterator=new Hp(t),this._subcollectionIterator.next()):t},Hp.prototype.remove=function(){throw new Error(this.getClass().getName())},Hp.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Hp.prototype.interfaces_=function(){return[lc]},Hp.prototype.getClass=function(){return Hp},Hp.isAtomic=function(t){return!(t instanceof Xc)};var jp=function(){this._geom=null;var t=arguments[0];this._geom=t};jp.prototype.locate=function(t){return jp.locate(t,this._geom)},jp.prototype.interfaces_=function(){return[Vp]},jp.prototype.getClass=function(){return jp},jp.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&qh.isPointInRing(t,e.getCoordinates())},jp.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!jp.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(jp.isPointInRing(t,i))return!1}return!0},jp.containsPoint=function(t,e){if(e instanceof th)return jp.containsPointInPolygon(t,e);if(e instanceof Xc)for(var n=new Hp(e);n.hasNext();){var r=n.next();if(r!==e&&jp.containsPoint(t,r))return!0}return!1},jp.locate=function(t,e){return e.isEmpty()?gh.EXTERIOR:jp.containsPoint(t,e)?gh.INTERIOR:gh.EXTERIOR};var Wp=function(){this._edgeMap=new Pc,this._edgeList=null,this._ptInAreaLocation=[gh.NONE,gh.NONE]};Wp.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Wp.prototype.propagateSideLabels=function(t){for(var e=gh.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Iu.LEFT)!==gh.NONE&&(e=r.getLocation(t,Iu.LEFT))}if(e===gh.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Iu.ON)===gh.NONE&&a.setLocation(t,Iu.ON,i),a.isArea(t)){var u=a.getLocation(t,Iu.LEFT),l=a.getLocation(t,Iu.RIGHT);if(l!==gh.NONE){if(l!==i)throw new Nu("side location conflict",s.getCoordinate());u===gh.NONE&&Bh.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Bh.isTrue(a.getLocation(t,Iu.LEFT)===gh.NONE,"found single null side"),a.setLocation(t,Iu.RIGHT,i),a.setLocation(t,Iu.LEFT,i)}}},Wp.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Wp.prototype.print=function(t){Lh.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Wp.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Wp.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Iu.LEFT);Bh.isTrue(r!==gh.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Bh.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Iu.LEFT),u=s.getLocation(t,Iu.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Wp.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Wp.prototype.iterator=function(){return this.getEdges().iterator()},Wp.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new uc(this._edgeMap.values())),this._edgeList},Wp.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===gh.NONE&&(this._ptInAreaLocation[t]=jp.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Wp.prototype.toString=function(){var t=new xh;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Wp.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Wp.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===gh.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=gh.NONE;if(e[u])l=gh.EXTERIOR;else{var h=s.getCoordinate();l=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,l)}},Wp.prototype.getDegree=function(){return this._edgeMap.size()},Wp.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var qp=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new Nu("no outgoing dirEdge found",this.getCoordinate());Bh.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Vu.isNorthern(i)&&Vu.isNorthern(o)?n:Vu.isNorthern(i)||Vu.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Bh.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Lh.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new uc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(Iu.LEFT),i=e.getDepth(Iu.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r);if(this.computeDepths(0,n,o)!==i)throw new Nu("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var u=arguments[1],l=arguments[2],h=arguments[0];h<u;h++){var p=t._edgeList.get(h);p.setEdgeDepths(Iu.RIGHT,l),l=p.getDepth(Iu.LEFT)}return l}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Bh.isTrue(null!==n,"found null for first outgoing dirEdge"),Bh.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=gh.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=gh.INTERIOR;break}if(r.isInResult()){t=gh.EXTERIOR;break}}}if(t===gh.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===gh.INTERIOR):(s.isInResult()&&(i=gh.EXTERIOR),a.isInResult()&&(i=gh.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Du(gh.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==gh.INTERIOR&&o!==gh.BOUNDARY||this._label.setLocation(i,gh.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wp),Up=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Bu(t,new qp)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qu),Zp=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Zp.prototype.compareTo=function(t){var e=t;return Zp.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Zp.prototype.interfaces_=function(){return[hh]},Zp.prototype.getClass=function(){return Zp},Zp.orientation=function(t){return 1===dc.increasingDirection(t)},Zp.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=i)===s,p=(l+=o)===a;if(c&&!p)return-1;if(!c&&p)return 1;if(c&&p)return 0}};var $p=function(){this._edges=new uc,this._ocaMap=new Pc};$p.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},$p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},$p.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},$p.prototype.iterator=function(){return this._edges.iterator()},$p.prototype.getEdges=function(){return this._edges},$p.prototype.get=function(t){return this._edges.get(t)},$p.prototype.findEqualEdge=function(t){var e=new Zp(t.getCoordinates());return this._ocaMap.get(e)},$p.prototype.add=function(t){this._edges.add(t);var e=new Zp(t.getCoordinates());this._ocaMap.put(e,t)},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p};var Jp=function(){};Jp.prototype.processIntersections=function(t,e,n,r){},Jp.prototype.isDone=function(){},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Qp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Qp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Qp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Qp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Qp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Qp.prototype.getLineIntersector=function(){return this._li},Qp.prototype.hasProperIntersection=function(){return this._hasProper},Qp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Qp.prototype.hasIntersection=function(){return this._hasIntersection},Qp.prototype.isDone=function(){return!1},Qp.prototype.hasInteriorIntersection=function(){return this._hasInterior},Qp.prototype.interfaces_=function(){return[Jp]},Qp.prototype.getClass=function(){return Qp},Qp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new ul(t),this.segmentIndex=e,this.dist=n};Kp.prototype.getSegmentIndex=function(){return this.segmentIndex},Kp.prototype.getCoordinate=function(){return this.coord},Kp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kp.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Kp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kp.prototype.getDistance=function(){return this.dist},Kp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kp.prototype.interfaces_=function(){return[hh]},Kp.prototype.getClass=function(){return Kp};var tf=function(){this._nodeMap=new Pc,this.edge=null;var t=arguments[0];this.edge=t};tf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},tf.prototype.iterator=function(){return this._nodeMap.values().iterator()},tf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},tf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},tf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new ul(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new sf(o,new Du(this.edge._label))},tf.prototype.add=function(t,e,n){var r=new Kp(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},tf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf};var ef=function(){};ef.prototype.getChainStartIndices=function(t){var e=0,n=new uc;n.add(new bh(e));do{var r=this.findChainEnd(t,e);n.add(new bh(r)),e=r}while(e<t.length-1);return ef.toIntArray(n)},ef.prototype.findChainEnd=function(t,e){for(var n=Vu.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Vu.quadrant(t[r-1],t[r])===n;)r++;return r-1},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var nf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Nh,this.env2=new Nh;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ef;this.startIndex=e.getChainStartIndices(this.pts)};nf.prototype.getCoordinates=function(){return this.pts},nf.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},nf.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},nf.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],h=this.pts[i],c=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(h,c),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((i+o)/2),d=Math.trunc((a+u)/2);i<g&&(a<d&&this.computeIntersectsForChain(i,g,s,a,d,l),d<u&&this.computeIntersectsForChain(i,g,s,d,u,l)),g<o&&(a<d&&this.computeIntersectsForChain(g,o,s,a,d,l),d<u&&this.computeIntersectsForChain(g,o,s,d,u,l))}},nf.prototype.getStartIndexes=function(){return this.startIndex},nf.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf};var rf=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},of={NULL_VALUE:{configurable:!0}};rf.prototype.getDepth=function(t,e){return this._depth[t][e]},rf.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},rf.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==rf.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===rf.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===rf.NULL_VALUE}},rf.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},rf.prototype.getDelta=function(t){return this._depth[t][Iu.RIGHT]-this._depth[t][Iu.LEFT]},rf.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?gh.EXTERIOR:gh.INTERIOR},rf.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},rf.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==gh.EXTERIOR&&i!==gh.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=rf.depthAtLocation(i):t._depth[n][r]+=rf.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===gh.INTERIOR&&this._depth[o][s]++}},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.depthAtLocation=function(t){return t===gh.EXTERIOR?0:t===gh.INTERIOR?1:rf.NULL_VALUE},of.NULL_VALUE.get=function(){return-1},Object.defineProperties(rf,of);var sf=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new tf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new rf,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Du.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new nf(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Nh;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new ul(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new xh;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Iu.ON),e.getLocation(1,Iu.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Iu.LEFT),e.getLocation(1,Iu.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Iu.RIGHT),e.getLocation(1,Iu.RIGHT),2))},e}(Yu),af=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new $p,this._bufParams=t||null};af.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},af.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Du(t.getLabel())).flip(),n.merge(r);var i=af.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(af.depthDelta(t.getLabel()))},af.prototype.buildSubgraphs=function(t,e){for(var n=new uc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new zp(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},af.prototype.createSubgraphs=function(t){for(var e=new uc,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ou;i.create(r),e.add(i)}}return np.sort(e,np.reverseOrder()),e},af.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},af.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ep,n=new Hh;return n.setPrecisionModel(t),e.setSegmentIntersector(new Qp(n)),e},af.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Fp(n,this._bufParams),i=new Gp(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Uu(new Up),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Zu(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},af.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new sf(i.getCoordinates(),new Du(s));this.insertUniqueEdge(a)}}},af.prototype.setNoder=function(t){this._workingNoder=t},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},af.depthDelta=function(t){var e=t.getLocation(0,Iu.LEFT),n=t.getLocation(0,Iu.RIGHT);return e===gh.INTERIOR&&n===gh.EXTERIOR?1:e===gh.EXTERIOR&&n===gh.INTERIOR?-1:0},af.convertSegStrings=function(t){for(var e=new xu,n=new uc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var lf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};lf.prototype.rescale=function(){var t=this;if(vh(arguments[0],sc))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],r=0;r<i.length;r++)i[r].x=i[r].x/t._scaleFactor+t._offsetX,i[r].y=i[r].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Lh.out.println(i)}},lf.prototype.scale=function(){var t=this;if(vh(arguments[0],sc)){for(var e=arguments[0],n=new uc,r=e.iterator();r.hasNext();){var i=r.next();n.add(new vp(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ul(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);return dc.removeRepeatedPoints(s)}},lf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},lf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},lf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},lf.prototype.interfaces_=function(){return[Sp]},lf.prototype.getClass=function(){return lf};var hf=function(){this._li=new Hh,this._segStrings=null;var t=arguments[0];this._segStrings=t},cf={fact:{configurable:!0}};hf.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next().getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],s=arguments[1].iterator();s.hasNext();)for(var u=s.next().getCoordinates(),r=1;r<u.length-1;r++)if(u[r].equals(i))throw new Xh("found endpt/interior pt intersection at index "+r+" :pt "+i)},hf.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var h=0;h<u.length-1;h++)t.checkInteriorIntersections(o,l,s,h);else if(4===arguments.length){var c=arguments[0],p=arguments[1],f=arguments[2],g=arguments[3];if(c===f&&p===g)return null;var d=c.getCoordinates()[p],y=c.getCoordinates()[p+1],v=f.getCoordinates()[g],m=f.getCoordinates()[g+1];if(this._li.computeIntersection(d,y,v,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,v,m)))throw new Xh("found non-noded intersection at "+d+"-"+y+" and "+v+"-"+m)}},hf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},hf.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),r=0;r<i.length-2;r++)t.checkCollapse(i[r],i[r+1],i[r+2])},hf.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},hf.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Xh("found non-noded collapse at "+hf.fact.createLineString([t,e,n]))},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},cf.fact.get=function(){return new xu},Object.defineProperties(hf,cf);var uf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new sh("Scale factor must be non-zero");1!==e&&(this._pt=new ul(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ul,this._p1Scaled=new ul),this.initCorners(this._pt)},pf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};uf.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Bh.isTrue(!(s&&a),"Found bad envelope test"),a},uf.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new ul(this._maxx,this._maxy),this._corner[1]=new ul(this._minx,this._maxy),this._corner[2]=new ul(this._minx,this._miny),this._corner[3]=new ul(this._maxx,this._miny)},uf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},uf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},uf.prototype.getCoordinate=function(){return this._originalPt},uf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},uf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=uf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Nh(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},uf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},uf.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},uf.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf},pf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(uf,pf);var ff=function(){this.tempEnv1=new Nh,this.selectedSegment=new mp};ff.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff};var df=function(){this._index=null;var t=arguments[0];this._index=t},gf={HotPixelSnapAction:{configurable:!0}};df.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new yf(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ku]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},gf.HotPixelSnapAction.get=function(){return yf},Object.defineProperties(df,gf);var yf=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ff),vf=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new uc};vf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},vf.prototype.isDone=function(){return!1},vf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},vf.prototype.interfaces_=function(){return[Jp]},vf.prototype.getClass=function(){return vf};var mf=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Hh,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};mf.prototype.checkCorrectness=function(t){var e=vp.getNodedSubstrings(t),n=new hf(e);try{n.checkValid()}catch(t){if(!(t instanceof kh))throw t;t.printStackTrace()}},mf.prototype.getNodedSubstrings=function(){return vp.getNodedSubstrings(this._nodedSegStrings)},mf.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},mf.prototype.findInteriorIntersections=function(t,e){var n=new vf(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},mf.prototype.computeVertexSnaps=function(){var t=this;if(vh(arguments[0],sc))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof vp)for(var i=arguments[0],r=i.getCoordinates(),s=0;s<r.length;s++){var a=new uf(r[s],t._scaleFactor,t._li);t._pointSnapper.snap(a,i,s)&&i.addIntersection(r[s],s)}},mf.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Ep,this._pointSnapper=new df(this._noder.getIndex()),this.snapRound(t,this._li)},mf.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new uf(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},mf.prototype.interfaces_=function(){return[Sp]},mf.prototype.getClass=function(){return mf};var xf=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ip,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},bf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};xf.prototype.bufferFixedPrecision=function(t){var e=new lf(new mf(new gu(1)),t.getScale()),n=new af(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},xf.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=xf.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Nu))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=xf.precisionScaleFactor(this._argGeom,this._distance,n),i=new gu(r);this.bufferFixedPrecision(i)}},xf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===gu.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},xf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},xf.prototype.bufferOriginalPrecision=function(){try{var t=new af(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Xh))throw t;this._saveException=t}},xf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},xf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf},xf.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new xf(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof $h&&"number"==typeof arguments[1]){var e=arguments[1],s=arguments[2],a=new xf(arguments[0]);return a.setQuadrantSegments(s),a.getResultGeometry(e)}if(arguments[2]instanceof Ip&&arguments[0]instanceof $h&&"number"==typeof arguments[1]){var n=arguments[1];return new xf(arguments[0],arguments[2]).getResultGeometry(n)}}else if(4===arguments.length){var r=arguments[1],o=arguments[2],l=arguments[3],h=new xf(arguments[0]);return h.setQuadrantSegments(o),h.setEndCapStyle(l),h.getResultGeometry(r)}},xf.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=dl.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},bf.CAP_ROUND.get=function(){return Ip.CAP_ROUND},bf.CAP_BUTT.get=function(){return Ip.CAP_FLAT},bf.CAP_FLAT.get=function(){return Ip.CAP_FLAT},bf.CAP_SQUARE.get=function(){return Ip.CAP_SQUARE},bf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(xf,bf);var wf=function(){this._pt=[new ul,new ul],this._distance=ah.NaN,this._isNull=!0};wf.prototype.getCoordinates=function(){return this._pt},wf.prototype.getCoordinate=function(t){return this._pt[t]},wf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},wf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},wf.prototype.getDistance=function(){return this._distance},wf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf};var _f=function(){};_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},_f.computeDistance=function(){if(arguments[2]instanceof wf&&arguments[0]instanceof Qc&&arguments[1]instanceof ul)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),i=new mp,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1]);var s=i.closestPoint(t);e.setMinimum(s,t)}else if(arguments[2]instanceof wf&&arguments[0]instanceof th&&arguments[1]instanceof ul){var a=arguments[0],u=arguments[1],o=arguments[2];_f.computeDistance(a.getExteriorRing(),u,o);for(var l=0;l<a.getNumInteriorRing();l++)_f.computeDistance(a.getInteriorRingN(l),u,o)}else if(arguments[2]instanceof wf&&arguments[0]instanceof $h&&arguments[1]instanceof ul){var h=arguments[0],p=arguments[1],c=arguments[2];if(h instanceof Qc)_f.computeDistance(h,p,c);else if(h instanceof th)_f.computeDistance(h,p,c);else if(h instanceof Xc)for(var g=h,f=0;f<g.getNumGeometries();f++){var d=g.getGeometryN(f);_f.computeDistance(d,p,c)}else c.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof wf&&arguments[0]instanceof mp&&arguments[1]instanceof ul){var y=arguments[1],v=arguments[2],m=arguments[0].closestPoint(y);v.setMinimum(m,y)}};var Sf=function(t){this._maxPtDist=new wf,this._inputGeom=t||null},Cf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Sf.prototype.computeMaxMidpointDistance=function(t){var e=new Af(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Sf.prototype.computeMaxVertexDistance=function(t){var e=new Ef(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Sf.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Sf.prototype.getDistancePoints=function(){return this._maxPtDist},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Cf.MaxPointDistanceFilter.get=function(){return Ef},Cf.MaxMidpointDistanceFilter.get=function(){return Af},Object.defineProperties(Sf,Cf);var Ef=function(t){this._maxPtDist=new wf,this._minPtDist=new wf,this._geom=t||null};Ef.prototype.filter=function(t){this._minPtDist.initialize(),_f.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ef.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ef.prototype.interfaces_=function(){return[Kh]},Ef.prototype.getClass=function(){return Ef};var Af=function(t){this._maxPtDist=new wf,this._minPtDist=new wf,this._geom=t||null};Af.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new ul((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_f.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Af.prototype.isDone=function(){return!1},Af.prototype.isGeometryChanged=function(){return!1},Af.prototype.getMaxPointDistance=function(){return this._maxPtDist},Af.prototype.interfaces_=function(){return[zc]},Af.prototype.getClass=function(){return Af};var If=function(t){this._comps=t||null};If.prototype.filter=function(t){t instanceof th&&this._comps.add(t)},If.prototype.interfaces_=function(){return[Fc]},If.prototype.getClass=function(){return If},If.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return If.getPolygons(t,new uc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof th?n.add(e):e instanceof Xc&&e.apply(new If(n)),n}};var kf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};kf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nu){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qc&&this._lines.add(t)},kf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},kf.prototype.interfaces_=function(){return[Zh]},kf.prototype.getClass=function(){return kf},kf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(kf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(kf.getLines(e,n))}},kf.getLines=function(){if(1===arguments.length){var t=arguments[0];return kf.getLines(t,!1)}if(2===arguments.length){if(vh(arguments[0],sc)&&vh(arguments[1],sc)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();kf.getLines(i,e)}return e}if(arguments[0]instanceof $h&&"boolean"==typeof arguments[1]){var r=arguments[0],s=arguments[1],a=new uc;return r.apply(new kf(a,s)),a}if(arguments[0]instanceof $h&&vh(arguments[1],sc)){var u=arguments[0],o=arguments[1];return u instanceof Qc?o.add(u):u.apply(new kf(o)),o}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&vh(arguments[0],sc)&&vh(arguments[1],sc)){for(var l=arguments[1],p=arguments[2],h=arguments[0].iterator();h.hasNext();){var g=h.next();kf.getLines(g,l,p)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof $h&&vh(arguments[1],sc)){var c=arguments[1],f=arguments[2];return arguments[0].apply(new kf(c,f)),c}}};var Pf=function(){if(this._boundaryRule=tc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new sh("Rule must be non-null");this._boundaryRule=t}};Pf.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof ul&&arguments[1]instanceof th){var e=arguments[0],n=arguments[1];if(n.isEmpty())return gh.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===gh.EXTERIOR)return gh.EXTERIOR;if(i===gh.BOUNDARY)return gh.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===gh.INTERIOR)return gh.EXTERIOR;if(a===gh.BOUNDARY)return gh.BOUNDARY}return gh.INTERIOR}if(arguments[0]instanceof ul&&arguments[1]instanceof Qc){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return gh.EXTERIOR;var h=l.getCoordinates();return l.isClosed()||!u.equals(h[0])&&!u.equals(h[h.length-1])?qh.isOnLine(u,h)?gh.INTERIOR:gh.EXTERIOR:gh.BOUNDARY}if(arguments[0]instanceof ul&&arguments[1]instanceof tu){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?gh.INTERIOR:gh.EXTERIOR}},Pf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?qh.locatePointInRing(t,e.getCoordinates()):gh.EXTERIOR},Pf.prototype.intersects=function(t,e){return this.locate(t,e)!==gh.EXTERIOR},Pf.prototype.updateLocationInfo=function(t){t===gh.INTERIOR&&(this._isIn=!0),t===gh.BOUNDARY&&this._numBoundaries++},Pf.prototype.computeLocation=function(t,e){var n=this;if(e instanceof tu&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Qc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof th)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Yc)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof ru)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof Xc)for(var l=new Hp(e);l.hasNext();){var h=l.next();h!==e&&n.computeLocation(t,h)}},Pf.prototype.locate=function(t,e){return e.isEmpty()?gh.EXTERIOR:e instanceof Qc||e instanceof th?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?gh.BOUNDARY:this._numBoundaries>0||this._isIn?gh.INTERIOR:gh.EXTERIOR)},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf};var Lf=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2];this._component=e,this._segIndex=i,this._pt=n}},Mf={INSIDE_AREA:{configurable:!0}};Lf.prototype.isInsideArea=function(){return this._segIndex===Lf.INSIDE_AREA},Lf.prototype.getCoordinate=function(){return this._pt},Lf.prototype.getGeometryComponent=function(){return this._component},Lf.prototype.getSegmentIndex=function(){return this._segIndex},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf},Mf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Lf,Mf);var Nf=function(t){this._pts=t||null};Nf.prototype.filter=function(t){t instanceof tu&&this._pts.add(t)},Nf.prototype.interfaces_=function(){return[Fc]},Nf.prototype.getClass=function(){return Nf},Nf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof tu?np.singletonList(t):Nf.getPoints(t,new uc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof tu?n.add(e):e instanceof Xc&&e.apply(new Nf(n)),n}};var Tf=function(){this._locations=null;var t=arguments[0];this._locations=t};Tf.prototype.filter=function(t){(t instanceof tu||t instanceof Qc||t instanceof th)&&this._locations.add(new Lf(t,0,t.getCoordinate()))},Tf.prototype.interfaces_=function(){return[Fc]},Tf.prototype.getClass=function(){return Tf},Tf.getLocations=function(t){var e=new uc;return t.apply(new Tf(e)),e};var Of=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Pf,this._minDistanceLocation=null,this._minDistance=ah.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Of.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=If.getPolygons(this._geom[n]);if(o.size()>0){var s=Tf.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&vh(arguments[0],hc)&&vh(arguments[1],hc)){for(var a=arguments[0],u=arguments[1],l=arguments[2],h=0;h<a.size();h++)for(var c=a.get(h),p=0;p<u.size();p++)if(t.computeContainmentDistance(c,u.get(p),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Lf&&arguments[1]instanceof th){var f=arguments[0],g=arguments[1],d=arguments[2],y=f.getCoordinate();if(gh.EXTERIOR!==this._ptLocator.locate(y,g))return this._minDistance=0,d[0]=f,d[1]=new Lf(g,y),null}},Of.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Of.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=kf.getLines(this._geom[0]),n=kf.getLines(this._geom[1]),r=Nf.getPoints(this._geom[0]),i=Nf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Of.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Of.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Of.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Of.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof tu){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=qh.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var l=new mp(i[s],i[s+1]).closestPoint(o);r[0]=new Lf(e,s,l),r[1]=new Lf(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof Qc){var h=arguments[0],c=arguments[1],p=arguments[2];if(h.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=h.getCoordinates(),g=c.getCoordinates(),d=0;d<f.length-1;d++)for(var y=0;y<g.length-1;y++){var v=qh.distanceLineLine(f[d],f[d+1],g[y],g[y+1]);if(v<t._minDistance){t._minDistance=v;var m=new mp(f[d],f[d+1]),x=new mp(g[y],g[y+1]),w=m.closestPoints(x);p[0]=new Lf(h,d,w[0]),p[1]=new Lf(c,y,w[1])}if(t._minDistance<=t._terminateDistance)return null}}},Of.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Lf(o,0,o.getCoordinate()),n[1]=new Lf(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},Of.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new sh("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Of.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Of.distance=function(t,e){return new Of(t,e).distance()},Of.isWithinDistance=function(t,e,n){return new Of(t,e,n).distance()<=n},Of.nearestPoints=function(t,e){return new Of(t,e).nearestPoints()};var Rf=function(){this._pt=[new ul,new ul],this._distance=ah.NaN,this._isNull=!0};Rf.prototype.getCoordinates=function(){return this._pt},Rf.prototype.getCoordinate=function(t){return this._pt[t]},Rf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Rf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Rf.prototype.toString=function(){return zh.toLineString(this._pt[0],this._pt[1])},Rf.prototype.getDistance=function(){return this._distance},Rf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf};var Df=function(){};Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.computeDistance=function(){if(arguments[2]instanceof Rf&&arguments[0]instanceof Qc&&arguments[1]instanceof ul)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new mp,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Rf&&arguments[0]instanceof th&&arguments[1]instanceof ul){var a=arguments[0],u=arguments[1],l=arguments[2];Df.computeDistance(a.getExteriorRing(),u,l);for(var h=0;h<a.getNumInteriorRing();h++)Df.computeDistance(a.getInteriorRingN(h),u,l)}else if(arguments[2]instanceof Rf&&arguments[0]instanceof $h&&arguments[1]instanceof ul){var c=arguments[0],p=arguments[1],f=arguments[2];if(c instanceof Qc)Df.computeDistance(c,p,f);else if(c instanceof th)Df.computeDistance(c,p,f);else if(c instanceof Xc)for(var g=c,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);Df.computeDistance(y,p,f)}else f.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof Rf&&arguments[0]instanceof mp&&arguments[1]instanceof ul){var v=arguments[1],m=arguments[2],x=arguments[0].closestPoint(v);m.setMinimum(x,v)}};var Ff=function(){this._g0=null,this._g1=null,this._ptDist=new Rf,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},zf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ff.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ff.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new sh("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ff.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ff.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ff.prototype.computeOrientedDistance=function(t,e,n){var r=new Xf(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Yf(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Ff.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.distance=function(){if(2===arguments.length)return new Ff(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],s=new Ff(arguments[0],arguments[1]);return s.setDensifyFraction(t),s.distance()}},zf.MaxPointDistanceFilter.get=function(){return Xf},zf.MaxDensifiedByFractionDistanceFilter.get=function(){return Yf},Object.defineProperties(Ff,zf);var Xf=function(){this._maxPtDist=new Rf,this._minPtDist=new Rf,this._euclideanDist=new Df,this._geom=null;var t=arguments[0];this._geom=t};Xf.prototype.filter=function(t){this._minPtDist.initialize(),Df.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Xf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Xf.prototype.interfaces_=function(){return[Kh]},Xf.prototype.getClass=function(){return Xf};var Yf=function(){this._maxPtDist=new Rf,this._minPtDist=new Rf,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Yf.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,l=r.y+a*s,h=new ul(u,l);n._minPtDist.initialize(),Df.computeDistance(n._geom,h,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},Yf.prototype.isDone=function(){return!1},Yf.prototype.isGeometryChanged=function(){return!1},Yf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Yf.prototype.interfaces_=function(){return[zc]},Yf.prototype.getClass=function(){return Yf};var Bf=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Gf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Bf.prototype.checkMaximumDistance=function(t,e,n){var r=new Ff(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+zh.toLineString(i[0],i[1])+")"}},Bf.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Bf.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Bf.VERBOSE&&Lh.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Bf.prototype.checkNegativeValid=function(){if(!(this._input instanceof th||this._input instanceof ru||this._input instanceof Xc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Bf.prototype.getErrorIndicator=function(){return this._errorIndicator},Bf.prototype.checkMinimumDistance=function(t,e,n){var r=new Of(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+zh.toLineString(i[0],i[1])+" )"}},Bf.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Bf.prototype.getErrorLocation=function(){return this._errorLocation},Bf.prototype.getPolygonLines=function(t){for(var e=new uc,n=new kf(e),r=If.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Bf.prototype.getErrorMessage=function(){return this._errMsg},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},Gf.VERBOSE.get=function(){return!1},Gf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bf,Gf);var Vf=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Hf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Vf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Vf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Vf.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Nh(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Nh(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Vf.prototype.checkDistance=function(){var t=new Bf(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Vf.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Vf.prototype.checkPolygonal=function(){this._result instanceof th||this._result instanceof ru||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Vf.prototype.getErrorIndicator=function(){return this._errorIndicator},Vf.prototype.getErrorLocation=function(){return this._errorLocation},Vf.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Vf.prototype.report=function(t){if(!Vf.VERBOSE)return null;Lh.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Vf.prototype.getErrorMessage=function(){return this._errorMsg},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf},Vf.isValidMsg=function(t,e,n){var r=new Vf(t,e,n);return r.isValid()?null:r.getErrorMessage()},Vf.isValid=function(t,e,n){return!!new Vf(t,e,n).isValid()},Hf.VERBOSE.get=function(){return!1},Hf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Vf,Hf);var jf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};jf.prototype.getCoordinates=function(){return this._pts},jf.prototype.size=function(){return this._pts.length},jf.prototype.getCoordinate=function(t){return this._pts[t]},jf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},jf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:dp.octant(this.getCoordinate(t),this.getCoordinate(t+1))},jf.prototype.setData=function(t){this._data=t},jf.prototype.getData=function(){return this._data},jf.prototype.toString=function(){return zh.toLineString(new cu(this._pts))},jf.prototype.interfaces_=function(){return[gp]},jf.prototype.getClass=function(){return jf};var Wf=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new uc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Wf.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Wf.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Wf.prototype.getIntersectionSegments=function(){return this._intSegments},Wf.prototype.count=function(){return this._intersectionCount},Wf.prototype.getIntersections=function(){return this._intersections},Wf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Wf.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Wf.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Wf.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Wf.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Wf.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Wf.prototype.interfaces_=function(){return[Jp]},Wf.prototype.getClass=function(){return Wf},Wf.createAllIntersectionsFinder=function(t){var e=new Wf(t);return e.setFindAllIntersections(!0),e},Wf.createAnyIntersectionFinder=function(t){return new Wf(t)},Wf.createIntersectionCounter=function(t){var e=new Wf(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qf=function(){this._li=new Hh,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qf.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qf.prototype.getIntersections=function(){return this._segInt.getIntersections()},qf.prototype.isValid=function(){return this.execute(),this._isValid},qf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Wf(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Ep;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Nu(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+zh.toLineString(t[0],t[1])+" and "+zh.toLineString(t[2],t[3])},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.computeIntersections=function(t){var e=new qf(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Uf=function t(){this._nv=null;var e=arguments[0];this._nv=new qf(t.toSegmentStrings(e))};Uf.prototype.checkValid=function(){this._nv.checkValid()},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.toSegmentStrings=function(t){for(var e=new uc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new jf(r.getCoordinates(),r))}return e},Uf.checkValid=function(t){new Uf(t).checkValid()};var Zf=function(t){this._mapOp=t};Zf.prototype.map=function(t){for(var e=new uc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(xu.toGeometryArray(e))},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Zf.map=function(t,e){return new Zf(e).map(t)};var $f=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new uc,this._resultLineList=new uc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};$f.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},$f.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},$f.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},$f.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Nd.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},$f.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},$f.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},$f.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},$f.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Bh.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Nd.isResultOfOp(r,e)&&e===Nd.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f};var Jf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new uc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Jf.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Jf.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Nd.INTERSECTION)){var r=n.getLabel();Nd.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Jf.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var Qf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Qf.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Qf.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof nu&&!r.isEmpty()||(n=!1);for(var i=new uc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nu||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new uc;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Qf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Qf.prototype.getInputGeometry=function(){return this._inputGeom},Qf.prototype.transformMultiLineString=function(t,e){for(var n=new uc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qf.prototype.transformCoordinates=function(t,e){return this.copy(t)},Qf.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Qf.prototype.transformMultiPoint=function(t,e){for(var n=new uc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qf.prototype.transformMultiPolygon=function(t,e){for(var n=new uc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qf.prototype.copy=function(t){return t.copy()},Qf.prototype.transformGeometryCollection=function(t,e){for(var n=new uc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(xu.toGeometryArray(n)):this._factory.buildGeometry(n)},Qf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof tu)return this.transformPoint(t,null);if(t instanceof iu)return this.transformMultiPoint(t,null);if(t instanceof nu)return this.transformLinearRing(t,null);if(t instanceof Qc)return this.transformLineString(t,null);if(t instanceof Yc)return this.transformMultiLineString(t,null);if(t instanceof th)return this.transformPolygon(t,null);if(t instanceof ru)return this.transformMultiPolygon(t,null);if(t instanceof Xc)return this.transformGeometryCollection(t,null);throw new sh("Unknown Geometry subtype: "+t.getClass().getName())},Qf.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var Kf=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mp,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Qc&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};Kf.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new ul(o)),0===r&&this._isClosed&&t.set(t.size()-1,new ul(o)))}},Kf.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Kf.prototype.snapTo=function(t){var e=new fc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Kf.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new ul(i),!1)}},Kf.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=ah.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},Kf.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Kf.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var ed=function(t){this._srcGeom=t||null},id={SNAP_PRECISION_FACTOR:{configurable:!0}};ed.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new nd(e,n).transform(this._srcGeom)},ed.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new nd(t,n,!0).transform(this._srcGeom),i=r;return e&&vh(i,eu)&&(i=r.buffer(0)),i},ed.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},ed.prototype.extractTargetCoordinates=function(t){for(var e=new Nc,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},ed.prototype.computeMinimumSegmentLength=function(t){for(var e=ah.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},ed.prototype.interfaces_=function(){return[]},ed.prototype.getClass=function(){return ed},ed.snap=function(t,e,n){var r=new Array(2).fill(null),i=new ed(t);r[0]=i.snapTo(e,n);var o=new ed(e);return r[1]=o.snapTo(r[0],n),r},ed.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ed.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===gu.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(ed.computeOverlaySnapTolerance(i),ed.computeOverlaySnapTolerance(o))}},ed.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*ed.SNAP_PRECISION_FACTOR},ed.snapToSelf=function(t,e,n){return new ed(t).snapToSelf(e,n)},id.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(ed,id);var nd=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Kf(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qf),rd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};rd.prototype.getCommon=function(){return ah.longBitsToDouble(this._commonBits)},rd.prototype.add=function(t){var e=ah.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=rd.signExpBits(this._commonBits),this._isFirst=!1,null):rd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=rd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=rd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},rd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=ah.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+ah.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},rd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},rd.signExpBits=function(t){return t>>52},rd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},rd.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(rd.getBit(t,r)!==rd.getBit(e,r))return n;n++}return 52};var od=function(){this._commonCoord=null,this._ccFilter=new ad},sd={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};od.prototype.addCommonBits=function(t){var e=new ld(this._commonCoord);t.apply(e),t.geometryChanged()},od.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ul(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ld(e);return t.apply(n),t.geometryChanged(),t},od.prototype.getCommonCoordinate=function(){return this._commonCoord},od.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},od.prototype.interfaces_=function(){return[]},od.prototype.getClass=function(){return od},sd.CommonCoordinateFilter.get=function(){return ad},sd.Translater.get=function(){return ld},Object.defineProperties(od,sd);var ad=function(){this._commonBitsX=new rd,this._commonBitsY=new rd};ad.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ad.prototype.getCommonCoordinate=function(){return new ul(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ad.prototype.interfaces_=function(){return[Kh]},ad.prototype.getClass=function(){return ad};var ld=function(){this.trans=null;var t=arguments[0];this.trans=t};ld.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ld.prototype.isDone=function(){return!1},ld.prototype.isGeometryChanged=function(){return!0},ld.prototype.interfaces_=function(){return[zc]},ld.prototype.getClass=function(){return ld};var hd=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};hd.prototype.selfSnap=function(t){return new ed(t).snapTo(t,this._snapTolerance)},hd.prototype.removeCommonBits=function(t){this._cbr=new od,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},hd.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},hd.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Nd.overlayOp(e[0],e[1],t);return this.prepareResult(n)},hd.prototype.checkValid=function(t){t.isValid()||Lh.out.println("Snapped geometry is invalid")},hd.prototype.computeSnapTolerance=function(){this._snapTolerance=ed.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},hd.prototype.snap=function(t){var e=this.removeCommonBits(t);return ed.snap(e[0],e[1],this._snapTolerance)},hd.prototype.interfaces_=function(){return[]},hd.prototype.getClass=function(){return hd},hd.overlayOp=function(t,e,n){return new hd(t,e).getResultGeometry(n)},hd.union=function(t,e){return hd.overlayOp(t,e,Nd.UNION)},hd.intersection=function(t,e){return hd.overlayOp(t,e,Nd.INTERSECTION)},hd.symDifference=function(t,e){return hd.overlayOp(t,e,Nd.SYMDIFFERENCE)},hd.difference=function(t,e){return hd.overlayOp(t,e,Nd.DIFFERENCE)};var cd=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};cd.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Nd.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Xh))throw t;r=t}if(!n)try{e=hd.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Xh?r:t}return e},cd.prototype.interfaces_=function(){return[]},cd.prototype.getClass=function(){return cd},cd.overlayOp=function(t,e,n){return new cd(t,e).getResultGeometry(n)},cd.union=function(t,e){return cd.overlayOp(t,e,Nd.UNION)},cd.intersection=function(t,e){return cd.overlayOp(t,e,Nd.INTERSECTION)},cd.symDifference=function(t,e){return cd.overlayOp(t,e,Nd.SYMDIFFERENCE)},cd.difference=function(t,e){return cd.overlayOp(t,e,Nd.DIFFERENCE)};var ud=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ud.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud};var pd=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},fd={INSERT:{configurable:!0},DELETE:{configurable:!0}};pd.prototype.isDelete=function(){return this._eventType===pd.DELETE},pd.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},pd.prototype.getObject=function(){return this._obj},pd.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},pd.prototype.getInsertEvent=function(){return this._insertEvent},pd.prototype.isInsert=function(){return this._eventType===pd.INSERT},pd.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},pd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},pd.prototype.interfaces_=function(){return[hh]},pd.prototype.getClass=function(){return pd},fd.INSERT.get=function(){return 1},fd.DELETE.get=function(){return 2},Object.defineProperties(pd,fd);var gd=function(){};gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd};var yd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};yd.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(yd.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},yd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},yd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},yd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},yd.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},yd.prototype.hasProperIntersection=function(){return this._hasProper},yd.prototype.hasIntersection=function(){return this._hasIntersection},yd.prototype.isDone=function(){return this._isDone},yd.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},yd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},yd.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},yd.prototype.interfaces_=function(){return[]},yd.prototype.getClass=function(){return yd},yd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var vd=function(t){function e(){t.call(this),this.events=new uc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){np.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof yd&&vh(arguments[0],hc)&&vh(arguments[1],hc)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&vh(arguments[0],hc)&&arguments[1]instanceof yd){var a=arguments[0],u=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ud(n,i),s=new pd(e,n.getMinX(i),o);this.events.add(s),this.events.add(new pd(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.addEdge(n,n)}else if(2===arguments.length)for(var r=arguments[1],s=arguments[0].iterator();s.hasNext();){var a=s.next();t.addEdge(a,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),md=function(){this._min=ah.POSITIVE_INFINITY,this._max=ah.NEGATIVE_INFINITY},xd={NodeComparator:{configurable:!0}};md.prototype.getMin=function(){return this._min},md.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},md.prototype.getMax=function(){return this._max},md.prototype.toString=function(){return zh.toLineString(new ul(this._min,0),new ul(this._max,0))},md.prototype.interfaces_=function(){return[]},md.prototype.getClass=function(){return md},xd.NodeComparator.get=function(){return bd},Object.defineProperties(md,xd);var bd=function(){};bd.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},bd.prototype.interfaces_=function(){return[ch]},bd.prototype.getClass=function(){return bd};var wd=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(md),_d=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(md),Sd=function(){this._leaves=new uc,this._root=null,this._level=0};Sd.prototype.buildTree=function(){np.sort(this._leaves,new md.NodeComparator);for(var t=this._leaves,e=null,n=new uc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Sd.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new wd(t,e,n))},Sd.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Sd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Sd.prototype.printNode=function(t){Lh.out.println(zh.toLineString(new ul(t._min,this._level),new ul(t._max,this._level)))},Sd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Sd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new _d(t.get(n),t.get(n+1));e.add(i)}}},Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var Cd=function(){this._items=new uc};Cd.prototype.visitItem=function(t){this._items.add(t)},Cd.prototype.getItems=function(){return this._items},Cd.prototype.interfaces_=function(){return[Ku]},Cd.prototype.getClass=function(){return Cd};var Ed=function(){this._index=null;var t=arguments[0];if(!vh(t,eu))throw new sh("Argument must be Polygonal");this._index=new kd(t)},Ad={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ed.prototype.locate=function(t){var e=new Wh(t),n=new Id(e);return this._index.query(t.y,t.y,n),e.getLocation()},Ed.prototype.interfaces_=function(){return[Vp]},Ed.prototype.getClass=function(){return Ed},Ad.SegmentVisitor.get=function(){return Id},Ad.IntervalIndexedGeometry.get=function(){return kd},Object.defineProperties(Ed,Ad);var Id=function(){this._counter=null;var t=arguments[0];this._counter=t};Id.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Id.prototype.interfaces_=function(){return[Ku]},Id.prototype.getClass=function(){return Id};var kd=function(){this._index=new Sd;var t=arguments[0];this.init(t)};kd.prototype.init=function(t){for(var e=kf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},kd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new mp(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},kd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Cd;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd};var Pd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new du,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Pf,2===arguments.length){var e=arguments[0],n=arguments[1],r=tc.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Iu.ON)===gh.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],r=new yd(arguments[0],!0,!1);r.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof nu||this._parentGeom instanceof th||this._parentGeom instanceof ru,u=n||!a;return s.computeIntersections(this._edges,r,u),this.addSelfIntersectionNodes(this._argIndex),r}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new yd(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof tu){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,gh.INTERIOR)}else if(arguments[0]instanceof ul){var e=arguments[0];this.insertPoint(this._argIndex,e,gh.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),gh.EXTERIOR,gh.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,gh.INTERIOR,gh.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],gh.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],gh.BOUNDARY)},e.prototype.addLineString=function(t){var e=dc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new sf(e,new Du(this._argIndex,gh.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Bh.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===gh.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=dc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;qh.isCCW(r)&&(i=n,o=e);var s=new sf(r,new Du(this._argIndex,gh.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],gh.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Du(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new vd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ru&&(this._useBoundaryDeterminationRule=!1),e instanceof th)this.addPolygon(e);else if(e instanceof Qc)this.addLineString(e);else if(e instanceof tu)this.addPoint(e);else if(e instanceof iu)this.addCollection(e);else if(e instanceof Yc)this.addCollection(e);else if(e instanceof ru)this.addCollection(e);else{if(!(e instanceof Xc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return vh(this._parentGeom,eu)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ed(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?gh.BOUNDARY:gh.INTERIOR},e}(Uu),Ld=function(){if(this._li=new Hh,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Pd(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=tc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Pd(0,e,r),this._arg[1]=new Pd(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Pd(0,i,s),this._arg[1]=new Pd(1,o,s)}};Ld.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ld.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld};var Md=function(){};Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md},Md.map=function(){if(arguments[0]instanceof $h&&vh(arguments[1],Md.MapOp)){for(var t=arguments[0],e=arguments[1],n=new uc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(vh(arguments[0],sc)&&vh(arguments[1],Md.MapOp)){for(var o=arguments[0],s=arguments[1],a=new uc,u=o.iterator();u.hasNext();){var l=u.next(),h=s.map(l);null!==h&&a.add(h)}return a}},Md.MapOp=function(){};var Nd=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Pf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new $p,this._resultPolyList=new uc,this._resultLineList=new uc,this._resultPointList=new uc,this._graph=new Uu(new Up),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Du(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new uc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==gh.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new uc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new uc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Uf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Zu(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new $f(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Jf(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Iu.RIGHT),i.getLocation(1,Iu.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Bh.isTrue(!r.isNull(i,Iu.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Iu.LEFT,r.getLocation(i,Iu.LEFT)),Bh.isTrue(!r.isNull(i,Iu.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Iu.RIGHT,r.getLocation(i,Iu.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ld);Nd.overlayOp=function(t,e,n){return new Nd(t,e).getResultGeometry(n)},Nd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Nd.createEmptyResult(Nd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Zf.map(t,{interfaces_:function(){return[Md.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),cd.overlayOp(t,e,Nd.INTERSECTION)},Nd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),cd.overlayOp(t,e,Nd.SYMDIFFERENCE)},Nd.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Nd.INTERSECTION:o=Math.min(r,i);break;case Nd.UNION:o=Math.max(r,i);break;case Nd.DIFFERENCE:o=r;break;case Nd.SYMDIFFERENCE:o=Math.max(r,i)}return o},Nd.createEmptyResult=function(t,e,n,r){var i=null;switch(Nd.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Nd.difference=function(t,e){return t.isEmpty()?Nd.createEmptyResult(Nd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),cd.overlayOp(t,e,Nd.DIFFERENCE))},Nd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Nd.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===gh.BOUNDARY&&(i=gh.INTERIOR),o===gh.BOUNDARY&&(o=gh.INTERIOR),s){case Nd.INTERSECTION:return i===gh.INTERIOR&&o===gh.INTERIOR;case Nd.UNION:return i===gh.INTERIOR||o===gh.INTERIOR;case Nd.DIFFERENCE:return i===gh.INTERIOR&&o!==gh.INTERIOR;case Nd.SYMDIFFERENCE:return i===gh.INTERIOR&&o!==gh.INTERIOR||i!==gh.INTERIOR&&o===gh.INTERIOR}return!1}},Nd.INTERSECTION=1,Nd.UNION=2,Nd.DIFFERENCE=3,Nd.SYMDIFFERENCE=4;var Td=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Pf,this._seg=new mp;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Td.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Td.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?gh.BOUNDARY:this._ptLocator.locate(t,this._g)},Td.prototype.extractLinework=function(t){var e=new Od;t.apply(e);var n=e.getLinework(),r=xu.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td};var Od=function(){this._linework=null,this._linework=new uc};Od.prototype.getLinework=function(){return this._linework},Od.prototype.filter=function(t){if(t instanceof th){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Od.prototype.interfaces_=function(){return[Fc]},Od.prototype.getClass=function(){return Od};var Rd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Rd.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Rd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Rd.prototype.getPoints=function(t){for(var e=new uc,n=kf.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Rd.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(e.x+t.x)/2,h=(e.y+t.y)/2;if(this._doLeft){var c=new ul(l-u,h+a);r.add(c)}if(this._doRight){var p=new ul(l+u,h-a);r.add(p)}},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd};var Dd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new uc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Td(this._geom[0],this._boundaryDistanceTolerance),new Td(this._geom[1],this._boundaryDistanceTolerance),new Td(this._geom[2],this._boundaryDistanceTolerance)]},Fd={TOLERANCE:{configurable:!0}};Dd.prototype.reportResult=function(t,e,n){Lh.out.println("Overlay result invalid - A:"+gh.toLocationSymbol(e[0])+" B:"+gh.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+gh.toLocationSymbol(e[2]))},Dd.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Dd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Dd.hasLocation(this._location,gh.BOUNDARY)||this.isValidResult(i,this._location)}},Dd.prototype.addTestPts=function(t){var e=new Rd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Dd.prototype.isValidResult=function(t,e){var n=Nd.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===gh.INTERIOR);return r||this.reportResult(t,e,n),r},Dd.prototype.getInvalidLocation=function(){return this._invalidLocation},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Dd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(ed.computeSizeBasedSnapTolerance(t),ed.computeSizeBasedSnapTolerance(e))},Dd.isValid=function(t,e,n,r){return new Dd(t,e,r).isValid(n)},Fd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Dd,Fd);var zd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};zd.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},zd.prototype.combine=function(){for(var t=new uc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},zd.prototype.interfaces_=function(){return[]},zd.prototype.getClass=function(){return zd},zd.combine=function(){if(1===arguments.length)return new zd(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new zd(zd.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],s=arguments[1],a=arguments[2];return new zd(zd.createList(n,s,a)).combine()}},zd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},zd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new uc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new uc;return s.add(r),s.add(i),s.add(o),s}};var Xd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new uc)},Yd={STRTREE_NODE_CAPACITY:{configurable:!0}};Xd.prototype.reduceToGeometries=function(t){for(var e=new uc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;vh(r,hc)?i=this.unionTree(r):r instanceof $h&&(i=r),e.add(i)}return e},Xd.prototype.extractByEnvelope=function(t,e,n){for(var r=new uc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Xd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return zd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Xd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new hp(Xd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Xd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Xd.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Xd.getGeometry(e,n),Xd.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Xd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Xd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Xd.prototype.unionActual=function(t,e){return Xd.restrictToPolygons(t.union(e))},Xd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Xd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new uc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),zd.combine(r)},Xd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var i=arguments[0],e=arguments[1];return i.getFactory().createGeometryCollection([i,e]).buffer(0)}},Xd.prototype.interfaces_=function(){return[]},Xd.prototype.getClass=function(){return Xd},Xd.restrictToPolygons=function(t){if(vh(t,eu))return t;var e=If.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(xu.toPolygonArray(e))},Xd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Xd.union=function(t){return new Xd(t).union()},Yd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Xd,Yd);var Bd=function(){};function Gd(){return new Vd}function Vd(){this.reset()}Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd},Bd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),cd.overlayOp(t,e,Nd.UNION)},Vd.prototype={constructor:Vd,reset:function(){this.s=this.t=0},add:function(t){jd(Hd,t,this.t),jd(this,Hd.s,this.s),this.s?this.t+=Hd.t:this.s=Hd.t},valueOf:function(){return this.s}};var Hd=new Vd;function jd(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Wd=1e-6,qd=Math.PI,Ud=qd/2,Zd=qd/4,$d=2*qd,Jd=180/qd,Qd=qd/180,Kd=Math.abs,tg=Math.atan,eg=Math.atan2,ig=Math.cos,td=Math.sin,ng=Math.sqrt;function rg(t){return t>1?0:t<-1?qd:Math.acos(t)}function og(t){return t>1?Ud:t<-1?-Ud:Math.asin(t)}function sg(){}function ag(t,e){t&&ug.hasOwnProperty(t.type)&&ug[t.type](t,e)}var lg,hg,cg={Feature:function(t,e){ag(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ag(n[r].geometry,e)}},ug={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){pg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)pg(n[r],e,0)},Polygon:function(t,e){fg(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)fg(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ag(n[r],e)}};function pg(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function fg(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)pg(t[n],e,1);e.polygonEnd()}function dg(t){return[eg(t[1],t[0]),og(t[2])]}function gg(t){var e=t[0],n=t[1],r=ig(n);return[r*ig(e),r*td(e),td(n)]}function yg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vg(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function mg(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function dd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xg(t){var e=ng(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function bg(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function wg(t,e){return[t>qd?t-$d:t<-qd?t+$d:t,e]}function _g(t){return function(e,n){return[(e+=t)>qd?e-$d:e<-qd?e+$d:e,n]}}function Sg(t){var e=_g(t);return e.invert=_g(-t),e}function Cg(t,e){var n=ig(t),r=td(t),i=ig(e),o=td(e);function s(t,e){var s=ig(e),a=ig(t)*s,u=td(t)*s,l=td(e),h=l*n+a*r;return[eg(u*i-h*o,a*n-l*r),og(h*i+u*o)]}return s.invert=function(t,e){var s=ig(e),a=ig(t)*s,u=td(t)*s,l=td(e),h=l*i-u*o;return[eg(u*i+l*o,a*n+h*r),og(h*n-a*r)]},s}function Eg(t,e){(e=gg(e))[0]-=t,xg(e);var n=rg(-e[1]);return((-e[2]<0?-n:n)+$d-Wd)%$d}function Ag(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:sg,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ig(t,e){return Kd(t[0]-e[0])<Wd&&Kd(t[1]-e[1])<Wd}function kg(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Pg(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Ig(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new kg(r,t,null,!0)),u.push(n.o=new kg(r,null,n,!1)),a.push(n=new kg(s,t,null,!1)),u.push(n.o=new kg(s,null,n,!0))}})),a.length){for(u.sort(e),Lg(a),Lg(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,h,c=a[0];;){for(var p=c,f=!0;p.v;)if((p=p.n)===c)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=l.length;o<s;++o)i.point((h=l[o])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(l=p.p.z,o=l.length-1;o>=0;--o)i.point((h=l[o])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}l=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}}function Lg(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Mg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ng(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}Gd(),Gd(),Gd(),wg.invert=wg,1===(lg=Mg).length&&(hg=lg,lg=function(t,e){return Mg(hg(t),e)});var Tg=1e9,Og=-Tg;function Rg(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var h=0,c=0;if(null==i||(h=s(i,a))!==(c=s(o,a))||u(i,o)<0^a>0)do{l.point(0===h||3===h?t:n,h>1?r:e)}while((h=(h+a+4)%4)!==c);else l.point(o[0],o[1])}function s(r,i){return Kd(r[0]-t)<Wd?i>0?0:3:Kd(r[0]-n)<Wd?i>0?2:1:Kd(r[1]-e)<Wd?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,h,c,p,f,g,d,y,v,m,x=s,w=Ag(),_={point:b,lineStart:function(){_.point=S,l&&l.push(h=[]),v=!0,y=!1,g=d=NaN},lineEnd:function(){u&&(S(c,p),f&&y&&w.rejoin(),u.push(w.result())),_.point=b,y&&x.lineEnd()},polygonStart:function(){x=w,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,h=a.length,c=a[0],p=c[0],f=c[1];u<h;++u)o=p,s=f,p=(c=a[u])[0],f=c[1],s<=r?f>r&&(p-o)*(r-s)>(f-s)*(t-o)&&++e:f<=r&&(p-o)*(r-s)<(f-s)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Ng(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Pg(u,a,e,o,s),s.polygonEnd()),x=s,u=l=h=null}};function b(t,e){i(t,e)&&x.point(t,e)}function S(o,s){var a=i(o,s);if(l&&h.push([o,s]),v)c=o,p=s,f=a,v=!1,a&&(x.lineStart(),x.point(o,s));else if(a&&y)x.point(o,s);else{var u=[g=Math.max(Og,Math.min(Tg,g)),d=Math.max(Og,Math.min(Tg,d))],w=[o=Math.max(Og,Math.min(Tg,o)),s=Math.max(Og,Math.min(Tg,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,h=1,c=e[0]-a,p=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<l)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>l&&(l=s)}if(s=i-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>l&&(l=s)}else if(c>0){if(s<l)return;s<h&&(h=s)}if(s=r-u,p||!(s>0)){if(s/=p,p<0){if(s<l)return;s<h&&(h=s)}else if(p>0){if(s>h)return;s>l&&(l=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(s>h)return;s>l&&(l=s)}else if(p>0){if(s<l)return;s<h&&(h=s)}return l>0&&(t[0]=a+l*c,t[1]=u+l*p),h<1&&(e[0]=a+h*c,e[1]=u+h*p),!0}}}}}(u,w,t,e,n,r)?a&&(x.lineStart(),x.point(o,s),m=!1):(y||(x.lineStart(),x.point(u[0],u[1])),x.point(w[0],w[1]),a||x.lineEnd(),m=!1)}g=o,d=s,y=a}return _}}var Dg=Gd();function Fg(t){return t}Gd(),Gd(),Gd();var zg=1/0,Xg=zg,Yg=-zg,Bg=Yg,Gg={point:function(t,e){t<zg&&(zg=t),t>Yg&&(Yg=t),e<Xg&&(Xg=e),e>Bg&&(Bg=e)},lineStart:sg,lineEnd:sg,polygonStart:sg,polygonEnd:sg,result:function(){var t=[[zg,Xg],[Yg,Bg]];return Yg=Bg=-(Xg=zg=1/0),t}};function Vg(t,e,n,r){return function(i,o){var s,a,u,l=e(o),h=i.invert(r[0],r[1]),c=Ag(),p=e(c),f=!1,g={point:d,lineStart:v,lineEnd:m,polygonStart:function(){g.point=x,g.lineStart=w,g.lineEnd=_,a=[],s=[]},polygonEnd:function(){g.point=d,g.lineStart=v,g.lineEnd=m,a=Ng(a);var t=function(t,e){var n=e[0],r=e[1],i=[td(n),-ig(n),0],o=0,s=0;Dg.reset();for(var a=0,u=t.length;a<u;++a)if(h=(l=t[a]).length)for(var l,h,c=l[h-1],p=c[0],f=c[1]/2+Zd,g=td(f),d=ig(f),y=0;y<h;++y,p=m,g=w,d=_,c=v){var v=l[y],m=v[0],x=v[1]/2+Zd,w=td(x),_=ig(x),b=m-p,S=b>=0?1:-1,C=S*b,E=C>qd,A=g*w;if(Dg.add(eg(A*S*td(C),d*_+A*ig(C))),o+=E?b+S*$d:b,E^p>=n^m>=n){var I=vg(gg(c),gg(v));xg(I);var k=vg(i,I);xg(k);var P=(E^b>=0?-1:1)*og(k[2]);(r>P||r===P&&(I[0]||I[1]))&&(s+=E^b>=0?1:-1)}}return(o<-1e-6||o<Wd&&Dg<-1e-6)^1&s}(s,h);a.length?(f||(o.polygonStart(),f=!0),Pg(a,jg,t,n,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function y(t,e){var n=i(t,e);l.point(n[0],n[1])}function v(){g.point=y,l.lineStart()}function m(){g.point=d,l.lineEnd()}function x(t,e){u.push([t,e]);var n=i(t,e);p.point(n[0],n[1])}function w(){p.lineStart(),u=[]}function _(){x(u[0][0],u[0][1]),p.lineEnd();var t,e,n,r,i=p.clean(),l=c.result(),h=l.length;if(u.pop(),s.push(u),u=null,h)if(1&i){if((e=(n=l[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else h>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(Hg))}return g}}function Hg(t){return t.length>1}function jg(t,e){return((t=t.x)[0]<0?t[1]-Ud-Wd:Ud-t[1])-((e=e.x)[0]<0?e[1]-Ud-Wd:Ud-e[1])}Gd();var Wg=Vg((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?qd:-qd,u=Kd(o-n);Kd(u-qd)<Wd?(t.point(n,r=(r+s)/2>0?Ud:-Ud),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=qd&&(Kd(n-i)<Wd&&(n-=i*Wd),Kd(o-a)<Wd&&(o-=a*Wd),r=function(t,e,n,r){var i,o,s=td(t-n);return Kd(s)>Wd?tg((td(e)*(o=ig(r))*td(n)-td(r)*(i=ig(e))*td(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Ud,r.point(-qd,i),r.point(0,i),r.point(qd,i),r.point(qd,0),r.point(qd,-i),r.point(0,-i),r.point(-qd,-i),r.point(-qd,0),r.point(-qd,i);else if(Kd(t[0]-e[0])>Wd){var o=t[0]<e[0]?qd:-qd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-qd,-Ud]);function qg(t,e){var n=ig(t),r=n>0,i=Kd(n)>Wd;function o(t,e){return ig(t)*ig(e)>n}function s(t,e,r){var i=[1,0,0],o=vg(gg(t),gg(e)),s=yg(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var l=n*s/u,h=-n*a/u,c=vg(i,o),p=dd(i,l);mg(p,dd(o,h));var f=c,g=yg(p,f),d=yg(f,f),y=g*g-d*(yg(p,p)-1);if(!(y<0)){var v=ng(y),m=dd(f,(-g-v)/d);if(mg(m,p),m=dg(m),!r)return m;var x,w=t[0],_=e[0],b=t[1],S=e[1];_<w&&(x=w,w=_,_=x);var C=_-w,E=Kd(C-qd)<Wd;if(!E&&S<b&&(x=b,b=S,S=x),E||C<Wd?E?b+S>0^m[1]<(Kd(m[0]-w)<Wd?b:S):b<=m[1]&&m[1]<=S:C>qd^(w<=m[0]&&m[0]<=_)){var A=dd(f,(-g+v)/d);return mg(A,p),[m,dg(A)]}}}function a(e,n){var i=r?t:qd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Vg(o,(function(t){var e,n,u,l,h;return{lineStart:function(){l=u=!1,h=1},point:function(c,p){var f,g=[c,p],d=o(c,p),y=r?d?0:a(c,p):d?a(c+(c<0?qd:-qd),p):0;if(!e&&(l=u=d)&&t.lineStart(),d!==u&&(!(f=s(e,g))||Ig(e,f)||Ig(g,f))&&(g[0]+=Wd,g[1]+=Wd,d=o(g[0],g[1])),d!==u)h=0,d?(t.lineStart(),f=s(g,e),t.point(f[0],f[1])):(f=s(e,g),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(i&&e&&r^d){var v;y&n||!(v=s(g,e,!0))||(h=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!d||e&&Ig(e,g)||t.point(g[0],g[1]),e=g,u=d,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(l&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=ig(e),a=td(e),u=r*n;null==i?(i=e+r*$d,o=e-u/2):(i=Eg(s,i),o=Eg(s,o),(r>0?i<o:i>o)&&(i+=r*$d));for(var l,h=i;r>0?h>o:h<o;h-=u)l=dg([s,-a*ig(h),-a*td(h)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-qd,t-qd])}function Ug(t){return function(e){var n=new Zg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Zg(){}function $g(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&cg.hasOwnProperty(t.type)?cg[t.type](t,e):ag(t,e)}(n,t.stream(Gg));var s=Gg.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Zg.prototype={constructor:Zg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Jg=ig(30*Qd);function Qg(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,l,h,c,p,f,g,d,y){var v=l-r,m=h-i,x=v*v+m*m;if(x>4*e&&d--){var w=s+p,_=a+f,b=u+g,S=ng(w*w+_*_+b*b),C=og(b/=S),E=Kd(Kd(b)-1)<Wd||Kd(o-c)<Wd?(o+c)/2:eg(_,w),A=t(E,C),I=A[0],k=A[1],P=I-r,L=k-i,M=m*P-v*L;(M*M/x>e||Kd((v*P+m*L)/x-.5)>.3||s*p+a*f+u*g<Jg)&&(n(r,i,o,s,a,u,I,k,E,w/=S,_/=S,b,d,y),y.point(I,k),n(I,k,E,w,_,b,l,h,c,p,f,g,d,y))}}return function(e){var r,i,o,s,a,u,l,h,c,p,f,g,d={point:y,lineStart:v,lineEnd:x,polygonStart:function(){e.polygonStart(),d.lineStart=w},polygonEnd:function(){e.polygonEnd(),d.lineStart=v}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){h=NaN,d.point=m,e.lineStart()}function m(r,i){var o=gg([r,i]),s=t(r,i);n(h,c,l,p,f,g,h=s[0],c=s[1],l=r,p=o[0],f=o[1],g=o[2],16,e),e.point(h,c)}function x(){d.point=y,e.lineEnd()}function w(){v(),d.point=_,d.lineEnd=b}function _(t,e){m(r=t,e),i=h,o=c,s=p,a=f,u=g,d.point=m}function b(){n(h,c,l,p,f,g,i,o,r,s,a,u,16,e),d.lineEnd=x,x()}return d}}(t,e):function(t){return Ug({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Kg=Ug({point:function(t,e){this.stream.point(t*Qd,e*Qd)}});function ty(t){return function(t){var e,n,r,i,o,s,a,u,l,h,c=150,p=480,f=250,g=0,d=0,y=0,v=0,m=0,x=null,w=Wg,_=null,b=Fg,S=.5,C=Qg(I,S);function E(t){return[(t=o(t[0]*Qd,t[1]*Qd))[0]*c+n,r-t[1]*c]}function A(t){return(t=o.invert((t[0]-n)/c,(r-t[1])/c))&&[t[0]*Jd,t[1]*Jd]}function I(t,i){return[(t=e(t,i))[0]*c+n,r-t[1]*c]}function k(){o=bg(i=function(t,e,n){return(t%=$d)?e||n?bg(Sg(t),Cg(e,n)):Sg(t):e||n?Cg(e,n):wg}(y,v,m),e);var t=e(g,d);return n=p-t[0]*c,r=f+t[1]*c,P()}function P(){return l=h=null,E}return E.stream=function(t){return l&&h===t?l:l=Kg(w(i,C(b(h=t))))},E.clipAngle=function(t){return arguments.length?(w=+t?qg(x=t*Qd,6*Qd):(x=null,Wg),P()):x*Jd},E.clipExtent=function(t){return arguments.length?(b=null==t?(_=s=a=u=null,Fg):Rg(_=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),P()):null==_?null:[[_,s],[a,u]]},E.scale=function(t){return arguments.length?(c=+t,k()):c},E.translate=function(t){return arguments.length?(p=+t[0],f=+t[1],k()):[p,f]},E.center=function(t){return arguments.length?(g=t[0]%360*Qd,d=t[1]%360*Qd,k()):[g*Jd,d*Jd]},E.rotate=function(t){return arguments.length?(y=t[0]%360*Qd,v=t[1]%360*Qd,m=t.length>2?t[2]%360*Qd:0,k()):[y*Jd,v*Jd,m*Jd]},E.precision=function(t){return arguments.length?(C=Qg(I,S=t*t),P()):ng(S)},E.fitExtent=function(t,e){return $g(E,t,e)},E.fitSize=function(t,e){return function(t,e,n){return $g(t,[[0,0],e],n)}(E,t,e)},function(){return e=t.apply(this,arguments),E.invert=e.invert&&A,k()}}((function(){return t}))()}var ey=function(t){return function(e,n){var r=ig(e),i=ig(n),o=t(r*i);return[o*i*td(e),o*td(n)]}}((function(t){return(t=rg(t))&&t/td(t)}));function iy(){return ty(ey).scale(79.4188).clipAngle(179.999)}function ny(t,e,r,i){var s=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return q(t,(function(t){var n=ny(t,e,r,i);n&&u.push(n)})),d(u)}var o=function(t){var e=wi(t).geometry.coordinates,r=[-e[0],-e[1]];return iy().rotate(r).scale(n)}(a),h={type:a.type,coordinates:oy(a.coordinates,o)},c=(new Eu).read(h),p=w(_(e,r),"meters"),g=xf.bufferOp(c,p,i);if(!ry((g=(new Au).write(g)).coordinates))return l({type:g.type,coordinates:sy(g.coordinates,o)},s)}function ry(t){return Array.isArray(t[0])?ry(t[0]):isNaN(t[0])}function oy(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return oy(t,e)}))}function sy(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return sy(t,e)}))}function ay(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=rh.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?h(o[0],n.properties):v(o,n.properties)}function ly(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(i+s)/2,h=2*e/be([i,u],[s,u],n)*(s-i),c=2*e/be([l,o],[l,a],n)*(a-o),p=h/2,g=2*p,f=Math.sqrt(3)/2*c,y=s-i,v=a-o,m=3/4*g,x=f,w=(y-g)/(g-p/2),_=Math.floor(w),b=(_*m-p/2-y)/2-p/2+m/2,S=Math.floor((v-f)/f),C=(v-S*f)/2,E=S*f-v>f/2;E&&(C-=f/4);for(var A=[],I=[],k=0;k<6;k++){var P=2*Math.PI/6*k;A.push(Math.cos(P)),I.push(Math.sin(P))}for(var L=[],M=0;M<=_;M++)for(var N=0;N<=S;N++){var T=M%2==1;if(!(0===N&&T||0===N&&E)){var O=M*m+i-b,R=N*x+o+C;if(T&&(R-=f/2),!0===n.triangles)cy([O,R],h/2,c/2,JSON.parse(r),A,I).forEach((function(t){n.mask?ay(n.mask,t)&&L.push(t):L.push(t)}));else{var D=hy([O,R],h/2,c/2,JSON.parse(r),A,I);n.mask?ay(n.mask,D)&&L.push(D):L.push(D)}}}return d(L)}function hy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),h([s],r)}function cy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(h([u],r))}return s}function uy(t){return v(t)}function py(t){return h(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function fy(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/be([o,s],[a,s],r)*(a-o),c=n/be([o,s],[o,u],r)*(u-s),p=a-o,g=u-s,f=Math.floor(p/l),y=Math.floor(g/c),v=(g-y*c)/2,m=o+(p-f*l)/2,x=0;x<f;x++){for(var w=s+v,_=0;_<y;_++){var b=h([[[m,w],[m,w+c],[m+l,w+c],[m+l,w],[m,w]]],r.properties);r.mask?Ps(r.mask,b)&&i.push(b):i.push(b),w+=c}m+=l}return d(i)}(t,e,e,n)}function dy(t,e,n){void 0===n&&(n={});for(var r=[],i=e/be([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/be([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var c=null,p=null;s%2==0&&u%2==0?(c=h([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),p=h([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(c=h([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties),p=h([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(c=h([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties),p=h([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(c=h([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),p=h([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)),n.mask?(ay(n.mask,c)&&r.push(c),ay(n.mask,p)&&r.push(p)):(r.push(c),r.push(p)),l+=o,u++}s++,a+=i}return d(r)}ey.invert=function(t){return function(e,n){var r=ng(e*e+n*n),i=t(r),o=td(i),s=ig(i);return[eg(e*o,r*s),og(r&&n*o/r)]}}((function(t){return t})),e.along=function(t,e,n){void 0===n&&(n={});for(var r=rt(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var u=bi(r[o],r[o-1])-180;return mi(r[o],s,u,n)}return a(r[o])}i+=be(r[o],r[o+1],n)}return a(r[r.length-1])},e.angle=function(t,e,n,r){if(void 0===r&&(r={}),!P(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=b(!0!==r.mercator?bi(i,o):Br(i,o)),u=b(!0!==r.mercator?bi(s,o):Br(s,o)),l=Math.abs(a-u);return!0===r.explementary?360-l:l},e.applyFilter=cl,e.area=Bn,e.areaFactors=i,e.bbox=J,e.bboxClip=function(t,e){var n=rt(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,l=Tr(t[0],e),h=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],i=o=Tr(a=t[r],e);;){if(!(l|i)){h.push(s),i!==o?(h.push(a),r<u-1&&(n.push(h),h=[])):r===u-1&&h.push(a);break}if(l&i)break;l?l=Tr(s=Nr(s,a,l,e),e):i=Tr(a=Nr(s,a,i,e),e)}l=o}h.length&&n.push(h)}(t,e,s)})),1===s.length?f(s[0],i):g(s,i);case"Polygon":return h(Or(o,e),i);case"MultiPolygon":return v(o.map((function(t){return Or(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},e.bboxPolygon=gi,e.bearing=bi,e.bearingToAngle=b,e.bearingToAzimuth=b,e.bezier=di,e.bezierSpline=di,e.booleanClockwise=qr,e.booleanContains=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":if("Point"===o)return ms(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(ms(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(ms(i,a[s])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return qn(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(qn({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!qn({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(qn(o,t,{ignoreEndVertices:!0})&&(n=!0),!qn(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ve(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!vs(J(t),J(e)))return!1;for(;r<e.coordinates.length-1;r++)if(ve({type:"Point",coordinates:xs(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!vs(J(t),J(e)))return!1;for(var n=0,s=rt(e).coordinates;n<s.length;n++)for(var a=0,u=s[n];a<u.length;a++)if(!ve(u[a],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!ve(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return bs(n,r);case"Polygon":return _s(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return bs(r,n);case"LineString":return function(t,e){if(Ln(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Ss(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return ws(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return _s(r,n);case"LineString":return ws(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=fs,e.booleanEqual=function(t,e){return rt(t).type===rt(e).type&&new ks({precision:6}).compare(ei(t),ei(e))},e.booleanIntersects=Ps,e.booleanOverlap=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new ks({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=n.coordinates[a],h=r.coordinates[u];if(l[0]===h[0]&&l[1]===h[1])return!0}return!1;case"LineString":case"MultiLineString":V(t,(function(t){V(e,(function(e){zr(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":V(t,(function(t){V(e,(function(e){Ln(t,e).features.length&&s++}))}))}return s>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Hs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Hs(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Ji(ei(t)).features,r=Ji(ei(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!Vs(o,r[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=ve,e.booleanPointOnLine=qn,e.booleanWithin=Zn,e.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return q(t,(function(t){var n=ny(t,e,r,i);n&&o.push(n)})),d(o);case"FeatureCollection":return F(t,(function(t){var n=ny(t,e,r,i);n&&F(n,(function(t){t&&o.push(t)}))})),d(o)}return ny(t,e,r,i)},e.center=wi,e.centerMean=Fa,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!k(n))throw new Error("counter must be a number");var r=e.weight,i=Fa(t,{weight:e.weight}),o=d([]);F(t,(function(t){var e;o.features.push(_i(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}));var s={tolerance:e.tolerance,medianCandidates:[]};return za(i.geometry.coordinates,[0,0],o,s,n)},e.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),ot(e)){case"Point":return a(Q(e),n.properties);case"Polygon":var r=[];T(e,(function(t){r.push(t)}));var i,o,s,u,l,h,c,p,f=_i(e,{properties:n.properties}),g=f.geometry.coordinates,d=0,y=0,v=0,m=r.map((function(t){return[t[0]-g[0],t[1]-g[1]]}));for(i=0;i<r.length-1;i++)u=(o=m[i])[0],h=o[1],l=(s=m[i+1])[0],v+=p=u*(c=s[1])-l*h,d+=(u+l)*p,y+=(h+c)*p;if(0===v)return f;var x=1/(.5*v*6);return a([g[0]+x*d,g[1]+x*y],n.properties);default:var w=ye(e);return w?t(w,{properties:n.properties}):_i(e,{properties:n.properties})}},e.centroid=_i,e.circle=xi,e.cleanCoords=ei,e.clone=Ee,e.clusterEach=al,e.clusterReduce=ll,e.clusters=gl,e.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Ee(t)),n.minPoints=n.minPoints||3;var r=new Os.DBSCAN,i=r.run(X(t),A(e,n.units),n.minPoints,be),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Ee(t));var r=X(t),i=r.slice(0,e.numberOfClusters),o=Gs(r,e.numberOfClusters,i),s={};return o.centroids.forEach((function(t,e){s[e]=t})),F(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},e.collect=function(t,e,n,r){var i=At(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=J(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){ve([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},e.collectionOf=nt,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return F(t,(function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),d(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return l({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},e.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=we(function(t){var e=[],n={};return F(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),d(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=be(r,i,e),a=be(i,o,e),u=be(r,o,e);return s<=n&&a<=n&&u<=n})),r.features.length<1)return null;var i=ti(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),l(i)},e.containsNumber=tt,e.convertArea=I,e.convertDistance=A,e.convertLength=A,e.convex=ye,e.coordAll=X,e.coordEach=T,e.coordReduce=O,e.createBins=hl,e.degrees2radians=E,e.degreesToRadians=E,e.destination=mi,e.difference=function(t,e){var n=rt(t),r=rt(e),i=t.properties||{},o=rh.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?h(o[0],i):v(o,i)},e.dissolve=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;nt(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return ir(v(rh.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var i={};F(t,(function(t){Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t)}));for(var o=Object.keys(i),s=0;s<o.length;s++){var a=v(rh.union.apply(null,i[o[s]].map((function(t){return t.geometry.coordinates}))));a.properties[n]=o[s],r.push(a)}return ir(d(r))},e.distance=be,e.distanceToDegrees=S,e.distanceToRadians=_,e.distanceWeight=Va,e.earthRadius=n,e.ellipse=Ra,e.envelope=yi,e.explode=Si,e.factors=r,e.feature=l,e.featureCollection=d,e.featureEach=F,e.featureOf=it,e.featureReduce=z,e.filterProperties=fl,e.findPoint=Z,e.findSegment=U,e.flatten=ir,e.flattenEach=B,e.flattenReduce=G,e.flip=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ee(t)),T(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},e.geojsonType=et,e.geomEach=q,e.geomReduce=Y,e.geometry=s,e.geometryCollection=m,e.getCluster=sl,e.getCoord=Q,e.getCoords=K,e.getGeom=rt,e.getType=ot,e.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=Q(t),e=Q(e),r=r||{},i=i||100,o=o||10,new vr({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},e.helpers=N,e.hexGrid=ly,e.inside=ve,e.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=J(t);switch(r){case"point":case"points":s=Kn(a,e,n);break;case"square":case"squares":s=fy(a,e,n);break;case"hex":case"hexes":s=ly(a,e,n);break;case"triangle":case"triangles":s=dy(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return F(s,(function(e){var s=0,a=0;F(t,(function(t){var u,l=be("point"===r?e:_i(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var h=1/Math.pow(l,o);a+=h,s+=h*u}));var l=Ee(e);l.properties[i]=s/a,u.push(l)})),d(u)},e.intersect=ay,e.invariant=st,e.isNumber=k,e.isObject=P,e.isobands=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!P(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Jr(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Jo($o(to(t,o,s-o))),u={};u.groupedRings=a,u[n]=o+"-"+s,r.push(u)}return r}(s,e,r);return d((a=function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l,p=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(p)}))}))})),t}(a,s,t)).map((function(t,e){if(o[e]&&!P(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ut({},i,o[e]);return n[r]=t[r],v(t.groupedRings,n)})))},e.isolines=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!P(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=xt(t,{zProperty:r,flip:!0});return d(function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l,p=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a};return t.forEach((function(t){T(t,p)})),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ut({},r,i[s]);u[n]=a;var l=g(gt(t,a),u);o.push(l)}return o}(s,e,r,i,o),s,t))},e.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=Fn(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(a([o[0],o[1]]))}}))})),r},e.length=jn,e.lengthToDegrees=S,e.lengthToRadians=_,e.lineArc=Sr,e.lineChunk=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return B(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=jn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(Wn(t,e*s,e*(s+1),{units:n}),s)}(t,e,r,(function(t){o.push(t)}))})),d(o)},e.lineDistance=jn,e.lineEach=j,e.lineIntersect=Ln,e.lineOffset=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=ot(t),o=t.properties;switch(i){case"LineString":return ss(t,e,r);case"MultiLineString":var s=[];return B(t,(function(t){s.push(ss(t,e,r).geometry.coordinates)})),g(s,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=zr,e.lineReduce=W,e.lineSegment=Ji,e.lineSlice=function(t,e,n){var r=K(n);if("LineString"!==ot(n))throw new Error("line must be a LineString");for(var i,o=Nn(n,t),s=Nn(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),f(a,n.properties)},e.lineSliceAlong=Wn,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=ot(t),r=ot(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=er(e,{precision:7});switch(r){case"Point":return xr(t,i);case"MultiPoint":return mr(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return mr(t,Ln(t,i))}},e.lineString=f,e.lineStringToPolygon=kr,e.lineStrings=p,e.lineToPolygon=kr,e.mask=function(t,e){var n,r=py(e);return("FeatureCollection"===t.type?uy(2===(n=t).features.length?rh.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):rh.union.apply(rh,n.features.map((function(t){return t.geometry.coordinates})))):uy(rh.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r},e.meta=$,e.midpoint=function(t,e){return mi(t,be(t,e)/2,bi(t,e))},e.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=Va(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),a=[];F(t,(function(t){var e=t.properties||{};a.push(e[n])}));for(var u=Ha(a),l=function(t){for(var e=Ha(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(a),h=0,c=0,p=0,f=0,g=s.length,d=0;d<g;d++){for(var y=0,v=0;v<g;v++)h+=s[d][v]*(a[d]-u)*(a[v]-u),c+=s[d][v],p+=Math.pow(s[d][v]+s[v][d],2),y+=s[d][v]+s[v][d];f+=Math.pow(y,2)}var m=h/c/l,x=-1/(g-1),w=(g*g*(p*=.5)-g*f+c*c*3)/((g-1)*(g+1)*(c*c))-x*x,_=Math.sqrt(w);return{expectedMoranIndex:x,moranIndex:m,stdNorm:_,zNorm:(m-x)/_}},e.multiLineString=g,e.multiPoint=y,e.multiPolygon=v,e.nearest=$i,e.nearestPoint=$i,e.nearestPointOnLine=Nn,e.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return q(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var s=1/0,a=null;return F(o,(function(t){var n=On(t,e,{units:r});n<s&&(s=n,a=t)})),a&&(a.properties=ut({dist:s},a.properties,i)),a},e.planepoint=function(t,e){var n=Q(t),r=rt(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],h=r[0][0],c=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],g=r[1][1],d=void 0!==s?s:r[1][2],y=r[2][0],v=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-h)*(l-g)+p*(u-f)*(l-v)+d*(u-y)*(l-c)-d*(u-h)*(l-v)-m*(u-f)*(l-c)-p*(u-y)*(l-g))/((u-h)*(l-g)+(u-f)*(l-v)+(u-y)*(l-c)-(u-h)*(l-v)-(u-f)*(l-c)-(u-y)*(l-g))},e.point=a,e.pointGrid=Kn,e.pointOnFeature=zn,e.pointOnLine=Nn,e.pointOnSurface=zn,e.pointToLineDistance=On,e.points=u,e.pointsWithinPolygon=xe,e.polygon=h,e.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return q(t,(function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<r;u++)a=[[]],s=t,u>0&&(s=h(o).geometry),Ya(s,a),o=a.slice(0);n.push(h(o,i));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<r;l++)a=[[[]]],s=t,l>0&&(s=v(o).geometry),Ba(s,a),o=a.slice(0);n.push(v(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),d(n)},e.polygonTangents=function(t,e){var n,r,i,o,s=K(t),u=K(e),l=J(e),h=0,c=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(h=(c=$i(t,Si(e))).properties.featureIndex),ot(e)){case"Polygon":n=u[0][h],r=u[0][0],null!==c&&c.geometry.coordinates[1]<s[1]&&(r=u[0][h]),o=Wr(u[0][0],u[0][u[0].length-1],s);var p=Hr(u[0],s,o,i,n,r);n=p[0],r=p[1];break;case"MultiPolygon":for(var g=0,f=0,y=0,v=0;v<u[0].length;v++){g=v;for(var m=!1,x=0;x<u[0][v].length;x++){if(f=x,y===h){m=!0;break}y++}if(m)break}n=u[0][g][f],r=u[0][g][f],o=Wr(u[0][0][0],u[0][0][u[0][0].length-1],s),u.forEach((function(t){var e=Hr(t[0],s,o,i,n,r);n=e[0],r=e[1]}))}return d([a(n),a(r)])},e.polygonToLine=Er,e.polygonToLineString=Er,e.polygonize=function(t){var e=ps.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){us.findEdgeRingContaining(t,r)&&r.push(t)})),d(r.map((function(t){return t.toPolygon()})))},e.polygons=c,e.projection=$a,e.propEach=R,e.propReduce=D,e.propertiesContainsFilter=pl,e.radians2degrees=C,e.radiansToDegrees=C,e.radiansToDistance=w,e.radiansToLength=w,e.random=rl,e.randomLineString=el,e.randomPoint=Ka,e.randomPolygon=tl,e.randomPosition=Qa,e.rewind=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ee(t));var i=[];switch(t.type){case"GeometryCollection":return q(t,(function(t){Ur(t,n)})),t;case"FeatureCollection":return F(t,(function(t){F(Ur(t,n),(function(t){i.push(t)}))})),d(i)}return Ur(t,n)},e.rhumbBearing=Br,e.rhumbDestination=Vr,e.rhumbDistance=Tn,e.round=x,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},e.sector=function(t,e,n,r,i){if(!P(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Yr(n)===Yr(r))return xi(t,e,i);var s=K(t),a=Sr(t,e,n,r,i),u=[[s]];return T(a,(function(t){u[0].push(t)})),u[0].push(s),h(u,o)},e.segmentEach=V,e.segmentReduce=H,e.shortestPath=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,s=n.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!k(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var u=Q(t),o=Q(e);switch(t=a(u),e=a(o),ot(s)){case"FeatureCollection":if(0===s.features.length)return f([u,o]);break;case"Polygon":s=d([l(rt(s))]);break;default:throw new Error("invalid obstacles")}var h=s;h.features.push(t),h.features.push(e);var p=J(es(gi(J(h)),1.15));r||(r=be([p[0],p[1]],[p[2],p[1]],n)/100),h.features.pop(),h.features.pop();for(var g=p[0],c=p[1],y=p[2],v=p[3],m=r/be([g,c],[y,c],n)*(y-g),x=r/be([g,c],[g,v],n)*(v-c),w=y-g,_=v-c,b=Math.floor(w/m),S=Math.floor(_/x),C=(w-b*m)/2,E=[],A=[],I=[],L=[],M=1/0,N=1/0,T=v-(_-S*x)/2,O=0;T>=c;){for(var R=[],D=[],F=g+C,z=0;F<=y;){var q=a([F,T]),X=$s(q,s);R.push(X?0:1),D.push(F+"|"+T);var Y=be(q,t);!X&&Y<M&&(M=Y,I={x:z,y:O});var B=be(q,e);!X&&B<N&&(N=B,L={x:z,y:O}),F+=m,z++}A.push(R),E.push(D),T-=x,O++}var G=new qs(A,{diagonal:!0}),V=G.grid[I.y][I.x],H=G.grid[L.y][L.x],j=Ws.search(G,V,H),W=[u];return j.forEach((function(t){var e=E[t.x][t.y].split("|");W.push([+e[0],+e[1]])})),W.push(o),ei(f(W))},e.simplify=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ee(t)),q(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;ei(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=ci(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return ci(t,e,n)}));break;case"Polygon":t.coordinates=ui(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return ui(t,e,n)}))}}(t,n,r)})),t},e.square=vi,e.squareGrid=fy,e.standardDeviationalEllipse=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!k(n))throw new Error("steps must be a number");if(!P(i))throw new Error("properties must be a number");var o=X(t).length,s=Fa(t,{weight:r}),a=0,u=0,l=0;F(t,(function(t){var e=t.properties[r]||1,n=Xa(K(t),K(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e}));var h=a-u,c=Math.sqrt(Math.pow(h,2)+4*Math.pow(l,2)),p=2*l,g=Math.atan((h+c)/p),f=180*g/Math.PI,y=0,v=0,m=0;F(t,(function(t){var e=t.properties[r]||1,n=Xa(K(t),K(s));y+=Math.pow(n.x*Math.cos(g)-n.y*Math.sin(g),2)*e,v+=Math.pow(n.x*Math.sin(g)+n.y*Math.cos(g),2)*e,m+=e}));var x=Math.sqrt(2*y/m),w=Math.sqrt(2*v/m),_=Ra(s,x,w,{units:"degrees",angle:f,steps:n,properties:i}),b=xe(t,d([_])),S={meanCenterCoordinates:K(s),semiMajorAxis:x,semiMinorAxis:w,numberOfFeatures:o,angle:f,percentageWithinEllipse:100*X(b).length/o};return _.properties.standardDeviationalEllipse=S,_},e.tag=function(t,e,n,r){return t=Ee(t),e=Ee(e),F(t,(function(t){t.properties||(t.properties={}),F(e,(function(e){void 0===t.properties[r]&&ve(t,e)&&(t.properties[r]=e.properties[n])}))})),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Zi(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Zi(t))})),e},e.tin=we,e.toMercator=ja,e.toWgs84=Wa,e.transformRotate=ts,e.transformScale=es,e.transformTranslate=function(t,e,n,r){if(!P(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Ee(t)),T(t,(function(t){var r=K(Vr(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},e.triangleGrid=dy,e.truncate=er,e.union=function(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=rh.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?h(o[0],n.properties):v(o,n.properties)},e.unitsFactors=o,e.unkinkPolygon=function(t){var e=[];return B(t,(function(t){"Polygon"===t.geometry.type&&F(or(t),(function(n){e.push(h(n.geometry.coordinates,t.properties))}))})),d(e)},e.validateBBox=L,e.validateId=M,e.voronoi=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return nt(t,"Point","points"),d(function(){var t=Qs,e=Ks,n=null;function r(r){return new Ta(r.map((function(n,i){var o=[Math.round(t(n,i,r)/La)*La,Math.round(e(n,i,r)/La)*La];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Js(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Js(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Oa))},e.within=xe,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n(249))},505:function(t,e,n){var content=n(524);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("589bf5b6",content,!1,{sourceMap:!1})},518:function(t,e,n){(function(e){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}var o=function(){function t(t,data){this.next=null,this.key=t,this.data=data,this.left=null,this.right=null}return t}();function l(a,b){return a>b?1:a<b?-1:0}function h(i,t,e){for(var n=new o(null,null),r=n,l=n;;){var h=e(i,t.key);if(h<0){if(null===t.left)break;if(e(i,t.left.key)<0){var c=t.left;if(t.left=c.right,c.right=t,null===(t=c).left)break}l.left=t,l=t,t=t.left}else{if(!(h>0))break;if(null===t.right)break;if(e(i,t.right.key)>0&&(c=t.right,t.right=c.left,c.left=t,null===(t=c).right))break;r.right=t,r=t,t=t.right}}return r.right=t.left,l.left=t.right,t.left=n.right,t.right=n.left,t}function c(i,data,t,e){var n=new o(i,data);if(null===t)return n.left=n.right=null,n;var r=e(i,(t=h(i,t,e)).key);return r<0?(n.left=t.left,n.right=t,t.left=null):r>=0&&(n.right=t.right,n.left=t,t.right=null),n}function f(t,e,n){var r=null,o=null;if(e){var l=n((e=h(t,e,n)).key,t);0===l?(r=e.left,o=e.right):l<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function d(t,e,n){return null===e?t:(null===t||((e=h(t.key,e,n)).left=t),e)}function y(t,e,n,r,o){if(t){r(e+(n?"└── ":"├── ")+o(t)+"\n");var l=e+(n?"    ":"│   ");t.left&&y(t.left,l,!1,r,o),t.right&&y(t.right,l,!0,r,o)}}var v=function(){function t(t){void 0===t&&(t=l),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,data){return this._size++,this._root=c(t,data,this._root,this._comparator)},t.prototype.add=function(t,data){var e=new o(t,data);null===this._root&&(e.left=e.right=null,this._size++,this._root=e);var n=this._comparator,r=h(t,this._root,n),l=n(t,r.key);return 0===l?this._root=r:(l<0?(e.left=r.left,e.right=r,r.left=null):l>0&&(e.right=r.right,e.left=r,r.right=null),this._size++,this._root=e),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(i,t,e){var n;return null===t?null:0===e(i,(t=h(i,t,e)).key)?(null===t.left?n=t.right:(n=h(i,t.left,e)).right=t.right,this._size--,n):t},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=h(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=h(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],o=!1;!o;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):o=!0;return this},t.prototype.range=function(t,e,n,r){for(var o=[],l=this._comparator,h=this._root;0!==o.length||h;)if(h)o.push(h),h=h.left;else{if(l((h=o.pop()).key,e)>0)break;if(l(h.key,t)>=0&&n.call(r,h))return this;h=h.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var data=e.data;return t.push(data)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var o=r(t.key,e.key);if(0===o)break;o<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var o=r(t.key,e.key);if(0===o)break;o<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return w(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,o=this._comparator;if(n&&C(t,e,0,r-1,o),null===this._root)this._root=m(t,e,0,r),this._size=r;else{var l=S(this.toList(),x(t,e),o);r=this._size+r,this._root=_({head:l},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return y(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,o=f(t,this._root,r),l=o.left,h=o.right;r(t,e)<0?h=c(e,n,h,r):l=c(e,n,l,r),this._root=d(l,h,r)},t.prototype.split=function(t){return f(t,this._root,this._comparator)},t}();function m(t,e,n,r){var l=r-n;if(l>0){var h=n+Math.floor(l/2),c=t[h],data=e[h],f=new o(c,data);return f.left=m(t,e,n,h),f.right=m(t,e,h+1,r),f}return null}function x(t,e){for(var head=new o(null,null),p=head,i=0;i<t.length;i++)p=p.next=new o(t[i],e[i]);return p.next=null,head.next}function w(t){for(var e=t,n=[],r=!1,head=new o(null,null),p=head;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=p=p.next=n.pop()).right:r=!0;return p.next=null,head.next}function _(t,e,n){var r=n-e;if(r>0){var o=e+Math.floor(r/2),l=_(t,e,o),h=t.head;return h.left=l,t.head=t.head.next,h.right=_(t,o+1,n),h}return null}function S(t,e,n){for(var head=new o(null,null),p=head,r=t,l=e;null!==r&&null!==l;)n(r.key,l.key)<0?(p.next=r,r=r.next):(p.next=l,l=l.next),p=p.next;return null!==r?p.next=r:null!==l&&(p.next=l),head.next}function C(t,e,n,r,o){if(!(n>=r)){for(var l=t[n+r>>1],i=n-1,h=r+1;;){do{i++}while(o(t[i],l)<0);do{h--}while(o(t[h],l)>0);if(i>=h)break;var c=t[i];t[i]=t[h],t[h]=c,c=e[i],e[i]=e[h],e[h]=c}C(t,e,n,h,o),C(t,e,h+1,r,o)}}var E=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},A=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},I=Number.EPSILON;void 0===I&&(I=Math.pow(2,-52));var k=I*I,P=function(a,b){if(-I<a&&a<I&&-I<b&&b<I)return 0;var t=a-b;return t*t<k*a*b?0:a<b?-1:1},L=function(){function e(){t(this,e),this.reset()}return r(e,[{key:"reset",value:function(){this.xRounder=new M,this.yRounder=new M}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),M=function(){function e(){t(this,e),this.tree=new v,this.round(0)}return r(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===P(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===P(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),N=new L,T=function(a,b){return a.x*b.y-a.y*b.x},O=function(a,b){return a.x*b.x+a.y*b.y},R=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},l=T(r,o);return P(l,0)},D=function(t){return Math.sqrt(O(t,t))},F=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return T(o,r)/D(o)/D(r)},z=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return O(o,r)/D(o)/D(r)},X=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},Y=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},B=function(t,e,n,r){if(0===e.x)return Y(n,r,t.x);if(0===r.x)return Y(t,e,n.x);if(0===e.y)return X(n,r,t.y);if(0===r.y)return X(t,e,n.y);var o=T(e,r);if(0==o)return null;var l={x:n.x-t.x,y:n.y-t.y},h=T(l,e)/o,c=T(l,r)/o;return{x:(t.x+c*e.x+(n.x+h*r.x))/2,y:(t.y+c*e.y+(n.y+h*r.y))/2}},G=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return r(e,null,[{key:"compare",value:function(a,b){var t=e.comparePoints(a.point,b.point);return 0!==t?t:(a.point!==b.point&&a.link(b),a.isLeft!==b.isLeft?a.isLeft?1:-1:H.compare(a.segment,b.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),r(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,i=0,n=e.length;i<n;i++){var r=e[i];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,i=0;i<t;i++){var e=this.point.events[i];if(void 0===e.segment.consumedBy)for(var n=i+1;n<t;n++){var r=this.point.events[n];void 0===r.consumedBy&&e.otherSE.point.events===r.otherSE.point.events&&e.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],i=0,e=this.point.events.length;i<e;i++){var n=this.point.events[i];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var o=r.otherSE;n.set(r,{sine:F(e.point,t.point,o.point),cosine:z(e.point,t.point,o.point)})};return function(a,b){n.has(a)||r(a),n.has(b)||r(b);var t=n.get(a),e=t.sine,o=t.cosine,l=n.get(b),h=l.sine,c=l.cosine;return e>=0&&h>=0?o<c?1:o>c?-1:0:e<0&&h<0?o<c?-1:o>c?1:0:h<e?-1:h>e?1:0}}}]),e}(),V=0,H=function(){function e(n,r,o,l){t(this,e),this.id=++V,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=o,this.windings=l}return r(e,null,[{key:"compare",value:function(a,b){var t=a.leftSE.point.x,e=b.leftSE.point.x,n=a.rightSE.point.x,r=b.rightSE.point.x;if(r<t)return 1;if(n<e)return-1;var o=a.leftSE.point.y,l=b.leftSE.point.y,h=a.rightSE.point.y,c=b.rightSE.point.y;if(t<e){if(l<o&&l<h)return 1;if(l>o&&l>h)return-1;var f=a.comparePoint(b.leftSE.point);if(f<0)return 1;if(f>0)return-1;var d=b.comparePoint(a.rightSE.point);return 0!==d?d:-1}if(t>e){if(o<l&&o<c)return-1;if(o>l&&o>c)return 1;var y=b.comparePoint(a.leftSE.point);if(0!==y)return y;var v=a.comparePoint(b.rightSE.point);return v<0?1:v>0?-1:1}if(o<l)return-1;if(o>l)return 1;if(n<r){var m=b.comparePoint(a.rightSE.point);if(0!==m)return m}if(n>r){var x=a.comparePoint(b.rightSE.point);if(x<0)return 1;if(x>0)return-1}if(n!==r){var w=h-o,_=n-t,S=c-l,C=r-e;if(w>_&&S<C)return 1;if(w<_&&S>C)return-1}return n>r?1:n<r||h<c?-1:h>c?1:a.id<b.id?-1:a.id>b.id?1:0}}]),r(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var o=(t.y-e.y)/r.y,l=e.x+o*r.x;if(t.x===l)return 0;var h=(t.x-e.x)/r.x,c=e.y+h*r.y;return t.y===c?0:t.y<c?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=A(e,n);if(null===r)return null;var o=this.leftSE.point,l=this.rightSE.point,h=t.leftSE.point,c=t.rightSE.point,f=E(e,h)&&0===this.comparePoint(h),d=E(n,o)&&0===t.comparePoint(o),y=E(e,c)&&0===this.comparePoint(c),v=E(n,l)&&0===t.comparePoint(l);if(d&&f)return v&&!y?l:!v&&y?c:null;if(d)return y&&o.x===c.x&&o.y===c.y?null:o;if(f)return v&&l.x===h.x&&l.y===h.y?null:h;if(v&&y)return null;if(v)return l;if(y)return c;var m=B(o,this.vector(),h,t.vector());return null===m?null:E(r,m)?N.round(m.x,m.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,o=new G(t,!0),l=new G(t,!1),h=this.rightSE;this.replaceRightSE(l),n.push(l),n.push(o);var c=new e(o,h,this.rings.slice(),this.windings.slice());return G.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),G.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(o.checkForConsuming(),l.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var i=0,e=this.windings.length;i<e;i++)this.windings[i]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var o=e.compare(n,r);if(0!==o){if(o>0){var l=n;n=r,r=l}if(n.prev===r){var h=n;n=r,r=h}for(var i=0,c=r.rings.length;i<c;i++){var f=r.rings[i],d=r.windings[i],y=n.rings.indexOf(f);-1===y?(n.rings.push(f),n.windings.push(d)):n.windings[y]+=d}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var l=this.rings[i],h=this.windings[i],c=e.indexOf(l);-1===c?(e.push(l),n.push(h)):n[c]+=h}for(var f=[],d=[],y=0,v=e.length;y<v;y++)if(0!==n[y]){var m=e[y],x=m.poly;if(-1===d.indexOf(x))if(m.isExterior)f.push(x);else{-1===d.indexOf(x)&&d.push(x);var w=f.indexOf(m.poly);-1!==w&&f.splice(w,1)}}for(var _=0,S=f.length;_<S;_++){var C=f[_].multiPoly;-1===r.indexOf(C)&&r.push(C)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(et.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var o,l;t.length<e.length?(o=t.length,l=e.length):(o=e.length,l=t.length),this._isInResult=l===et.numMultiPolys&&o<l;break;case"xor":var h=Math.abs(t.length-e.length);this._isInResult=h%2==1;break;case"difference":var c=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=c(t)!==c(e);break;default:throw new Error("Unrecognized operation type found ".concat(et.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var o,l,h,c=G.comparePoints(t,n);if(c<0)o=t,l=n,h=1;else{if(!(c>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));o=n,l=t,h=-1}return new e(new G(o,!0),new G(l,!1),[r],[h])}}]),e}(),j=function(){function e(n,r,o){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=o,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=N.round(n[0][0],n[0][1]);this.bbox={ll:{x:l.x,y:l.y},ur:{x:l.x,y:l.y}};for(var h=l,i=1,c=n.length;i<c;i++){if("number"!=typeof n[i][0]||"number"!=typeof n[i][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var f=N.round(n[i][0],n[i][1]);f.x===h.x&&f.y===h.y||(this.segments.push(H.fromRing(h,f,this)),f.x<this.bbox.ll.x&&(this.bbox.ll.x=f.x),f.y<this.bbox.ll.y&&(this.bbox.ll.y=f.y),f.x>this.bbox.ur.x&&(this.bbox.ur.x=f.x),f.y>this.bbox.ur.y&&(this.bbox.ur.y=f.y),h=f)}l.x===h.x&&l.y===h.y||this.segments.push(H.fromRing(h,l,this))}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,e=this.segments.length;i<e;i++){var n=this.segments[i];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),e}(),W=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new j(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var l=new j(n[i],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),i=0,e=this.interiorRings.length;i<e;i++)for(var n=this.interiorRings[i].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}}]),e}(),U=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var l=new W(n[i],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,e=this.polys.length;i<e;i++)for(var n=this.polys[i].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}}]),e}(),Z=function(){function e(n){t(this,e),this.events=n;for(var i=0,r=n.length;i<r;i++)n[i].segment.ringOut=this;this.poly=null}return r(e,null,[{key:"factory",value:function(t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];if(o.isInResult()&&!o.ringOut){for(var l=null,h=o.leftSE,c=o.rightSE,f=[h],d=h.point,y=[];l=h,h=c,f.push(h),h.point!==d;)for(;;){var v=h.getAvailableLinkedEvents();if(0===v.length){var m=f[0].point,x=f[f.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(m.x,",")+" ".concat(m.y,"]. Last matching segment found ends at")+" [".concat(x.x,", ").concat(x.y,"]."))}if(1===v.length){c=v[0].otherSE;break}for(var w=null,_=0,S=y.length;_<S;_++)if(y[_].point===h.point){w=_;break}if(null===w){y.push({index:f.length,point:h.point});var C=h.getLeftmostComparator(l);c=v.sort(C)[0].otherSE;break}var E=y.splice(w)[0],A=f.splice(E.index);A.unshift(A[0].otherSE),n.push(new e(A.reverse()))}n.push(new e(f))}}return n}}]),r(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],i=1,n=this.events.length-1;i<n;i++){var r=this.events[i].point,o=this.events[i+1].point;0!==R(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var l=e[0],h=e[1];0===R(l,t,h)&&e.shift(),e.push(e[0]);for(var c=this.isExteriorRing()?1:-1,f=this.isExteriorRing()?0:e.length-1,d=this.isExteriorRing()?e.length:-1,y=[],v=f;v!=d;v+=c)y.push([e[v].x,e[v].y]);return y}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],i=1,e=this.events.length;i<e;i++){var n=this.events[i];G.compare(t,n)>0&&(t=n)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}]),e}(),$=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return r(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var i=0,e=this.interiorRings.length;i<e;i++){var n=this.interiorRings[i].getGeom();null!==n&&t.push(n)}return t}}]),e}(),J=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return r(e,[{key:"getGeom",value:function(){for(var t=[],i=0,e=this.polys.length;i<e;i++){var n=this.polys[i].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(!r.poly)if(r.isExteriorRing())e.push(new $(r));else{var o=r.enclosingRing();o.poly||e.push(new $(o)),o.poly.addInterior(r)}}return e}}]),e}(),Q=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.compare;t(this,e),this.queue=n,this.tree=new v(r),this.segments=[]}return r(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=r,l=r,h=void 0,c=void 0;void 0===h;)null===(o=this.tree.prev(o))?h=null:void 0===o.key.consumedBy&&(h=o.key);for(;void 0===c;)null===(l=this.tree.next(l))?c=null:void 0===l.key.consumedBy&&(c=l.key);if(t.isLeft){var f=null;if(h){var d=h.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(f=d),!h.isAnEndpoint(d)))for(var y=this._splitSafely(h,d),i=0,v=y.length;i<v;i++)n.push(y[i])}var m=null;if(c){var x=c.getIntersection(e);if(null!==x&&(e.isAnEndpoint(x)||(m=x),!c.isAnEndpoint(x)))for(var w=this._splitSafely(c,x),_=0,S=w.length;_<S;_++)n.push(w[_])}if(null!==f||null!==m){var C=null;C=null===f?m:null===m||G.comparePoints(f,m)<=0?f:m,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var E=e.split(C),A=0,I=E.length;A<I;A++)n.push(E[A])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=h)}else{if(h&&c){var k=h.getIntersection(c);if(null!==k){if(!h.isAnEndpoint(k))for(var P=this._splitSafely(h,k),L=0,M=P.length;L<M;L++)n.push(P[L]);if(!c.isAnEndpoint(k))for(var N=this._splitSafely(c,k),T=0,O=N.length;T<O;T++)n.push(N[T])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),K=void 0!==e&&e.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,tt=void 0!==e&&e.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,et=new(function(){function e(){t(this,e)}return r(e,[{key:"run",value:function(t,e,n){et.type=t,N.reset();for(var r=[new U(e,!0)],i=0,o=n.length;i<o;i++)r.push(new U(n[i],!1));if(et.numMultiPolys=r.length,"difference"===et.type)for(var l=r[0],h=1;h<r.length;)null!==A(r[h].bbox,l.bbox)?h++:r.splice(h,1);if("intersection"===et.type)for(var c=0,f=r.length;c<f;c++)for(var d=r[c],y=c+1,m=r.length;y<m;y++)if(null===A(d.bbox,r[y].bbox))return[];for(var x=new v(G.compare),w=0,_=r.length;w<_;w++)for(var S=r[w].getSweepEvents(),C=0,E=S.length;C<E;C++)if(x.insert(S[C]),x.size>K)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var I=new Q(x),k=x.size,P=x.pop();P;){var L=P.key;if(x.size===k){var M=L.segment;throw new Error("Unable to pop() ".concat(L.isLeft?"left":"right"," SweepEvent ")+"[".concat(L.point.x,", ").concat(L.point.y,"] from segment #").concat(M.id," ")+"[".concat(M.leftSE.point.x,", ").concat(M.leftSE.point.y,"] -> ")+"[".concat(M.rightSE.point.x,", ").concat(M.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(x.size>K)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(I.segments.length>tt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var T=I.process(L),O=0,R=T.length;O<R;O++){var D=T[O];void 0===D.consumedBy&&x.insert(D)}k=x.size,P=x.pop()}N.reset();var F=Z.factory(I.segments);return new J(F).getGeom()}}]),e}()),it=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return et.run("union",t,n)},nt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return et.run("intersection",t,n)},ot=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return et.run("xor",t,n)},st=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return et.run("difference",t,n)};return{union:it,intersection:nt,xor:ot,difference:st}}()}).call(this,n(249))},519:function(t,e,n){var content=n(520);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("beda1088",content,!1,{sourceMap:!1})},520:function(t,e,n){var r=n(22)(!1);r.push([t.i,".theme--light.v-input--switch .v-input--switch__thumb{color:#fff}.theme--light.v-input--switch .v-input--switch__track{color:rgba(0,0,0,.38)}.theme--light.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__thumb{color:#fafafa!important}.theme--light.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__track{color:rgba(0,0,0,.12)!important}.theme--dark.v-input--switch .v-input--switch__thumb{color:#bdbdbd}.theme--dark.v-input--switch .v-input--switch__track{color:hsla(0,0%,100%,.3)}.theme--dark.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__thumb{color:#424242!important}.theme--dark.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__track{color:hsla(0,0%,100%,.1)!important}.v-input--switch__thumb,.v-input--switch__track{background-color:currentColor;pointer-events:none;transition:inherit}.v-input--switch__track{border-radius:8px;width:36px;height:14px;left:2px;position:absolute;opacity:.6;right:2px;top:calc(50% - 7px)}.v-input--switch__thumb{border-radius:50%;top:calc(50% - 10px);height:20px;position:relative;width:20px;display:flex;justify-content:center;align-items:center;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-input--switch .v-input--selection-controls__input{width:38px}.v-input--switch .v-input--selection-controls__ripple{top:calc(50% - 24px)}.v-input--switch.v-input--dense .v-input--switch__thumb{width:18px;height:18px}.v-input--switch.v-input--dense .v-input--switch__track{height:12px;width:32px}.v-input--switch.v-input--dense.v-input--switch--inset .v-input--switch__track{height:22px;width:44px;top:calc(50% - 12px);left:-3px}.v-input--switch.v-input--dense .v-input--selection-controls__ripple{top:calc(50% - 22px)}.v-input--switch.v-input--is-dirty.v-input--is-disabled{opacity:.6}.v-application--is-ltr .v-input--switch .v-input--selection-controls__ripple{left:-14px}.v-application--is-ltr .v-input--switch.v-input--dense .v-input--selection-controls__ripple{left:-12px}.v-application--is-ltr .v-input--switch.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch.v-input--is-dirty .v-input--switch__thumb{transform:translate(20px)}.v-application--is-rtl .v-input--switch .v-input--selection-controls__ripple{right:-14px}.v-application--is-rtl .v-input--switch.v-input--dense .v-input--selection-controls__ripple{right:-12px}.v-application--is-rtl .v-input--switch.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch.v-input--is-dirty .v-input--switch__thumb{transform:translate(-20px)}.v-input--switch:not(.v-input--switch--flat):not(.v-input--switch--inset) .v-input--switch__thumb{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.v-input--switch--inset .v-input--selection-controls__input,.v-input--switch--inset .v-input--switch__track{width:48px}.v-input--switch--inset .v-input--switch__track{border-radius:14px;height:28px;left:-4px;opacity:.32;top:calc(50% - 14px)}.v-application--is-ltr .v-input--switch--inset .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch--inset .v-input--switch__thumb{transform:translate(0)!important}.v-application--is-rtl .v-input--switch--inset .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch--inset .v-input--switch__thumb{transform:translate(-6px)!important}.v-application--is-ltr .v-input--switch--inset.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch--inset.v-input--is-dirty .v-input--switch__thumb{transform:translate(20px)!important}.v-application--is-rtl .v-input--switch--inset.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch--inset.v-input--is-dirty .v-input--switch__thumb{transform:translate(-26px)!important}",""]),t.exports=r},521:function(t,e,n){t.exports=function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t=t&&t.hasOwnProperty("default")?t.default:t;var r={props:{options:{type:Object},type:{type:String},series:{type:Array,required:!0,default:function(){return[]}},width:{default:"100%"},height:{default:"auto"}},data:function(){return{chart:null}},beforeMount:function(){window.ApexCharts=t},mounted:function(){this.init()},created:function(){var t=this;this.$watch("options",(function(e){!t.chart&&e?t.init():t.chart.updateOptions(t.options)})),this.$watch("series",(function(e){!t.chart&&e?t.init():t.chart.updateSeries(t.series)})),["type","width","height"].forEach((function(e){t.$watch(e,(function(){t.refresh()}))}))},beforeDestroy:function(){this.chart&&this.destroy()},render:function(t){return t("div")},methods:{init:function(){var e=this,n={chart:{type:this.type||this.options.chart.type||"line",height:this.height,width:this.width,events:{}},series:this.series};Object.keys(this.$listeners).forEach((function(t){n.chart.events[t]=e.$listeners[t]}));var r=this.extend(this.options,n);return this.chart=new t(this.$el,r),this.chart.render()},isObject:function(t){return t&&"object"===e(t)&&!Array.isArray(t)&&null!=t},extend:function(t,source){var e=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(t),e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(output[r]=n[r])}return output});var output=Object.assign({},t);return this.isObject(t)&&this.isObject(source)&&Object.keys(source).forEach((function(r){e.isObject(source[r])&&r in t?output[r]=e.extend(t[r],source[r]):Object.assign(output,n({},r,source[r]))})),output},refresh:function(){return this.destroy(),this.init()},destroy:function(){this.chart.destroy()},updateSeries:function(t,animate){return this.chart.updateSeries(t,animate)},updateOptions:function(t,e,animate,n){return this.chart.updateOptions(t,e,animate,n)},toggleSeries:function(t){return this.chart.toggleSeries(t)},showSeries:function(t){this.chart.showSeries(t)},hideSeries:function(t){this.chart.hideSeries(t)},appendSeries:function(t,animate){return this.chart.appendSeries(t,animate)},resetSeries:function(){this.chart.resetSeries()},zoomX:function(t,e){this.chart.zoomX(t,e)},toggleDataPointSelection:function(t,e){this.chart.toggleDataPointSelection(t,e)},appendData:function(t){return this.chart.appendData(t)},addText:function(t){this.chart.addText(t)},addImage:function(t){this.chart.addImage(t)},addShape:function(t){this.chart.addShape(t)},dataURI:function(){return this.chart.dataURI()},setLocale:function(t){return this.chart.setLocale(t)},addXaxisAnnotation:function(t,e){this.chart.addXaxisAnnotation(t,e)},addYaxisAnnotation:function(t,e){this.chart.addYaxisAnnotation(t,e)},addPointAnnotation:function(t,e){this.chart.addPointAnnotation(t,e)},removeAnnotation:function(t,e){this.chart.removeAnnotation(t,e)},clearAnnotations:function(){this.chart.clearAnnotations()}}},o=r;return window.ApexCharts=t,o.install=function(e){e.ApexCharts=t,window.ApexCharts=t,Object.defineProperty(e.prototype,"$apexcharts",{get:function(){return t}})},o}(n(522))},522:function(t,e,n){var r;t.exports=function(){"use strict";function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function l(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?o(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function h(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,a=d(t);if(e){var s=d(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return v(this,i)}}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,s,n=[],r=!0,o=!1;try{for(i=i.call(t);!(r=(a=i.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,s=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){if(t){if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var w=function(){function t(){a(this,t)}return h(t,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),a=t<0?0:255,s=t<0?-1*t:t,n=parseInt(i[0].slice(4),10),r=parseInt(i[1],10),o=parseInt(i[2],10);return"rgb("+(Math.round((a-n)*s)+n)+","+(Math.round((a-r)*s)+r)+","+(Math.round((a-o)*s)+o)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),a=t<0?0:255,s=t<0?-1*t:t,n=i>>16,r=i>>8&255,o=255&i;return"#"+(16777216+65536*(Math.round((a-n)*s)+n)+256*(Math.round((a-r)*s)+r)+(Math.round((a-o)*s)+o)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,i){return t.isColorHex(i)?this.shadeHexColor(e,i):this.shadeRGBColor(e,i)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===i(t)&&!Array.isArray(t)&&null!=t}},{key:"is",value:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])}return e});var a=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach((function(s){i.isObject(e[s])&&s in t?a[s]=i.extend(t[s],e[s]):Object.assign(a,c({},s,e[s]))})),a}},{key:"extendArray",value:function(e,i){var a=[];return e.map((function(e){a.push(t.extend(i,e))})),a}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(e){if(t.is("Array",e)){for(var a=[],s=0;s<e.length;s++)a[s]=this.clone(e[s]);return a}if(t.is("Null",e))return null;if(t.is("Date",e))return e;if("object"===i(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=this.clone(e[r]));return n}return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var i="",a=t<0?"-":"",s=e[0].replace(".",""),n=Number(e[1])+1;if(n<0){for(i=a+"0.";n++;)i+="0";return i+s.replace(/^-/,"")}for(n-=s.length;n--;)i+="0";return s+i}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,a=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[a-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce((function(t,e){return Array.isArray(e)&&(e=e.reduce((function(t,e){return t.length>e.length?t:e}))),t.length>e.length?t:e}),0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var a=0;a<i.length;a++)i[a]=parseInt(1===i[a].length?i[a]+i[a]:i[a],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],a=2*Math.PI/e,s=0;s<e;s++){var n={};n.x=t*Math.sin(s*a),n.y=-t*Math.cos(s*a),i.push(n)}return i}},{key:"polarToCartesian",value:function(t,e,i,a){var s=(a-90)*Math.PI/180;return{x:t+i*Math.cos(s),y:e+i*Math.sin(s)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=t.toString().slice();return i.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var a=i-t.length+1;a--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var a=t.indexOf("Edge/");return a>0&&parseInt(t.substring(a+5,t.indexOf(".",a)),10)}}]),t}(),b=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.setEasingFunctions()}return h(t,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":default:t="<>";break;case"swing":t=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,i,a){t.attr(e).animate(a).attr(i)}},{key:"animateMarker",value:function(t,e,i,a,s,n){e||(e=0),t.attr({r:e,width:e,height:e}).animate(a,s).attr({r:i,width:i.width,height:i.height}).afterAll((function(){n()}))}},{key:"animateCircle",value:function(t,e,i,a,s){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(a,s).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(t,e,i,a,s){t.attr(e).animate(a).attr(i).afterAll((function(){return s()}))}},{key:"animatePathsGradually",value:function(t){var e=t.el,i=t.realIndex,a=t.j,s=t.fill,n=t.pathFrom,r=t.pathTo,o=t.speed,l=t.delay,h=this.w,c=0;h.config.chart.animations.animateGradually.enabled&&(c=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&"bar"!==h.config.chart.type&&(c=0),this.morphSVG(e,i,a,"line"!==h.config.chart.type||h.globals.comboCharts?s:"stroke",n,r,o,l*c)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(t){t.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,a,s,n,r,o){var l=this,h=this.w;s||(s=t.attr("pathFrom")),n||(n=t.attr("pathTo"));var c=function(t){return"radar"===h.config.chart.type&&(r=1),"M 0 ".concat(h.globals.gridHeight)};(!s||s.indexOf("undefined")>-1||s.indexOf("NaN")>-1)&&(s=c()),(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=c()),h.globals.shouldAnimate||(r=1),t.plot(s).animate(1,h.globals.easing,o).plot(s).animate(r,h.globals.easing,o).plot(n).afterAll((function(){w.isNumber(i)?i===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&l.animationCompleted(t):"none"!==a&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&e===h.globals.series.length-1||h.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()}))}}]),t}(),_=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(t,e,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var i=this.w;i.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,e,i){var a=this,s=this.w,n=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var i=s.config.chart.dropShadow;(i.enabled?a.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:n}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"addDarkenFilter",value:function(t,e,i){var a=this,s=this.w,n=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var i=s.config.chart.dropShadow;(i.enabled?a.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:n}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"applyFilter",value:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:a});break;case"darken":this.addDarkenFilter(t,e,{intensity:a})}}},{key:"addShadow",value:function(t,e,i){var a=i.blur,s=i.top,n=i.left,r=i.color,o=i.opacity,l=t.flood(Array.isArray(r)?r[e]:r,o).composite(t.sourceAlpha,"in").offset(n,s).gaussianBlur(a).merge(t.source);return t.blend(t.source,l)}},{key:"dropShadow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e.top,s=e.left,n=e.blur,r=e.color,o=e.opacity,l=e.noUserSpaceOnUse,h=this.w;return t.unfilter(!0),w.isIE()&&"radialBar"===h.config.chart.type||(r=Array.isArray(r)?r[i]:r,t.filter((function(t){var e=null;e=w.isSafari()||w.isFirefox()||w.isIE()?t.flood(r,o).composite(t.sourceAlpha,"in").offset(s,a).gaussianBlur(n):t.flood(r,o).composite(t.sourceAlpha,"in").offset(s,a).gaussianBlur(n).merge(t.source),t.blend(t.source,e)})),l||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,e,i){var a=this.w;if(void 0!==a.globals.selectedDataPoints[e]&&a.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var s=a.config.states.active.filter;"none"!==s&&this.applyFilter(t,e,s.type,s.value)}}},{key:"_scaleFilterSize",value:function(t){!function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),S=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"drawLine",value:function(t,e,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:a,stroke:s,"stroke-dasharray":n,"stroke-width":r,"stroke-linecap":o})}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=this.w.globals.dom.Paper.rect();return c.attr({x:t,y:e,width:i>0?i:0,height:a>0?a:0,rx:s,ry:s,opacity:r,"stroke-width":null!==o?o:0,stroke:null!==l?l:"none","stroke-dasharray":h}),c.node.setAttribute("fill",n),c}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:a,stroke:e,"stroke-width":i})}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t<0&&(t=0);var a=this.w.globals.dom.Paper.circle(2*t);return null!==e&&a.attr(e),a}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,a=t.stroke,s=void 0===a?"#a8a8a8":a,n=t.strokeWidth,r=void 0===n?1:n,o=t.fill,l=t.fillOpacity,h=void 0===l?1:l,c=t.strokeOpacity,f=void 0===c?1:c,g=t.classes,u=t.strokeLinecap,d=void 0===u?null:u,p=t.strokeDashArray,y=void 0===p?0:p,b=this.w;return null===d&&(d=b.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(b.globals.gridHeight)),b.globals.dom.Paper.path(i).attr({fill:o,"fill-opacity":h,stroke:s,"stroke-opacity":f,"stroke-linecap":d,"stroke-width":r,"stroke-dasharray":y,class:g})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.w.globals.dom.Paper.group();return null!==t&&i.attr(t),i}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=null;return null===i?a=["L",t,e].join(" "):"H"===i?a=["H",t].join(" "):"V"===i&&(a=["V",e].join(" ")),a}},{key:"curve",value:function(t,e,i,a,s,n){return["C",t,e,i,a,s,n].join(" ")}},{key:"quadraticCurve",value:function(t,e,i,a){return["Q",t,e,i,a].join(" ")}},{key:"arc",value:function(t,e,i,a,s,n,r){var o="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(o="a"),[o,t,e,i,a,s,n,r].join(" ")}},{key:"renderPaths",value:function(t){var i,a=t.j,s=t.realIndex,e=t.pathFrom,n=t.pathTo,r=t.stroke,o=t.strokeWidth,h=t.strokeLinecap,c=t.fill,f=t.animationDelay,g=t.initialSpeed,u=t.dataChangeSpeed,d=t.className,p=t.shouldClipToGrid,y=void 0===p||p,v=t.bindEventsOnPaths,m=void 0===v||v,x=t.drawShadow,w=void 0===x||x,S=this.w,C=new _(this.ctx),E=new b(this.ctx),A=this.w.config.chart.animations.enabled,I=A&&this.w.config.chart.animations.dynamicAnimation.enabled,k=!!(A&&!S.globals.resized||I&&S.globals.dataChanged&&S.globals.shouldAnimate);k?i=e:(i=n,S.globals.animationEnded=!0);var P=S.config.stroke.dashArray,L=0;L=Array.isArray(P)?P[s]:S.config.stroke.dashArray;var M=this.drawPath({d:i,stroke:r,strokeWidth:o,fill:c,fillOpacity:1,classes:d,strokeLinecap:h,strokeDashArray:L});if(M.attr("index",s),y&&M.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type)C.getDefaultFilter(M,s);else if(S.config.chart.dropShadow.enabled&&w&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(s))){var N=S.config.chart.dropShadow;C.dropShadow(M,N,s)}m&&(M.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,M)),M.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,M)),M.node.addEventListener("mousedown",this.pathMouseDown.bind(this,M))),M.attr({pathTo:n,pathFrom:e});var T={el:M,j:a,realIndex:s,pathFrom:e,pathTo:n,fill:c,strokeWidth:o,delay:f};return!A||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||E.showDelayedElements():E.animatePathsGradually(l(l({},T),{},{speed:g})),S.globals.dataChanged&&I&&k&&E.animatePathsGradually(l(l({},T),{},{speed:u})),M}},{key:"drawPattern",value:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=this.w.globals.dom.Paper.pattern(e,i,(function(n){"horizontalLines"===t?n.line(0,0,i,0).stroke({color:a,width:s+1}):"verticalLines"===t?n.line(0,0,0,e).stroke({color:a,width:s+1}):"slantedLines"===t?n.line(0,0,e,i).stroke({color:a,width:s}):"squares"===t?n.rect(e,i).fill("none").stroke({color:a,width:s}):"circles"===t&&n.circle(e).fill("none").stroke({color:a,width:s})}));return n}},{key:"drawGradient",value:function(t,e,i,a,s){var n,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=this.w;e.length<9&&0===e.indexOf("#")&&(e=w.hexToRgba(e,a)),i.length<9&&0===i.indexOf("#")&&(i=w.hexToRgba(i,s));var f=0,g=1,u=1,d=null;null!==o&&(f=void 0!==o[0]?o[0]/100:0,g=void 0!==o[1]?o[1]/100:1,u=void 0!==o[2]?o[2]/100:1,d=void 0!==o[3]?o[3]/100:null);var p=!("donut"!==c.config.chart.type&&"pie"!==c.config.chart.type&&"polarArea"!==c.config.chart.type&&"bubble"!==c.config.chart.type);if(n=null===l||0===l.length?c.globals.dom.Paper.gradient(p?"radial":"linear",(function(t){t.at(f,e,a),t.at(g,i,s),t.at(u,i,s),null!==d&&t.at(d,e,a)})):c.globals.dom.Paper.gradient(p?"radial":"linear",(function(t){(Array.isArray(l[h])?l[h]:l).forEach((function(e){t.at(e.offset/100,e.color,e.opacity)}))})),p){var b=c.globals.gridWidth/2,y=c.globals.gridHeight/2;"bubble"!==c.config.chart.type?n.attr({gradientUnits:"userSpaceOnUse",cx:b,cy:y,r:r}):n.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?n.from(0,0).to(0,1):"diagonal"===t?n.from(0,0).to(1,1):"horizontal"===t?n.from(0,1).to(1,1):"diagonal2"===t&&n.from(1,0).to(0,1);return n}},{key:"drawText",value:function(t){var e,i=t.x,a=t.y,s=t.text,n=t.textAnchor,r=t.fontSize,o=t.fontFamily,l=t.fontWeight,h=t.foreColor,c=t.opacity,f=t.cssClass,g=void 0===f?"":f,u=t.isPlainText,d=void 0===u||u,p=this.w;return void 0===s&&(s=""),n||(n="start"),h&&h.length||(h=p.config.chart.foreColor),o=o||p.config.chart.fontFamily,l=l||"regular",(e=Array.isArray(s)?p.globals.dom.Paper.text((function(t){for(var e=0;e<s.length;e++)0===e?t.tspan(s[e]):t.tspan(s[e]).newLine()})):d?p.globals.dom.Paper.plain(s):p.globals.dom.Paper.text((function(t){return t.tspan(s)}))).attr({x:i,y:a,"text-anchor":n,"dominant-baseline":"auto","font-size":r,"font-family":o,"font-weight":l,fill:h,class:"apexcharts-text "+g}),e.node.style.fontFamily=o,e.node.style.opacity=c,e}},{key:"drawMarker",value:function(t,e,i){t=t||0;var a=i.pSize||0,s=null;if("square"===i.shape||"rect"===i.shape){var n=void 0===i.pRadius?a/2:i.pRadius;null!==e&&a||(a=0,n=0);var r=1.2*a+n,o=this.drawRect(r,r,r,r,n);o.attr({x:t-r/2,y:e-r/2,cx:t,cy:e,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),s=o}else"circle"!==i.shape&&i.shape||(w.isNumber(e)||(a=0,e=0),s=this.drawCircle(a,{cx:t,cy:e,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return s}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,a=new _(this.ctx),s=parseInt(t.node.getAttribute("index"),10),n=parseInt(t.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:s,dataPointIndex:n,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:s,dataPointIndex:n,w:i}]),("none"===i.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&!i.globals.isTouchDevice){var r=i.config.states.hover.filter;a.applyFilter(t,s,r.type,r.value)}}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,a=new _(this.ctx),s=parseInt(t.node.getAttribute("index"),10),n=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:s,dataPointIndex:n,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:s,dataPointIndex:n,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&a.getDefaultFilter(t,s)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,a=new _(this.ctx),s=parseInt(t.node.getAttribute("index"),10),n=parseInt(t.node.getAttribute("j"),10),r="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[s].indexOf(n)>-1){var o=i.globals.selectedDataPoints[s].indexOf(n);i.globals.selectedDataPoints[s].splice(o,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.select(".apexcharts-series path").members,h=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,c=function(t){Array.prototype.forEach.call(t,(function(t){t.node.setAttribute("selected","false"),a.getDefaultFilter(t,s)}))};c(l),c(h)}t.node.setAttribute("selected","true"),r="true",void 0===i.globals.selectedDataPoints[s]&&(i.globals.selectedDataPoints[s]=[]),i.globals.selectedDataPoints[s].push(n)}if("true"===r){var f=i.config.states.active.filter;"none"!==f&&a.applyFilter(t,s,f.type,f.value)}else"none"!==i.config.states.active.filter.type&&a.getDefaultFilter(t,s);"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:s,dataPointIndex:n,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:s,dataPointIndex:n,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e={};return t&&"function"==typeof t.getBBox&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,a){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=this.w,r=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});a&&r.attr("transform",a),n.globals.dom.Paper.add(r);var o=r.bbox();return s||(o=r.node.getBoundingClientRect()),r.remove(),{width:o.width,height:o.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/1.1)){for(var a=e.length-3;a>0;a-=3)if(t.getSubStringLength(0,a)<=i/1.1)return void(t.textContent=e.substring(0,a)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),t}(),C=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e}return h(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;if("vertical"===t.label.orientation){var a=null!==e?e:0,s=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(a,"']"));if(null!==s){var n=s.getBoundingClientRect();s.setAttribute("x",parseFloat(s.getAttribute("x"))-n.height+4),"top"===t.label.position?s.setAttribute("y",parseFloat(s.getAttribute("y"))+n.width):s.setAttribute("y",parseFloat(s.getAttribute("y"))-n.width);var r=this.annoCtx.graphics.rotateAroundCenter(s),o=r.x,l=r.y;s.setAttribute("transform","rotate(-90 ".concat(o," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||void 0===e.label.text||void 0!==e.label.text&&!String(e.label.text).trim())return null;var a=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),s=t.getBoundingClientRect(),n=e.label.style.padding.left,r=e.label.style.padding.right,o=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(o=e.label.style.padding.left,l=e.label.style.padding.right,n=e.label.style.padding.top,r=e.label.style.padding.bottom);var h=s.left-a.left-n,c=s.top-a.top-o,f=this.annoCtx.graphics.drawRect(h-i.globals.barPadForNumericAxis,c,s.width+n+r,s.height+o+l,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&f.node.classList.add(w.escapeString(e.id)),f}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(i,a,s){var n=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations .apexcharts-").concat(s,"-annotation-label[rel='").concat(a,"']"));if(n){var r=n.parentNode,o=t.addBackgroundToAnno(n,i);o&&(r.insertBefore(o.node,n),i.label.mouseEnter&&o.node.addEventListener("mouseenter",i.label.mouseEnter.bind(t,i)),i.label.mouseLeave&&o.node.addEventListener("mouseleave",i.label.mouseLeave.bind(t,i)))}};e.config.annotations.xaxis.map((function(t,e){i(t,e,"xaxis")})),e.config.annotations.yaxis.map((function(t,e){i(t,e,"yaxis")})),e.config.annotations.points.map((function(t,e){i(t,e,"point")}))}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var a=e.globals.labels.indexOf(t),s=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(a+1)+")");return s&&(i=parseFloat(s.getAttribute("x"))),i}}]),t}(),E=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis}return h(t,[{key:"addXaxisAnnotation",value:function(t,e,i){var a=this.w,s=this.invertAxis?a.globals.minY:a.globals.minX,n=this.invertAxis?a.globals.maxY:a.globals.maxX,r=this.invertAxis?a.globals.yRange[0]:a.globals.xRange,o=(t.x-s)/(r/a.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(n-t.x)/(r/a.globals.gridWidth));var l=t.label.text;"category"!==a.config.xaxis.type&&!a.config.xaxis.convertedCatToNumeric||this.invertAxis||a.globals.dataFormatXNumeric||(o=this.annoCtx.helpers.getStringX(t.x));var h=t.strokeDashArray;if(w.isNumber(o)){if(null===t.x2||void 0===t.x2){var c=this.annoCtx.graphics.drawLine(o+t.offsetX,0+t.offsetY,o+t.offsetX,a.globals.gridHeight+t.offsetY,t.borderColor,h,t.borderWidth);e.appendChild(c.node),t.id&&c.node.classList.add(t.id)}else{var f=(t.x2-s)/(r/a.globals.gridWidth);if(this.annoCtx.inversedReversedAxis&&(f=(n-t.x2)/(r/a.globals.gridWidth)),"category"!==a.config.xaxis.type&&!a.config.xaxis.convertedCatToNumeric||this.invertAxis||a.globals.dataFormatXNumeric||(f=this.annoCtx.helpers.getStringX(t.x2)),f<o){var g=o;o=f,f=g}var u=this.annoCtx.graphics.drawRect(o+t.offsetX,0+t.offsetY,f-o,a.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,h);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),e.appendChild(u.node),t.id&&u.node.classList.add(t.id)}var d="top"===t.label.position?4:a.globals.gridHeight,p=this.annoCtx.graphics.getTextRects(l,parseFloat(t.label.style.fontSize)),b=this.annoCtx.graphics.drawText({x:o+t.label.offsetX,y:d+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?p.width/2-12:-p.width/2:0),text:l,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});b.attr({rel:i}),e.appendChild(b.node),this.annoCtx.helpers.setOrientations(t,i)}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map((function(e,a){t.addXaxisAnnotation(e,i.node,a)})),i}}]),t}(),A=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"getStackedSeriesTotals",value:function(){var t=this.w,e=[];if(0===t.globals.series.length)return e;for(var i=0;i<t.globals.series[t.globals.maxValsInArrayIndex].length;i++){for(var a=0,s=0;s<t.globals.series.length;s++)void 0!==t.globals.series[s][i]&&(a+=t.globals.series[s][i]);e.push(a)}return t.globals.stackedSeriesTotals=e,e}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce((function(t,e){return t+e}),0):this.w.globals.series[t].reduce((function(t,e){return t+e}),0)}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter((function(t){return null!==t})):this.w.config.series[t].data.filter((function(t){return null!==t}))).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every((function(t,e,i){return t===i[0]}))}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map((function(t,i){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)}))),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map((function(t){return t.length})).indexOf(Math.max.apply(Math,t.globals.series.map((function(t){return t.length}))))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach((function(t){e=Math.max(e,t)})),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach((function(t){e=Math.max(e,t.size)})),e>0&&(e+=t.config.markers.hover.sizeOffset+1),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map((function(t,e){var i=0;if(Array.isArray(t))for(var a=0;a<t.length;a++)i+=t[a];else i+=t;return i}))}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map((function(a,s){for(var n=0,r=0;r<a.length;r++)i.globals.seriesX[s][r]>t&&i.globals.seriesX[s][r]<e&&(n+=a[r]);return n}))}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map((function(e,i){var a=[];if(Array.isArray(e))for(var s=0;s<e.length;s++){var n=t.globals.stackedSeriesTotals[s],r=0;n&&(r=100*e[s]/n),a.push(r)}else{var o=100*e/t.globals.seriesTotals.reduce((function(t,e){return t+e}),0);a.push(o)}return a}))}},{key:"getCalculatedRatios",value:function(){var t,e,i,a,s=this.w.globals,n=[],r=0,o=[],l=.1,h=0;if(s.yRange=[],s.isMultipleYAxis)for(var c=0;c<s.minYArr.length;c++)s.yRange.push(Math.abs(s.minYArr[c]-s.maxYArr[c])),o.push(0);else s.yRange.push(Math.abs(s.minY-s.maxY));s.xRange=Math.abs(s.maxX-s.minX),s.zRange=Math.abs(s.maxZ-s.minZ);for(var f=0;f<s.yRange.length;f++)n.push(s.yRange[f]/s.gridHeight);if(e=s.xRange/s.gridWidth,i=Math.abs(s.initialMaxX-s.initialMinX)/s.gridWidth,t=s.yRange/s.gridWidth,a=s.xRange/s.gridHeight,(r=s.zRange/s.gridHeight*16)||(r=1),s.minY!==Number.MIN_VALUE&&0!==Math.abs(s.minY)&&(s.hasNegs=!0),s.isMultipleYAxis){o=[];for(var g=0;g<n.length;g++)o.push(-s.minYArr[g]/n[g])}else o.push(-s.minY/n[0]),s.minY!==Number.MIN_VALUE&&0!==Math.abs(s.minY)&&(l=-s.minY/t,h=s.minX/e);return{yRatio:n,invertedYRatio:t,zRatio:r,xRatio:e,initialXRatio:i,invertedXRatio:a,baseLineInvertedY:l,baseLineY:o,baseLineX:h}}},{key:"getLogSeries",value:function(t){var e=this,i=this.w;return i.globals.seriesLog=t.map((function(t,a){return i.config.yaxis[a]&&i.config.yaxis[a].logarithmic?t.map((function(t){return null===t?null:e.getLogVal(i.config.yaxis[a].logBase,t,a)})):t})),i.globals.invalidLogScale?t:i.globals.seriesLog}},{key:"getBaseLog",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"getLogVal",value:function(t,e,i){if(0===e)return 0;var a=this.w,s=0===a.globals.minYArr[i]?-1:this.getBaseLog(t,a.globals.minYArr[i]),n=(0===a.globals.maxYArr[i]?0:this.getBaseLog(t,a.globals.maxYArr[i]))-s;return(this.getBaseLog(t,e)-s)/n}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,a=this.w.globals;return a.yLogRatio=t.slice(),a.logYRange=a.yRange.map((function(t,s){if(i.config.yaxis[s]&&e.w.config.yaxis[s].logarithmic){var n,r=-Number.MAX_VALUE,o=Number.MIN_VALUE;return a.seriesLog.forEach((function(t,e){t.forEach((function(t){i.config.yaxis[e]&&i.config.yaxis[e].logarithmic&&(r=Math.max(t,r),o=Math.min(t,o))}))})),n=Math.pow(a.yRange[s],Math.abs(o-r)/a.yRange[s]),a.yLogRatio[s]=n/a.gridHeight,n}})),a.invalidLogScale?t.slice():a.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var e=!1,i=0,a=0;return t.length&&void 0!==t[0].type&&t.forEach((function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type&&"boxPlot"!==t.type||i++,void 0!==t.type&&a++})),a>0&&(e=!0),{comboBarCount:i,comboCharts:e}}},{key:"extendArrayProps",value:function(t,e,i){return e.yaxis&&(e=t.extendYAxis(e,i)),e.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),e.annotations.xaxis&&(e=t.extendXAxisAnnotations(e)),e.annotations.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),I=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e}return h(t,[{key:"addYaxisAnnotation",value:function(t,e,i){var a,s=this.w,n=t.strokeDashArray,r=this._getY1Y2("y1",t),o=t.label.text;if(null===t.y2||void 0===t.y2){var l=this.annoCtx.graphics.drawLine(0+t.offsetX,r+t.offsetY,this._getYAxisAnnotationWidth(t),r+t.offsetY,t.borderColor,n,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((a=this._getY1Y2("y2",t))>r){var h=r;r=a,a=h}var c=this.annoCtx.graphics.drawRect(0+t.offsetX,a+t.offsetY,this._getYAxisAnnotationWidth(t),r-a,0,t.fillColor,t.opacity,1,t.borderColor,n);c.node.classList.add("apexcharts-annotation-rect"),c.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),e.appendChild(c.node),t.id&&c.node.classList.add(t.id)}var f="right"===t.label.position?s.globals.gridWidth:0,g=this.annoCtx.graphics.drawText({x:f+t.label.offsetX,y:(null!=a?a:r)+t.label.offsetY-3,text:o,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});g.attr({rel:i}),e.appendChild(g.node)}},{key:"_getY1Y2",value:function(t,e){var i,a="y1"===t?e.y:e.y2,s=this.w;if(this.annoCtx.invertAxis){var n=s.globals.labels.indexOf(a);s.config.xaxis.convertedCatToNumeric&&(n=s.globals.categoryLabels.indexOf(a));var r=s.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(n+1)+")");r&&(i=parseFloat(r.getAttribute("y")))}else{var o;o=s.config.yaxis[e.yAxisIndex].logarithmic?(a=new A(this.annoCtx.ctx).getLogVal(a,e.yAxisIndex))/s.globals.yLogRatio[e.yAxisIndex]:(a-s.globals.minYArr[e.yAxisIndex])/(s.globals.yRange[e.yAxisIndex]/s.globals.gridHeight),i=s.globals.gridHeight-o,s.config.yaxis[e.yAxisIndex]&&s.config.yaxis[e.yAxisIndex].reversed&&(i=o)}return i}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return e.globals.gridWidth,(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.map((function(e,a){t.addYaxisAnnotation(e,i.node,a)})),i}}]),t}(),k=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e}return h(t,[{key:"addPointAnnotation",value:function(t,e,i){var a=this.w,s=0,n=0,r=0;this.annoCtx.invertAxis&&console.warn("Point annotation is not supported in horizontal bar charts.");var o=parseFloat(t.y);if("string"==typeof t.x||"category"===a.config.xaxis.type||a.config.xaxis.convertedCatToNumeric){var l=a.globals.labels.indexOf(t.x);a.config.xaxis.convertedCatToNumeric&&(l=a.globals.categoryLabels.indexOf(t.x)),s=this.annoCtx.helpers.getStringX(t.x),null===t.y&&(o=a.globals.series[t.seriesIndex][l])}else s=(t.x-a.globals.minX)/(a.globals.xRange/a.globals.gridWidth);for(var h,c=[],f=0,g=0;g<=t.seriesIndex;g++){var u=a.config.yaxis[g].seriesName;if(u)for(var d=g+1;d<=t.seriesIndex;d++)a.config.yaxis[d].seriesName===u&&-1===c.indexOf(u)&&(f++,c.push(u))}if(a.config.yaxis[t.yAxisIndex].logarithmic)h=(o=new A(this.annoCtx.ctx).getLogVal(o,t.yAxisIndex))/a.globals.yLogRatio[t.yAxisIndex];else{var p=t.yAxisIndex+f;h=(o-a.globals.minYArr[p])/(a.globals.yRange[p]/a.globals.gridHeight)}if(n=a.globals.gridHeight-h-parseFloat(t.label.style.fontSize)-t.marker.size,r=a.globals.gridHeight-h,a.config.yaxis[t.yAxisIndex]&&a.config.yaxis[t.yAxisIndex].reversed&&(n=h+parseFloat(t.label.style.fontSize)+t.marker.size,r=h),w.isNumber(s)){var b={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},y=this.annoCtx.graphics.drawMarker(s+t.marker.offsetX,r+t.marker.offsetY,b);e.appendChild(y.node);var v=t.label.text?t.label.text:"",m=this.annoCtx.graphics.drawText({x:s+t.label.offsetX,y:n+t.label.offsetY,text:v,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(m.attr({rel:i}),e.appendChild(m.node),t.customSVG.SVG){var x=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});x.attr({transform:"translate(".concat(s+t.customSVG.offsetX,", ").concat(n+t.customSVG.offsetY,")")}),x.node.innerHTML=t.customSVG.SVG,e.appendChild(x.node)}if(t.image.path){var _=t.image.width?t.image.width:20,S=t.image.height?t.image.height:20;y=this.annoCtx.addImage({x:s+t.image.offsetX-_/2,y:n+t.image.offsetY-S/2,width:_,height:S,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&y.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&y.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t))}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map((function(e,a){t.addPointAnnotation(e,i.node,a)})),i}}]),t}(),P={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},L=function(){function t(){a(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return h(t,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[P],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),M=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.graphics=new S(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new C(this),this.xAxisAnnotations=new E(this),this.yAxisAnnotations=new I(this),this.pointsAnnotations=new k(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return h(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),a=this.pointsAnnotations.drawPointAnnotations(),s=t.config.chart.animations.enabled,n=[e,i,a],r=[i.node,e.node,a.node],o=0;o<3;o++)t.globals.dom.elGraphical.add(n[o]),!s||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&r[o].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:r[o],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map((function(e,i){t.addImage(e,i)}))}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map((function(e,i){t.addText(e,i)}))}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.x,a=t.y,s=t.text,n=t.textAnchor,r=t.foreColor,o=t.fontSize,l=t.fontFamily,h=t.fontWeight,c=t.cssClass,f=t.backgroundColor,g=t.borderWidth,u=t.strokeDashArray,d=t.borderRadius,p=t.borderColor,y=t.appendTo,b=void 0===y?".apexcharts-annotations":y,v=t.paddingLeft,m=void 0===v?4:v,x=t.paddingRight,w=void 0===x?4:x,_=t.paddingBottom,S=void 0===_?2:_,C=t.paddingTop,E=void 0===C?2:C,A=this.w,I=this.graphics.drawText({x:i,y:a,text:s,textAnchor:n||"start",fontSize:o||"12px",fontWeight:h||"regular",fontFamily:l||A.config.chart.fontFamily,foreColor:r||A.config.chart.foreColor,cssClass:c}),k=A.globals.dom.baseEl.querySelector(b);k&&k.appendChild(I.node);var P=I.bbox();if(s){var L=this.graphics.drawRect(P.x-m,P.y-E,P.width+m+w,P.height+S+E,d,f||"transparent",1,g,p,u);k.insertBefore(L.node,I.node)}}},{key:"addImage",value:function(t,e){var i=this.w,a=t.path,s=t.x,n=void 0===s?0:s,r=t.y,o=void 0===r?0:r,l=t.width,h=void 0===l?20:l,c=t.height,f=void 0===c?20:c,g=t.appendTo,u=void 0===g?".apexcharts-annotations":g,d=i.globals.dom.Paper.image(a);d.size(h,f).move(n,o);var p=i.globals.dom.baseEl.querySelector(u);return p&&p.appendChild(d.node),d}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,a=t.context,s=t.type,n=t.contextMethod,r=a,o=r.w,l=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations")),h=l.childNodes.length+1,c=new L,f=Object.assign({},"xaxis"===s?c.xAxisAnnotation:"yaxis"===s?c.yAxisAnnotation:c.pointAnnotation),g=w.extend(f,e);switch(s){case"xaxis":this.addXaxisAnnotation(g,l,h);break;case"yaxis":this.addYaxisAnnotation(g,l,h);break;case"point":this.addPointAnnotation(g,l,h)}var u=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations .apexcharts-").concat(s,"-annotation-label[rel='").concat(h,"']")),d=this.helpers.addBackgroundToAnno(u,g);return d&&l.insertBefore(d.node,u),i&&o.globals.memory.methodsToExec.push({context:r,id:g.id?g.id:w.randomId(),method:n,label:"addAnnotation",params:e}),a}},{key:"clearAnnotations",value:function(t){var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");e.globals.memory.methodsToExec.map((function(t,i){"addText"!==t.label&&"addAnnotation"!==t.label||e.globals.memory.methodsToExec.splice(i,1)})),i=w.listToArray(i),Array.prototype.forEach.call(i,(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}))}},{key:"removeAnnotation",value:function(t,e){var i=t.w,a=i.globals.dom.baseEl.querySelectorAll(".".concat(e));a&&(i.globals.memory.methodsToExec.map((function(t,a){t.id===e&&i.globals.memory.methodsToExec.splice(a,1)})),Array.prototype.forEach.call(a,(function(t){t.parentElement.removeChild(t)})))}}]),t}(),N=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0}return h(t,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,a=parseInt(e.globals.gridWidth,10),s=parseInt(e.globals.gridHeight,10),n=a>s?a:s,r=t.image,o=0,l=0;void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(o=i.fill.image.width+1,l=i.fill.image.height):(o=n+1,l=n):(o=t.width,l=t.height);var h=document.createElementNS(e.globals.SVGNS,"pattern");S.setAttrs(h,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:o+"px",height:l+"px"});var c=document.createElementNS(e.globals.SVGNS,"image");h.appendChild(c),c.setAttributeNS(window.SVG.xlink,"href",r),S.setAttrs(c,{x:0,y:0,preserveAspectRatio:"none",width:o+"px",height:l+"px"}),c.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(t){var e=this.w;return("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||"heatmap"===e.config.chart.type||"treemap"===e.config.chart.type?this.seriesIndex=t.seriesNumber:this.seriesIndex=t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var i,a,s,n=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var r=this.getFillColors()[this.seriesIndex];void 0!==e.globals.seriesColors[this.seriesIndex]&&(r=e.globals.seriesColors[this.seriesIndex]),"function"==typeof r&&(r=r({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var o=this.getFillType(this.seriesIndex),l=Array.isArray(n.fill.opacity)?n.fill.opacity[this.seriesIndex]:n.fill.opacity;t.color&&(r=t.color);var h=r;if(-1===r.indexOf("rgb")?r.length<9&&(h=w.hexToRgba(r,l)):r.indexOf("rgba")>-1&&(l=w.getOpacityFromRGBA(r)),t.opacity&&(l=t.opacity),"pattern"===o&&(a=this.handlePatternFill(a,r,l,h)),"gradient"===o&&(s=this.handleGradientFill(r,l,this.seriesIndex)),"image"===o){var c=n.fill.image.src,f=t.patternID?t.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(c)?t.seriesNumber<c.length?c[t.seriesNumber]:c[0]:c,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(f)}),i="url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(f,")")}else i="gradient"===o?s:"pattern"===o?a:h;return t.solid&&(i=h),i}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,a=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?a=t.globals.stroke.colors:a.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?a=t.globals.fill.colors:a.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?a=t.globals.stroke.colors:a.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?a=t.globals.fill.colors:a.push(t.globals.fill.colors),void 0!==i.fillColors&&(a=[],Array.isArray(i.fillColors)?a=i.fillColors.slice():a.push(i.fillColors)),a}},{key:"handlePatternFill",value:function(t,e,i,a){var s=this.w.config,n=this.opts,r=new S(this.ctx),o=void 0===s.fill.pattern.strokeWidth?Array.isArray(s.stroke.width)?s.stroke.width[this.seriesIndex]:s.stroke.width:Array.isArray(s.fill.pattern.strokeWidth)?s.fill.pattern.strokeWidth[this.seriesIndex]:s.fill.pattern.strokeWidth,l=e;return Array.isArray(s.fill.pattern.style)?void 0!==s.fill.pattern.style[n.seriesNumber]?r.drawPattern(s.fill.pattern.style[n.seriesNumber],s.fill.pattern.width,s.fill.pattern.height,l,o,i):a:r.drawPattern(s.fill.pattern.style,s.fill.pattern.width,s.fill.pattern.height,l,o,i)}},{key:"handleGradientFill",value:function(t,e,i){var a,s=this.w.config,n=this.opts,r=new S(this.ctx),o=new w,l=s.fill.gradient.type,h=t,c=void 0===s.fill.gradient.opacityFrom?e:Array.isArray(s.fill.gradient.opacityFrom)?s.fill.gradient.opacityFrom[i]:s.fill.gradient.opacityFrom;h.indexOf("rgba")>-1&&(c=w.getOpacityFromRGBA(h));var f=void 0===s.fill.gradient.opacityTo?e:Array.isArray(s.fill.gradient.opacityTo)?s.fill.gradient.opacityTo[i]:s.fill.gradient.opacityTo;if(void 0===s.fill.gradient.gradientToColors||0===s.fill.gradient.gradientToColors.length)a="dark"===s.fill.gradient.shade?o.shadeColor(-1*parseFloat(s.fill.gradient.shadeIntensity),t.indexOf("rgb")>-1?w.rgb2hex(t):t):o.shadeColor(parseFloat(s.fill.gradient.shadeIntensity),t.indexOf("rgb")>-1?w.rgb2hex(t):t);else if(s.fill.gradient.gradientToColors[n.seriesNumber]){var g=s.fill.gradient.gradientToColors[n.seriesNumber];a=g,g.indexOf("rgba")>-1&&(f=w.getOpacityFromRGBA(g))}else a=t;if(s.fill.gradient.inverseColors){var u=h;h=a,a=u}return h.indexOf("rgb")>-1&&(h=w.rgb2hex(h)),a.indexOf("rgb")>-1&&(a=w.rgb2hex(a)),r.drawGradient(l,h,a,c,f,n.size,s.fill.gradient.stops,s.fill.gradient.colorStops,i)}}]),t}(),T=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map((function(e){return t.config.markers.size}))}},{key:"plotChartMarkers",value:function(t,e,i,a){var s,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.w,o=e,l=t,h=null,c=new S(this.ctx),f=r.config.markers.discrete&&r.config.markers.discrete.length;if((r.globals.markers.size[e]>0||n||f)&&(h=c.group({class:n||f?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(l.x))for(var g=0;g<l.x.length;g++){var u=i;1===i&&0===g&&(u=0),1===i&&1===g&&(u=1);var d="apexcharts-marker";if("line"!==r.config.chart.type&&"area"!==r.config.chart.type||r.globals.comboCharts||r.config.tooltip.intersect||(d+=" no-pointer-events"),(Array.isArray(r.config.markers.size)?r.globals.markers.size[e]>0:r.config.markers.size>0)||n||f){w.isNumber(l.y[g])?d+=" w".concat(w.randomId()):d="apexcharts-nullpoint";var b=this.getMarkerConfig({cssClass:d,seriesIndex:e,dataPointIndex:u});r.config.series[o].data[u]&&(r.config.series[o].data[u].fillColor&&(b.pointFillColor=r.config.series[o].data[u].fillColor),r.config.series[o].data[u].strokeColor&&(b.pointStrokeColor=r.config.series[o].data[u].strokeColor)),a&&(b.pSize=a),(s=c.drawMarker(l.x[g],l.y[g],b)).attr("rel",u),s.attr("j",u),s.attr("index",e),s.node.setAttribute("default-marker-size",b.pSize),new _(this.ctx).setSelectionFilter(s,e,u),this.addEvents(s),h&&h.add(s)}else void 0===r.globals.pointsArray[e]&&(r.globals.pointsArray[e]=[]),r.globals.pointsArray[e].push([l.x[g],l.y[g]])}return h}},{key:"getMarkerConfig",value:function(t){var e=t.cssClass,i=t.seriesIndex,a=t.dataPointIndex,s=void 0===a?null:a,n=t.finishRadius,r=void 0===n?null:n,o=this.w,l=this.getMarkerStyle(i),h=o.globals.markers.size[i],c=o.config.markers;return null!==s&&c.discrete.length&&c.discrete.map((function(t){t.seriesIndex===i&&t.dataPointIndex===s&&(l.pointStrokeColor=t.strokeColor,l.pointFillColor=t.fillColor,h=t.size,l.pointShape=t.shape)})),{pSize:null===r?h:r,pRadius:c.radius,width:Array.isArray(c.width)?c.width[i]:c.width,height:Array.isArray(c.height)?c.height[i]:c.height,pointStrokeWidth:Array.isArray(c.strokeWidth)?c.strokeWidth[i]:c.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(c.shape)?c.shape[i]:c.shape),class:e,pointStrokeOpacity:Array.isArray(c.strokeOpacity)?c.strokeOpacity[i]:c.strokeOpacity,pointStrokeDashArray:Array.isArray(c.strokeDashArray)?c.strokeDashArray[i]:c.strokeDashArray,pointFillOpacity:Array.isArray(c.fillOpacity)?c.fillOpacity[i]:c.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(t){var e=this.w,i=new S(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,a=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(a)?a[t]:a,pointFillColor:Array.isArray(i)?i[t]:i}}}]),t}(),O=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return h(t,[{key:"draw",value:function(t,e,i){var a=this.w,s=new S(this.ctx),n=i.realIndex,r=i.pointsPos,o=i.zRatio,l=i.elParent,h=s.group({class:"apexcharts-series-markers apexcharts-series-".concat(a.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),Array.isArray(r.x))for(var c=0;c<r.x.length;c++){var f=e+1,g=!0;0===e&&0===c&&(f=0),0===e&&1===c&&(f=1);var u=0,d=a.globals.markers.size[n];if(o!==1/0){d=a.globals.seriesZ[n][f]/o;var p=a.config.plotOptions.bubble;p.minBubbleRadius&&d<p.minBubbleRadius&&(d=p.minBubbleRadius),p.maxBubbleRadius&&d>p.maxBubbleRadius&&(d=p.maxBubbleRadius)}a.config.chart.animations.enabled||(u=d);var y=r.x[c],b=r.y[c];if(u=u||0,null!==b&&void 0!==a.globals.series[n][f]||(g=!1),g){var v=this.drawPoint(y,b,u,d,n,f,e);h.add(v)}l.add(h)}}},{key:"drawPoint",value:function(t,e,i,a,s,n,r){var o=this.w,l=s,h=new b(this.ctx),c=new _(this.ctx),f=new N(this.ctx),g=new T(this.ctx),u=new S(this.ctx),d=g.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:n,finishRadius:"bubble"===o.config.chart.type||o.globals.comboCharts&&o.config.series[s]&&"bubble"===o.config.series[s].type?a:null});a=d.pSize;var p,y=f.fillPath({seriesNumber:s,dataPointIndex:n,color:d.pointFillColor,patternUnits:"objectBoundingBox",value:o.globals.series[s][r]});if("circle"===d.shape?p=u.drawCircle(i):"square"!==d.shape&&"rect"!==d.shape||(p=u.drawRect(0,0,d.width-d.pointStrokeWidth/2,d.height-d.pointStrokeWidth/2,d.pRadius)),o.config.series[l].data[n]&&o.config.series[l].data[n].fillColor&&(y=o.config.series[l].data[n].fillColor),p.attr({x:t-d.width/2-d.pointStrokeWidth/2,y:e-d.height/2-d.pointStrokeWidth/2,cx:t,cy:e,fill:y,"fill-opacity":d.pointFillOpacity,stroke:d.pointStrokeColor,r:a,"stroke-width":d.pointStrokeWidth,"stroke-dasharray":d.pointStrokeDashArray,"stroke-opacity":d.pointStrokeOpacity}),o.config.chart.dropShadow.enabled){var v=o.config.chart.dropShadow;c.dropShadow(p,v,s)}if(!this.initialAnim||o.globals.dataChanged||o.globals.resized)o.globals.animationEnded=!0;else{var m=o.config.chart.animations.speed;h.animateMarker(p,0,"circle"===d.shape?a:{width:d.width,height:d.height},m,o.globals.easing,(function(){window.setTimeout((function(){h.animationCompleted(p)}),100)}))}if(o.globals.dataChanged&&"circle"===d.shape)if(this.dynamicAnim){var x,w,C,E,A=o.config.chart.animations.dynamicAnimation.speed;null!=(E=o.globals.previousPaths[s]&&o.globals.previousPaths[s][r])&&(x=E.x,w=E.y,C=void 0!==E.r?E.r:a);for(var I=0;I<o.globals.collapsedSeries.length;I++)o.globals.collapsedSeries[I].index===s&&(A=1,a=0);0===t&&0===e&&(a=0),h.animateCircle(p,{cx:x,cy:w,r:C},{cx:t,cy:e,r:a},A,o.globals.easing)}else p.attr({r:a});return p.attr({rel:n,j:n,index:s,"default-marker-size":a}),c.setSelectionFilter(p,s,n),g.addEvents(p),p.node.classList.add("apexcharts-marker"),p}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),t}(),R=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"dataLabelsCorrection",value:function(t,e,i,a,s,n,r){var o=this.w,l=!1,h=new S(this.ctx).getTextRects(i,r),c=h.width,f=h.height;e<0&&(e=0),e>o.globals.gridHeight+f&&(e=o.globals.gridHeight+f/2),void 0===o.globals.dataLabelsRects[a]&&(o.globals.dataLabelsRects[a]=[]),o.globals.dataLabelsRects[a].push({x:t,y:e,width:c,height:f});var g=o.globals.dataLabelsRects[a].length-2,u=void 0!==o.globals.lastDrawnDataLabelsIndexes[a]?o.globals.lastDrawnDataLabelsIndexes[a][o.globals.lastDrawnDataLabelsIndexes[a].length-1]:0;if(void 0!==o.globals.dataLabelsRects[a][g]){var d=o.globals.dataLabelsRects[a][u];(t>d.x+d.width+2||e>d.y+d.height+2||t+c<d.x)&&(l=!0)}return(0===s||n)&&(l=!0),{x:t,y:e,textRects:h,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t,e,i){var a=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,n=this.w,r=new S(this.ctx),o=n.config.dataLabels,l=0,h=0,c=i,f=null;if(!o.enabled||!Array.isArray(t.x))return f;f=r.group({class:"apexcharts-data-labels"});for(var g=0;g<t.x.length;g++)if(l=t.x[g]+o.offsetX,h=t.y[g]+o.offsetY+s,!isNaN(l)){1===i&&0===g&&(c=0),1===i&&1===g&&(c=1);var u=n.globals.series[e][c],d="",p=function(t){return n.config.dataLabels.formatter(t,{ctx:a.ctx,seriesIndex:e,dataPointIndex:c,w:n})};"bubble"===n.config.chart.type?(d=p(u=n.globals.seriesZ[e][c]),h=t.y[g],h=new O(this.ctx).centerTextInBubble(h,e,c).y):void 0!==u&&(d=p(u)),this.plotDataLabelsText({x:l,y:h,text:d,i:e,j:c,parent:f,offsetCorrection:!0,dataLabelsConfig:n.config.dataLabels})}return f}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new S(this.ctx),a=t.x,s=t.y,n=t.i,r=t.j,o=t.text,l=t.textAnchor,h=t.fontSize,c=t.parent,f=t.dataLabelsConfig,g=t.color,u=t.alwaysDrawDataLabel,d=t.offsetCorrection;if(!(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(n)<0)){var p={x:a,y:s,drawnextLabel:!0,textRects:null};d&&(p=this.dataLabelsCorrection(a,s,o,n,r,u,parseInt(f.style.fontSize,10))),e.globals.zoomed||(a=p.x,s=p.y),p.textRects&&(a<-10-p.textRects.width||a>e.globals.gridWidth+p.textRects.width+10)&&(o="");var y=e.globals.dataLabels.style.colors[n];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(y=e.globals.dataLabels.style.colors[r]),"function"==typeof y&&(y=y({series:e.globals.series,seriesIndex:n,dataPointIndex:r,w:e})),g&&(y=g);var b=f.offsetX,v=f.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(b=0,v=0),p.drawnextLabel){var m=i.drawText({width:100,height:parseInt(f.style.fontSize,10),x:a+b,y:s+v,foreColor:y,textAnchor:l||f.textAnchor,text:o,fontSize:h||f.style.fontSize,fontFamily:f.style.fontFamily,fontWeight:f.style.fontWeight||"normal"});if(m.attr({class:"apexcharts-datalabel",cx:a,cy:s}),f.dropShadow.enabled){var x=f.dropShadow;new _(this.ctx).dropShadow(m,x)}c.add(m),void 0===e.globals.lastDrawnDataLabelsIndexes[n]&&(e.globals.lastDrawnDataLabelsIndexes[n]=[]),e.globals.lastDrawnDataLabelsIndexes[n].push(r)}}}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,a=i.config.dataLabels.background,s=a.padding,n=a.padding/2,r=e.width,o=e.height,l=new S(this.ctx).drawRect(e.x-s,e.y-n/2,r+2*s,o+n,a.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,a.opacity,a.borderWidth,a.borderColor);return a.dropShadow.enabled&&new _(this.ctx).dropShadow(l,a.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var a=e[i],s=a.getBBox(),n=null;if(s.width&&s.height&&(n=this.addBackgroundToDataLabel(a,s)),n){a.parentNode.insertBefore(n.node,a);var r=a.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?n.attr({fill:r}):n.animate().attr({fill:r}),a.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),a=0;a<e.length;a++)i&&i.insertBefore(e[a],i.nextSibling)}}]),t}(),D=function(){function t(e){a(this,t),this.w=e.w,this.barCtx=e}return h(t,[{key:"handleBarDataLabels",value:function(t){var e=t.x,i=t.y,a=t.y1,s=t.y2,n=t.i,r=t.j,o=t.realIndex,l=t.series,h=t.barHeight,c=t.barWidth,f=t.barYPosition,g=t.visibleSeries,u=t.renderedPath,d=this.w,p=new S(this.barCtx.ctx),y=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[o]:this.barCtx.strokeWidth,b=e+parseFloat(c*g),v=i+parseFloat(h*g);d.globals.isXNumeric&&!d.globals.isBarHorizontal&&(b=e+parseFloat(c*(g+1)),v=i+parseFloat(h*(g+1))-y);var m=e,x=i,w={},_=d.config.dataLabels,C=this.barCtx.barOptions.dataLabels;void 0!==f&&this.barCtx.isRangeBar&&(v=f,x=f);var E=_.offsetX,A=_.offsetY,I={width:0,height:0};if(d.config.dataLabels.enabled){var k=this.barCtx.series[n][r];I=p.getTextRects(d.globals.yLabelFormatters[0](k),parseFloat(_.style.fontSize))}var P={x:e,y:i,i:n,j:r,renderedPath:u,bcx:b,bcy:v,barHeight:h,barWidth:c,textRects:I,strokeWidth:y,dataLabelsX:m,dataLabelsY:x,barDataLabelsConfig:C,offX:E,offY:A};return w=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(P):this.calculateColumnsDataLabelsPosition(P),u.attr({cy:w.bcy,cx:w.bcx,j:r,val:l[n][r],barHeight:h,barWidth:c}),this.drawCalculatedDataLabels({x:w.dataLabelsX,y:w.dataLabelsY,val:this.barCtx.isRangeBar?[a,s]:l[n][r],i:o,j:r,barWidth:c,barHeight:h,textRects:I,dataLabelsConfig:_})}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e,i=this.w,a=t.i,s=t.j,n=t.y,r=t.bcx,o=t.barWidth,l=t.barHeight,h=t.textRects,c=t.dataLabelsY,f=t.barDataLabelsConfig,g=t.strokeWidth,u=t.offX,d=t.offY;l=Math.abs(l);var p="vertical"===i.config.plotOptions.bar.dataLabels.orientation;r-=g/2;var y=i.globals.gridWidth/i.globals.dataPoints;e=i.globals.isXNumeric?r-o/2+u:r-y+o/2+u,p&&(e=e+h.height/2-g/2-2);var b=this.barCtx.series[a][s]<0,v=n;switch(this.barCtx.isReversed&&(v=n-l+(b?2*l:0),n-=l),f.position){case"center":c=p?b?v+l/2+d:v+l/2-d:b?v-l/2+h.height/2+d:v+l/2+h.height/2-d;break;case"bottom":c=p?b?v+l+d:v+l-d:b?v-l+h.height+g+d:v+l-h.height/2+g-d;break;case"top":c=p?b?v+d:v-d:b?v-h.height/2-d:v+h.height+d}return i.config.chart.stacked||(c<0?c=0+g:c+h.height/3>i.globals.gridHeight&&(c=i.globals.gridHeight-g)),{bcx:r,bcy:n,dataLabelsX:e,dataLabelsY:c}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,i=t.x,a=t.i,s=t.j,n=t.bcy,r=t.barHeight,o=t.barWidth,l=t.textRects,h=t.dataLabelsX,c=t.strokeWidth,f=t.barDataLabelsConfig,g=t.offX,u=t.offY,d=e.globals.gridHeight/e.globals.dataPoints;o=Math.abs(o);var p=n-(this.barCtx.isRangeBar?0:d)+r/2+l.height/2+u-3,y=this.barCtx.series[a][s]<0,b=i;switch(this.barCtx.isReversed&&(b=i+o-(y?2*o:0),i=e.globals.gridWidth-o),f.position){case"center":h=y?b+o/2-g:Math.max(l.width/2,b-o/2)+g;break;case"bottom":h=y?b+o-c-Math.round(l.width/2)-g:b-o+c+Math.round(l.width/2)+g;break;case"top":h=y?b-c+Math.round(l.width/2)-g:b-c-Math.round(l.width/2)+g}return e.config.chart.stacked||(h<0?h=h+l.width+c:h+l.width/2>e.globals.gridWidth&&(h=e.globals.gridWidth-l.width-c)),{bcx:i,bcy:n,dataLabelsX:h,dataLabelsY:p}}},{key:"drawCalculatedDataLabels",value:function(t){var i=t.x,a=t.y,s=t.val,e=t.i,n=t.j,r=t.textRects,o=t.barHeight,h=t.barWidth,c=t.dataLabelsConfig,f=this.w,g="rotate(0)";"vertical"===f.config.plotOptions.bar.dataLabels.orientation&&(g="rotate(-90, ".concat(i,", ").concat(a,")"));var u=new R(this.barCtx.ctx),d=new S(this.barCtx.ctx),p=c.formatter,y=null,b=f.globals.collapsedSeriesIndices.indexOf(e)>-1;if(c.enabled&&!b){y=d.group({class:"apexcharts-data-labels",transform:g});var v="";void 0!==s&&(v=p(s,{seriesIndex:e,dataPointIndex:n,w:f}));var m=f.globals.series[e][n]<0,x=f.config.plotOptions.bar.dataLabels.position;"vertical"===f.config.plotOptions.bar.dataLabels.orientation&&("top"===x&&(c.textAnchor=m?"end":"start"),"center"===x&&(c.textAnchor="middle"),"bottom"===x&&(c.textAnchor=m?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&h<d.getTextRects(v,parseFloat(c.style.fontSize)).width&&(v=""),f.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?r.width/1.6>Math.abs(h)&&(v=""):r.height/1.6>Math.abs(o)&&(v=""));var w=l({},c);this.barCtx.isHorizontal&&s<0&&("start"===c.textAnchor?w.textAnchor="end":"end"===c.textAnchor&&(w.textAnchor="start")),u.plotDataLabelsText({x:i,y:a,text:v,i:e,j:n,parent:y,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return y}}]),t}(),F=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return h(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(w.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){var i=this.w;function a(i){for(var a=0;a<i.length;a++)i[a].index===e&&t.node.classList.add("apexcharts-series-collapsed")}a(i.globals.collapsedSeries),a(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.w,s=w.clone(a.globals.initialSeries);a.globals.previousPaths=[],i?(a.globals.collapsedSeries=[],a.globals.ancillaryCollapsedSeries=[],a.globals.collapsedSeriesIndices=[],a.globals.ancillaryCollapsedSeriesIndices=[]):s=this.emptyCollapsedSeries(s),a.config.series=s,t&&(e&&(a.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(s,a.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w;e||(e=t.target);var a=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var s=parseInt(e.getAttribute("rel"),10)-1,n=null,r=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(n=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(s,"']")),r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(s,"']"))):n=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(s+1,"']")):n=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(s+1,"'] path"));for(var o=0;o<a.length;o++)a[o].classList.add(this.legendInactiveClass);null!==n&&(i.globals.axisCharts||n.parentNode.classList.remove(this.legendInactiveClass),n.classList.remove(this.legendInactiveClass),null!==r&&r.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var l=0;l<a.length;l++)a[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,a=this.w,s=a.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),n=function(t){for(var e=0;e<s.length;e++)s[e].classList[t](i.legendInactiveClass)};if("mousemove"===t.type){var r=parseInt(e.getAttribute("rel"),10)-1;n("add"),function(t){for(var e=0;e<s.length;e++){var a=parseInt(s[e].getAttribute("val"),10);a>=t.from&&a<=t.to&&s[e].classList.remove(i.legendInactiveClass)}}(a.config.plotOptions.heatmap.colorScale.ranges[r])}else"mouseout"===t.type&&n("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",i=this.w,a=0;if(i.config.series.length>1)for(var s=i.config.series.map((function(e,a){var s=!1;return t&&(s="bar"===i.config.series[a].type||"column"===i.config.series[a].type),e.data&&e.data.length>0&&!s?a:-1})),n="asc"===e?0:s.length-1;"asc"===e?n<s.length:n>=0;"asc"===e?n++:n--)if(-1!==s[n]){a=s[n];break}return a}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(e,i,a){for(var s=e[i].childNodes,n={type:a,paths:[],realIndex:e[i].getAttribute("data:realIndex")},r=0;r<s.length;r++)if(s[r].hasAttribute("pathTo")){var o=s[r].getAttribute("pathTo");n.paths.push({d:o})}t.globals.previousPaths.push(n)}t.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach((function(i){for(var a,s=(a=i,t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(a,"-series .apexcharts-series"))),n=0;n<s.length;n++)e(s,n,i)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(i.length>0)for(var a=function(e){for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(e,"'] rect")),a=[],s=function(t){var e=function(e){return i[t].getAttribute(e)},s={x:parseFloat(e("x")),y:parseFloat(e("y")),width:parseFloat(e("width")),height:parseFloat(e("height"))};a.push({rect:s,color:i[t].getAttribute("color")})},n=0;n<i.length;n++)s(n);t.globals.previousPaths.push(a)},s=0;s<i.length;s++)a(s);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(i.length>0)for(var a=0;a<i.length;a++){for(var s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(a,"'] circle")),n=[],r=0;r<s.length;r++)n.push({x:s[r].getAttribute("cx"),y:s[r].getAttribute("cy"),r:s[r].getAttribute("r")});e.globals.previousPaths.push(n)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new S(this.ctx),a=t.globals.svgWidth/2,s=t.globals.svgHeight/2,n="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(a=10,n="start"):"right"===e.align&&(a=t.globals.svgWidth-10,n="end"),"top"===e.verticalAlign?s=50:"bottom"===e.verticalAlign&&(s=t.globals.svgHeight-50),a+=e.offsetX,s=s+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var r=i.drawText({x:a,y:s,text:e.text,textAnchor:n,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(r)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var a=0;a<t[e.globals.maxValsInArrayIndex].length;a++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),a=0;a<i.length-1;a++)if(i[a][0]!==i[a+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(t){return t.length>0?t:[]}))}}]),t}(),z=function(){function t(e){a(this,t),this.w=e.w,this.barCtx=e}return h(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var a=0;a<t[i].length;a++)e.globals.seriesX[i][a]>e.globals.minX&&e.globals.seriesX[i][a]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=t.length-1,e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(){var t,e,i,a,s,n,r,o,l=this.w,h=l.globals.dataPoints;this.barCtx.isRangeBar&&(h=l.globals.labels.length);var c=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(c=1),this.barCtx.isHorizontal)s=(i=l.globals.gridHeight/h)/c,l.globals.isXNumeric&&(s=(i=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),s=s*parseInt(this.barCtx.barOptions.barHeight,10)/100,o=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),e=(i-s*this.barCtx.seriesLen)/2;else{if(a=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(a=l.globals.gridWidth/l.globals.dataPoints),n=a/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var f=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(f=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/f>0&&(a=l.globals.minXDiff/f),(n=a/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(n=1)}r=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),t=l.globals.padHorizontal+(a-n*this.barCtx.seriesLen)/2}return{x:t,y:e,yDivision:i,xDivision:a,barHeight:s,barWidth:n,zeroH:r,zeroW:o}}},{key:"getPathFillColor",value:function(t,e,i,a){var s=this.w,n=new N(this.barCtx.ctx),r=null,o=this.barCtx.barOptions.distributed?i:e;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(a){t[e][i]>=a.from&&t[e][i]<=a.to&&(r=a.color)})),s.config.series[e].data[i]&&s.config.series[e].data[i].fillColor&&(r=s.config.series[e].data[i].fillColor),n.fillPath({seriesNumber:this.barCtx.barOptions.distributed?o:a,dataPointIndex:i,color:r,value:t[e][i]})}},{key:"getStrokeWidth",value:function(t,e,i){var a=0,s=this.w;return void 0===this.barCtx.series[t][e]||null===this.barCtx.series[t][e]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,s.config.stroke.show&&(this.barCtx.isNullValue||(a=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),a}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,a=t.x1,s=t.x2,n=t.y1,r=t.y2,o=t.elSeries,l=this.w,h=new S(this.barCtx.ctx),c=new F(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&c===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);var f=this.barCtx.barOptions.colors.backgroundBarColors[e],g=h.drawRect(void 0!==a?a:0,void 0!==n?n:0,void 0!==s?s:l.globals.gridWidth,void 0!==r?r:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,f,this.barCtx.barOptions.colors.backgroundBarOpacity);o.add(g),g.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e=t.barWidth,i=t.barXPosition,a=t.yRatio,s=t.y1,n=t.y2,r=t.strokeWidth,o=t.series,l=t.realIndex,h=t.i,c=t.j,f=t.w,g=new S(this.barCtx.ctx);(r=Array.isArray(r)?r[l]:r)||(r=0);var u={barWidth:e,strokeWidth:r,yRatio:a,barXPosition:i,y1:s,y2:n},d=this.getRoundedBars(f,u,o,h,c),p=i,y=i+e,b=g.move(p,s),v=g.move(p,s),m=g.line(y-r,s);return f.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(l,c,!1)),b=b+g.line(p,d.y2)+d.pathWithRadius+g.line(y-r,d.y2)+m+m+"z",v=v+g.line(p,s)+m+m+m+m+m+g.line(p,s),f.config.chart.stacked&&(this.barCtx.yArrj.push(d.y2),this.barCtx.yArrjF.push(Math.abs(s-d.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[h][c])),{pathTo:b,pathFrom:v}}},{key:"getBarpaths",value:function(t){var e=t.barYPosition,i=t.barHeight,a=t.x1,s=t.x2,n=t.strokeWidth,r=t.series,o=t.realIndex,l=t.i,h=t.j,c=t.w,f=new S(this.barCtx.ctx);(n=Array.isArray(n)?n[o]:n)||(n=0);var g={barHeight:i,strokeWidth:n,barYPosition:e,x2:s,x1:a},u=this.getRoundedBars(c,g,r,l,h),d=f.move(a,e),p=f.move(a,e);c.globals.previousPaths.length>0&&(p=this.barCtx.getPreviousPath(o,h,!1));var y=e,b=e+i,v=f.line(a,b-n);return d=d+f.line(u.x2,y)+u.pathWithRadius+f.line(u.x2,b-n)+v+v+"z",p=p+f.line(a,y)+v+v+v+v+v+f.line(a,y),c.config.chart.stacked&&(this.barCtx.xArrj.push(u.x2),this.barCtx.xArrjF.push(Math.abs(a-u.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[l][h])),{pathTo:d,pathFrom:p}}},{key:"getRoundedBars",value:function(t,e,i,a,s){var n=new S(this.barCtx.ctx),r=0,o=t.config.plotOptions.bar.borderRadius,l=Array.isArray(o);if(r=l?o[a>o.length-1?o.length-1:a]:o,t.config.chart.stacked&&i.length>1&&a!==this.barCtx.radiusOnSeriesNumber&&!l&&(r=0),this.barCtx.isHorizontal){var h="",c=e.x2;if(Math.abs(e.x1-e.x2)<r&&(r=Math.abs(e.x1-e.x2)),void 0!==i[a][s]||null!==i[a][s]){var f=this.barCtx.isReversed?i[a][s]>0:i[a][s]<0;f&&(r*=-1),c-=r,h=n.quadraticCurve(c+r,e.barYPosition,c+r,e.barYPosition+(f?-1*r:r))+n.line(c+r,e.barYPosition+e.barHeight-e.strokeWidth-(f?-1*r:r))+n.quadraticCurve(c+r,e.barYPosition+e.barHeight-e.strokeWidth,c,e.barYPosition+e.barHeight-e.strokeWidth)}return{pathWithRadius:h,x2:c}}var g="",u=e.y2;if(Math.abs(e.y1-e.y2)<r&&(r=Math.abs(e.y1-e.y2)),void 0!==i[a][s]||null!==i[a][s]){var d=i[a][s]<0;d&&(r*=-1),u+=r,g=n.quadraticCurve(e.barXPosition,u-r,e.barXPosition+(d?-1*r:r),u-r)+n.line(e.barXPosition+e.barWidth-e.strokeWidth-(d?-1*r:r),u-r)+n.quadraticCurve(e.barXPosition+e.barWidth-e.strokeWidth,u-r,e.barXPosition+e.barWidth-e.strokeWidth,u)}return{pathWithRadius:g,y2:u}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,a=0;a<e.length;a++){for(var s=0,n=0;n<e[i.globals.maxValsInArrayIndex].length;n++)s+=e[a][n];0===s&&this.barCtx.zeroSerieses.push(a)}for(var r=e.length-1;r>=0;r--)this.barCtx.zeroSerieses.indexOf(r)>-1&&r===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var o=e.length-1;o>=0;o--)i.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:e;return null!=t&&(a=e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),a}},{key:"getYForValue",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:e;return null!=t&&(a=e-t/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),a}},{key:"getGoalValues",value:function(t,e,i,a,s){var n=this,r=this.w,o=[];return r.globals.seriesGoals[a]&&r.globals.seriesGoals[a][s]&&Array.isArray(r.globals.seriesGoals[a][s])&&r.globals.seriesGoals[a][s].forEach((function(a){var s;o.push((c(s={},t,"x"===t?n.getXForValue(a.value,e,!1):n.getYForValue(a.value,i,!1)),c(s,"attrs",a),s))})),o}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,i=t.barYPosition,a=t.goalX,s=t.goalY,n=t.barWidth,r=t.barHeight,o=new S(this.barCtx.ctx),l=o.group({className:"apexcharts-bar-goals-groups"}),h=null;return this.barCtx.isHorizontal?Array.isArray(a)&&a.forEach((function(t){var e=void 0!==t.attrs.strokeHeight?t.attrs.strokeHeight:r/2,a=i+e+r/2;h=o.drawLine(t.x,a-2*e,t.x,a,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeWidth?t.attrs.strokeWidth:2,t.attrs.strokeLineCap),l.add(h)})):Array.isArray(s)&&s.forEach((function(t){var i=void 0!==t.attrs.strokeWidth?t.attrs.strokeWidth:n/2,a=e+i+n/2;h=o.drawLine(a-2*i,t.y,a,t.y,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeHeight?t.attrs.strokeHeight:2,t.attrs.strokeLineCap),l.add(h)})),l}}]),t}(),X=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w;var s=this.w;this.barOptions=s.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=s.config.stroke.width,this.isNullValue=!1,this.isRangeBar=s.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new z(this)}return h(t,[{key:"draw",value:function(t,i){var a=this.w,s=new S(this.ctx),e=new A(this.ctx,a);t=e.getLogSeries(t),this.series=t,this.yRatio=e.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var n=s.group({class:"apexcharts-bar-series apexcharts-plot-series"});a.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var r=0,o=0;r<t.length;r++,o++){var h,c,f,g,u=void 0,d=void 0,p=[],b=[],y=a.globals.comboCharts?i[r]:r,v=s.group({class:"apexcharts-series",rel:r+1,seriesName:w.escapeString(a.globals.seriesNames[y]),"data:realIndex":y});this.ctx.series.addCollapsedClassToSeries(v,y),t[r].length>0&&(this.visibleI=this.visibleI+1);var m=0,x=0;this.yRatio.length>1&&(this.yaxisIndex=y),this.isReversed=a.config.yaxis[this.yaxisIndex]&&a.config.yaxis[this.yaxisIndex].reversed;var _=this.barHelpers.initialPositions();d=_.y,m=_.barHeight,c=_.yDivision,g=_.zeroW,u=_.x,x=_.barWidth,h=_.xDivision,f=_.zeroH,this.horizontal||b.push(u+x/2);for(var C=s.group({class:"apexcharts-datalabels","data:realIndex":y}),E=s.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),I=0;I<a.globals.dataPoints;I++){var k=this.barHelpers.getStrokeWidth(r,I,y),P=null,L={indexes:{i:r,j:I,realIndex:y,bc:o},x:u,y:d,strokeWidth:k,elSeries:v};this.isHorizontal?(P=this.drawBarPaths(l(l({},L),{},{barHeight:m,zeroW:g,yDivision:c})),x=this.series[r][I]/this.invertedYRatio):(P=this.drawColumnPaths(l(l({},L),{},{xDivision:h,barWidth:x,zeroH:f})),m=this.series[r][I]/this.yRatio[this.yaxisIndex]);var M=this.barHelpers.drawGoalLine({barXPosition:P.barXPosition,barYPosition:P.barYPosition,goalX:P.goalX,goalY:P.goalY,barHeight:m,barWidth:x});M&&E.add(M),d=P.y,u=P.x,I>0&&b.push(u+x/2),p.push(d);var N=this.barHelpers.getPathFillColor(t,r,I,y);this.renderSeries({realIndex:y,pathFill:N,j:I,i:r,pathFrom:P.pathFrom,pathTo:P.pathTo,strokeWidth:k,elSeries:v,x:u,y:d,series:t,barHeight:m,barWidth:x,elDataLabelsWrap:C,elGoalsMarkers:E,visibleSeries:this.visibleI,type:"bar"})}a.globals.seriesXvalues[y]=b,a.globals.seriesYvalues[y]=p,n.add(v)}return n}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,a=t.lineFill,s=t.j,n=t.i,r=t.pathFrom,o=t.pathTo,l=t.strokeWidth,h=t.elSeries,c=t.x,f=t.y,g=t.y1,u=t.y2,d=t.series,p=t.barHeight,y=t.barWidth,b=t.barYPosition,v=t.elDataLabelsWrap,m=t.elGoalsMarkers,x=t.visibleSeries,w=t.type,C=this.w,E=new S(this.ctx);a||(a=this.barOptions.distributed?C.globals.stroke.colors[s]:C.globals.stroke.colors[e]),C.config.series[n].data[s]&&C.config.series[n].data[s].strokeColor&&(a=C.config.series[n].data[s].strokeColor),this.isNullValue&&(i="none");var A=s/C.config.chart.animations.animateGradually.delay*(C.config.chart.animations.speed/C.globals.dataPoints)/2.4,I=E.renderPaths({i:n,j:s,realIndex:e,pathFrom:r,pathTo:o,stroke:a,strokeWidth:l,strokeLineCap:C.config.stroke.lineCap,fill:i,animationDelay:A,initialSpeed:C.config.chart.animations.speed,dataChangeSpeed:C.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(w,"-area")});I.attr("clip-path","url(#gridRectMask".concat(C.globals.cuid,")"));var k=C.config.forecastDataPoints;k.count>0&&s>=C.globals.dataPoints-k.count&&(I.node.setAttribute("stroke-dasharray",k.dashArray),I.node.setAttribute("stroke-width",k.strokeWidth),I.node.setAttribute("fill-opacity",k.fillOpacity)),void 0!==g&&void 0!==u&&(I.attr("data-range-y1",g),I.attr("data-range-y2",u)),new _(this.ctx).setSelectionFilter(I,e,s),h.add(I);var P=new D(this).handleBarDataLabels({x:c,y:f,y1:g,y2:u,i:n,j:s,series:d,realIndex:e,barHeight:p,barWidth:y,barYPosition:b,renderedPath:I,visibleSeries:x});return null!==P&&v.add(P),h.add(v),m&&h.add(m),h}},{key:"drawBarPaths",value:function(t){var e=t.indexes,i=t.barHeight,a=t.strokeWidth,s=t.zeroW,n=t.x,r=t.y,o=t.yDivision,l=t.elSeries,h=this.w,c=e.i,f=e.j;h.globals.isXNumeric&&(r=(h.globals.seriesX[c][f]-h.globals.minX)/this.invertedXRatio-i);var g=r+i*this.visibleI;n=this.barHelpers.getXForValue(this.series[c][f],s);var u=this.barHelpers.getBarpaths({barYPosition:g,barHeight:i,x1:s,x2:n,strokeWidth:a,series:this.series,realIndex:e.realIndex,i:c,j:f,w:h});return h.globals.isXNumeric||(r+=o),this.barHelpers.barBackground({j:f,i:c,y1:g-i*this.visibleI,y2:i*this.seriesLen,elSeries:l}),{pathTo:u.pathTo,pathFrom:u.pathFrom,x:n,y:r,goalX:this.barHelpers.getGoalValues("x",s,null,c,f),barYPosition:g}}},{key:"drawColumnPaths",value:function(t){var e=t.indexes,i=t.x,a=t.y,s=t.xDivision,n=t.barWidth,r=t.zeroH,o=t.strokeWidth,l=t.elSeries,h=this.w,c=e.realIndex,f=e.i,g=e.j,u=e.bc;if(h.globals.isXNumeric){var d=c;h.globals.seriesX[c].length||(d=h.globals.maxValsInArrayIndex),i=(h.globals.seriesX[d][g]-h.globals.minX)/this.xRatio-n*this.seriesLen/2}var p=i+n*this.visibleI;a=this.barHelpers.getYForValue(this.series[f][g],r);var y=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:n,y1:r,y2:a,strokeWidth:o,series:this.series,realIndex:e.realIndex,i:f,j:g,w:h});return h.globals.isXNumeric||(i+=s),this.barHelpers.barBackground({bc:u,j:g,i:f,x1:p-o/2-n*this.visibleI,x2:n*this.seriesLen+o/2,elSeries:l}),{pathTo:y.pathTo,pathFrom:y.pathFrom,x:i,y:a,goalY:this.barHelpers.getGoalValues("y",null,r,f,g),barXPosition:p}}},{key:"getPreviousPath",value:function(t,e){for(var i,a=this.w,s=0;s<a.globals.previousPaths.length;s++){var n=a.globals.previousPaths[s];n.paths&&n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(t,10)&&void 0!==a.globals.previousPaths[s].paths[e]&&(i=a.globals.previousPaths[s].paths[e].d)}return i}}]),t}(),Y=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return h(t,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,a=this.w.config.xaxis.labels.datetimeUTC,s=["\0"].concat(u(i.months)),n=[""].concat(u(i.shortMonths)),r=[""].concat(u(i.days)),o=[""].concat(u(i.shortDays));function l(t,e){var i=t+"";for(e=e||2;i.length<e;)i="0"+i;return i}var h=a?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var c=(a?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+s[0])).replace(/(^|[^\\])MMM/g,"$1"+n[0])).replace(/(^|[^\\])MM/g,"$1"+l(c))).replace(/(^|[^\\])M/g,"$1"+c);var f=a?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+r[0])).replace(/(^|[^\\])ddd/g,"$1"+o[0])).replace(/(^|[^\\])dd/g,"$1"+l(f))).replace(/(^|[^\\])d/g,"$1"+f);var g=a?t.getUTCHours():t.getHours(),d=g>12?g-12:0===g?12:g;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(g))).replace(/(^|[^\\])H/g,"$1"+g)).replace(/(^|[^\\])hh+/g,"$1"+l(d))).replace(/(^|[^\\])h/g,"$1"+d);var p=a?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(p))).replace(/(^|[^\\])m/g,"$1"+p);var y=a?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(y))).replace(/(^|[^\\])s/g,"$1"+y);var b=a?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(b,3)),b=Math.round(b/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(b)),b=Math.round(b/10);var v=g<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+b)).replace(/(^|[^\\])TT+/g,"$1"+v)).replace(/(^|[^\\])T/g,"$1"+v.charAt(0));var m=v.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+m)).replace(/(^|[^\\])t/g,"$1"+m.charAt(0));var x=-t.getTimezoneOffset(),w=a||!x?"Z":x>0?"+":"-";if(!a){var _=(x=Math.abs(x))%60;w+=l(Math.floor(x/60))+":"+l(_)}e=e.replace(/(^|[^\\])K/g,"$1"+w);var S=(a?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(r[0],"g"),r[S])).replace(new RegExp(o[0],"g"),o[S])).replace(new RegExp(s[0],"g"),s[c])).replace(new RegExp(n[0],"g"),n[c])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var a=this.w;void 0!==a.config.xaxis.min&&(t=a.config.xaxis.min),void 0!==a.config.xaxis.max&&(e=a.config.xaxis.max);var s=this.getDate(t),n=this.getDate(e),r=this.formatDate(s,"yyyy MM dd HH mm ss fff").split(" "),o=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(r[6],10),maxMillisecond:parseInt(o[6],10),minSecond:parseInt(r[5],10),maxSecond:parseInt(o[5],10),minMinute:parseInt(r[4],10),maxMinute:parseInt(o[4],10),minHour:parseInt(r[3],10),maxHour:parseInt(o[3],10),minDate:parseInt(r[2],10),maxDate:parseInt(o[2],10),minMonth:parseInt(r[1],10)-1,maxMonth:parseInt(o[1],10)-1,minYear:parseInt(r[0],10),maxYear:parseInt(o[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var a=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&a++,a}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=w.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),t}(),B=function(t){f(s,t);var i=m(s);function s(){return a(this,s),i.apply(this,arguments)}return h(s,[{key:"draw",value:function(t,i){var a=this.w,s=new S(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=a.globals.seriesRangeStart,this.seriesRangeEnd=a.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var e=s.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),n=0;n<t.length;n++){var r,o,h,c=void 0,f=void 0,g=void 0,u=a.globals.comboCharts?i[n]:n,d=s.group({class:"apexcharts-series",seriesName:w.escapeString(a.globals.seriesNames[u]),rel:n+1,"data:realIndex":u});this.ctx.series.addCollapsedClassToSeries(d,u),t[n].length>0&&(this.visibleI=this.visibleI+1);var p=0,b=0;this.yRatio.length>1&&(this.yaxisIndex=u);var y=this.barHelpers.initialPositions();f=y.y,h=y.zeroW,c=y.x,b=y.barWidth,r=y.xDivision,o=y.zeroH;for(var v=s.group({class:"apexcharts-datalabels","data:realIndex":u}),m=s.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),x=0;x<a.globals.dataPoints;x++){var _=this.barHelpers.getStrokeWidth(n,x,u),C=this.seriesRangeStart[n][x],E=this.seriesRangeEnd[n][x],A=null,I=null,k={x:c,y:f,strokeWidth:_,elSeries:d};if(g=y.yDivision,p=y.barHeight,this.isHorizontal){I=f+p*this.visibleI;var P=this.seriesLen;a.config.plotOptions.bar.rangeBarGroupRows&&(P=1);var L=(g-p*P)/2;if(void 0===a.config.series[n].data[x])break;if(a.config.series[n].data[x].x){var M=this.detectOverlappingBars({i:n,j:x,barYPosition:I,srty:L,barHeight:p,yDivision:g,initPositions:y});p=M.barHeight,I=M.barYPosition}b=(A=this.drawRangeBarPaths(l({indexes:{i:n,j:x,realIndex:u},barHeight:p,barYPosition:I,zeroW:h,yDivision:g,y1:C,y2:E},k))).barWidth}else p=(A=this.drawRangeColumnPaths(l({indexes:{i:n,j:x,realIndex:u},zeroH:o,barWidth:b,xDivision:r},k))).barHeight;var N=this.barHelpers.drawGoalLine({barXPosition:A.barXPosition,barYPosition:I,goalX:A.goalX,goalY:A.goalY,barHeight:p,barWidth:b});N&&m.add(N),f=A.y,c=A.x;var T=this.barHelpers.getPathFillColor(t,n,x,u),O=a.globals.stroke.colors[u];this.renderSeries({realIndex:u,pathFill:T,lineFill:O,j:x,i:n,x:c,y:f,y1:C,y2:E,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:_,elSeries:d,series:t,barHeight:p,barYPosition:I,barWidth:b,elDataLabelsWrap:v,elGoalsMarkers:m,visibleSeries:this.visibleI,type:"rangebar"})}e.add(d)}return e}},{key:"detectOverlappingBars",value:function(t){var e=t.i,i=t.j,a=t.barYPosition,s=t.srty,n=t.barHeight,r=t.yDivision,o=t.initPositions,l=this.w,h=[],c=l.config.series[e].data[i].rangeName,f=l.config.series[e].data[i].x,g=l.globals.labels.indexOf(f),u=l.globals.seriesRangeBar[e].findIndex((function(t){return t.x===f&&t.overlaps.length>0}));return a=l.config.plotOptions.bar.rangeBarGroupRows?s+r*g:s+n*this.visibleI+r*g,u>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(h=l.globals.seriesRangeBar[e][u].overlaps).indexOf(c)>-1&&(a=(n=o.barHeight/h.length)*this.visibleI+r*(100-parseInt(this.barOptions.barHeight,10))/100/2+n*(this.visibleI+h.indexOf(c))+r*g),{barYPosition:a,barHeight:n}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,i=t.x;t.strokeWidth;var a=t.xDivision,s=t.barWidth,n=t.zeroH,r=this.w,o=e.i,l=e.j,h=this.yRatio[this.yaxisIndex],c=e.realIndex,f=this.getRangeValue(c,l),g=Math.min(f.start,f.end),u=Math.max(f.start,f.end);r.globals.isXNumeric&&(i=(r.globals.seriesX[o][l]-r.globals.minX)/this.xRatio-s/2);var d=i+s*this.visibleI;void 0===this.series[o][l]||null===this.series[o][l]?g=n:(g=n-g/h,u=n-u/h);var p=Math.abs(u-g),y=this.barHelpers.getColumnPaths({barXPosition:d,barWidth:s,y1:g,y2:u,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:e.realIndex,i:c,j:l,w:r});return r.globals.isXNumeric||(i+=a),{pathTo:y.pathTo,pathFrom:y.pathFrom,barHeight:p,x:i,y:u,goalY:this.barHelpers.getGoalValues("y",null,n,o,l),barXPosition:d}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,i=t.y,a=t.y1,s=t.y2,n=t.yDivision,r=t.barHeight,o=t.barYPosition,l=t.zeroW,h=this.w,c=l+a/this.invertedYRatio,f=l+s/this.invertedYRatio,g=Math.abs(f-c),u=this.barHelpers.getBarpaths({barYPosition:o,barHeight:r,x1:c,x2:f,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,realIndex:e.realIndex,j:e.j,w:h});return h.globals.isXNumeric||(i+=n),{pathTo:u.pathTo,pathFrom:u.pathFrom,barWidth:g,x:f,goalX:this.barHelpers.getGoalValues("x",l,null,e.realIndex,e.j),y:i}}},{key:"getRangeValue",value:function(t,e){var i=this.w;return{start:i.globals.seriesRangeStart[t][e],end:i.globals.seriesRangeEnd[t][e]}}},{key:"getTooltipValues",value:function(t){var e=t.ctx,i=t.seriesIndex,a=t.dataPointIndex,s=t.y1,n=t.y2,r=t.w,o=r.globals.seriesRangeStart[i][a],l=r.globals.seriesRangeEnd[i][a],h=r.globals.labels[a],c=r.config.series[i].name?r.config.series[i].name:"",f=r.config.tooltip.y.formatter,g=r.config.tooltip.y.title.formatter,u={w:r,seriesIndex:i,dataPointIndex:a,start:o,end:l};"function"==typeof g&&(c=g(c,u)),Number.isFinite(s)&&Number.isFinite(n)&&(o=s,l=n,r.config.series[i].data[a].x&&(h=r.config.series[i].data[a].x+":"),"function"==typeof f&&(h=f(h,u)));var d="",p="",y=r.globals.colors[i];if(void 0===r.config.tooltip.x.formatter)if("datetime"===r.config.xaxis.type){var b=new Y(e);d=b.formatDate(b.getDate(o),r.config.tooltip.x.format),p=b.formatDate(b.getDate(l),r.config.tooltip.x.format)}else d=o,p=l;else d=r.config.tooltip.x.formatter(o),p=r.config.tooltip.x.formatter(l);return{start:o,end:l,startVal:d,endVal:p,ylabel:h,color:y,seriesName:c}}},{key:"buildCustomTooltipHTML",value:function(t){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t.color+'">'+(t.seriesName||"")+'</span></div><div> <span class="category">'+t.ylabel+' </span> <span class="value start-value">'+t.start+'</span> <span class="separator">-</span> <span class="value end-value">'+t.end+"</span></div></div>"}}]),s}(X),G=function(){function t(e){a(this,t),this.opts=e}return h(t,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,w.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,a=e.dataPointIndex,s=e.w;return t._getBoxTooltip(s,i,a,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,a=e.dataPointIndex,s=e.w;return t._getBoxTooltip(s,i,a,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){e.ctx;var i=e.seriesIndex,a=e.dataPointIndex,s=e.w,n=s.globals.seriesRangeStart[i][a];return s.globals.seriesRangeEnd[i][a]-n},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(t){var e=new B(t.ctx,null),i=e.getTooltipValues(t),a=i.color,s=i.seriesName,n=i.ylabel,r=i.startVal,o=i.endVal;return e.buildCustomTooltipHTML({color:a,seriesName:s,ylabel:n,start:r,end:o})}(t):function(t){var e=new B(t.ctx,null),i=e.getTooltipValues(t),a=i.color,s=i.seriesName,n=i.ylabel,r=i.start,o=i.end;return e.buildCustomTooltipHTML({color:a,seriesName:s,ylabel:n,start:r,end:o})}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(t){return w.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach((function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100})),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return w.isNumber(t)?Math.floor(t):t};var a=t.xaxis.labels.formatter,s=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(s=i.map((function(t){return Array.isArray(t)?t:String(t)}))),s&&s.length&&(t.xaxis.labels.formatter=function(t){return w.isNumber(t)?a(s[Math.floor(t)-1]):a(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(t,e,i,a,s){var n=t.globals.seriesCandleO[e][i],r=t.globals.seriesCandleH[e][i],o=t.globals.seriesCandleM[e][i],l=t.globals.seriesCandleL[e][i],h=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==s?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(a[0],': <span class="value">')+n+"</span></div>"+"<div>".concat(a[1],': <span class="value">')+r+"</span></div>"+(o?"<div>".concat(a[2],': <span class="value">')+o+"</span></div>":"")+"<div>".concat(a[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(a[4],': <span class="value">')+h+"</span></div></div>"}}]),t}(),V=function(){function t(e){a(this,t),this.opts=e}return h(t,[{key:"init",value:function(t){var e=t.responsiveOverride,a=this.opts,s=new L,n=new G(a);this.chartType=a.chart.type,"histogram"===this.chartType&&(a.chart.type="bar",a=w.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},a)),a=this.extendYAxis(a),a=this.extendAnnotations(a);var r=s.init(),o={};if(a&&"object"===i(a)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(a.chart.type)?n[a.chart.type]():n.line(),a.chart.brush&&a.chart.brush.enabled&&(l=n.brush(l)),a.chart.stacked&&"100%"===a.chart.stackType&&(a=n.stacked100(a)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(a),a.xaxis=a.xaxis||window.Apex.xaxis||{},e||(a.xaxis.convertedCatToNumeric=!1),((a=this.checkForCatToNumericXAxis(this.chartType,l,a)).chart.sparkline&&a.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=n.sparkline(l)),o=w.extend(r,l)}var h=w.extend(o,window.Apex);return r=w.extend(h,a),this.handleUserInputErrors(r)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var a=new G(i),s=("bar"===t||"boxPlot"===t)&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal,n="pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t,r="datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type,o=i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement;return s||n||!r||"between"===o||(i=a.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t,e){var i=new L;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=w.extend(t.yaxis,window.Apex.yaxis)),t.yaxis.constructor!==Array?t.yaxis=[w.extend(i.yAxis,t.yaxis)]:t.yaxis=w.extendArray(t.yaxis,i.yAxis);var a=!1;t.yaxis.forEach((function(t){t.logarithmic&&(a=!0)}));var s=t.series;return e&&!s&&(s=e.config.series),a&&s.length!==t.yaxis.length&&s.length&&(t.yaxis=s.map((function(e,a){if(e.name||(s[a].name="series-".concat(a+1)),t.yaxis[a])return t.yaxis[a].seriesName=s[a].name,t.yaxis[a];var n=w.extend(i.yAxis,t.yaxis[0]);return n.show=!1,n}))),a&&s.length>1&&s.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new L;return t.annotations.yaxis=w.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new L;return t.annotations.xaxis=w.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new L;return t.annotations.points=w.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===e.chart.type&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&"barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(e.xaxis.crosshairs.width="tickWidth"),"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type||e.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(e.chart.type," chart is not supported.")),e.yaxis[0].reversed=!1),e}}]),t}(),H=function(){function t(){a(this,t)}return h(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRangeBar=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=w.extend({},t),e.initialSeries=w.clone(t.series),e.lastXAxis=w.clone(e.initialConfig.xaxis),e.lastYAxis=w.clone(e.initialConfig.yaxis),e}}]),t}(),j=function(){function t(e){a(this,t),this.opts=e}return h(t,[{key:"init",value:function(){var t=new V(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new H).init(t)}}}]),t}(),W=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new A(this.ctx)}return h(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new F(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new F(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&void 0!==t[this.activeSeriesIndex].data[0]&&null!==t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,a=this.w.globals,s="boxPlot"===i.chart.type||"boxPlot"===i.series[e].type,n=0;n<t[e].data.length;n++)if(void 0!==t[e].data[n][1]&&(Array.isArray(t[e].data[n][1])&&4===t[e].data[n][1].length&&!s?this.twoDSeries.push(w.parseNumber(t[e].data[n][1][3])):t[e].data[n].length>=5?this.twoDSeries.push(w.parseNumber(t[e].data[n][4])):this.twoDSeries.push(w.parseNumber(t[e].data[n][1])),a.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var r=new Date(t[e].data[n][0]);r=new Date(r).getTime(),this.twoDSeriesX.push(r)}else this.twoDSeriesX.push(t[e].data[n][0]);for(var o=0;o<t[e].data.length;o++)void 0!==t[e].data[o][2]&&(this.threeDSeries.push(t[e].data[o][2]),a.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,a=this.w.globals,s=new Y(this.ctx),n=e;a.collapsedSeriesIndices.indexOf(e)>-1&&(n=this.activeSeriesIndex);for(var r=0;r<t[e].data.length;r++)void 0!==t[e].data[r].y&&(Array.isArray(t[e].data[r].y)?this.twoDSeries.push(w.parseNumber(t[e].data[r].y[t[e].data[r].y.length-1])):this.twoDSeries.push(w.parseNumber(t[e].data[r].y))),void 0!==t[e].data[r].goals&&Array.isArray(t[e].data[r].goals)?(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[r].goals)):(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var o=0;o<t[n].data.length;o++){var l="string"==typeof t[n].data[o].x,h=Array.isArray(t[n].data[o].x),c=!h&&!!s.isValidDate(t[n].data[o].x.toString());if(l||c)if(l||i.xaxis.convertedCatToNumeric){var f=a.isBarHorizontal&&a.isRangeData;"datetime"!==i.xaxis.type||f?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[n].data[o].x)):this.twoDSeriesX.push(s.parseDate(t[n].data[o].x))}else"datetime"===i.xaxis.type?this.twoDSeriesX.push(s.parseDate(t[n].data[o].x.toString())):(a.dataFormatXNumeric=!0,a.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[n].data[o].x)));else h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[n].data[o].x)):(a.isXNumeric=!0,a.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[n].data[o].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var g=0;g<t[e].data.length;g++)this.threeDSeries.push(t[e].data[g].z);a.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(a=this.handleRangeDataFormat("xy",t,e)),i.seriesRangeStart.push(a.start),i.seriesRangeEnd.push(a.end),i.seriesRangeBar.push(a.rangeUniques),i.seriesRangeBar.forEach((function(t,e){t&&t.forEach((function(t,e){t.y.forEach((function(e,i){for(var a=0;a<t.y.length;a++)if(i!==a){var s=e.y1,n=e.y2,r=t.y[a].y1;s<=t.y[a].y2&&r<=n&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[a].rangeName)<0&&t.overlaps.push(t.y[a].rangeName))}}))}))})),a}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(a=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=a.o,i.seriesCandleH[e]=a.h,i.seriesCandleM[e]=a.m,i.seriesCandleL[e]=a.l,i.seriesCandleC[e]=a.c,a}},{key:"handleRangeDataFormat",value:function(t,e,i){var a=[],s=[],n=e[i].data.filter((function(t,e,i){return e===i.findIndex((function(e){return e.x===t.x}))})).map((function(t,e){return{x:t.x,overlaps:[],y:[]}})),r="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",o=new F(this.ctx).getActiveConfigSeriesIndex();if("array"===t){if(2!==e[o].data[0][1].length)throw new Error(r);for(var l=0;l<e[i].data.length;l++)a.push(e[i].data[l][1][0]),s.push(e[i].data[l][1][1])}else if("xy"===t){if(2!==e[o].data[0].y.length)throw new Error(r);for(var h=function(t){var r=w.randomId(),o=e[i].data[t].x,l={y1:e[i].data[t].y[0],y2:e[i].data[t].y[1],rangeName:r};e[i].data[t].rangeName=r;var h=n.findIndex((function(t){return t.x===o}));n[h].y.push(l),a.push(l.y1),s.push(l.y2)},c=0;c<e[i].data.length;c++)h(c)}return{start:a,end:s,rangeUniques:n}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var a=this.w,s="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[i].type,n=[],r=[],o=[],l=[],h=[];if("array"===t)if(s&&6===e[i].data[0].length||!s&&5===e[i].data[0].length)for(var c=0;c<e[i].data.length;c++)n.push(e[i].data[c][1]),r.push(e[i].data[c][2]),s?(o.push(e[i].data[c][3]),l.push(e[i].data[c][4]),h.push(e[i].data[c][5])):(l.push(e[i].data[c][3]),h.push(e[i].data[c][4]));else for(var f=0;f<e[i].data.length;f++)Array.isArray(e[i].data[f][1])&&(n.push(e[i].data[f][1][0]),r.push(e[i].data[f][1][1]),s?(o.push(e[i].data[f][1][2]),l.push(e[i].data[f][1][3]),h.push(e[i].data[f][1][4])):(l.push(e[i].data[f][1][2]),h.push(e[i].data[f][1][3])));else if("xy"===t)for(var g=0;g<e[i].data.length;g++)Array.isArray(e[i].data[g].y)&&(n.push(e[i].data[g].y[0]),r.push(e[i].data[g].y[1]),s?(o.push(e[i].data[g].y[2]),l.push(e[i].data[g].y[3]),h.push(e[i].data[g].y[4])):(l.push(e[i].data[g].y[2]),h.push(e[i].data[g].y[3])));return{o:n,h:r,m:o,l:l,c:h}}},{key:"parseDataAxisCharts",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,a=this.w.config,s=this.w.globals,n=new Y(i),r=a.labels.length>0?a.labels.slice():a.xaxis.categories.slice();s.isRangeBar="rangeBar"===a.chart.type&&s.isBarHorizontal;for(var o=function(){for(var t=0;t<r.length;t++)if("string"==typeof r[t]){if(!n.isValidDate(r[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(n.parseDate(r[t]))}else e.twoDSeriesX.push(r[t])},l=0;l<t.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==a.chart.type&&"rangeArea"!==a.chart.type&&"rangeBar"!==t[l].type&&"rangeArea"!==t[l].type||(s.isRangeData=!0,this.handleRangeData(t,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,l):this.isFormatXY()&&this.handleFormatXY(t,l),"candlestick"!==a.chart.type&&"candlestick"!==t[l].type&&"boxPlot"!==a.chart.type&&"boxPlot"!==t[l].type||this.handleCandleStickBoxData(t,l),s.series.push(this.twoDSeries),s.labels.push(this.twoDSeriesX),s.seriesX.push(this.twoDSeriesX),s.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(s.isXNumeric=!0);else{"datetime"===a.xaxis.type?(s.isXNumeric=!0,o(),s.seriesX.push(this.twoDSeriesX)):"numeric"===a.xaxis.type&&(s.isXNumeric=!0,r.length>0&&(this.twoDSeriesX=r,s.seriesX.push(this.twoDSeriesX))),s.labels.push(this.twoDSeriesX);var h=t[l].data.map((function(t){return w.parseNumber(t)}));s.series.push(h)}s.seriesZ.push(this.threeDSeries),void 0!==t[l].name?s.seriesNames.push(t[l].name):s.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==t[l].color?s.seriesColors.push(t[l].color):s.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var a=0;a<e.series.length;a++)void 0===e.seriesNames[a]&&e.seriesNames.push("series-"+(a+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRangeBar.length&&(i.seriesRangeBar.map((function(t){t.forEach((function(t){i.labels.indexOf(t.x)<0&&t.x&&i.labels.push(t.x)}))})),i.labels=i.labels.filter((function(t,e,i){return i.indexOf(t)===e}))),e.xaxis.convertedCatToNumeric&&(new G(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,a=[];if(e.axisCharts){if(e.series.length>0)if(this.isFormatXY())for(var s=i.series.map((function(t,e){return t.data.filter((function(t,e,i){return i.findIndex((function(e){return e.x===t.x}))===e}))})),n=s.reduce((function(t,e,i,a){return a[t].length>e.length?t:i}),0),r=0;r<s[n].length;r++)a.push(r+1);else for(var o=0;o<e.series[e.maxValsInArrayIndex].length;o++)a.push(o+1);e.seriesX=[];for(var l=0;l<t.length;l++)e.seriesX.push(a);e.isXNumeric=!0}if(0===a.length){a=e.axisCharts?[]:e.series.map((function(t,e){return e+1}));for(var h=0;h<t.length;h++)e.seriesX.push(a)}e.labels=a,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=a.map((function(t){return i.xaxis.labels.formatter(t)}))),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,a=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),a.axisCharts?this.parseDataAxisCharts(t):this.parseDataNonAxisCharts(t),this.coreUtils.getLargestSeries(),"bar"===i.chart.type&&i.chart.stacked){var s=new F(this.ctx);a.series=s.setNullSeriesToZeroValues(a.series)}this.coreUtils.getSeriesTotals(),a.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),a.dataFormatXNumeric||a.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var n=this.coreUtils.getCategoryLabels(a.labels),r=0;r<n.length;r++)if(Array.isArray(n[r])){a.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this,e=this.w;e.globals.ignoreYAxisIndexes=e.globals.collapsedSeries.map((function(i,a){if(t.w.globals.isMultipleYAxis&&!e.config.chart.stacked)return i.index}))}}]),t}(),U=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return h(t,[{key:"xLabelFormat",value:function(t,e,i,a){var s=this.w;if("datetime"===s.config.xaxis.type&&void 0===s.config.xaxis.labels.formatter&&void 0===s.config.tooltip.x.formatter){var n=new Y(this.ctx);return n.formatDate(n.getDate(e),s.config.tooltip.x.format)}return t(e,i,a)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map((function(t){return t})):t}},{key:"defaultYFormatter",value:function(t,e,i){var a=this.w;return w.isNumber(t)&&(t=0!==a.globals.yValueDecimal?t.toFixed(void 0!==e.decimalsInFloat?e.decimalsInFloat:a.globals.yValueDecimal):a.globals.maxYArr[i]-a.globals.minYArr[i]<5?t.toFixed(1):t.toFixed(0)),t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},void 0!==e.config.xaxis.labels.formatter?e.globals.xLabelFormatter=e.config.xaxis.labels.formatter:e.globals.xLabelFormatter=function(t){if(w.isNumber(t)){if(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type){if(w.isNumber(e.config.xaxis.decimalsInFloat))return t.toFixed(e.config.xaxis.decimalsInFloat);var i=e.globals.maxX-e.globals.minX;return i>0&&i<100?t.toFixed(1):t.toFixed(0)}return e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?t.toFixed(1):t.toFixed(0)}return t},"function"==typeof e.config.tooltip.x.formatter?e.globals.ttKeyFormatter=e.config.tooltip.x.formatter:e.globals.ttKeyFormatter=e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach((function(i,a){void 0!==i.labels.formatter?e.globals.yLabelFormatters[a]=i.labels.formatter:e.globals.yLabelFormatters[a]=function(s){return e.globals.xyCharts?Array.isArray(s)?s.map((function(e){return t.defaultYFormatter(e,i,a)})):t.defaultYFormatter(s,i,a):s}})),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce((function(t,e){return t.length>e.length?t:e}),0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),Z=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"getLabel",value:function(t,e,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",r=this.w,o=void 0===t[a]?"":t[a],l=o,h=r.globals.xLabelFormatter,c=r.config.xaxis.labels.formatter,f=!1,u=o;l=new U(this.ctx).xLabelFormat(h,o,u,{i:a,dateFormatter:new Y(this.ctx).formatDate,w:r}),void 0!==c&&(l=c(o,t[a],{i:a,dateFormatter:new Y(this.ctx).formatDate,w:r}));var d=function(t){var i=null;return e.forEach((function(t){"month"===t.unit?i="year":"day"===t.unit?i="month":"hour"===t.unit?i="day":"minute"===t.unit&&(i="hour")})),i===t};e.length>0?(f=d(e[a].unit),i=e[a].position,l=e[a].value):"datetime"===r.config.xaxis.type&&void 0===c&&(l=""),void 0===l&&(l=""),l=Array.isArray(l)?l:l.toString();var p=new S(this.ctx),y={};y=r.globals.rotateXLabels?p.getTextRects(l,parseInt(n,10),null,"rotate(".concat(r.config.xaxis.labels.rotate," 0 0)"),!1):p.getTextRects(l,parseInt(n,10));var b=!r.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(l)&&(0===l.indexOf("NaN")||0===l.toLowerCase().indexOf("invalid")||l.toLowerCase().indexOf("infinity")>=0||s.indexOf(l)>=0&&b)&&(l=""),{x:i,text:l,textRect:y,isBold:f}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var a=this.w,s=a.config.xaxis.tickAmount;return"dataPoints"===s&&(s=Math.round(a.globals.gridWidth/120)),s>i||t%Math.round(i/(s+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,a,s){var n=this.w;if(0===t&&n.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&n.globals.skipLastTimelinelabel&&(e.text=""),n.config.xaxis.labels.hideOverlappingLabels&&a.length>0){var r=s[s.length-1];e.x<r.textRect.width/(n.globals.rotateXLabels?Math.abs(n.config.xaxis.labels.rotate)/12:1.01)+r.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=new A(this.ctx);return!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&i.isSeriesNull(t)&&-1===e.globals.collapsedSeriesIndices.indexOf(t)}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,a,s,n,r){var o=this.w,l=new S(this.ctx),h=o.globals.translateY;if(a.show&&e>0){!0===o.config.yaxis[s].opposite&&(t+=a.width);for(var c=e;c>=0;c--){var f=h+e/10+o.config.yaxis[s].labels.offsetY-1;o.globals.isBarHorizontal&&(f=n*c),"heatmap"===o.config.chart.type&&(f+=n/2);var g=l.drawLine(t+i.offsetX-a.width+a.offsetX,f+a.offsetY,t+i.offsetX+a.offsetX,f+a.offsetY,a.color);r.add(g),h+=n}}}}]),t}(),$=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"scaleSvgNode",value:function(t,e){var i=parseFloat(t.getAttributeNS(null,"width")),a=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",i*e),t.setAttributeNS(null,"height",a*e),t.setAttributeNS(null,"viewBox","0 0 "+i+" "+a)}},{key:"fixSvgStringForIe11",value:function(t){if(!w.isIE11())return t.replace(/&nbsp;/g,"&#160;");var e=0,i=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(t){return 2==++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':t}));return(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(t){var e=this.w.globals.dom.Paper.svg();if(1!==t){var i=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(i,t),e=(new XMLSerializer).serializeToString(i)}return this.fixSvgStringForIe11(e)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(a,(function(t){t.setAttribute("width",0)})),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)}},{key:"dataURI",value:function(t){var e=this;return new Promise((function(i){var a=e.w,s=t?t.scale||t.width/a.globals.svgWidth:1;e.cleanup();var n=document.createElement("canvas");n.width=a.globals.svgWidth*s,n.height=parseInt(a.globals.dom.elWrap.style.height,10)*s;var r="transparent"===a.config.chart.background?"#fff":a.config.chart.background,o=n.getContext("2d");o.fillStyle=r,o.fillRect(0,0,n.width*s,n.height*s);var l=e.getSvgString(s);if(window.canvg&&w.isIE11()){var h=window.canvg.Canvg.fromString(o,l,{ignoreClear:!0,ignoreDimensions:!0});h.start();var c=n.msToBlob();h.stop(),i({blob:c})}else{var f="data:image/svg+xml,"+encodeURIComponent(l),g=new Image;g.crossOrigin="anonymous",g.onload=function(){if(o.drawImage(g,0,0),n.msToBlob){var t=n.msToBlob();i({blob:t})}else{var e=n.toDataURL("image/png");i({imgURI:e})}},g.src=f}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then((function(e){var i=e.imgURI,a=e.blob;a?navigator.msSaveOrOpenBlob(a,t.w.globals.chartID+".png"):t.triggerDownload(i,t.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,a=t.columnDelimiter,s=t.lineDelimiter,n=void 0===s?"\n":s,r=this.w,o=[],l=[],h="",c=new W(this.ctx),f=new Z(this.ctx),g=function(t){var i="";if(r.globals.axisCharts){if("category"===r.config.xaxis.type||r.config.xaxis.convertedCatToNumeric)if(r.globals.isBarHorizontal){var s=r.globals.yLabelFormatters[0],n=new F(e.ctx).getActiveConfigSeriesIndex();i=s(r.globals.labels[t],{seriesIndex:n,dataPointIndex:t,w:r})}else i=f.getLabel(r.globals.labels,r.globals.timescaleLabels,0,t).text;"datetime"===r.config.xaxis.type&&(r.config.xaxis.categories.length?i=r.config.xaxis.categories[t]:r.config.labels.length&&(i=r.config.labels[t]))}else i=r.config.labels[t];return Array.isArray(i)&&(i=i.join(" ")),w.isNumber(i)?i:i.split(a).join("")};o.push(r.config.chart.toolbar.export.csv.headerCategory),i.map((function(t,e){var i=t.name?t.name:"series-".concat(e);r.globals.axisCharts&&o.push(i.split(a).join("")?i.split(a).join(""):"series-".concat(e))})),r.globals.axisCharts||(o.push(r.config.chart.toolbar.export.csv.headerValue),l.push(o.join(a))),i.map((function(t,e){r.globals.axisCharts?function(t,e){if(o.length&&0===e&&l.push(o.join(a)),t.data&&t.data.length)for(var s=0;s<t.data.length;s++){o=[];var n=g(s);if(n||(c.isFormatXY()?n=i[e].data[s].x:c.isFormat2DArray()&&(n=i[e].data[s]?i[e].data[s][0]:"")),0===e){o.push((f=n,"datetime"===r.config.xaxis.type&&String(f).length>=10?r.config.chart.toolbar.export.csv.dateFormatter(n):w.isNumber(n)?n:n.split(a).join("")));for(var h=0;h<r.globals.series.length;h++)o.push(r.globals.series[h][s])}("candlestick"===r.config.chart.type||t.type&&"candlestick"===t.type)&&(o.pop(),o.push(r.globals.seriesCandleO[e][s]),o.push(r.globals.seriesCandleH[e][s]),o.push(r.globals.seriesCandleL[e][s]),o.push(r.globals.seriesCandleC[e][s])),("boxPlot"===r.config.chart.type||t.type&&"boxPlot"===t.type)&&(o.pop(),o.push(r.globals.seriesCandleO[e][s]),o.push(r.globals.seriesCandleH[e][s]),o.push(r.globals.seriesCandleM[e][s]),o.push(r.globals.seriesCandleL[e][s]),o.push(r.globals.seriesCandleC[e][s])),"rangeBar"===r.config.chart.type&&(o.pop(),o.push(r.globals.seriesRangeStart[e][s]),o.push(r.globals.seriesRangeEnd[e][s])),o.length&&l.push(o.join(a))}var f}(t,e):((o=[]).push(r.globals.labels[e].split(a).join("")),o.push(r.globals.series[e]),l.push(o.join(a)))})),h+=l.join(n),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+h),r.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var a=document.createElement("a");a.href=t,a.download=(e||this.w.globals.chartID)+i,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),t}(),J=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.axesUtils=new Z(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===i.config.xaxis.position?this.offY=0:this.offY=i.globals.gridHeight+1,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return h(t,[{key:"drawXaxis",value:function(){var t,e=this,i=this.w,a=new S(this.ctx),s=a.group({class:"apexcharts-xaxis",transform:"translate(".concat(i.config.xaxis.offsetX,", ").concat(i.config.xaxis.offsetY,")")}),n=a.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(i.globals.translateXAxisX,", ").concat(i.globals.translateXAxisY,")")});s.add(n);for(var r=i.globals.padHorizontal,o=[],l=0;l<this.xaxisLabels.length;l++)o.push(this.xaxisLabels[l]);var h=o.length;if(i.globals.isXNumeric){var c=h>1?h-1:h;t=i.globals.gridWidth/c,r=r+t/2+i.config.xaxis.labels.offsetX}else t=i.globals.gridWidth/o.length,r=r+t+i.config.xaxis.labels.offsetX;for(var f=function(s){var l=r-t/2+i.config.xaxis.labels.offsetX;0===s&&1===h&&t/2===r&&1===i.globals.dataPoints&&(l=i.globals.gridWidth/2);var c=e.axesUtils.getLabel(o,i.globals.timescaleLabels,l,s,e.drawnLabels,e.xaxisFontSize),f=28;if(i.globals.rotateXLabels&&(f=22),(c=void 0!==i.config.xaxis.tickAmount&&"dataPoints"!==i.config.xaxis.tickAmount&&"datetime"!==i.config.xaxis.type?e.axesUtils.checkLabelBasedOnTickamount(s,c,h):e.axesUtils.checkForOverflowingLabels(s,c,h,e.drawnLabels,e.drawnLabelsRects)).text&&i.globals.xaxisLabelsCount++,i.config.xaxis.labels.show){var g=a.drawText({x:c.x,y:e.offY+i.config.xaxis.labels.offsetY+f-("top"===i.config.xaxis.position?i.globals.xAxisHeight+i.config.xaxis.axisTicks.height-2:0),text:c.text,textAnchor:"middle",fontWeight:c.isBold?600:i.config.xaxis.labels.style.fontWeight,fontSize:e.xaxisFontSize,fontFamily:e.xaxisFontFamily,foreColor:Array.isArray(e.xaxisForeColors)?i.config.xaxis.convertedCatToNumeric?e.xaxisForeColors[i.globals.minX+s-1]:e.xaxisForeColors[s]:e.xaxisForeColors,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+i.config.xaxis.labels.style.cssClass});n.add(g);var u=document.createElementNS(i.globals.SVGNS,"title");u.textContent=Array.isArray(c.text)?c.text.join(" "):c.text,g.node.appendChild(u),""!==c.text&&(e.drawnLabels.push(c.text),e.drawnLabelsRects.push(c))}r+=t},g=0;g<=h-1;g++)f(g);if(void 0!==i.config.xaxis.title.text){var u=a.group({class:"apexcharts-xaxis-title"}),d=a.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+i.globals.xAxisLabelsHeight+i.config.xaxis.title.offsetY,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+i.config.xaxis.title.style.cssClass});u.add(d),s.add(u)}if(i.config.xaxis.axisBorder.show){var p=i.globals.barPadForNumericAxis,y=a.drawLine(i.globals.padHorizontal+i.config.xaxis.axisBorder.offsetX-p,this.offY,this.xaxisBorderWidth+p,this.offY,i.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);s.add(y)}return s}},{key:"drawXaxisInversed",value:function(t){var e,i,a=this,s=this.w,n=new S(this.ctx),r=s.config.yaxis[0].opposite?s.globals.translateYAxisX[t]:0,o=n.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),l=n.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+r+", 0)"});o.add(l);var h=[];if(s.config.yaxis[t].show)for(var c=0;c<this.xaxisLabels.length;c++)h.push(this.xaxisLabels[c]);e=s.globals.gridHeight/h.length,i=-e/2.2;var f=s.globals.yLabelFormatters[0],g=s.config.yaxis[0].labels;if(g.show)for(var u=function(r){var o=void 0===h[r]?"":h[r];o=f(o,{seriesIndex:t,dataPointIndex:r,w:s});var c=a.axesUtils.getYAxisForeColor(g.style.colors,t),u=0;Array.isArray(o)&&(u=o.length/2*parseInt(g.style.fontSize,10));var d=n.drawText({x:g.offsetX-15,y:i+e+g.offsetY-u,text:o,textAnchor:a.yaxis.opposite?"start":"end",foreColor:Array.isArray(c)?c[r]:c,fontSize:g.style.fontSize,fontFamily:g.style.fontFamily,fontWeight:g.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+g.style.cssClass});l.add(d);var p=document.createElementNS(s.globals.SVGNS,"title");if(p.textContent=Array.isArray(o)?o.join(" "):o,d.node.appendChild(p),0!==s.config.yaxis[t].labels.rotate){var y=n.rotateAroundCenter(d.node);d.node.setAttribute("transform","rotate(".concat(s.config.yaxis[t].labels.rotate," 0 ").concat(y.y,")"))}i+=e},d=0;d<=h.length-1;d++)u(d);if(void 0!==s.config.yaxis[0].title.text){var p=n.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+r+", 0)"}),y=n.drawText({x:0,y:s.globals.gridHeight/2,text:s.config.yaxis[0].title.text,textAnchor:"middle",foreColor:s.config.yaxis[0].title.style.color,fontSize:s.config.yaxis[0].title.style.fontSize,fontWeight:s.config.yaxis[0].title.style.fontWeight,fontFamily:s.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+s.config.yaxis[0].title.style.cssClass});p.add(y),o.add(p)}var b=0;this.isCategoryBarHorizontal&&s.config.yaxis[0].opposite&&(b=s.globals.gridWidth);var v=s.config.xaxis.axisBorder;if(v.show){var m=n.drawLine(s.globals.padHorizontal+v.offsetX+b,1+v.offsetY,s.globals.padHorizontal+v.offsetX+b,s.globals.gridHeight+v.offsetY,v.color,0);o.add(m)}return s.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(b,h.length,s.config.yaxis[0].axisBorder,s.config.yaxis[0].axisTicks,0,e,o),o}},{key:"drawXaxisTicks",value:function(t,e){var i=this.w,a=t;if(!(t<0||t-2>i.globals.gridWidth)){var s=this.offY+i.config.xaxis.axisTicks.offsetY,n=s+i.config.xaxis.axisTicks.height;if("top"===i.config.xaxis.position&&(n=s-i.config.xaxis.axisTicks.height),i.config.xaxis.axisTicks.show){var r=new S(this.ctx).drawLine(t+i.config.xaxis.axisTicks.offsetX,s+i.config.xaxis.offsetY,a+i.config.xaxis.axisTicks.offsetX,n+i.config.xaxis.offsetY,i.config.xaxis.axisTicks.color);e.add(r),r.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,a=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var s=0;s<i;s++)a=this.xaxisLabels[s].position,e.push(a);else for(var n=i,r=0;r<n;r++){var o=n;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(o-=1),a+=t.globals.gridWidth/o,e.push(a)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new S(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var r=0;r<a.length;r++){var o=e.rotateAroundCenter(a[r]);o.y=o.y-1,o.x=o.x+1,a[r].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(o.x," ").concat(o.y,")")),a[r].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var l=a[r].childNodes;t.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(i){e.placeTextWithEllipsis(i,i.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))}))}else!function(){for(var i=t.globals.gridWidth/(t.globals.labels.length+1),s=0;s<a.length;s++){var n=a[s].childNodes;t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(n,(function(t){e.placeTextWithEllipsis(t,t.textContent,i)}))}}();if(s.length>0){var h=s[s.length-1].getBBox(),c=s[0].getBBox();h.x<-20&&s[s.length-1].parentNode.removeChild(s[s.length-1]),c.x+c.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&s[0].parentNode.removeChild(s[0]);for(var f=0;f<n.length;f++)e.placeTextWithEllipsis(n[f],n[f].textContent,t.config.yaxis[0].labels.maxWidth-2*parseFloat(t.config.yaxis[0].title.style.fontSize)-20)}}}]),t}(),Q=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new Z(e),this.isRangeBar=i.globals.seriesRangeBar.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return h(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new S(this.ctx);null===t&&(t=i.group({class:"apexcharts-grid"}));var a=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),s=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(s),t.add(a),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new S(this.ctx),a=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var s=0;t.config.stroke.width.forEach((function(t){s=Math.max(s,t)})),a=s}e.dom.elGridRectMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(e.cuid)),e.dom.elForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elForecastMask.setAttribute("id","forecastMask".concat(e.cuid)),e.dom.elNonForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(e.cuid));var n=t.config.chart.type,r=0,o=0;("bar"===n||"rangeBar"===n||"candlestick"===n||"boxPlot"===n||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(r=t.config.grid.padding.left,o=t.config.grid.padding.right,e.barPadForNumericAxis>r&&(r=e.barPadForNumericAxis,o=e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-a/2-r-2,-a/2,e.gridWidth+a+o+r+4,e.gridHeight+a,0,"#fff");var l=t.globals.markers.largestSize+1;e.dom.elGridRectMarker=i.drawRect(2*-l,2*-l,e.gridWidth+4*l,e.gridHeight+4*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var h=e.dom.baseEl.querySelector("defs");h.appendChild(e.dom.elGridRectMask),h.appendChild(e.dom.elForecastMask),h.appendChild(e.dom.elNonForecastMask),h.appendChild(e.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,a=t.y1,s=t.x2,n=t.y2,r=t.xCount,o=t.parent,l=this.w;0===e&&l.globals.skipFirstTimelinelabel||e===r-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type||(l.config.grid.xaxis.lines.show&&this._drawGridLine({x1:i,y1:a,x2:s,y2:n,parent:o}),new J(this.ctx).drawXaxisTicks(i,this.elg))}},{key:"_drawGridLine",value:function(t){var e=t.x1,i=t.y1,a=t.x2,s=t.y2,n=t.parent,r=this.w,o=n.node.classList.contains("apexcharts-gridlines-horizontal"),l=r.config.grid.strokeDashArray,h=r.globals.barPadForNumericAxis,c=new S(this).drawLine(e-(o?h:0),i,a+(o?h:0),s,r.config.grid.borderColor,l);c.node.classList.add("apexcharts-gridline"),n.add(c)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,a=t.y1,s=t.x2,n=t.y2,r=t.type,o=this.w,l=new S(this.ctx),h=o.globals.barPadForNumericAxis;if("column"!==r||"datetime"!==o.config.xaxis.type){var c=o.config.grid[r].colors[e],f=l.drawRect(i-("row"===r?h:0),a,s+("row"===r?2*h:0),n,0,c,o.config.grid[r].opacity);this.elg.add(f),f.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),f.node.classList.add("apexcharts-grid-".concat(r))}}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,a=t.tickAmount,s=this.w;if(s.config.grid.xaxis.lines.show||s.config.xaxis.axisTicks.show){var n,r=s.globals.padHorizontal,o=s.globals.gridHeight;s.globals.timescaleLabels.length?function(t){for(var a=t.xC,s=t.x1,n=t.y1,r=t.x2,o=t.y2,l=0;l<a;l++)s=e.xaxisLabels[l].position,r=e.xaxisLabels[l].position,e._drawGridLines({i:l,x1:s,y1:n,x2:r,y2:o,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:r,y1:0,x2:n,y2:o}):(s.globals.isXNumeric&&(i=s.globals.xAxisScale.result.length),s.config.xaxis.convertedCatToNumeric&&(i=s.globals.xaxisLabelsCount),function(t){var a=t.xC,n=t.x1,r=t.y1,o=t.x2,l=t.y2;if(void 0!==s.config.xaxis.tickAmount&&"dataPoints"!==s.config.xaxis.tickAmount)s.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(t,a){var s=t.getBBox();e._drawGridLines({i:a,x1:s.x+s.width/2,y1:r,x2:s.x+s.width/2,y2:l,xCount:i,parent:e.elgridLinesV})}));else for(var h=0;h<a+(s.globals.isXNumeric?0:1);h++)0===h&&1===a&&1===s.globals.dataPoints&&(o=n=s.globals.gridWidth/2),e._drawGridLines({i:h,x1:n,y1:r,x2:o,y2:l,xCount:i,parent:e.elgridLinesV}),o=n+=s.globals.gridWidth/(s.globals.isXNumeric?a-1:a)}({xC:i,x1:r,y1:0,x2:n,y2:o}))}if(s.config.grid.yaxis.lines.show){var l=0,h=0,c=s.globals.gridWidth,f=a+1;this.isRangeBar&&(f=s.globals.labels.length);for(var g=0;g<f+(this.isRangeBar?1:0);g++)this._drawGridLine({x1:0,y1:l,x2:c,y2:h,parent:this.elgridLinesH}),h=l+=s.globals.gridHeight/(this.isRangeBar?f:a)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var a,s=i.globals.padHorizontal,n=i.globals.gridHeight,r=0;r<e+1;r++)i.config.grid.xaxis.lines.show&&this._drawGridLine({x1:s,y1:0,x2:a,y2:n,parent:this.elgridLinesV}),new J(this.ctx).drawXaxisTicks(s,this.elg),a=s=s+i.globals.gridWidth/e+.3;if(i.config.grid.yaxis.lines.show)for(var o=0,l=0,h=i.globals.gridWidth,c=0;c<i.globals.dataPoints+1;c++)this._drawGridLine({x1:0,y1:o,x2:h,y2:l,parent:this.elgridLinesH}),l=o+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new S(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var i,a=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,s=0;s<t.globals.series.length&&(void 0!==t.globals.yAxisScale[s]&&(a=t.globals.yAxisScale[s].result.length-1),!(a>2));s++);return!t.globals.isBarHorizontal||this.isRangeBar?(i=this.xaxisLabels.length,this.isRangeBar&&(a=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(i=t.config.xaxis.tickAmount)),this._drawXYLines({xCount:i,tickAmount:a})):(i=a,a=t.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:a})),this.drawGridBands(i,a),{el:this.elg,xAxisTickWidth:t.globals.gridWidth/i}}},{key:"drawGridBands",value:function(t,e){var i=this.w;if(void 0!==i.config.grid.row.colors&&i.config.grid.row.colors.length>0)for(var a=0,s=i.globals.gridHeight/e,n=i.globals.gridWidth,r=0,o=0;r<e;r++,o++)o>=i.config.grid.row.colors.length&&(o=0),this._drawGridBandRect({c:o,x1:0,y1:a,x2:n,y2:s,type:"row"}),a+=i.globals.gridHeight/e;if(void 0!==i.config.grid.column.colors&&i.config.grid.column.colors.length>0)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?t:t-1,h=i.globals.padHorizontal,c=i.globals.padHorizontal+i.globals.gridWidth/l,f=i.globals.gridHeight,g=0,u=0;g<t;g++,u++)u>=i.config.grid.column.colors.length&&(u=0),this._drawGridBandRect({c:u,x1:h,y1:0,x2:c,y2:f,type:"column"}),h+=i.globals.gridWidth/l}}]),t}(),q=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"niceScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,n=this.w,r=Math.abs(e-t);if("dataPoints"===(i=this._adjustTicksForSmallRange(i,a,r))&&(i=n.globals.dataPoints-1),t===Number.MIN_VALUE&&0===e||!w.isNumber(t)&&!w.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)return t=0,e=i,this.linearScale(t,e,i);t>e?(console.warn("axis.min cannot be greater than axis.max"),e=t+.1):t===e&&(t=0===t?0:t-.5,e=0===e?2:e+.5);var o=[];r<1&&s&&("candlestick"===n.config.chart.type||"candlestick"===n.config.series[a].type||"boxPlot"===n.config.chart.type||"boxPlot"===n.config.series[a].type||n.globals.isRangeData)&&(e*=1.01);var l=i+1;l<2?l=2:l>2&&(l-=2);var h=r/l,c=Math.floor(w.log10(h)),g=Math.pow(10,c),u=Math.round(h/g);u<1&&(u=1);var f=u*g,p=f*Math.floor(t/f),b=f*Math.ceil(e/f),d=p;if(s&&r>2){for(;o.push(d),!((d+=f)>b););return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}var y=t;(o=[]).push(y);for(var v=Math.abs(e-t)/i,m=0;m<=i;m++)y+=v,o.push(y);return o[o.length-2]>=e&&o.pop(),{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3?arguments[3]:void 0,s=Math.abs(e-t);"dataPoints"===(i=this._adjustTicksForSmallRange(i,a,s))&&(i=this.w.globals.dataPoints-1);var n=s/i;i===Number.MAX_VALUE&&(i=10,n=1);for(var r=[],o=t;i>=0;)r.push(o),o+=n,i-=1;return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(t,e,i){for(var a=[],s=Math.ceil(Math.log(e)/Math.log(i))+1,n=0;n<s;n++)a.push(Math.pow(i,n));return 0===t&&a.unshift(t),{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var a=t;if(void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount){var s=this.w.config.yaxis[e].labels.formatter(1);w.isNumber(Number(s))&&!w.isFloat(s)&&(a=Math.ceil(i))}return a<t?a:t}},{key:"setYScaleForIndex",value:function(t,e,i){var a=this.w.globals,s=this.w.config,n=a.isBarHorizontal?s.xaxis:s.yaxis[t];void 0===a.yAxisScale[t]&&(a.yAxisScale[t]=[]);var r=Math.abs(i-e);if(n.logarithmic&&r<=5&&(a.invalidLogScale=!0),n.logarithmic&&r>5)a.allSeriesCollapsed=!1,a.yAxisScale[t]=this.logarithmicScale(e,i,n.logBase);else if(i!==-Number.MAX_VALUE&&w.isNumber(i))if(a.allSeriesCollapsed=!1,void 0===n.min&&void 0===n.max||n.forceNiceScale){var o=void 0===s.yaxis[t].max&&void 0===s.yaxis[t].min||s.yaxis[t].forceNiceScale;a.yAxisScale[t]=this.niceScale(e,i,n.tickAmount?n.tickAmount:r<5&&r>1?r+1:5,t,o)}else a.yAxisScale[t]=this.linearScale(e,i,n.tickAmount,t);else a.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,e){var i=this.w,a=i.globals,s=i.config.xaxis,n=Math.abs(e-t);return e!==-Number.MAX_VALUE&&w.isNumber(e)?a.xAxisScale=this.linearScale(t,e,s.tickAmount?s.tickAmount:n<5&&n>1?n+1:5,0):a.xAxisScale=this.linearScale(0,5,5),a.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this,e=this.w.globals,i=this.w.config,a=e.minYArr.concat([]),s=e.maxYArr.concat([]),n=[];i.yaxis.forEach((function(e,r){var o=r;i.series.forEach((function(t,i){t.name===e.seriesName&&(o=i,r!==i?n.push({index:i,similarIndex:r,alreadyExists:!0}):n.push({index:i}))}));var l=a[o],h=s[o];t.setYScaleForIndex(r,l,h)})),this.sameScaleInMultipleAxes(a,s,n)}},{key:"sameScaleInMultipleAxes",value:function(t,e,i){var a=this,s=this.w.config,n=this.w.globals,r=[];i.forEach((function(t){t.alreadyExists&&(void 0===r[t.index]&&(r[t.index]=[]),r[t.index].push(t.index),r[t.index].push(t.similarIndex))})),n.yAxisSameScaleIndices=r,r.forEach((function(t,e){r.forEach((function(i,a){var s,n;e!==a&&(s=t,n=i,s.filter((function(t){return-1!==n.indexOf(t)}))).length>0&&(r[e]=r[e].concat(r[a]))}))}));var o=r.map((function(t){return t.filter((function(e,i){return t.indexOf(e)===i}))})).map((function(t){return t.sort()}));r=r.filter((function(t){return!!t}));var l=o.slice(),h=l.map((function(t){return JSON.stringify(t)}));l=l.filter((function(t,e){return h.indexOf(JSON.stringify(t))===e}));var c=[],f=[];t.forEach((function(t,i){l.forEach((function(a,s){a.indexOf(i)>-1&&(void 0===c[s]&&(c[s]=[],f[s]=[]),c[s].push({key:i,value:t}),f[s].push({key:i,value:e[i]}))}))}));var g=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),u=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);c.forEach((function(t,e){t.forEach((function(t,i){g[e]=Math.min(t.value,g[e])}))})),f.forEach((function(t,e){t.forEach((function(t,i){u[e]=Math.max(t.value,u[e])}))})),t.forEach((function(t,e){f.forEach((function(t,i){var r=g[i],o=u[i];s.chart.stacked&&(o=0,t.forEach((function(t,e){t.value!==-Number.MAX_VALUE&&(o+=t.value),r!==Number.MIN_VALUE&&(r+=c[i][e].value)}))),t.forEach((function(i,l){t[l].key===e&&(void 0!==s.yaxis[e].min&&(r="function"==typeof s.yaxis[e].min?s.yaxis[e].min(n.minY):s.yaxis[e].min),void 0!==s.yaxis[e].max&&(o="function"==typeof s.yaxis[e].max?s.yaxis[e].max(n.maxY):s.yaxis[e].max),a.setYScaleForIndex(e,r,o))}))}))}))}},{key:"autoScaleY",value:function(t,e,i){t||(t=this);var a=t.w;if(a.globals.isMultipleYAxis||a.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),e;var s=a.globals.seriesX[0],n=a.config.chart.stacked;return e.forEach((function(t,r){for(var o=0,l=0;l<s.length;l++)if(s[l]>=i.xaxis.min){o=l;break}var h,c,f=a.globals.minYArr[r],g=a.globals.maxYArr[r],u=a.globals.stackedSeriesTotals;a.globals.series.forEach((function(r,l){var d=r[o];n?(d=u[o],h=c=d,u.forEach((function(t,e){s[e]<=i.xaxis.max&&s[e]>=i.xaxis.min&&(t>c&&null!==t&&(c=t),r[e]<h&&null!==r[e]&&(h=r[e]))}))):(h=c=d,r.forEach((function(t,e){if(s[e]<=i.xaxis.max&&s[e]>=i.xaxis.min){var n=t,r=t;a.globals.series.forEach((function(i,a){null!==t&&(n=Math.min(i[e],n),r=Math.max(i[e],r))})),r>c&&null!==r&&(c=r),n<h&&null!==n&&(h=n)}}))),void 0===h&&void 0===c&&(h=f,c=g),(c*=c<0?.9:1.1)<0&&c<g&&(c=g),(h*=h<0?1.1:.9)<0&&h>f&&(h=f),e.length>1?(e[l].min=void 0===t.min?h:t.min,e[l].max=void 0===t.max?c:t.max):(e[0].min=void 0===t.min?h:t.min,e[0].max=void 0===t.max?c:t.max)}))})),e}}]),t}(),K=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.scales=new q(e)}return h(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.w.config,n=this.w.globals,r=-Number.MAX_VALUE,o=Number.MIN_VALUE;null===a&&(a=t+1);var l=n.series,h=l,c=l;"candlestick"===s.chart.type?(h=n.seriesCandleL,c=n.seriesCandleH):"boxPlot"===s.chart.type?(h=n.seriesCandleO,c=n.seriesCandleC):n.isRangeData&&(h=n.seriesRangeStart,c=n.seriesRangeEnd);for(var f=t;f<a;f++){n.dataPoints=Math.max(n.dataPoints,l[f].length),n.categoryLabels.length&&(n.dataPoints=n.categoryLabels.filter((function(t){return void 0!==t})).length);for(var g=0;g<n.series[f].length;g++){var u=l[f][g];null!==u&&w.isNumber(u)?(void 0!==c[f][g]&&(r=Math.max(r,c[f][g]),e=Math.min(e,c[f][g])),void 0!==h[f][g]&&(e=Math.min(e,h[f][g]),i=Math.max(i,h[f][g])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==n.seriesCandleC[f][g]&&(r=Math.max(r,n.seriesCandleO[f][g]),r=Math.max(r,n.seriesCandleH[f][g]),r=Math.max(r,n.seriesCandleL[f][g]),r=Math.max(r,n.seriesCandleC[f][g]),"boxPlot"===this.w.config.chart.type&&(r=Math.max(r,n.seriesCandleM[f][g]))),!s.series[f].type||"candlestick"===s.series[f].type&&"boxPlot"===s.series[f].type||(r=Math.max(r,n.series[f][g]),e=Math.min(e,n.series[f][g])),i=r),n.seriesGoals[f]&&n.seriesGoals[f][g]&&Array.isArray(n.seriesGoals[f][g])&&n.seriesGoals[f][g].forEach((function(t){o!==Number.MIN_VALUE&&(o=Math.min(o,t.value),e=o),r=Math.max(r,t.value),i=r})),w.isFloat(u)&&(u=w.noExponents(u),n.yValueDecimal=Math.max(n.yValueDecimal,u.toString().split(".")[1].length)),o>h[f][g]&&h[f][g]<0&&(o=h[f][g])):n.hasNullValues=!0}}return"rangeBar"===s.chart.type&&n.seriesRangeStart.length&&n.isBarHorizontal&&(o=e),"bar"===s.chart.type&&(o<0&&r<0&&(r=0),o===Number.MIN_VALUE&&(o=0)),{minY:o,maxY:r,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i=Number.MAX_VALUE;if(t.isMultipleYAxis)for(var a=0;a<t.series.length;a++){var s=this.getMinYMaxY(a,i,null,a+1);t.minYArr.push(s.minY),t.maxYArr.push(s.maxY),i=s.lowestY}var n=this.getMinYMaxY(0,i,null,t.series.length);if(t.minY=n.minY,t.maxY=n.maxY,i=n.lowestY,e.chart.stacked&&this._setStackedMinMax(),("line"===e.chart.type||"area"===e.chart.type||"candlestick"===e.chart.type||"boxPlot"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal)&&t.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==t.maxY){var r=t.maxY-i;(i>=0&&i<=10||void 0!==e.yaxis[0].min||void 0!==e.yaxis[0].max)&&(r=0),t.minY=i-5*r/100,i>0&&t.minY<0&&(t.minY=0),t.maxY=t.maxY+5*r/100}return e.yaxis.forEach((function(e,i){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[i]=e.max:"function"==typeof e.max&&(t.maxYArr[i]=e.max(t.isMultipleYAxis?t.maxYArr[i]:t.maxY)),t.maxY=t.maxYArr[i]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[i]=e.min:"function"==typeof e.min&&(t.minYArr[i]=e.min(t.isMultipleYAxis?t.minYArr[i]===Number.MIN_VALUE?0:t.minYArr[i]:t.minY)),t.minY=t.minYArr[i])})),t.isBarHorizontal&&["min","max"].forEach((function(i){void 0!==e.xaxis[i]&&"number"==typeof e.xaxis[i]&&("min"===i?t.minY=e.xaxis[i]:t.maxY=e.xaxis[i])})),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=i,t.yAxisScale.forEach((function(e,i){t.minYArr[i]=e.niceMin,t.maxYArr[i]=e.niceMax}))):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var i=0;i<t.labels[e].length;i++)null!==t.labels[e][i]&&w.isNumber(t.labels[e][i])&&(t.maxX=Math.max(t.maxX,t.labels[e][i]),t.initialMaxX=Math.max(t.maxX,t.labels[e][i]),t.minX=Math.min(t.minX,t.labels[e][i]),t.initialMinX=Math.min(t.minX,t.labels[e][i]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var a;if(void 0===e.xaxis.tickAmount?(a=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(a=t.dataPoints-1),a>t.dataPoints&&0!==t.dataPoints&&(a=t.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(t.series.length>1&&(a=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(a=t.maxX-t.minX-1)):a=e.xaxis.tickAmount,t.xTickAmount=a,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var s=[],n=t.minX-1;n<t.maxX;n++)s.push(n+1);t.xAxisScale={result:s,niceMin:s[0],niceMax:s[s.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(1,a,a),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,a-1),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&w.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new Y(this.ctx);if("datetime"===e.xaxis.type){var a=i.getDate(t.minX);e.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()-2):a.setDate(a.getDate()-2),t.minX=new Date(a).getTime();var s=i.getDate(t.maxX);e.xaxis.labels.datetimeUTC?s.setUTCDate(s.getUTCDate()+2):s.setDate(s.getDate()+2),t.maxX=new Date(s).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach((function(e,i){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var a=e.slice();a.sort((function(t,e){return t-e})),a.forEach((function(e,i){if(i>0){var s=e-a[i-1];s>0&&(t.minXDiff=Math.min(s,t.minXDiff))}})),1!==t.dataPoints&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,e=[],i=[];if(t.series.length)for(var a=0;a<t.series[t.maxValsInArrayIndex].length;a++)for(var s=0,n=0,r=0;r<t.series.length;r++)null!==t.series[r][a]&&w.isNumber(t.series[r][a])&&(t.series[r][a]>0?s=s+parseFloat(t.series[r][a])+1e-4:n+=parseFloat(t.series[r][a])),r===t.series.length-1&&(e.push(s),i.push(n));for(var o=0;o<e.length;o++)t.maxY=Math.max(t.maxY,e[o]),t.minY=Math.min(t.minY,i[o])}}]),t}(),tt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===i.config.xaxis.position&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Z(e)}return h(t,[{key:"drawYaxis",value:function(t){var e=this,i=this.w,a=new S(this.ctx),s=i.config.yaxis[t].labels.style,n=s.fontSize,r=s.fontFamily,o=s.fontWeight,l=a.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+i.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return l;var h=a.group({class:"apexcharts-yaxis-texts-g"});l.add(h);var c=i.globals.yAxisScale[t].result.length-1,f=i.globals.gridHeight/c,g=i.globals.translateY,u=i.globals.yLabelFormatters[t],d=i.globals.yAxisScale[t].result.slice();d=this.axesUtils.checkForReversedLabels(t,d);var p="";if(i.config.yaxis[t].labels.show)for(var y=function(l){var y=d[l];y=u(y,l,i);var b=i.config.yaxis[t].labels.padding;i.config.yaxis[t].opposite&&0!==i.config.yaxis.length&&(b*=-1);var v=e.axesUtils.getYAxisForeColor(s.colors,t),m=a.drawText({x:b,y:g+c/10+i.config.yaxis[t].labels.offsetY+1,text:y,textAnchor:i.config.yaxis[t].opposite?"start":"end",fontSize:n,fontFamily:r,fontWeight:o,foreColor:Array.isArray(v)?v[l]:v,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+s.cssClass});l===c&&(p=m),h.add(m);var x=document.createElementNS(i.globals.SVGNS,"title");if(x.textContent=Array.isArray(y)?y.join(" "):y,m.node.appendChild(x),0!==i.config.yaxis[t].labels.rotate){var w=a.rotateAroundCenter(p.node),_=a.rotateAroundCenter(m.node);m.node.setAttribute("transform","rotate(".concat(i.config.yaxis[t].labels.rotate," ").concat(w.x," ").concat(_.y,")"))}g+=f},b=c;b>=0;b--)y(b);if(void 0!==i.config.yaxis[t].title.text){var v=a.group({class:"apexcharts-yaxis-title"}),m=0;i.config.yaxis[t].opposite&&(m=i.globals.translateYAxisX[t]);var x=a.drawText({x:m,y:i.globals.gridHeight/2+i.globals.translateY+i.config.yaxis[t].title.offsetY,text:i.config.yaxis[t].title.text,textAnchor:"end",foreColor:i.config.yaxis[t].title.style.color,fontSize:i.config.yaxis[t].title.style.fontSize,fontWeight:i.config.yaxis[t].title.style.fontWeight,fontFamily:i.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[t].title.style.cssClass});v.add(x),l.add(v)}var w=i.config.yaxis[t].axisBorder,_=31+w.offsetX;if(i.config.yaxis[t].opposite&&(_=-31-w.offsetX),w.show){var C=a.drawLine(_,i.globals.translateY+w.offsetY-2,_,i.globals.gridHeight+i.globals.translateY+w.offsetY+2,w.color,0,w.width);l.add(C)}return i.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(_,c,w,i.config.yaxis[t].axisTicks,t,f,l),l}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new S(this.ctx),a=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),s=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});a.add(s);var n=e.globals.yAxisScale[t].result.length-1,r=e.globals.gridWidth/n+.1,o=r+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,h=e.globals.yAxisScale[t].result.slice(),c=e.globals.timescaleLabels;c.length>0&&(this.xaxisLabels=c.slice(),n=(h=c.slice()).length),h=this.axesUtils.checkForReversedLabels(t,h);var f=c.length;if(e.config.xaxis.labels.show)for(var g=f?0:n;f?g<f:g>=0;f?g++:g--){var u=h[g];u=l(u,g,e);var d=e.globals.gridWidth+e.globals.padHorizontal-(o-r+e.config.xaxis.labels.offsetX);if(c.length){var p=this.axesUtils.getLabel(h,c,d,g,this.drawnLabels,this.xaxisFontSize);d=p.x,u=p.text,this.drawnLabels.push(p.text),0===g&&e.globals.skipFirstTimelinelabel&&(u=""),g===h.length-1&&e.globals.skipLastTimelinelabel&&(u="")}var y=i.drawText({x:d,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:u,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});s.add(y),y.tspan(u);var b=document.createElementNS(e.globals.SVGNS,"title");b.textContent=u,y.node.appendChild(b),o+=r}return this.inversedYAxisTitleText(a),this.inversedYAxisBorder(a),a}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new S(this.ctx),a=e.config.xaxis.axisBorder;if(a.show){var s=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(s-=15);var n=i.drawLine(e.globals.padHorizontal+s+a.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,a.color,0,a.height);t.add(n)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new S(this.ctx);if(void 0!==e.config.xaxis.title.text){var a=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),s=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});a.add(s),t.add(a)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,a=new S(this.ctx),s={width:0,height:0},n={width:0,height:0},r=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==r&&(s=r.getBoundingClientRect());var o=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==o&&(n=o.getBoundingClientRect()),null!==o){var l=this.xPaddingForYAxisTitle(t,s,n,e);o.setAttribute("x",l.xPos-(e?10:0))}if(null!==o){var h=a.rotateAroundCenter(o);o.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,a){var s=this.w,n=0,r=0,o=10;return void 0===s.config.yaxis[t].title.text||t<0?{xPos:r,padd:0}:(a?(r=e.width+s.config.yaxis[t].title.offsetX+i.width/2+o/2,0===(n+=1)&&(r-=o/2)):(r=-1*e.width+s.config.yaxis[t].title.offsetX+o/2+i.width/2,s.globals.isBarHorizontal&&(o=25,r=-1*e.width-s.config.yaxis[t].title.offsetX-o)),{xPos:r,padd:o})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,a=0,s=0,n=18,r=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map((function(o,l){var h=i.globals.ignoreYAxisIndexes.indexOf(l)>-1||!o.show||o.floating||0===t[l].width,c=t[l].width+e[l].width;o.opposite?i.globals.isBarHorizontal?(s=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[l]=s-o.labels.offsetX):(s=i.globals.gridWidth+i.globals.translateX+r,h||(r=r+c+20),i.globals.translateYAxisX[l]=s-o.labels.offsetX+20):(a=i.globals.translateX-n,h||(n=n+c+20),i.globals.translateYAxisX[l]=a+o.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(e=w.listToArray(e)).forEach((function(e,i){var a=t.config.yaxis[i];if(a&&void 0!==a.labels.align){var s=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"));n=w.listToArray(n);var r=s.getBoundingClientRect();"left"===a.labels.align?(n.forEach((function(t,e){t.setAttribute("text-anchor","start")})),a.opposite||s.setAttribute("transform","translate(-".concat(r.width,", 0)"))):"center"===a.labels.align?(n.forEach((function(t,e){t.setAttribute("text-anchor","middle")})),s.setAttribute("transform","translate(".concat(r.width/2*(a.opposite?1:-1),", 0)"))):"right"===a.labels.align&&(n.forEach((function(t,e){t.setAttribute("text-anchor","end")})),a.opposite&&s.setAttribute("transform","translate(".concat(r.width,", 0)")))}}))}}]),t}(),et=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.documentEvent=w.bind(this.documentEvent,this)}return h(t,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var a=i.globals.events[t].indexOf(e);-1!==a&&i.globals.events[t].splice(a,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var a=i.globals.events[t],s=a.length,n=0;n<s;n++)a[n].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,a=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach((function(t){a.addEventListener(t,(function(t){var a=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,i,a):"mouseleave"===t.type||"touchleave"===t.type?"function"==typeof e.config.chart.events.mouseLeave&&e.config.chart.events.mouseLeave(t,i,a):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,i,a),i.ctx.events.fireEvent("click",[t,i,a]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(i){e.globals.dom.baseEl.addEventListener(i,t.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if("click"===t.type){var a=e.globals.dom.baseEl.querySelector(".apexcharts-menu");a&&a.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&a.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),it=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter((function(e){return e.name===t}))[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var a=w.extend(P,i);this.w.globals.locale=a.options}}]),t}(),nt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"drawAxis",value:function(t,e){var i,a,s=this.w.globals,n=this.w.config,r=new J(this.ctx),o=new tt(this.ctx);s.axisCharts&&"radar"!==t&&(s.isBarHorizontal?(a=o.drawYaxisInversed(0),i=r.drawXaxisInversed(0),s.dom.elGraphical.add(i),s.dom.elGraphical.add(a)):(i=r.drawXaxis(),s.dom.elGraphical.add(i),n.yaxis.map((function(t,e){-1===s.ignoreYAxisIndexes.indexOf(e)&&(a=o.drawYaxis(e),s.dom.Paper.add(a))}))))}}]),t}(),ot=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new S(this.ctx),i=new _(this.ctx),a=t.config.xaxis.crosshairs.fill.gradient,s=t.config.xaxis.crosshairs.dropShadow,n=t.config.xaxis.crosshairs.fill.type,r=a.colorFrom,o=a.colorTo,l=a.opacityFrom,h=a.opacityTo,c=a.stops,f=s.enabled,g=s.left,u=s.top,d=s.blur,p=s.color,b=s.opacity,y=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===n&&(y=e.drawGradient("vertical",r,o,l,h,null,c,null));var v=e.drawRect();1===t.config.xaxis.crosshairs.width&&(v=e.drawLine());var m=t.globals.gridHeight;(!w.isNumber(m)||m<0)&&(m=0);var x=t.config.xaxis.crosshairs.width;(!w.isNumber(x)||x<0)&&(x=0),v.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:m,width:x,height:m,fill:y,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),f&&(v=i.dropShadow(v,{left:g,top:u,blur:d,color:p,opacity:b})),t.globals.dom.elGraphical.add(v)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new S(this.ctx),i=t.config.yaxis[0].crosshairs,a=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var s=e.drawLine(-a,0,t.globals.gridWidth+a,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);s.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(s)}var n=e.drawLine(-a,0,t.globals.gridWidth+a,0,i.stroke.color,0,0);n.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(n)}}]),t}(),st=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,a=i.config;if(0!==a.responsive.length){var s=a.responsive.slice();s.sort((function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0})).reverse();var n=new V({}),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=s[0].breakpoint,r=window.innerWidth>0?window.innerWidth:screen.width;if(r>a){var o=A.extendArrayProps(n,i.globals.initialConfig,i);t=w.extend(o,t),t=w.extend(i.config,t),e.overrideResponsiveOptions(t)}else for(var l=0;l<s.length;l++)r<s[l].breakpoint&&(t=A.extendArrayProps(n,s[l].options,i),t=w.extend(i.config,t),e.overrideResponsiveOptions(t))};if(t){var o=A.extendArrayProps(n,t,i);o=w.extend(i.config,o),r(o=w.extend(o,t))}else r({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new V(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),at=function(){function t(e){a(this,t),this.ctx=e,this.colors=[],this.w=e.w;var i=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===i.config.chart.type&&i.config.plotOptions.treemap.distributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.distributed,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return h(t,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this,e=this.w,i=new w;if(e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode)),void 0===e.config.colors?e.globals.colors=this.predefined():(e.globals.colors=e.config.colors,Array.isArray(e.config.colors)&&e.config.colors.length>0&&"function"==typeof e.config.colors[0]&&(e.globals.colors=e.config.series.map((function(i,a){var s=e.config.colors[a];return s||(s=e.config.colors[0]),"function"==typeof s?(t.isColorFn=!0,s({value:e.globals.axisCharts?e.globals.series[a][0]?e.globals.series[a][0]:0:e.globals.series[a],seriesIndex:a,dataPointIndex:a,w:e})):s})))),e.globals.seriesColors.map((function(t,i){t&&(e.globals.colors[i]=t)})),e.config.theme.monochrome.enabled){var a=[],s=e.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(s=e.globals.series[0].length*e.globals.series.length);for(var n=e.config.theme.monochrome.color,r=1/(s/e.config.theme.monochrome.shadeIntensity),o=e.config.theme.monochrome.shadeTo,l=0,h=0;h<s;h++){var c=void 0;"dark"===o?(c=i.shadeColor(-1*l,n),l+=r):(c=i.shadeColor(l,n),l+=r),a.push(c)}e.globals.colors=a.slice()}var f=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),["fill","stroke"].forEach((function(i){void 0===e.config[i].colors?e.globals[i].colors=t.isColorFn?e.config.colors:f:e.globals[i].colors=e.config[i].colors.slice(),t.pushExtraColors(e.globals[i].colors)})),void 0===e.config.dataLabels.style.colors?e.globals.dataLabels.style.colors=f:e.globals.dataLabels.style.colors=e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50),void 0===e.config.plotOptions.radar.polygons.fill.colors?e.globals.radarPolygons.fill.colors=["dark"===e.config.theme.mode?"#424242":"none"]:e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20),void 0===e.config.markers.colors?e.globals.markers.colors=f:e.globals.markers.colors=e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.w,s=e||a.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===a.config.chart.type&&a.config.plotOptions.heatmap.colorScale.inverse),i&&a.globals.series.length&&(s=a.globals.series[a.globals.maxValsInArrayIndex].length*a.globals.series.length),t.length<s)for(var n=s-t.length,r=0;r<n;r++)t.push(t[r])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",i=t.theme.palette?t.theme.palette:"dark"===e?"palette4":"palette1",a=t.chart.foreColor?t.chart.foreColor:"dark"===e?"#f6f7f8":"#373d3f";return t.tooltip.theme=e,t.chart.foreColor=a,t.theme.palette=i,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),t}(),lt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,a=e.globals.svgWidth/2,s=i.offsetY,n="middle";if("left"===i.align?(a=10,n="start"):"right"===i.align&&(a=e.globals.svgWidth-10,n="end"),a+=i.offsetX,s=s+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var r=new S(this.ctx).drawText({x:a,y:s,text:i.text,textAnchor:n,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});r.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(r)}}}]),t}(),ht=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,a=0,s="title"===t?e.config.title.floating:e.config.subtitle.floating,n=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==n&&!s){var r=n.getBoundingClientRect();i=r.width,a=e.globals.axisCharts?r.height+5:r.height}return{width:i,height:a}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.baseEl.querySelector(".apexcharts-legend");t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},w.getBoundingClientRect(e));return null!==e&&!t.config.legend.floating&&t.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var a=e.map((function(t,e){return Array.isArray(t)?t.length:1})),s=Math.max.apply(Math,u(a));i=e[a.indexOf(s)]}return i}}]),t}(),rt=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var a=this.getxAxisTimeScaleLabelsCoords();t={width:a.width,height:a.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var s=e.globals.xLabelFormatter,n=w.getLargestStringFromArr(i),r=this.dCtx.dimHelpers.getLargestStringFromMultiArr(n,i);e.globals.isBarHorizontal&&(r=n=e.globals.yAxisScale[0].result.reduce((function(t,e){return t.length>e.length?t:e}),0));var o=new U(this.dCtx.ctx),l=n;n=o.xLabelFormat(s,n,l,{i:void 0,dateFormatter:new Y(this.dCtx.ctx).formatDate,w:e}),r=o.xLabelFormat(s,r,l,{i:void 0,dateFormatter:new Y(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&void 0===n||""===String(n).trim())&&(r=n="1");var h=new S(this.dCtx.ctx),c=h.getTextRects(n,e.config.xaxis.labels.style.fontSize),f=c;if(n!==r&&(f=h.getTextRects(r,e.config.xaxis.labels.style.fontSize)),(t={width:c.width>=f.width?c.width:f.width,height:c.height>=f.height?c.height:f.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var g=function(t){return h.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};c=g(n),n!==r&&(f=g(r)),t.height=(c.height>f.height?c.height:f.height)/1.5,t.width=c.width>f.width?c.width:f.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(void 0!==t.config.xaxis.title.text){var a=new S(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=a.width,i=a.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map((function(t){return t.value})),a=i.reduce((function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e}),0);return 1.05*(t=new S(this.dCtx.ctx).getTextRects(a,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,a=i.globals,s=i.config,n=s.xaxis.type,r=t.width;a.skipLastTimelinelabel=!1,a.skipFirstTimelinelabel=!1;var o=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,l=function(t,o){(function(t){return-1!==a.collapsedSeriesIndices.indexOf(t)})(o)||function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var o=e.dCtx.timescaleLabels[0],l=e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+r/1.75-e.dCtx.yAxisWidthRight,h=o.position-r/1.75+e.dCtx.yAxisWidthLeft,c="right"===i.config.legend.position&&e.dCtx.lgRect.width>0?e.dCtx.lgRect.width:0;l>a.svgWidth-a.translateX-c&&(a.skipLastTimelinelabel=!0),h<-(t.show&&!t.floating||"bar"!==s.chart.type&&"candlestick"!==s.chart.type&&"rangeBar"!==s.chart.type&&"boxPlot"!==s.chart.type?10:r/1.75)&&(a.skipFirstTimelinelabel=!0)}else"datetime"===n?e.dCtx.gridPad.right<r&&!a.rotateXLabels&&(a.skipLastTimelinelabel=!0):"datetime"!==n&&e.dCtx.gridPad.right<r/2-e.dCtx.yAxisWidthRight&&!a.rotateXLabels&&!i.config.xaxis.labels.trim&&("between"!==i.config.xaxis.tickPlacement||i.globals.isBarHorizontal)&&(e.dCtx.xPadRight=r/2+1)}(t)};s.yaxis.forEach((function(t,i){o?(e.dCtx.gridPad.left<r&&(e.dCtx.xPadLeft=r/2+1),e.dCtx.xPadRight=r/2+1):l(t,i)}))}}]),t}(),ct=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],a=10,s=new Z(this.dCtx.ctx);return e.config.yaxis.map((function(n,r){var o=e.globals.yAxisScale[r],l=0;if(!s.isYAxisHidden(r)&&n.labels.show&&void 0!==n.labels.minWidth&&(l=n.labels.minWidth),!s.isYAxisHidden(r)&&n.labels.show&&o.result.length){var h=e.globals.yLabelFormatters[r],c=o.niceMin===Number.MIN_VALUE?0:o.niceMin,f=String(c).length>String(o.niceMax).length?c:o.niceMax,g=h(f,{seriesIndex:r,dataPointIndex:-1,w:e}),u=g;if(void 0!==g&&0!==g.length||(g=f),e.globals.isBarHorizontal){a=0;var d=e.globals.labels.slice();g=h(g=w.getLargestStringFromArr(d),{seriesIndex:r,dataPointIndex:-1,w:e}),u=t.dCtx.dimHelpers.getLargestStringFromMultiArr(g,d)}var p=new S(t.dCtx.ctx),b="rotate(".concat(n.labels.rotate," 0 0)"),y=p.getTextRects(g,n.labels.style.fontSize,n.labels.style.fontFamily,b,!1),v=y;g!==u&&(v=p.getTextRects(u,n.labels.style.fontSize,n.labels.style.fontFamily,b,!1)),i.push({width:(l>v.width||l>y.width?l:v.width>y.width?v.width:y.width)+a,height:v.height>y.height?v.height:y.height})}else i.push({width:0,height:0})})),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=this.w,i=[];return e.config.yaxis.map((function(e,a){if(e.show&&void 0!==e.title.text){var s=new S(t.dCtx.ctx),n="rotate(".concat(e.title.rotate," 0 0)"),r=s.getTextRects(e.title.text,e.title.style.fontSize,e.title.style.fontFamily,n,!1);i.push({width:r.width,height:r.height})}else i.push({width:0,height:0})})),i}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,a=0,s=t.globals.yAxisScale.length>1?10:0,n=new Z(this.dCtx.ctx),r=function(r,o){var l=t.config.yaxis[o].floating,h=0;r.width>0&&!l?(h=r.width+s,function(e){return t.globals.ignoreYAxisIndexes.indexOf(e)>-1}(o)&&(h=h-r.width-s)):h=l||n.isYAxisHidden(o)?0:5,t.config.yaxis[o].opposite?a+=h:i+=h,e+=h};return t.globals.yLabelsCoords.map((function(t,e){r(t,e)})),t.globals.yTitleCoords.map((function(t,e){r(t,e)})),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=a,e}}]),t}(),ut=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;var i=function(t){return"bar"===t||"rangeBar"===t||"candlestick"===t||"boxPlot"===t},a=e.config.chart.type,s=0,n=i(a)?e.config.series.length:1;if(e.globals.comboBarCount>0&&(n=e.globals.comboBarCount),e.globals.collapsedSeries.forEach((function(t){i(t.type)&&(n-=1)})),e.config.chart.stacked&&(n=1),(i(a)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&n>0){var r,o,l=Math.abs(e.globals.initialMaxX-e.globals.initialMinX);l<=3&&(l=e.globals.dataPoints),r=l/t,e.globals.minXDiff&&e.globals.minXDiff/r>0&&(o=e.globals.minXDiff/r),o>t/2&&(o/=2),(s=o/n*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1&&(s=1),s=s/(n>1?1:1.5)+5,e.globals.barPadForNumericAxis=s}return s}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,a=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach((function(i){void 0!==e.config[i].text?a+=e.config[i].margin:a+=t.dCtx.isSparkline||!e.globals.axisCharts?0:5})),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||e.globals.axisCharts||(a+=10);var s=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),n=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-s.height-n.height-a,i.translateY=i.translateY+s.height+n.height+a}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,a=new Z(this.dCtx.ctx);i.config.yaxis.map((function(s,n){-1!==i.globals.ignoreYAxisIndexes.indexOf(n)||s.floating||a.isYAxisHidden(n)||(s.opposite&&(i.globals.translateX=i.globals.translateX-(e[n].width+t[n].width)-parseInt(i.config.yaxis[n].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))}))}}]),t}(),pt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ht(this),this.dimYAxis=new ct(this),this.dimXAxis=new rt(this),this.dimGrid=new ut(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return h(t,[{key:"plotCoords",value:function(){var t=this,e=this.w,i=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(e){var i=g(e,2),a=i[0],s=i[1];t.gridPad[a]=Math.max(s,t.w.globals.markers.largestSize/1.5)})),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var a=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*a,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(a>0?a+4:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,a=this.dimYAxis.getyAxisLabelsCoords(),s=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map((function(t,i){e.globals.yLabelsCoords.push({width:a[i].width,index:i}),e.globals.yTitleCoords.push({width:s[i].width,index:i})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var n=this.dimXAxis.getxAxisLabelsCoords(),r=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(n,r),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var o=this.yAxisWidth,l=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-r.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var h=10;("radar"===e.config.chart.type||this.isSparkline)&&(o=0,l=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===e.config.chart.type)&&(o=0,l=0,h=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(n);var c=function(){i.translateX=o,i.gridHeight=i.svgHeight-t.lgRect.height-l-(t.isSparkline||"treemap"===e.config.chart.type?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-o};switch("top"===e.config.xaxis.position&&(h=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=h,c();break;case"top":i.translateY=this.lgRect.height+h,c();break;case"left":i.translateY=h,i.translateX=this.lgRect.width+o,i.gridHeight=i.svgHeight-l-12,i.gridWidth=i.svgWidth-this.lgRect.width-o;break;case"right":i.translateY=h,i.translateX=o,i.gridHeight=i.svgHeight-l-12,i.gridWidth=i.svgWidth-this.lgRect.width-o-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(s,a),new tt(this.ctx).setYAxisXPosition(a,s)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,a=0;t.config.legend.show&&!t.config.legend.floating&&(a=20);var s="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",n=i.plotOptions[s].offsetY,r=i.plotOptions[s].offsetX;if(!i.legend.show||i.legend.floating)return e.gridHeight=e.svgHeight-i.grid.padding.left+i.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=n,void(e.translateX=r+(e.svgWidth-e.gridWidth)/2);switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=n-10,e.translateX=r+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+n+10,e.translateX=r+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-a,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=n,e.translateX=r+this.lgRect.width+a;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-a-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=n,e.translateX=r+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e){var i=this.w,a=t.height+e.height,s=i.globals.isMultiLineX?1.2:i.globals.LINE_HEIGHT_RATIO,n=i.globals.rotateXLabels?22:10,r=i.globals.rotateXLabels&&"bottom"===i.config.legend.position?10:0;this.xAxisHeight=a*s+n+r,this.xAxisWidth=t.width,this.xAxisHeight-e.height>i.config.xaxis.labels.maxHeight&&(this.xAxisHeight=i.config.xaxis.labels.maxHeight),i.config.xaxis.labels.minHeight&&this.xAxisHeight<i.config.xaxis.labels.minHeight&&(this.xAxisHeight=i.config.xaxis.labels.minHeight),i.config.xaxis.floating&&(this.xAxisHeight=0);var o=0,l=0;i.config.yaxis.forEach((function(t){o+=t.labels.minWidth,l+=t.labels.maxWidth})),this.yAxisWidth<o&&(this.yAxisWidth=o),this.yAxisWidth>l&&(this.yAxisWidth=l)}}]),t}(),ft=function(){function t(e){a(this,t),this.w=e.w,this.lgCtx=e}return h(t,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var e=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(e),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),e=t.width;return{clwh:t.height,clww:e}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var e=t.dom.elLegendForeign;e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",t.svgWidth),e.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.appendChild(t.dom.elLegendWrap),e.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(e,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,e){var i=this,a=this.w;if(a.globals.axisCharts||"radialBar"===a.config.chart.type){a.globals.resized=!0;var s=null,n=null;a.globals.risingSeries=[],a.globals.axisCharts?(s=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),n=parseInt(s.getAttribute("data:realIndex"),10)):(s=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),n=parseInt(s.getAttribute("rel"),10)-1),e?[{cs:a.globals.collapsedSeries,csi:a.globals.collapsedSeriesIndices},{cs:a.globals.ancillaryCollapsedSeries,csi:a.globals.ancillaryCollapsedSeriesIndices}].forEach((function(t){i.riseCollapsedSeries(t.cs,t.csi,n)})):this.hideSeries({seriesEl:s,realIndex:n})}else{var r=a.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),o=a.config.chart.type;if("pie"===o||"polarArea"===o||"donut"===o){var l=a.config.plotOptions.pie.donut.labels;new S(this.lgCtx.ctx).pathMouseDown(r.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(r.members[0].node,l)}r.fire("click")}}},{key:"hideSeries",value:function(t){var e=t.seriesEl,i=t.realIndex,a=this.w,s=w.clone(a.config.series);if(a.globals.axisCharts){var n=!1;if(a.config.yaxis[i]&&a.config.yaxis[i].show&&a.config.yaxis[i].showAlways&&(n=!0,a.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(a.globals.ancillaryCollapsedSeries.push({index:i,data:s[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),a.globals.ancillaryCollapsedSeriesIndices.push(i))),!n){a.globals.collapsedSeries.push({index:i,data:s[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),a.globals.collapsedSeriesIndices.push(i);var r=a.globals.risingSeries.indexOf(i);a.globals.risingSeries.splice(r,1)}}else a.globals.collapsedSeries.push({index:i,data:s[i]}),a.globals.collapsedSeriesIndices.push(i);for(var o=e.childNodes,l=0;l<o.length;l++)o[l].classList.contains("apexcharts-series-markers-wrap")&&(o[l].classList.contains("apexcharts-hide")?o[l].classList.remove("apexcharts-hide"):o[l].classList.add("apexcharts-hide"));a.globals.allSeriesCollapsed=a.globals.collapsedSeries.length===a.config.series.length,s=this._getSeriesBasedOnCollapsedState(s),this.lgCtx.ctx.updateHelpers._updateSeries(s,a.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var a=this.w,s=w.clone(a.config.series);if(t.length>0){for(var n=0;n<t.length;n++)t[n].index===i&&(a.globals.axisCharts?(s[i].data=t[n].data.slice(),t.splice(n,1),e.splice(n,1),a.globals.risingSeries.push(i)):(s[i]=t[n].data,t.splice(n,1),e.splice(n,1),a.globals.risingSeries.push(i)));s=this._getSeriesBasedOnCollapsedState(s),this.lgCtx.ctx.updateHelpers._updateSeries(s,a.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w;return e.globals.axisCharts?t.forEach((function(i,a){e.globals.collapsedSeriesIndices.indexOf(a)>-1&&(t[a].data=[])})):t.forEach((function(i,a){e.globals.collapsedSeriesIndices.indexOf(a)>-1&&(t[a]=0)})),t}}]),t}(),gt=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new ft(this)}return h(t,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config;if((i.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),w.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this,e=this.w,i=e.config.legend.fontFamily,a=e.globals.seriesNames,s=e.globals.colors.slice();if("heatmap"===e.config.chart.type){var n=e.config.plotOptions.heatmap.colorScale.ranges;a=n.map((function(t){return t.name?t.name:t.from+" - "+t.to})),s=n.map((function(t){return t.color}))}else this.isBarsDistributed&&(a=e.globals.labels.slice());e.config.legend.customLegendItems.length&&(a=e.config.legend.customLegendItems);for(var r=e.globals.legendFormatter,o=e.config.legend.inverseOrder,l=o?a.length-1:0;o?l>=0:l<=a.length-1;o?l--:l++){var h=r(a[l],{seriesIndex:l,w:e}),c=!1,f=!1;if(e.globals.collapsedSeries.length>0)for(var g=0;g<e.globals.collapsedSeries.length;g++)e.globals.collapsedSeries[g].index===l&&(c=!0);if(e.globals.ancillaryCollapsedSeriesIndices.length>0)for(var u=0;u<e.globals.ancillaryCollapsedSeriesIndices.length;u++)e.globals.ancillaryCollapsedSeriesIndices[u]===l&&(f=!0);var d=document.createElement("span");d.classList.add("apexcharts-legend-marker");var p=e.config.legend.markers.offsetX,b=e.config.legend.markers.offsetY,y=e.config.legend.markers.height,v=e.config.legend.markers.width,m=e.config.legend.markers.strokeWidth,x=e.config.legend.markers.strokeColor,_=e.config.legend.markers.radius,C=d.style;C.background=s[l],C.color=s[l],C.setProperty("background",s[l],"important"),e.config.legend.markers.fillColors&&e.config.legend.markers.fillColors[l]&&(C.background=e.config.legend.markers.fillColors[l]),void 0!==e.globals.seriesColors[l]&&(C.background=e.globals.seriesColors[l],C.color=e.globals.seriesColors[l]),C.height=Array.isArray(y)?parseFloat(y[l])+"px":parseFloat(y)+"px",C.width=Array.isArray(v)?parseFloat(v[l])+"px":parseFloat(v)+"px",C.left=(Array.isArray(p)?parseFloat(p[l]):parseFloat(p))+"px",C.top=(Array.isArray(b)?parseFloat(b[l]):parseFloat(b))+"px",C.borderWidth=Array.isArray(m)?m[l]:m,C.borderColor=Array.isArray(x)?x[l]:x,C.borderRadius=Array.isArray(_)?parseFloat(_[l])+"px":parseFloat(_)+"px",e.config.legend.markers.customHTML&&(Array.isArray(e.config.legend.markers.customHTML)?e.config.legend.markers.customHTML[l]&&(d.innerHTML=e.config.legend.markers.customHTML[l]()):d.innerHTML=e.config.legend.markers.customHTML()),S.setAttrs(d,{rel:l+1,"data:collapsed":c||f}),(c||f)&&d.classList.add("apexcharts-inactive-legend");var E=document.createElement("div"),I=document.createElement("span");I.classList.add("apexcharts-legend-text"),I.innerHTML=Array.isArray(h)?h.join(" "):h;var k=e.config.legend.labels.useSeriesColors?e.globals.colors[l]:e.config.legend.labels.colors;k||(k=e.config.chart.foreColor),I.style.color=k,I.style.fontSize=parseFloat(e.config.legend.fontSize)+"px",I.style.fontWeight=e.config.legend.fontWeight,I.style.fontFamily=i||e.config.chart.fontFamily,S.setAttrs(I,{rel:l+1,i:l,"data:default-text":encodeURIComponent(h),"data:collapsed":c||f}),E.appendChild(d),E.appendChild(I);var P=new A(this.ctx);e.config.legend.showForZeroSeries||0===P.getSeriesTotalByIndex(l)&&P.seriesHaveSameValues(l)&&!P.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&E.classList.add("apexcharts-hidden-zero-series"),e.config.legend.showForNullSeries||P.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&E.classList.add("apexcharts-hidden-null-series"),e.globals.dom.elLegendWrap.appendChild(E),e.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(e.config.legend.horizontalAlign)),e.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+e.config.legend.position),E.classList.add("apexcharts-legend-series"),E.style.margin="".concat(e.config.legend.itemMargin.vertical,"px ").concat(e.config.legend.itemMargin.horizontal,"px"),e.globals.dom.elLegendWrap.style.width=e.config.legend.width?e.config.legend.width+"px":"",e.globals.dom.elLegendWrap.style.height=e.config.legend.height?e.config.legend.height+"px":"",S.setAttrs(E,{rel:l+1,seriesName:w.escapeString(a[l]),"data:collapsed":c||f}),(c||f)&&E.classList.add("apexcharts-inactive-legend"),e.config.legend.onItemClick.toggleDataSeries||E.classList.add("apexcharts-no-click")}e.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),e.config.legend.onItemHover.highlightDataSeries&&0===e.config.legend.customLegendItems.length&&(e.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),e.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,a=i.globals.dom.baseEl.querySelector(".apexcharts-legend"),s=a.getBoundingClientRect(),n=0,r=0;if("bottom"===i.config.legend.position)r+=i.globals.svgHeight-s.height/2;else if("top"===i.config.legend.position){var o=new pt(this.ctx),l=o.dimHelpers.getTitleSubtitleCoords("title").height,h=o.dimHelpers.getTitleSubtitleCoords("subtitle").height;r=r+(l>0?l-10:0)+(h>0?h-10:0)}a.style.position="absolute",n=n+t+i.config.legend.offsetX,r=r+e+i.config.legend.offsetY,a.style.left=n+"px",a.style.top=r+"px","bottom"===i.config.legend.position?(a.style.top="auto",a.style.bottom=5-i.config.legend.offsetY+"px"):"right"===i.config.legend.position&&(a.style.left="auto",a.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach((function(t){a.style[t]&&(a.style[t]=parseInt(i.config.legend[t],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var e=this.legendHelpers.getLegendBBox(),i=new pt(this.ctx),a=i.dimHelpers.getTitleSubtitleCoords("title"),s=i.dimHelpers.getTitleSubtitleCoords("subtitle"),n=0;"bottom"===t.config.legend.position?n=-e.clwh/1.8:"top"===t.config.legend.position&&(n=a.height+s.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,n)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(i){var a=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,a,this.w]),new F(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new F(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(!e.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(t.target.getAttribute("rel"),10)-1,a="true"===t.target.getAttribute("data:collapsed"),s=this.w.config.chart.events.legendClick;"function"==typeof s&&s(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var n=this.w.config.legend.markers.onClick;"function"==typeof n&&t.target.classList.contains("apexcharts-legend-marker")&&(n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==e.config.chart.type&&"heatmap"!==e.config.chart.type&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,a)}}}]),t}(),dt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return h(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},a=i();if(a.setAttribute("class","apexcharts-toolbar"),a.style.top=e.config.chart.toolbar.offsetY+"px",a.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(a),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var s=0;s<this.t.customIcons.length;s++)this.elCustomIcons.push(i());var n=[],r=function(i,a,s){var r=i.toLowerCase();t.t[r]&&e.config.chart.zoom.enabled&&n.push({el:a,icon:"string"==typeof t.t[r]?t.t[r]:s,title:t.localeValues[i],class:"apexcharts-".concat(r,"-icon")})};r("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),r("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var o=function(i){t.t[i]&&e.config.chart[i].enabled&&n.push({el:"zoom"===i?t.elZoom:t.elSelection,icon:"string"==typeof t.t[i]?t.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===i?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};o("zoom"),o("selection"),this.t.pan&&e.config.chart.zoom.enabled&&n.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),r("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&n.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)n.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});n.forEach((function(t,e){t.index&&w.moveIndexInArray(n,e,t.index)}));for(var h=0;h<n.length;h++)S.setAttrs(n[h].el,{class:n[h].class,title:n[h].title}),n[h].el.innerHTML=n[h].icon,a.appendChild(n[h].el);this._createHamburgerMenu(a),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),S.setAttrs(this.elMenu,{class:"apexcharts-menu"});var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||e.splice(2,1);for(var i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,S.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))}));for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls();var i="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,a="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[a]=!e.w.globals[a],i.classList.contains(e.ctx.toolbar.selectedClass)?i.classList.remove(e.ctx.toolbar.selectedClass):i.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,i="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(e){e&&e.classList.remove(t.selectedClass)}))}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,i=(this.minX+e)/2,a=(this.maxX+e)/2,s=this._getNewMinXMaxX(i,a);t.globals.disableZoomIn||this.zoomUpdateOptions(s.minX,s.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,i=this.minX-(e-this.minX),a=this.maxX-(e-this.maxX),s=this._getNewMinXMaxX(i,a);t.globals.disableZoomOut||this.zoomUpdateOptions(s.minX,s.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(void 0!==t||void 0!==e){if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var a={min:t,max:e},s=this.getBeforeZoomRange(a);s&&(a=s.xaxis);var n={xaxis:a},r=w.clone(i.globals.initialConfig.yaxis);i.config.chart.zoom.autoScaleYaxis&&(r=new q(this.ctx).autoScaleY(this.ctx,r,{xaxis:a})),i.config.chart.group||(n.yaxis=r),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(n,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(a,r)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout((function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new $(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach((function(t){var e=t.w;if(e.globals.lastXAxis.min=void 0,e.globals.lastXAxis.max=void 0,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.beforeResetZoom){var i=e.config.chart.events.beforeResetZoom(t,e);i&&t.updateHelpers.revertDefaultAxisMinMax(i)}"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var a=t.ctx.series.emptyCollapsedSeries(w.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(a,e.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),yt=function(t){f(i,t);var e=m(i);function i(t){var s;return a(this,i),(s=e.call(this,t)).ctx=t,s.w=t.w,s.dragged=!1,s.graphics=new S(s.ctx),s.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],s.clientX=0,s.clientY=0,s.startX=0,s.endX=0,s.dragX=0,s.startY=0,s.endY=0,s.dragY=0,s.moveDirection="none",s}return h(i,[{key:"init",value:function(t){var e=this,i=t.xyRatios,a=this.w,s=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=a.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),a.globals.dom.elGraphical.add(this.zoomRect),a.globals.dom.elGraphical.add(this.selectionRect),"x"===a.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:a.globals.gridWidth,maxY:a.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===a.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:a.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=a.globals.dom.baseEl.querySelector("".concat(a.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(t){e.hoverArea.addEventListener(t,s.svgMouseEvents.bind(s,i),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var i=this.w,a=this,s=this.ctx.toolbar,n=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,r=i.config.chart.toolbar.autoSelected;if(e.shiftKey?(this.shiftWasPressed=!0,s.enableZoomPanFromToolbar("pan"===r?"zoom":"pan")):this.shiftWasPressed&&(s.enableZoomPanFromToolbar(r),this.shiftWasPressed=!1),e.target){var o,l=e.target.classList;if(e.target.parentNode&&null!==e.target.parentNode&&(o=e.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||o&&o.contains("apexcharts-toolbar"))){if(a.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,a.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,"mousedown"===e.type&&1===e.which){var h=a.gridRect.getBoundingClientRect();a.startX=a.clientX-h.left,a.startY=a.clientY-h.top,a.dragged=!1,a.w.globals.mousedown=!0}if(("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(a.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,a.w.globals.mousedown&&a.panDragging({context:a,zoomtype:n,xyRatios:t})):(a.w.globals.mousedown&&i.globals.zoomEnabled||a.w.globals.mousedown&&i.globals.selectionEnabled)&&(a.selection=a.selectionDrawing({context:a,zoomtype:n}))),"mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type){var c=a.gridRect.getBoundingClientRect();a.w.globals.mousedown&&(a.endX=a.clientX-c.left,a.endY=a.clientY-c.top,a.dragX=Math.abs(a.endX-a.startX),a.dragY=Math.abs(a.endY-a.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&a.selectionDrawn({context:a,zoomtype:n}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&a.delayedPanScrolled()),i.globals.zoomEnabled&&a.hideSelectionRect(this.selectionRect),a.dragged=!1,a.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var t=this.w;if(this.selectionRect){var e=this.selectionRect.node.getBoundingClientRect();e.width>0&&e.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(void 0!==t.globals.selection&&null!==t.globals.selection)this.drawSelectionRect(t.globals.selection);else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var i=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio,a={x:i,y:0,width:t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-i,height:t.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(a),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,i=t.y,a=t.width,s=t.height,n=t.translateX,r=void 0===n?0:n,o=t.translateY,l=void 0===o?0:o,h=this.w,c=this.zoomRect,f=this.selectionRect;if(this.dragged||null!==h.globals.selection){var g={transform:"translate("+r+", "+l+")"};h.globals.zoomEnabled&&this.dragged&&(a<0&&(a=1),c.attr({x:e,y:i,width:a,height:s,fill:h.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":h.config.chart.zoom.zoomedArea.fill.opacity,stroke:h.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":h.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":h.config.chart.zoom.zoomedArea.stroke.opacity}),S.setAttrs(c.node,g)),h.globals.selectionEnabled&&(f.attr({x:e,y:i,width:a>0?a:0,height:s>0?s:0,fill:h.config.chart.selection.fill.color,"fill-opacity":h.config.chart.selection.fill.opacity,stroke:h.config.chart.selection.stroke.color,"stroke-width":h.config.chart.selection.stroke.width,"stroke-dasharray":h.config.chart.selection.stroke.dashArray,"stroke-opacity":h.config.chart.selection.stroke.opacity}),S.setAttrs(f.node,g))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e=t.context,i=t.zoomtype,a=this.w,s=e,n=this.gridRect.getBoundingClientRect(),r=s.startX-1,o=s.startY,l=!1,h=!1,c=s.clientX-n.left-r,f=s.clientY-n.top-o,g={};return Math.abs(c+r)>a.globals.gridWidth?c=a.globals.gridWidth-r:s.clientX-n.left<0&&(c=r),r>s.clientX-n.left&&(l=!0,c=Math.abs(c)),o>s.clientY-n.top&&(h=!0,f=Math.abs(f)),g="x"===i?{x:l?r-c:r,y:0,width:c,height:a.globals.gridHeight}:"y"===i?{x:0,y:h?o-f:o,width:a.globals.gridWidth,height:f}:{x:l?r-c:r,y:h?o-f:o,width:c,height:f},s.drawSelectionRect(g),s.selectionDragging("resizing"),g}},{key:"selectionDragging",value:function(t,e){var i=this,a=this.w,s=this.xyRatios,n=this.selectionRect,r=0;"resizing"===t&&(r=30);var o=function(t){return parseFloat(n.node.getAttribute(t))},l={x:o("x"),y:o("y"),width:o("width"),height:o("height")};a.globals.selection=l,"function"==typeof a.config.chart.events.selection&&a.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var t=i.gridRect.getBoundingClientRect(),e=n.node.getBoundingClientRect(),r={xaxis:{min:a.globals.xAxisScale.niceMin+(e.left-t.left)*s.xRatio,max:a.globals.xAxisScale.niceMin+(e.right-t.left)*s.xRatio},yaxis:{min:a.globals.yAxisScale[0].niceMin+(t.bottom-e.bottom)*s.yRatio[0],max:a.globals.yAxisScale[0].niceMax-(e.top-t.top)*s.yRatio[0]}};a.config.chart.events.selection(i.ctx,r),a.config.chart.brush.enabled&&void 0!==a.config.chart.events.brushScrolled&&a.config.chart.events.brushScrolled(i.ctx,r)}),r))}},{key:"selectionDrawn",value:function(t){var e=t.context,i=t.zoomtype,a=this.w,s=e,n=this.xyRatios,r=this.ctx.toolbar;if(s.startX>s.endX){var o=s.startX;s.startX=s.endX,s.endX=o}if(s.startY>s.endY){var l=s.startY;s.startY=s.endY,s.endY=l}var h=void 0,c=void 0;a.globals.isRangeBar?(h=a.globals.yAxisScale[0].niceMin+s.startX*n.invertedYRatio,c=a.globals.yAxisScale[0].niceMin+s.endX*n.invertedYRatio):(h=a.globals.xAxisScale.niceMin+s.startX*n.xRatio,c=a.globals.xAxisScale.niceMin+s.endX*n.xRatio);var f=[],g=[];if(a.config.yaxis.forEach((function(t,e){f.push(a.globals.yAxisScale[e].niceMax-n.yRatio[e]*s.startY),g.push(a.globals.yAxisScale[e].niceMax-n.yRatio[e]*s.endY)})),s.dragged&&(s.dragX>10||s.dragY>10)&&h!==c)if(a.globals.zoomEnabled){var u=w.clone(a.globals.initialConfig.yaxis),d=w.clone(a.globals.initialConfig.xaxis);if(a.globals.zoomed=!0,a.config.xaxis.convertedCatToNumeric&&(h=Math.floor(h),c=Math.floor(c),h<1&&(h=1,c=a.globals.dataPoints),c-h<2&&(c=h+1)),"xy"!==i&&"x"!==i||(d={min:h,max:c}),"xy"!==i&&"y"!==i||u.forEach((function(t,e){u[e].min=g[e],u[e].max=f[e]})),a.config.chart.zoom.autoScaleYaxis){var p=new q(s.ctx);u=p.autoScaleY(s.ctx,u,{xaxis:d})}if(r){var b=r.getBeforeZoomRange(d,u);b&&(d=b.xaxis?b.xaxis:d,u=b.yaxis?b.yaxis:u)}var y={xaxis:d};a.config.chart.group||(y.yaxis=u),s.ctx.updateHelpers._updateOptions(y,!1,s.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof a.config.chart.events.zoomed&&r.zoomCallback(d,u)}else if(a.globals.selectionEnabled){var v,m=null;v={min:h,max:c},"xy"!==i&&"y"!==i||(m=w.clone(a.config.yaxis)).forEach((function(t,e){m[e].min=g[e],m[e].max=f[e]})),a.globals.selection=s.selection,"function"==typeof a.config.chart.events.selection&&a.config.chart.events.selection(s.ctx,{xaxis:v,yaxis:m})}}},{key:"panDragging",value:function(t){var e=t.context,i=this.w,a=e;if(void 0!==i.globals.lastClientPosition.x){var s=i.globals.lastClientPosition.x-a.clientX,n=i.globals.lastClientPosition.y-a.clientY;Math.abs(s)>Math.abs(n)&&s>0?this.moveDirection="left":Math.abs(s)>Math.abs(n)&&s<0?this.moveDirection="right":Math.abs(n)>Math.abs(s)&&n>0?this.moveDirection="up":Math.abs(n)>Math.abs(s)&&n<0&&(this.moveDirection="down")}i.globals.lastClientPosition={x:a.clientX,y:a.clientY};var r=i.globals.isRangeBar?i.globals.minY:i.globals.minX,o=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;i.config.xaxis.convertedCatToNumeric||a.panScrolled(r,o)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,i=t.globals.maxX,a=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+a,i=t.globals.maxX+a):"right"===this.moveDirection&&(e=t.globals.minX-a,i=t.globals.maxX-a),e=Math.floor(e),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:e,max:i}},e,i)}},{key:"panScrolled",value:function(t,e){var i=this.w,a=this.xyRatios,s=w.clone(i.globals.initialConfig.yaxis),n=a.xRatio,r=i.globals.minX,o=i.globals.maxX;i.globals.isRangeBar&&(n=a.invertedYRatio,r=i.globals.minY,o=i.globals.maxY),"left"===this.moveDirection?(t=r+i.globals.gridWidth/15*n,e=o+i.globals.gridWidth/15*n):"right"===this.moveDirection&&(t=r-i.globals.gridWidth/15*n,e=o-i.globals.gridWidth/15*n),i.globals.isRangeBar||(t<i.globals.initialMinX||e>i.globals.initialMaxX)&&(t=r,e=o);var l={min:t,max:e};i.config.chart.zoom.autoScaleYaxis&&(s=new q(this.ctx).autoScaleY(this.ctx,s,{xaxis:l}));var h={xaxis:{min:t,max:e}};i.config.chart.group||(h.yaxis=s),this.updateScrolledChart(h,t,e)}},{key:"updateScrolledChart",value:function(t,e,i){var a=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof a.config.chart.events.scrolled&&a.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:i}})}}]),i}(dt),vt=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return h(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.elGrid,a=t.clientX,s=t.clientY,n=this.w,r=i.getBoundingClientRect(),o=r.width,l=r.height,h=o/(n.globals.dataPoints-1),c=l/n.globals.dataPoints,f=this.hasBars();!n.globals.comboCharts&&!f||n.config.xaxis.convertedCatToNumeric||(h=o/n.globals.dataPoints);var g=a-r.left-n.globals.barPadForNumericAxis,u=s-r.top;g<0||u<0||g>o||u>l?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):n.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):n.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var d=Math.round(g/h),p=Math.floor(u/c);f&&!n.config.xaxis.convertedCatToNumeric&&(d=Math.ceil(g/h),d-=1);var b=null,y=null,v=[],m=[];if(n.globals.seriesXvalues.forEach((function(t){v.push([t[0]+1e-6].concat(t))})),n.globals.seriesYvalues.forEach((function(t){m.push([t[0]+1e-6].concat(t))})),v=v.map((function(t){return t.filter((function(t){return w.isNumber(t)}))})),m=m.map((function(t){return t.filter((function(t){return w.isNumber(t)}))})),n.globals.isXNumeric){var x=this.ttCtx.getElGrid().getBoundingClientRect(),_=g*(x.width/o),S=u*(x.height/l);b=(y=this.closestInMultiArray(_,S,v,m)).index,d=y.j,null!==b&&(v=n.globals.seriesXvalues[b],d=(y=this.closestInArray(_,v)).index)}return n.globals.capturedSeriesIndex=null===b?-1:b,(!d||d<1)&&(d=0),n.globals.isBarHorizontal?n.globals.capturedDataPointIndex=p:n.globals.capturedDataPointIndex=d,{capturedSeries:b,j:n.globals.isBarHorizontal?p:d,hoverX:g,hoverY:u}}},{key:"closestInMultiArray",value:function(t,e,i,a){var s=this.w,n=0,r=null,o=-1;s.globals.series.length>1?n=this.getFirstActiveXArray(i):r=0;var l=i[n][0],h=Math.abs(t-l);if(i.forEach((function(e){e.forEach((function(e,i){var a=Math.abs(t-e);a<h&&(h=a,o=i)}))})),-1!==o){var c=a[n][o],f=Math.abs(e-c);r=n,a.forEach((function(t,i){var a=Math.abs(e-t[o]);a<f&&(f=a,r=i)}))}return{index:r,j:o}}},{key:"getFirstActiveXArray",value:function(t){for(var e=this.w,i=0,a=t.map((function(t,e){return t.length>0?e:-1})),s=0;s<a.length;s++)if(-1!==a[s]&&-1===e.globals.collapsedSeriesIndices.indexOf(s)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(s)){i=a[s];break}return i}},{key:"closestInArray",value:function(t,e){for(var i=e[0],a=null,s=Math.abs(t-i),n=0;n<e.length;n++){var r=Math.abs(t-e[n]);r<s&&(s=r,a=n)}return{index:a}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter((function(t){return void 0!==t[0]}));if(i.length>0)for(var a=0;a<i.length-1;a++)void 0!==i[a][t]&&void 0!==i[a+1][t]&&i[a][t]!==i[a+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return u(t).reduce((function(t,e){return t+e.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=u(t)).sort((function(t,e){return Number(e.getAttribute("data:realIndex"))<Number(t.getAttribute("data:realIndex"))?0:-1}));var e=[];return t.forEach((function(t){e.push(t.querySelector(".apexcharts-marker"))})),e}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return void 0===i&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var a=i.allTooltipSeriesGroups,s=0;s<a.length;s++)"enable"===t?(a[s].classList.add("apexcharts-active"),a[s].style.display=e.config.tooltip.items.display):(a[s].classList.remove("apexcharts-active"),a[s].style.display="none")}}]),t}(),mt=function(){function t(e){a(this,t),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new vt(e)}return h(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,a=t.ttItems,s=t.i,n=void 0===s?0:s,r=t.j,o=void 0===r?null:r,l=t.y1,h=t.y2,c=t.e,f=this.w;void 0!==f.config.tooltip.custom?this.handleCustomTooltip({i:n,j:o,y1:l,y2:h,w:f}):this.toggleActiveInactiveSeries(i);var g=this.getValuesToPrint({i:n,j:o});this.printLabels({i:n,j:o,values:g,ttItems:a,shared:i,e:c});var u=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=u.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=u.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var i,a=this,s=t.i,e=t.j,n=t.values,r=t.ttItems,o=t.shared,h=t.e,c=this.w,f=[],g=function(t){return c.globals.seriesGoals[t]&&c.globals.seriesGoals[t][e]&&Array.isArray(c.globals.seriesGoals[t][e])},u=n.xVal,d=n.zVal,p=n.xAxisTTVal,y="",b=c.globals.colors[s];null!==e&&c.config.plotOptions.bar.distributed&&(b=c.globals.colors[e]);for(var v=function(t,n){var v=a.getFormatters(s);y=a.getSeriesName({fn:v.yLbTitleFormatter,index:s,seriesIndex:s,j:e}),"treemap"===c.config.chart.type&&(y=v.yLbTitleFormatter(String(c.config.series[s].data[e].x),{series:c.globals.series,seriesIndex:s,dataPointIndex:e,w:c}));var m=c.config.tooltip.inverseOrder?n:t;if(c.globals.axisCharts){var x=function(t){return v.yLbFormatter(c.globals.series[t][e],{series:c.globals.series,seriesIndex:t,dataPointIndex:e,w:c})};if(o)v=a.getFormatters(m),y=a.getSeriesName({fn:v.yLbTitleFormatter,index:m,seriesIndex:s,j:e}),b=c.globals.colors[m],i=x(m),g(m)&&(f=c.globals.seriesGoals[m][e].map((function(t){return{attrs:t,val:v.yLbFormatter(t.value,{seriesIndex:m,dataPointIndex:e,w:c})}})));else{var w,_=null==h||null===(w=h.target)||void 0===w?void 0:w.getAttribute("fill");_&&(b=-1!==_.indexOf("url")?document.querySelector(_.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):_),i=x(s),g(s)&&Array.isArray(c.globals.seriesGoals[s][e])&&(f=c.globals.seriesGoals[s][e].map((function(t){return{attrs:t,val:v.yLbFormatter(t.value,{seriesIndex:s,dataPointIndex:e,w:c})}})))}}null===e&&(i=v.yLbFormatter(c.globals.series[s],l(l({},c),{},{seriesIndex:s,dataPointIndex:s}))),a.DOMHandling({i:s,t:m,j:e,ttItems:r,values:{val:i,goalVals:f,xVal:u,xAxisTTVal:p,zVal:d},seriesName:y,shared:o,pColor:b})},m=0,x=c.globals.series.length-1;m<c.globals.series.length;m++,x--)v(m,x)}},{key:"getFormatters",value:function(t){var e,i=this.w,a=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(a=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(a=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,"function"!=typeof a&&(a=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t}),{yLbFormatter:a,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.fn,i=t.index,a=t.seriesIndex,s=t.j,n=this.w;return e(String(n.globals.seriesNames[i]),{series:n.globals.series,seriesIndex:a,dataPointIndex:s,w:n})}},{key:"DOMHandling",value:function(t){t.i;var e=t.t,i=t.j,a=t.ttItems,s=t.values,n=t.seriesName,r=t.shared,o=t.pColor,l=this.w,h=this.ttCtx,c=s.val,f=s.goalVals,g=s.xVal,u=s.xAxisTTVal,d=s.zVal,p=null;p=a[e].children,l.config.tooltip.fillSeriesColor&&(a[e].style.backgroundColor=o,p[0].style.display="none"),h.showTooltipTitle&&(null===h.tooltipTitle&&(h.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=g),h.isXAxisTooltipEnabled&&(h.xaxisTooltipText.innerHTML=""!==u?u:g);var y=a[e].querySelector(".apexcharts-tooltip-text-y-label");y&&(y.innerHTML=n||"");var b=a[e].querySelector(".apexcharts-tooltip-text-y-value");b&&(b.innerHTML=void 0!==c?c:""),p[0]&&p[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(o=l.config.tooltip.marker.fillColors[e]),p[0].style.backgroundColor=o),l.config.tooltip.marker.show||(p[0].style.display="none");var v=a[e].querySelector(".apexcharts-tooltip-text-goals-label"),m=a[e].querySelector(".apexcharts-tooltip-text-goals-value");if(f.length&&l.globals.seriesGoals[e]){var x=function(){var t="<div >",e="<div>";f.forEach((function(i,a){t+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(i.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(i.attrs.name,"</div>"),e+="<div>".concat(i.val,"</div>")})),v.innerHTML=t+"</div>",m.innerHTML=e+"</div>"};r?l.globals.seriesGoals[e][i]&&Array.isArray(l.globals.seriesGoals[e][i])?x():(v.innerHTML="",m.innerHTML=""):x()}else v.innerHTML="",m.innerHTML="";null!==d&&(a[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,a[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==d?d:""),r&&p[0]&&(null==c||l.globals.ancillaryCollapsedSeriesIndices.indexOf(e)>-1||l.globals.collapsedSeriesIndices.indexOf(e)>-1?p[0].parentNode.style.display="none":p[0].parentNode.style.display=l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var i=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=e.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,a=this.w,s=this.ctx.series.filteredSeriesX(),n="",r="",o=null,l=null,h={series:a.globals.series,seriesIndex:e,dataPointIndex:i,w:a},c=a.globals.ttZFormatter;null===i?l=a.globals.series[e]:a.globals.isXNumeric&&"treemap"!==a.config.chart.type?(n=s[e][i],0===s[e].length&&(n=s[this.tooltipUtil.getFirstActiveXArray(s)][i])):n=void 0!==a.globals.labels[i]?a.globals.labels[i]:"";var f=n;return n=a.globals.isXNumeric&&"datetime"===a.config.xaxis.type?new U(this.ctx).xLabelFormat(a.globals.ttKeyFormatter,f,f,{i:void 0,dateFormatter:new Y(this.ctx).formatDate,w:this.w}):a.globals.isBarHorizontal?a.globals.yLabelFormatters[0](f,h):a.globals.xLabelFormatter(f,h),void 0!==a.config.tooltip.x.formatter&&(n=a.globals.ttKeyFormatter(f,h)),a.globals.seriesZ.length>0&&a.globals.seriesZ[e].length>0&&(o=c(a.globals.seriesZ[e][i],a)),r="function"==typeof a.config.xaxis.tooltip.formatter?a.globals.xaxisTooltipFormatter(f,h):n,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(n)?n.join(" "):n,xAxisTTVal:Array.isArray(r)?r.join(" "):r,zVal:o}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,a=t.y1,s=t.y2,n=t.w,r=this.ttCtx.getElTooltip(),o=n.config.tooltip.custom;Array.isArray(o)&&o[e]&&(o=o[e]),r.innerHTML=o({ctx:this.ctx,series:n.globals.series,seriesIndex:e,dataPointIndex:i,y1:a,y2:s,w:n})}}]),t}(),xt=function(){function t(e){a(this,t),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return h(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,a=this.w,s=i.getElXCrosshairs(),n=t-i.xcrosshairsWidth/2,r=a.globals.labels.slice().length;if(null!==e&&(n=a.globals.gridWidth/r*e),null===s||a.globals.isBarHorizontal||(s.setAttribute("x",n),s.setAttribute("x1",n),s.setAttribute("x2",n),s.setAttribute("y2",a.globals.gridHeight),s.classList.add("apexcharts-active")),n<0&&(n=0),n>a.globals.gridWidth&&(n=a.globals.gridWidth),i.isXAxisTooltipEnabled){var o=n;"tickWidth"!==a.config.xaxis.crosshairs.width&&"barWidth"!==a.config.xaxis.crosshairs.width||(o=n+i.xcrosshairsWidth/2),this.moveXAxisTooltip(o)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&S.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&S.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip&&0!==i.xcrosshairsWidth){i.xaxisTooltip.classList.add("apexcharts-active");var s,a=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;t-=i.xaxisTooltip.getBoundingClientRect().width/2,isNaN(t)||(t+=e.globals.translateX,s=new S(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=s.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=a+"px")}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var a=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),s=e.globals.translateY+a,n=i.yaxisTTEls[t].getBoundingClientRect().height,r=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(r-=26),s-=n/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=s+"px",i.yaxisTTEls[t].style.left=r+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.w,s=this.ttCtx,n=s.getElTooltip(),r=s.tooltipRect,o=null!==i?parseFloat(i):1,l=parseFloat(t)+o+5,h=parseFloat(e)+o/2;if(l>a.globals.gridWidth/2&&(l=l-r.ttWidth-o-15),l>a.globals.gridWidth-r.ttWidth-10&&(l=a.globals.gridWidth-r.ttWidth),l<-20&&(l=-20),a.config.tooltip.followCursor){var c=s.getElGrid().getBoundingClientRect();h=s.e.clientY+a.globals.translateY-c.top-r.ttHeight/2}else a.globals.isBarHorizontal||(r.ttHeight/2+h>a.globals.gridHeight&&(h=a.globals.gridHeight-r.ttHeight+a.globals.translateY),h<0&&(h=0));isNaN(l)||(l+=a.globals.translateX,n.style.left=l+"px",n.style.top=h+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,a=this.ttCtx;if(i.globals.markers.size[t]>0)for(var s=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),n=0;n<s.length;n++)parseInt(s[n].getAttribute("rel"),10)===e&&(a.marker.resetPointsSize(),a.marker.enlargeCurrentPoint(e,s[n]));else a.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,a,s=this.w,n=this.ttCtx,r=s.globals.pointsArray,o=n.tooltipUtil.getHoverMarkerSize(e),l=s.config.series[e].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){i=r[e][t][0],a=r[e][t][1]?r[e][t][1]:0;var h=s.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle"));h&&a<s.globals.gridHeight&&a>0&&(h.setAttribute("r",o),h.setAttribute("cx",i),h.setAttribute("cy",a)),this.moveXCrosshairs(i),n.fixedTooltip||this.moveTooltip(i,a,o)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,a=i.w,s=0,n=0,r=a.globals.pointsArray;e=new F(this.ctx).getActiveConfigSeriesIndex(!0);var o=i.tooltipUtil.getHoverMarkerSize(e);r[e]&&(s=r[e][t][0],n=r[e][t][1]);var l=i.tooltipUtil.getAllMarkers();if(null!==l)for(var h=0;h<a.globals.series.length;h++){var c=r[h];if(a.globals.comboCharts&&void 0===c&&l.splice(h,0,null),c&&c.length){var f=r[h][t][1];l[h].setAttribute("cx",s),null!==f&&!isNaN(f)&&f<a.globals.gridHeight+o&&f+o>0?(l[h]&&l[h].setAttribute("r",o),l[h]&&l[h].setAttribute("cy",f)):l[h]&&l[h].setAttribute("r",0)}}if(this.moveXCrosshairs(s),!i.fixedTooltip){var g=n||a.globals.gridHeight;this.moveTooltip(s,g,o)}}},{key:"moveStickyTooltipOverBars",value:function(t){var e=this.w,i=this.ttCtx,a=e.globals.columnSeries?e.globals.columnSeries.length:e.globals.series.length,s=a>=2&&a%2==0?Math.floor(a/2):Math.floor(a/2)+1;e.globals.isBarHorizontal&&(s=new F(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var n=e.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(s,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"']")),r=n?parseFloat(n.getAttribute("cx")):0,o=n?parseFloat(n.getAttribute("cy")):0,l=n?parseFloat(n.getAttribute("barWidth")):0,h=n?parseFloat(n.getAttribute("barHeight")):0,c=i.getElGrid().getBoundingClientRect(),f=n.classList.contains("apexcharts-candlestick-area")||n.classList.contains("apexcharts-boxPlot-area");if(e.globals.isXNumeric?(n&&!f&&(r-=a%2!=0?l/2:0),n&&f&&e.globals.comboCharts&&(r-=l/2)):e.globals.isBarHorizontal||(r=i.xAxisTicksPositions[t-1]+i.dataPointsDividedWidth/2,isNaN(r)&&(r=i.xAxisTicksPositions[t]-i.dataPointsDividedWidth/2)),e.globals.isBarHorizontal?(o=o+e.config.grid.padding.top+h/3)+h>e.globals.gridHeight&&(o=e.globals.gridHeight-h):e.config.tooltip.followCursor&&(o=i.e.clientY-c.top-i.tooltipRect.ttHeight/2),e.globals.isBarHorizontal||this.moveXCrosshairs(r),!i.fixedTooltip){var g=o||e.globals.gridHeight;this.moveTooltip(r,g)}}}]),t}(),bt=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new xt(e)}return h(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new S(this.ctx),i=new T(this.ctx),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");a=u(a),t.config.chart.stacked&&a.sort((function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))}));for(var s=0;s<a.length;s++){var n=a[s].querySelector(".apexcharts-series-markers-wrap");if(null!==n){var r=void 0,o="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(o+=" no-pointer-events");var l=i.getMarkerConfig({cssClass:o,seriesIndex:Number(n.getAttribute("data:realIndex"))});(r=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(t.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(r.node),n.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.w;"bubble"!==s.config.chart.type&&this.newPointSize(t,e);var n=e.getAttribute("cx"),r=e.getAttribute("cy");if(null!==i&&null!==a&&(n=i,r=a),this.tooltipPosition.moveXCrosshairs(n),!this.fixedTooltip){if("radar"===s.config.chart.type){var o=this.ttCtx.getElGrid().getBoundingClientRect();n=this.ttCtx.e.clientX-o.left}this.tooltipPosition.moveTooltip(n,r,s.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this,a=this.ttCtx,s=t,n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),r=e.config.markers.hover.size,o=0;o<n.length;o++){var l=n[o].getAttribute("rel"),h=n[o].getAttribute("index");if(void 0===r&&(r=e.globals.markers.size[h]+e.config.markers.hover.sizeOffset),s===parseInt(l,10)){i.newPointSize(s,n[o]);var c=n[o].getAttribute("cx"),f=n[o].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(c),a.fixedTooltip||i.tooltipPosition.moveTooltip(c,f,r)}else i.oldPointSize(n[o])}}},{key:"newPointSize",value:function(t,e){var i=this.w,a=i.config.markers.hover.size,s=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==s.getAttribute("default-marker-size")){var n=parseInt(s.getAttribute("index"),10);void 0===a&&(a=i.globals.markers.size[n]+i.config.markers.hover.sizeOffset),a<0&&(a=0),s.setAttribute("r",a)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));w.isNumber(i)&&i>=0?t[e].setAttribute("r",i):t[e].setAttribute("r",0)}}}]),t}(),wt=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e}return h(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,i=t.opt,a=t.x,s=t.y,n=t.type,r=this.ttCtx,o=this.w;if(e.target.classList.contains("apexcharts-".concat(n,"-rect"))){var l=this.getAttr(e,"i"),h=this.getAttr(e,"j"),c=this.getAttr(e,"cx"),f=this.getAttr(e,"cy"),g=this.getAttr(e,"width"),u=this.getAttr(e,"height");if(r.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:l,j:h,shared:!1,e:e}),o.globals.capturedSeriesIndex=l,o.globals.capturedDataPointIndex=h,a=c+r.tooltipRect.ttWidth/2+g,s=f+r.tooltipRect.ttHeight/2-u/2,r.tooltipPosition.moveXCrosshairs(c+g/2),a>o.globals.gridWidth/2&&(a=c-r.tooltipRect.ttWidth/2+g),r.w.config.tooltip.followCursor){var d=o.globals.dom.elWrap.getBoundingClientRect();a=o.globals.clientX-d.left-(a>o.globals.gridWidth/2?r.tooltipRect.ttWidth:0),s=o.globals.clientY-d.top}}return{x:a,y:s}}},{key:"handleMarkerTooltip",value:function(t){var e,i,a=t.e,s=t.opt,n=t.x,r=t.y,o=this.w,l=this.ttCtx;if(a.target.classList.contains("apexcharts-marker")){var h=parseInt(s.paths.getAttribute("cx"),10),c=parseInt(s.paths.getAttribute("cy"),10),f=parseFloat(s.paths.getAttribute("val"));if(i=parseInt(s.paths.getAttribute("rel"),10),e=parseInt(s.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var g=w.findAncestor(s.paths,"apexcharts-series");g&&(e=parseInt(g.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:s.ttItems,i:e,j:i,shared:!l.showOnIntersect&&o.config.tooltip.shared,e:a}),"mouseup"===a.type&&l.markerClick(a,e,i),o.globals.capturedSeriesIndex=e,o.globals.capturedDataPointIndex=i,n=h,r=c+o.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var u=l.getElGrid().getBoundingClientRect();r=l.e.clientY+o.globals.translateY-u.top}f<0&&(r=c),l.marker.enlargeCurrentPoint(i,s.paths,n,r)}return{x:n,y:r}}},{key:"handleBarTooltip",value:function(t){var e,i,a=t.e,s=t.opt,n=this.w,r=this.ttCtx,o=r.getElTooltip(),l=0,h=0,c=0,f=this.getBarTooltipXY({e:a,opt:s});e=f.i;var g=f.barHeight,u=f.j;n.globals.capturedSeriesIndex=e,n.globals.capturedDataPointIndex=u,n.globals.isBarHorizontal&&r.tooltipUtil.hasBars()||!n.config.tooltip.shared?(h=f.x,c=f.y,i=Array.isArray(n.config.stroke.width)?n.config.stroke.width[e]:n.config.stroke.width,l=h):n.globals.comboCharts||n.config.tooltip.shared||(l/=2),isNaN(c)?c=n.globals.svgHeight-r.tooltipRect.ttHeight:c<0&&(c=0);var d=parseInt(s.paths.parentNode.getAttribute("data:realIndex"),10),p=n.globals.isMultipleYAxis?n.config.yaxis[d]&&n.config.yaxis[d].reversed:n.config.yaxis[0].reversed;if(h+r.tooltipRect.ttWidth>n.globals.gridWidth&&!p?h-=r.tooltipRect.ttWidth:h<0&&(h=0),r.w.config.tooltip.followCursor){var y=r.getElGrid().getBoundingClientRect();c=r.e.clientY-y.top}null===r.tooltip&&(r.tooltip=n.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),n.config.tooltip.shared||(n.globals.comboBarCount>0?r.tooltipPosition.moveXCrosshairs(l+i/2):r.tooltipPosition.moveXCrosshairs(l)),!r.fixedTooltip&&(!n.config.tooltip.shared||n.globals.isBarHorizontal&&r.tooltipUtil.hasBars())&&(p&&(h-=r.tooltipRect.ttWidth)<0&&(h=0),!p||n.globals.isBarHorizontal&&r.tooltipUtil.hasBars()||(c=c+g-2*(n.globals.series[e][u]<0?g:0)),r.tooltipRect.ttHeight+c>n.globals.gridHeight?c=n.globals.gridHeight-r.tooltipRect.ttHeight+n.globals.translateY:(c=c+n.globals.translateY-r.tooltipRect.ttHeight/2)<0&&(c=0),o.style.left=h+n.globals.translateX+"px",o.style.top=c+"px")}},{key:"getBarTooltipXY",value:function(t){var e=t.e,i=t.opt,a=this.w,s=null,n=this.ttCtx,r=0,o=0,l=0,h=0,c=0,f=e.target.classList;if(f.contains("apexcharts-bar-area")||f.contains("apexcharts-candlestick-area")||f.contains("apexcharts-boxPlot-area")||f.contains("apexcharts-rangebar-area")){var g=e.target,u=g.getBoundingClientRect(),d=i.elGrid.getBoundingClientRect(),p=u.height;c=u.height;var y=u.width,b=parseInt(g.getAttribute("cx"),10),v=parseInt(g.getAttribute("cy"),10);h=parseFloat(g.getAttribute("barWidth"));var m="touchmove"===e.type?e.touches[0].clientX:e.clientX;s=parseInt(g.getAttribute("j"),10),r=parseInt(g.parentNode.getAttribute("rel"),10)-1;var x=g.getAttribute("data-range-y1"),w=g.getAttribute("data-range-y2");a.globals.comboCharts&&(r=parseInt(g.parentNode.getAttribute("data:realIndex"),10)),n.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:r,j:s,y1:x?parseInt(x,10):null,y2:w?parseInt(w,10):null,shared:!n.showOnIntersect&&a.config.tooltip.shared,e:e}),a.config.tooltip.followCursor?a.globals.isBarHorizontal?(o=m-d.left+15,l=v-n.dataPointsDividedHeight+p/2-n.tooltipRect.ttHeight/2):(o=a.globals.isXNumeric?b-y/2:b-n.dataPointsDividedWidth+y/2,l=e.clientY-d.top-n.tooltipRect.ttHeight/2-15):a.globals.isBarHorizontal?((o=b)<n.xyRatios.baseLineInvertedY&&(o=b-n.tooltipRect.ttWidth),l=v-n.dataPointsDividedHeight+p/2-n.tooltipRect.ttHeight/2):(o=a.globals.isXNumeric?b-y/2:b-n.dataPointsDividedWidth+y/2,l=v)}return{x:o,y:l,barHeight:c,barWidth:h,i:r,j:s}}}]),t}(),_t=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e}return h(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var a=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",s=t.globals.dom.elWrap;e.isXAxisTooltipEnabled&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+t.config.tooltip.theme),s.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=function(i){var a=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=a?t.globals.gridWidth+1:1;var s="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,a?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");t.globals.yAxisSameScaleIndices.map((function(e,a){e.map((function(e,a){a===i&&(s+=t.config.yaxis[a].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var n=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",s+" apexcharts-theme-"+t.config.tooltip.theme),n.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))},a=0;a<t.config.yaxis.length;a++)i(a)}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var a=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==a&&"barWidth"===t.config.xaxis.crosshairs.width){var s=parseFloat(a.getAttribute("barWidth"));e.xcrosshairsWidth=s}else if("tickWidth"===t.config.xaxis.crosshairs.width){var n=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/n}}else if("tickWidth"===t.config.xaxis.crosshairs.width){var r=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/r}else if("barWidth"===t.config.xaxis.crosshairs.width){var o=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==o){var l=parseFloat(o.getAttribute("barWidth"));e.xcrosshairsWidth=l}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==i&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var a=this.ttCtx,s=this.w,n=s.globals.yLabelFormatters[t];if(a.yaxisTooltips[t]){var r=a.getElGrid().getBoundingClientRect(),o=(e-r.top)*i.yRatio[t],l=s.globals.maxYArr[t]-s.globals.minYArr[t],h=s.globals.minYArr[t]+(l-o);a.tooltipPosition.moveYCrosshairs(e-r.top),a.yaxisTooltipText[t].innerHTML=n(h),a.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),St=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new vt(this),this.tooltipLabels=new mt(this),this.tooltipPosition=new xt(this),this.marker=new bt(this),this.intersect=new wt(this),this.axesTooltip=new _t(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return h(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map((function(t,i){return!!(t.show&&t.tooltip.enabled&&e.globals.axisCharts)})),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var a=new J(this.ctx);this.xAxisTicksPositions=a.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var s=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(s=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(s),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this,i=this.w,a=[],s=this.getElTooltip(),n=function(n){var r=document.createElement("div");r.classList.add("apexcharts-tooltip-series-group"),r.style.order=i.config.tooltip.inverseOrder?t-n:n+1,e.tConfig.shared&&e.tConfig.enabledOnSeries&&Array.isArray(e.tConfig.enabledOnSeries)&&e.tConfig.enabledOnSeries.indexOf(n)<0&&r.classList.add("apexcharts-tooltip-series-group-hidden");var o=document.createElement("span");o.classList.add("apexcharts-tooltip-marker"),o.style.backgroundColor=i.globals.colors[n],r.appendChild(o);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=e.tConfig.style.fontFamily||i.config.chart.fontFamily,l.style.fontSize=e.tConfig.style.fontSize,["y","goals","z"].forEach((function(t){var e=document.createElement("div");e.classList.add("apexcharts-tooltip-".concat(t,"-group"));var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(t,"-label")),e.appendChild(i);var a=document.createElement("span");a.classList.add("apexcharts-tooltip-text-".concat(t,"-value")),e.appendChild(a),l.appendChild(e)})),r.appendChild(l),s.appendChild(r),a.push(r)},r=0;r<t;r++)n(r);return a}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),a=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),s="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,n=t.globals.dom.Paper.node,r=this.getElGrid();r&&(this.seriesBound=r.getBoundingClientRect());var o,l=[],h=[],c={hoverArea:n,elGrid:r,tooltipEl:i,tooltipY:l,tooltipX:h,ttItems:this.ttItems};if(t.globals.axisCharts&&(s?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):a?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),o&&o.length))for(var f=0;f<o.length;f++)l.push(o[f].getAttribute("cy")),h.push(o[f].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||a&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([n],c);else if(a&&!t.globals.comboCharts||s&&this.showOnIntersect)this.addDatapointEventsListeners(c);else if(!t.globals.axisCharts||"heatmap"===e||"treemap"===e){var g=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(g,c)}if(this.showOnIntersect){var u=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");u.length>0&&this.addPathsEventListeners(u,c),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(c)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),a=i.width+10,s=i.height+10,n=this.tConfig.fixed.offsetX,r=this.tConfig.fixed.offsetY,o=this.tConfig.fixed.position.toLowerCase();return o.indexOf("right")>-1&&(n=n+t.globals.svgWidth-a+10),o.indexOf("bottom")>-1&&(r=r+t.globals.svgHeight-s-10),e.style.left=n+"px",e.style.top=r+"px",{x:n,y:r,ttWidth:a,ttHeight:s}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,a=function(a){var s={paths:t[a],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(e){return t[a].addEventListener(e,i.onSeriesHover.bind(i,s),{capture:!1,passive:!0})}))},s=0;s<t.length;s++)a(s)}},{key:"onSeriesHover",value:function(t,e){var i=this,a=Date.now()-this.lastHoverTime;a>=100?this.seriesHover(t,e):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){i.seriesHover(t,e)}),100-a))}},{key:"seriesHover",value:function(t,e){var i=this;this.lastHoverTime=Date.now();var a=[],s=this.w;s.config.chart.group&&(a=this.ctx.getGroupedCharts()),s.globals.axisCharts&&(s.globals.minX===-1/0&&s.globals.maxX===1/0||0===s.globals.dataPoints)||(a.length?a.forEach((function(a){var s=i.getElTooltip(a),n={paths:t.paths,tooltipEl:s,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:a.w.globals.tooltip.ttItems};a.w.globals.minX===i.w.globals.minX&&a.w.globals.maxX===i.w.globals.maxX&&a.w.globals.tooltip.seriesHoverByContext({chartCtx:a,ttCtx:a.w.globals.tooltip,opt:n,e:e})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,a=t.opt,s=t.e,n=e.w,r=this.getElTooltip();r&&(i.tooltipRect={x:0,y:0,ttWidth:r.getBoundingClientRect().width,ttHeight:r.getBoundingClientRect().height},i.e=s,!i.tooltipUtil.hasBars()||n.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new F(e).toggleSeriesOnHover(s,s.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),n.globals.axisCharts?i.axisChartsTooltips({e:s,opt:a,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:s,opt:a,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(t){var e,i,a=t.e,s=t.opt,n=this.w,r=s.elGrid.getBoundingClientRect(),o="touchmove"===a.type?a.touches[0].clientX:a.clientX,l="touchmove"===a.type?a.touches[0].clientY:a.clientY;if(this.clientY=l,this.clientX=o,n.globals.capturedSeriesIndex=-1,n.globals.capturedDataPointIndex=-1,l<r.top||l>r.top+r.height)this.handleMouseOut(s);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!n.config.tooltip.shared){var h=parseInt(s.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(s)}var c=this.getElTooltip(),f=this.getElXCrosshairs(),g=n.globals.xyCharts||"bar"===n.config.chart.type&&!n.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||n.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===a.type||"touchmove"===a.type||"mouseup"===a.type){if(n.globals.collapsedSeries.length+n.globals.ancillaryCollapsedSeries.length===n.globals.series.length)return;null!==f&&f.classList.add("apexcharts-active");var u=this.yaxisTooltips.filter((function(t){return!0===t}));if(null!==this.ycrosshairs&&u.length&&this.ycrosshairs.classList.add("apexcharts-active"),g&&!this.showOnIntersect)this.handleStickyTooltip(a,o,l,s);else if("heatmap"===n.config.chart.type||"treemap"===n.config.chart.type){var d=this.intersect.handleHeatTreeTooltip({e:a,opt:s,x:e,y:i,type:n.config.chart.type});e=d.x,i=d.y,c.style.left=e+"px",c.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:a,opt:s}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:a,opt:s,x:e,y:i});if(this.yaxisTooltips.length)for(var p=0;p<n.config.yaxis.length;p++)this.axesTooltip.drawYaxisTooltipText(p,l,this.xyRatios);s.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==a.type&&"touchend"!==a.type||this.handleMouseOut(s)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,a=t.tooltipRect,s=this.w,n=i.paths.getAttribute("rel"),r=this.getElTooltip(),o=s.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){r.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(n,10)-1,shared:!1});var l=s.globals.clientX-o.left-a.ttWidth/2,h=s.globals.clientY-o.top-a.ttHeight-10;if(r.style.left=l+"px",r.style.top=h+"px",s.config.legend.tooltipHoverFormatter){var c=n-1,f=(0,s.config.legend.tooltipHoverFormatter)(this.legendLabels[c].getAttribute("data:default-text"),{seriesIndex:c,dataPointIndex:c,w:s});this.legendLabels[c].innerHTML=f}}else"mouseout"!==e.type&&"touchend"!==e.type||(r.classList.remove("apexcharts-active"),s.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})))}},{key:"handleStickyTooltip",value:function(t,e,i,a){var s=this.w,n=this.tooltipUtil.getNearestValues({context:this,hoverArea:a.hoverArea,elGrid:a.elGrid,clientX:e,clientY:i}),r=n.j,o=n.capturedSeries,l=a.elGrid.getBoundingClientRect();n.hoverX<0||n.hoverX>l.width?this.handleMouseOut(a):null!==o?this.handleStickyCapturedSeries(t,o,a,r):(this.tooltipUtil.isXoverlap(r)||s.globals.isBarHorizontal)&&this.create(t,this,0,r,a.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,e,i,a){var s=this.w;this.tConfig.shared||null!==s.globals.series[e][a]?void 0!==s.globals.series[e][a]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(a)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,a,i.ttItems):this.create(t,this,e,a,i.ttItems,!1):this.tooltipUtil.isXoverlap(a)&&this.create(t,this,0,a,i.ttItems):this.handleMouseOut(i)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new S(this.ctx),i=t.globals.dom.Paper.select(".apexcharts-bar-area"),a=0;a<i.length;a++)e.pathMouseLeave(i[a])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var a=0;a<this.yaxisTTEls.length;a++)this.yaxisTTEls[a].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"markerClick",value:function(t,e,i){var a=this.w;"function"==typeof a.config.chart.events.markerClick&&a.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:a}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:a}])}},{key:"create",value:function(t,e,i,a,s){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=this.w,o=e;"mouseup"===t.type&&this.markerClick(t,i,a),null===n&&(n=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),h=this.tooltipUtil.getElBars();if(r.config.legend.tooltipHoverFormatter){var c=r.config.legend.tooltipHoverFormatter,f=Array.from(this.legendLabels);f.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}));for(var g=0;g<f.length;g++){var u=f[g],d=parseInt(u.getAttribute("i"),10),p=decodeURIComponent(u.getAttribute("data:default-text")),y=c(p,{seriesIndex:n?d:i,dataPointIndex:a,w:r});if(n)u.innerHTML=r.globals.collapsedSeriesIndices.indexOf(d)<0?y:p;else if(u.innerHTML=d===i?y:p,i===d)break}}if(n){if(o.tooltipLabels.drawSeriesTexts({ttItems:s,i:i,j:a,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(r.globals.markers.largestSize>0?o.marker.enlargePoints(a):o.tooltipPosition.moveDynamicPointsOnHover(a)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(h),this.barSeriesHeight>0)){var b=new S(this.ctx),v=r.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(a,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(a);for(var m=0;m<v.length;m++)b.pathMouseEnter(v[m])}}else o.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:s,i:i,j:a}),this.tooltipUtil.hasBars()&&o.tooltipPosition.moveStickyTooltipOverBars(a),l&&o.tooltipPosition.moveMarkers(i,a)}}]),t}(),Ct=function(t){f(s,t);var i=m(s);function s(){return a(this,s),i.apply(this,arguments)}return h(s,[{key:"draw",value:function(t,i){var a=this,s=this.w;this.graphics=new S(this.ctx),this.bar=new X(this.ctx,this.xyRatios);var e=new A(this.ctx,s);t=e.getLogSeries(t),this.yRatio=e.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===s.config.chart.stackType&&(t=s.globals.seriesPercent.slice()),this.series=t,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var n=0;n<t.length;n++)t[n].length>0&&(this.totalItems+=t[n].length);for(var r=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),o=0,h=0,c=function(e,n){var c=void 0,f=void 0,g=void 0,u=void 0,d=[],p=[],b=s.globals.comboCharts?i[e]:e;a.yRatio.length>1&&(a.yaxisIndex=b),a.isReversed=s.config.yaxis[a.yaxisIndex]&&s.config.yaxis[a.yaxisIndex].reversed;var y=a.graphics.group({class:"apexcharts-series",seriesName:w.escapeString(s.globals.seriesNames[b]),rel:e+1,"data:realIndex":b});a.ctx.series.addCollapsedClassToSeries(y,b);var v=a.graphics.group({class:"apexcharts-datalabels","data:realIndex":b}),m=0,x=0,_=a.initialPositions(o,h,c,f,g,u);h=_.y,m=_.barHeight,f=_.yDivision,u=_.zeroW,o=_.x,x=_.barWidth,c=_.xDivision,g=_.zeroH,a.yArrj=[],a.yArrjF=[],a.yArrjVal=[],a.xArrj=[],a.xArrjF=[],a.xArrjVal=[],1===a.prevY.length&&a.prevY[0].every((function(t){return isNaN(t)}))&&(a.prevY[0]=a.prevY[0].map((function(t){return g})),a.prevYF[0]=a.prevYF[0].map((function(t){return 0})));for(var S=0;S<s.globals.dataPoints;S++){var C=a.barHelpers.getStrokeWidth(e,S,b),E={indexes:{i:e,j:S,realIndex:b,bc:n},strokeWidth:C,x:o,y:h,elSeries:y},A=null;a.isHorizontal?(A=a.drawStackedBarPaths(l(l({},E),{},{zeroW:u,barHeight:m,yDivision:f})),x=a.series[e][S]/a.invertedYRatio):(A=a.drawStackedColumnPaths(l(l({},E),{},{xDivision:c,barWidth:x,zeroH:g})),m=a.series[e][S]/a.yRatio[a.yaxisIndex]),h=A.y,o=A.x,d.push(o),p.push(h);var I=a.barHelpers.getPathFillColor(t,e,S,b);y=a.renderSeries({realIndex:b,pathFill:I,j:S,i:e,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:C,elSeries:y,x:o,y:h,series:t,barHeight:m,barWidth:x,elDataLabelsWrap:v,type:"bar",visibleSeries:0})}s.globals.seriesXvalues[b]=d,s.globals.seriesYvalues[b]=p,a.prevY.push(a.yArrj),a.prevYF.push(a.yArrjF),a.prevYVal.push(a.yArrjVal),a.prevX.push(a.xArrj),a.prevXF.push(a.xArrjF),a.prevXVal.push(a.xArrjVal),r.add(y)},f=0,g=0;f<t.length;f++,g++)c(f,g);return r}},{key:"initialPositions",value:function(t,e,i,a,s,n){var r,o,l=this.w;return this.isHorizontal?(r=(r=a=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,n=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(a-r)/2):(o=i=l.globals.gridWidth/l.globals.dataPoints,o=l.globals.isXNumeric&&l.globals.dataPoints>1?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:o*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,s=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),t=l.globals.padHorizontal+(i-o)/2),{x:t,y:e,yDivision:a,xDivision:i,barHeight:r,barWidth:o,zeroH:s,zeroW:n}}},{key:"drawStackedBarPaths",value:function(t){for(var e,i=t.indexes,a=t.barHeight,s=t.strokeWidth,n=t.zeroW,r=t.x,o=t.y,l=t.yDivision,h=t.elSeries,c=this.w,f=o,g=i.i,u=i.j,d=0,p=0;p<this.prevXF.length;p++)d+=this.prevXF[p][u];if(g>0){var y=n;this.prevXVal[g-1][u]<0?y=this.series[g][u]>=0?this.prevX[g-1][u]+d-2*(this.isReversed?d:0):this.prevX[g-1][u]:this.prevXVal[g-1][u]>=0&&(y=this.series[g][u]>=0?this.prevX[g-1][u]:this.prevX[g-1][u]-d+2*(this.isReversed?d:0)),e=y}else e=n;r=null===this.series[g][u]?e:e+this.series[g][u]/this.invertedYRatio-2*(this.isReversed?this.series[g][u]/this.invertedYRatio:0);var b=this.barHelpers.getBarpaths({barYPosition:f,barHeight:a,x1:e,x2:r,strokeWidth:s,series:this.series,realIndex:i.realIndex,i:g,j:u,w:c});return this.barHelpers.barBackground({j:u,i:g,y1:f,y2:a,elSeries:h}),o+=l,{pathTo:b.pathTo,pathFrom:b.pathFrom,x:r,y:o}}},{key:"drawStackedColumnPaths",value:function(t){var e=t.indexes,i=t.x,a=t.y,s=t.xDivision,n=t.barWidth,r=t.zeroH;t.strokeWidth;var o=t.elSeries,l=this.w,h=e.i,c=e.j,f=e.bc;if(l.globals.isXNumeric){var g=l.globals.seriesX[h][c];g||(g=0),i=(g-l.globals.minX)/this.xRatio-n/2}for(var u,d=i,p=0,y=0;y<this.prevYF.length;y++)p+=isNaN(this.prevYF[y][c])?0:this.prevYF[y][c];if(h>0&&!l.globals.isXNumeric||h>0&&l.globals.isXNumeric&&l.globals.seriesX[h-1][c]===l.globals.seriesX[h][c]){var b,v,m=Math.min(this.yRatio.length+1,h+1);if(void 0!==this.prevY[h-1])for(var x=1;x<m;x++)if(!isNaN(this.prevY[h-x][c])){v=this.prevY[h-x][c];break}for(var w=1;w<m;w++){if(this.prevYVal[h-w][c]<0){b=this.series[h][c]>=0?v-p+2*(this.isReversed?p:0):v;break}if(this.prevYVal[h-w][c]>=0){b=this.series[h][c]>=0?v:v+p-2*(this.isReversed?p:0);break}}void 0===b&&(b=l.globals.gridHeight),u=this.prevYF[0].every((function(t){return 0===t}))&&this.prevYF.slice(1,h).every((function(t){return t.every((function(t){return isNaN(t)}))}))?l.globals.gridHeight-r:b}else u=l.globals.gridHeight-r;a=u-this.series[h][c]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[h][c]/this.yRatio[this.yaxisIndex]:0);var _=this.barHelpers.getColumnPaths({barXPosition:d,barWidth:n,y1:u,y2:a,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:e.realIndex,i:h,j:c,w:l});return this.barHelpers.barBackground({bc:f,j:c,i:h,x1:d,x2:n,elSeries:o}),i+=s,{pathTo:_.pathTo,pathFrom:_.pathFrom,x:l.globals.isXNumeric?i-s:i,y:a}}}]),s}(X),Et=function(t){f(s,t);var i=m(s);function s(){return a(this,s),i.apply(this,arguments)}return h(s,[{key:"draw",value:function(t,i){var a=this,s=this.w,e=new S(this.ctx),n=new N(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=s.config.plotOptions.bar.horizontal;var r=new A(this.ctx,s);t=r.getLogSeries(t),this.series=t,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var o=e.group({class:"apexcharts-".concat(s.config.chart.type,"-series apexcharts-plot-series")}),h=function(r){a.isBoxPlot="boxPlot"===s.config.chart.type||"boxPlot"===s.config.series[r].type;var h,c,f,g,d,y,u=void 0,v=void 0,p=[],b=[],m=s.globals.comboCharts?i[r]:r,x=e.group({class:"apexcharts-series",seriesName:w.escapeString(s.globals.seriesNames[m]),rel:r+1,"data:realIndex":m});a.ctx.series.addCollapsedClassToSeries(x,m),t[r].length>0&&(a.visibleI=a.visibleI+1),a.yRatio.length>1&&(a.yaxisIndex=m);var _=a.barHelpers.initialPositions();v=_.y,d=_.barHeight,c=_.yDivision,g=_.zeroW,u=_.x,y=_.barWidth,h=_.xDivision,f=_.zeroH,b.push(u+y/2);for(var S=e.group({class:"apexcharts-datalabels","data:realIndex":m}),C=function(i){var e=a.barHelpers.getStrokeWidth(r,i,m),o=null,w={indexes:{i:r,j:i,realIndex:m},x:u,y:v,strokeWidth:e,elSeries:x};o=a.isHorizontal?a.drawHorizontalBoxPaths(l(l({},w),{},{yDivision:c,barHeight:d,zeroW:g})):a.drawVerticalBoxPaths(l(l({},w),{},{xDivision:h,barWidth:y,zeroH:f})),v=o.y,u=o.x,i>0&&b.push(u+y/2),p.push(v),o.pathTo.forEach((function(l,h){var c=!a.isBoxPlot&&a.candlestickOptions.wick.useFillColor?o.color[h]:s.globals.stroke.colors[r],f=n.fillPath({seriesNumber:m,dataPointIndex:i,color:o.color[h],value:t[r][i]});a.renderSeries({realIndex:m,pathFill:f,lineFill:c,j:i,i:r,pathFrom:o.pathFrom,pathTo:l,strokeWidth:e,elSeries:x,x:u,y:v,series:t,barHeight:d,barWidth:y,elDataLabelsWrap:S,visibleSeries:a.visibleI,type:s.config.chart.type})}))},E=0;E<s.globals.dataPoints;E++)C(E);s.globals.seriesXvalues[m]=b,s.globals.seriesYvalues[m]=p,o.add(x)},c=0;c<t.length;c++)h(c);return o}},{key:"drawVerticalBoxPaths",value:function(t){var e=t.indexes,i=t.x;t.y;var a=t.xDivision,s=t.barWidth,n=t.zeroH,r=t.strokeWidth,o=this.w,l=new S(this.ctx),h=e.i,c=e.j,f=!0,g=o.config.plotOptions.candlestick.colors.upward,u=o.config.plotOptions.candlestick.colors.downward,d="";this.isBoxPlot&&(d=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var p=this.yRatio[this.yaxisIndex],y=e.realIndex,b=this.getOHLCValue(y,c),v=n,m=n;b.o>b.c&&(f=!1);var x=Math.min(b.o,b.c),w=Math.max(b.o,b.c),_=b.m;o.globals.isXNumeric&&(i=(o.globals.seriesX[y][c]-o.globals.minX)/this.xRatio-s/2);var C=i+s*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(x=n,w=n):(x=n-x/p,w=n-w/p,v=n-b.h/p,m=n-b.l/p,_=n-b.m/p);var E=l.move(C,n),A=l.move(C+s/2,x);return o.globals.previousPaths.length>0&&(A=this.getPreviousPath(y,c,!0)),E=this.isBoxPlot?[l.move(C,x)+l.line(C+s/2,x)+l.line(C+s/2,v)+l.line(C+s/4,v)+l.line(C+s-s/4,v)+l.line(C+s/2,v)+l.line(C+s/2,x)+l.line(C+s,x)+l.line(C+s,_)+l.line(C,_)+l.line(C,x+r/2),l.move(C,_)+l.line(C+s,_)+l.line(C+s,w)+l.line(C+s/2,w)+l.line(C+s/2,m)+l.line(C+s-s/4,m)+l.line(C+s/4,m)+l.line(C+s/2,m)+l.line(C+s/2,w)+l.line(C,w)+l.line(C,_)+"z"]:[l.move(C,w)+l.line(C+s/2,w)+l.line(C+s/2,v)+l.line(C+s/2,w)+l.line(C+s,w)+l.line(C+s,x)+l.line(C+s/2,x)+l.line(C+s/2,m)+l.line(C+s/2,x)+l.line(C,x)+l.line(C,w-r/2)],A+=l.move(C,x),o.globals.isXNumeric||(i+=a),{pathTo:E,pathFrom:A,x:i,y:w,barXPosition:C,color:this.isBoxPlot?d:f?[g]:[u]}}},{key:"drawHorizontalBoxPaths",value:function(t){var e=t.indexes;t.x;var i=t.y,a=t.yDivision,s=t.barHeight,n=t.zeroW,r=t.strokeWidth,o=this.w,l=new S(this.ctx),h=e.i,c=e.j,f=this.boxOptions.colors.lower;this.isBoxPlot&&(f=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var g=this.invertedYRatio,u=e.realIndex,d=this.getOHLCValue(u,c),p=n,y=n,b=Math.min(d.o,d.c),v=Math.max(d.o,d.c),m=d.m;o.globals.isXNumeric&&(i=(o.globals.seriesX[u][c]-o.globals.minX)/this.invertedXRatio-s/2);var x=i+s*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(b=n,v=n):(b=n+b/g,v=n+v/g,p=n+d.h/g,y=n+d.l/g,m=n+d.m/g);var w=l.move(n,x),_=l.move(b,x+s/2);return o.globals.previousPaths.length>0&&(_=this.getPreviousPath(u,c,!0)),w=[l.move(b,x)+l.line(b,x+s/2)+l.line(p,x+s/2)+l.line(p,x+s/2-s/4)+l.line(p,x+s/2+s/4)+l.line(p,x+s/2)+l.line(b,x+s/2)+l.line(b,x+s)+l.line(m,x+s)+l.line(m,x)+l.line(b+r/2,x),l.move(m,x)+l.line(m,x+s)+l.line(v,x+s)+l.line(v,x+s/2)+l.line(y,x+s/2)+l.line(y,x+s-s/4)+l.line(y,x+s/4)+l.line(y,x+s/2)+l.line(v,x+s/2)+l.line(v,x)+l.line(m,x)+"z"],_+=l.move(b,x),o.globals.isXNumeric||(i+=a),{pathTo:w,pathFrom:_,x:v,y:i,barYPosition:x,color:f}}},{key:"getOHLCValue",value:function(t,e){var i=this.w;return{o:this.isBoxPlot?i.globals.seriesCandleH[t][e]:i.globals.seriesCandleO[t][e],h:this.isBoxPlot?i.globals.seriesCandleO[t][e]:i.globals.seriesCandleH[t][e],m:i.globals.seriesCandleM[t][e],l:this.isBoxPlot?i.globals.seriesCandleC[t][e]:i.globals.seriesCandleL[t][e],c:this.isBoxPlot?i.globals.seriesCandleL[t][e]:i.globals.seriesCandleC[t][e]}}}]),s}(X),At=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,i=t.config.plotOptions[t.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(t,i){t.from<=0&&(e=!0)})),e}},{key:"getShadeColor",value:function(t,e,i,a){var s=this.w,n=1,r=s.config.plotOptions[t].shadeIntensity,o=this.determineColor(t,e,i);s.globals.hasNegs||a?n=s.config.plotOptions[t].reverseNegativeShade?o.percent<0?o.percent/100*(1.25*r):(1-o.percent/100)*(1.25*r):o.percent<=0?1-(1+o.percent/100)*r:(1-o.percent/100)*r:(n=1-o.percent/100,"treemap"===t&&(n=(1-o.percent/100)*(1.25*r)));var l=o.color,h=new w;return s.config.plotOptions[t].enableShades&&(l="dark"===this.w.config.theme.mode?w.hexToRgba(h.shadeColor(-1*n,o.color),s.config.fill.opacity):w.hexToRgba(h.shadeColor(n,o.color),s.config.fill.opacity)),{color:l,colorProps:o}}},{key:"determineColor",value:function(t,e,i){var a=this.w,s=a.globals.series[e][i],n=a.config.plotOptions[t],r=n.colorScale.inverse?i:e;n.distributed&&"treemap"===a.config.chart.type&&(r=i);var o=a.globals.colors[r],l=null,h=Math.min.apply(Math,u(a.globals.series[e])),c=Math.max.apply(Math,u(a.globals.series[e]));n.distributed||"heatmap"!==t||(h=a.globals.minY,c=a.globals.maxY),void 0!==n.colorScale.min&&(h=n.colorScale.min<a.globals.minY?n.colorScale.min:a.globals.minY,c=n.colorScale.max>a.globals.maxY?n.colorScale.max:a.globals.maxY);var f=Math.abs(c)+Math.abs(h),g=100*s/(0===f?f-1e-6:f);return n.colorScale.ranges.length>0&&n.colorScale.ranges.map((function(t,e){if(s>=t.from&&s<=t.to){o=t.color,l=t.foreColor?t.foreColor:null,h=t.from,c=t.to;var i=Math.abs(c)+Math.abs(h);g=100*s/(0===i?i-1e-6:i)}})),{color:o,foreColor:l,percent:g}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,a=t.y,s=t.i,n=t.j,r=t.colorProps,o=t.fontSize,l=this.w.config.dataLabels,h=new S(this.ctx),c=new R(this.ctx),f=null;if(l.enabled){f=h.group({class:"apexcharts-data-labels"});var g=l.offsetX,u=l.offsetY,d=i+g,p=a+parseFloat(l.style.fontSize)/3+u;c.plotDataLabelsText({x:d,y:p,text:e,i:s,j:n,color:r.foreColor,parent:f,fontSize:o,dataLabelsConfig:l})}return f}},{key:"addListeners",value:function(t){var e=new S(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),t}(),It=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new At(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return h(t,[{key:"draw",value:function(t){var e=this.w,i=new S(this.ctx),a=i.group({class:"apexcharts-heatmap"});a.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var s=e.globals.gridWidth/e.globals.dataPoints,n=e.globals.gridHeight/e.globals.series.length,r=0,o=!1;this.negRange=this.helpers.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(o=!0,l.reverse());for(var h=o?0:l.length-1;o?h<l.length:h>=0;o?h++:h--){var c=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:w.escapeString(e.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(this.ctx.series.addCollapsedClassToSeries(c,h),e.config.chart.dropShadow.enabled){var f=e.config.chart.dropShadow;new _(this.ctx).dropShadow(c,f,h)}for(var g=0,u=e.config.plotOptions.heatmap.shadeIntensity,d=0;d<l[h].length;d++){var p=this.helpers.getShadeColor(e.config.chart.type,h,d,this.negRange),b=p.color,y=p.colorProps;"image"===e.config.fill.type&&(b=new N(this.ctx).fillPath({seriesNumber:h,dataPointIndex:d,opacity:e.globals.hasNegs?y.percent<0?1-(1+y.percent/100):u+y.percent/100:y.percent/100,patternID:w.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:s,height:e.config.fill.image.height?e.config.fill.image.height:n}));var v=this.rectRadius,m=i.drawRect(g,r,s,n,v);if(m.attr({cx:g,cy:r}),m.node.classList.add("apexcharts-heatmap-rect"),c.add(m),m.attr({fill:b,i:h,index:h,j:d,val:l[h][d],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?b:e.globals.stroke.colors[0],color:b}),this.helpers.addListeners(m),e.config.chart.animations.enabled&&!e.globals.dataChanged){var x=1;e.globals.resized||(x=e.config.chart.animations.speed),this.animateHeatMap(m,g,r,s,n,x)}if(e.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){C=this.dynamicAnim.speed;var E=e.globals.previousPaths[h]&&e.globals.previousPaths[h][d]&&e.globals.previousPaths[h][d].color;E||(E="rgba(255, 255, 255, 0)"),this.animateHeatColor(m,w.isColorHex(E)?E:w.rgb2hex(E),w.isColorHex(b)?b:w.rgb2hex(b),C)}}var A=(0,e.config.dataLabels.formatter)(e.globals.series[h][d],{value:e.globals.series[h][d],seriesIndex:h,dataPointIndex:d,w:e}),I=this.helpers.calculateDataLabels({text:A,x:g+s/2,y:r+n/2,i:h,j:d,colorProps:y,series:l});null!==I&&c.add(I),g+=s}r+=n,a.add(c)}var k=e.globals.yAxisScale[0].result.slice();e.config.yaxis[0].reversed?k.unshift(""):k.push(""),e.globals.yAxisScale[0].result=k;var P=e.globals.gridHeight/e.globals.series.length;return e.config.yaxis[0].labels.offsetY=-P/2,a}},{key:"animateHeatMap",value:function(t,e,i,a,s,n){var r=new b(this.ctx);r.animateRect(t,{x:e+a/2,y:i+s/2,width:0,height:0},{x:e,y:i,width:a,height:s},n,(function(){r.animationCompleted(t)}))}},{key:"animateHeatColor",value:function(t,e,i,a){t.attr({fill:e}).animate(a).attr({fill:i})}}]),t}(),kt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"drawYAxisTexts",value:function(t,e,i,a){var s=this.w,n=s.config.yaxis[0],r=s.globals.yLabelFormatters[0];return new S(this.ctx).drawText({x:t+n.labels.offsetX,y:e+n.labels.offsetY,text:r(a,i),textAnchor:"middle",fontSize:n.labels.style.fontSize,fontFamily:n.labels.style.fontFamily,foreColor:Array.isArray(n.labels.style.colors)?n.labels.style.colors[i]:n.labels.style.colors})}}]),t}(),Pt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,"radialBar"===i.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return h(t,[{key:"draw",value:function(t){var e=this,i=this.w,a=new S(this.ctx);if(this.ret=a.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;for(var s=0,n=0;n<t.length;n++)s+=w.negToZero(t[n]);var r=[],o=a.group();0===s&&(s=1e-5),t.forEach((function(t){e.maxY=Math.max(e.maxY,t)})),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<t.length;l++){var h=this.fullAngle*w.negToZero(t[l])/s;r.push(h),"polarArea"===this.chartType?(r[l]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[l]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var c,f=0,g=0;g<i.globals.previousPaths.length;g++)f+=w.negToZero(i.globals.previousPaths[g]);for(var u=0;u<i.globals.previousPaths.length;u++)c=this.fullAngle*w.negToZero(i.globals.previousPaths[u])/f,this.prevSectorAngleArr.push(c)}this.donutSize<0&&(this.donutSize=0);var d=i.config.plotOptions.pie.customScale,p=i.globals.gridWidth/2,b=i.globals.gridHeight/2,y=p-i.globals.gridWidth/2*d,v=b-i.globals.gridHeight/2*d;if("donut"===this.chartType){var m=a.drawCircle(this.donutSize);m.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),o.add(m)}var x=this.drawArcs(r,t);if(this.sliceLabels.forEach((function(t){x.add(t)})),o.attr({transform:"translate(".concat(y,", ").concat(v,") scale(").concat(d,")")}),o.add(x),this.ret.add(o),this.donutDataLabels.show){var _=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:y,translateY:v});this.ret.add(_)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(t,e){var i=this.w,a=new _(this.ctx),s=new S(this.ctx),n=new N(this.ctx),r=s.group({class:"apexcharts-slices"}),o=this.initialAngle,l=this.initialAngle,h=this.initialAngle,c=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var f=0;f<t.length;f++){var g=s.group({class:"apexcharts-series apexcharts-pie-series",seriesName:w.escapeString(i.globals.seriesNames[f]),rel:f+1,"data:realIndex":f});r.add(g),l=c,h=(o=h)+t[f],c=l+this.prevSectorAngleArr[f];var u=h<o?this.fullAngle+h-o:h-o,d=n.fillPath({seriesNumber:f,size:this.sliceSizes[f],value:e[f]}),p=this.getChangedPath(l,c),b=s.drawPath({d:p,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[f]:this.lineColorArr,strokeWidth:0,fill:d,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(f)});if(b.attr({index:0,j:f}),a.setSelectionFilter(b,0,f),i.config.chart.dropShadow.enabled){var y=i.config.chart.dropShadow;a.dropShadow(b,y,f)}this.addListeners(b,this.donutDataLabels),S.setAttrs(b.node,{"data:angle":u,"data:startAngle":o,"data:strokeWidth":this.strokeWidth,"data:value":e[f]});var v={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?v=w.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(o+u/2)%this.fullAngle):"donut"===this.chartType&&(v=w.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(o+u/2)%this.fullAngle)),g.add(b);var m=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0==(m=u/this.fullAngle*i.config.chart.animations.speed)&&(m=1),this.animDur=m+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(b,{size:this.sliceSizes[f],endAngle:h,startAngle:o,prevStartAngle:l,prevEndAngle:c,animateStartingPos:!0,i:f,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(b,{size:this.sliceSizes[f],endAngle:h,startAngle:o,i:f,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:m}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&b.click(this.pieClicked.bind(this,f)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(f)>-1&&this.pieClicked(f),i.config.dataLabels.enabled){var x=v.x,C=v.y,E=100*u/this.fullAngle+"%";if(0!==u&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[f]){var A=i.config.dataLabels.formatter;void 0!==A&&(E=A(i.globals.seriesPercent[f][0],{seriesIndex:f,w:i}));var I=i.globals.dataLabels.style.colors[f],k=s.group({class:"apexcharts-datalabels"}),P=s.drawText({x:x,y:C,text:E,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:I});if(k.add(P),i.config.dataLabels.dropShadow.enabled){var L=i.config.dataLabels.dropShadow;a.dropShadow(P,L)}P.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(P.node.classList.add("apexcharts-pie-label-delay"),P.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(k)}}}return r}},{key:"addListeners",value:function(t,e){var i=new S(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=this.w,a=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,s=a,n=e.startAngle,r=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(n=e.prevEndAngle,s=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===i.config.series.length-1&&(a+r>this.fullAngle?e.endAngle=e.endAngle-(a+r):a+r<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(a+r)))),a===this.fullAngle&&(a=this.fullAngle-.01),this.animateArc(t,n,r,a,s,e)}},{key:"animateArc",value:function(t,e,i,a,s,n){var r,o=this,l=this.w,h=new b(this.ctx),c=n.size;(isNaN(e)||isNaN(s))&&(e=i,s=a,n.dur=0);var f=a,g=i,u=e<i?this.fullAngle+e-i:e-i;l.globals.dataChanged&&n.shouldSetPrevPaths&&n.prevEndAngle&&(r=o.getPiePath({me:o,startAngle:n.prevStartAngle,angle:n.prevEndAngle<n.prevStartAngle?this.fullAngle+n.prevEndAngle-n.prevStartAngle:n.prevEndAngle-n.prevStartAngle,size:c}),t.attr({d:r})),0!==n.dur?t.animate(n.dur,l.globals.easing,n.animBeginArr[n.i]).afterAll((function(){"pie"!==o.chartType&&"donut"!==o.chartType&&"polarArea"!==o.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":o.strokeWidth}),n.i===l.config.series.length-1&&h.animationCompleted(t)})).during((function(l){f=u+(a-u)*l,n.animateStartingPos&&(f=s+(a-s)*l,g=e-s+(i-(e-s))*l),r=o.getPiePath({me:o,startAngle:g,angle:f,size:c}),t.node.setAttribute("data:pathOrig",r),t.attr({d:r})})):(r=o.getPiePath({me:o,startAngle:g,angle:a,size:c}),n.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",r),t.attr({d:r,"stroke-width":o.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,a=this,s=a.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),n=i.globals.dom.Paper.select(".apexcharts-".concat(a.chartType.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==n.attr("data:pieClicked")){var r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(r,(function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");t.setAttribute("d",e)})),n.attr("data:pieClicked","true");var o=parseInt(n.attr("data:startAngle"),10),l=parseInt(n.attr("data:angle"),10);e=a.getPiePath({me:a,startAngle:o,angle:l,size:s}),360!==l&&n.plot(e)}else{n.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(n.node,this.donutDataLabels);var h=n.attr("data:pathOrig");n.attr({d:h})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e=t.me,i=t.startAngle,a=t.angle,s=t.size,n=i,r=Math.PI*(n-90)/180,o=a+i;Math.ceil(o)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(o=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(o)>this.fullAngle&&(o-=this.fullAngle);var l=Math.PI*(o-90)/180,h=e.centerX+s*Math.cos(r),c=e.centerY+s*Math.sin(r),f=e.centerX+s*Math.cos(l),g=e.centerY+s*Math.sin(l),u=w.polarToCartesian(e.centerX,e.centerY,e.donutSize,o),d=w.polarToCartesian(e.centerX,e.centerY,e.donutSize,n),p=a>180?1:0,b=["M",h,c,"A",s,s,0,p,1,f,g];return"donut"===e.chartType?[].concat(b,["L",u.x,u.y,"A",e.donutSize,e.donutSize,0,p,0,d.x,d.y,"L",h,c,"z"]).join(" "):"pie"===e.chartType||"polarArea"===e.chartType?[].concat(b,["L",e.centerX,e.centerY,"L",h,c]).join(" "):[].concat(b).join(" ")}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new q(this.ctx),a=new S(this.ctx),s=new kt(this.ctx),n=a.group(),r=a.group(),o=i.niceScale(0,Math.ceil(this.maxY),e.config.yaxis[0].tickAmount,0,!0),l=o.result.reverse(),h=o.result.length;this.maxY=o.niceMax;for(var c=e.globals.radialSize,f=c/(h-1),g=0;g<h-1;g++){var u=a.drawCircle(c);if(u.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var d=s.drawYAxisTexts(this.centerX,this.centerY-c+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,g,l[g]);r.add(d)}n.add(u),c-=f}this.drawSpokes(t),t.add(n),t.add(r)}},{key:"renderInnerDataLabels",value:function(t,e){var i=this.w,a=new S(this.ctx),s=a.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX?e.translateX:0,", ").concat(e.translateY?e.translateY:0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),n=t.total.show;s.node.style.opacity=e.opacity;var r,o,l=e.centerX,h=e.centerY;r=void 0===t.name.color?i.globals.colors[0]:t.name.color;var c=t.name.fontSize,f=t.name.fontFamily,g=t.name.fontWeight;o=void 0===t.value.color?i.config.chart.foreColor:t.value.color;var u=t.value.formatter,d="",p="";if(n?(r=t.total.color,c=t.total.fontSize,f=t.total.fontFamily,g=t.total.fontWeight,p=t.total.label,d=t.total.formatter(i)):1===i.globals.series.length&&(d=u(i.globals.series[0],i),p=i.globals.seriesNames[0]),p&&(p=t.name.formatter(p,t.total.show,i)),t.name.show){var y=a.drawText({x:l,y:h+parseFloat(t.name.offsetY),text:p,textAnchor:"middle",foreColor:r,fontSize:c,fontWeight:g,fontFamily:f});y.node.classList.add("apexcharts-datalabel-label"),s.add(y)}if(t.value.show){var b=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,v=a.drawText({x:l,y:h+b,text:d,textAnchor:"middle",foreColor:o,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});v.node.classList.add("apexcharts-datalabel-value"),s.add(v)}return s}},{key:"printInnerLabels",value:function(t,e,i,a){var s,n=this.w;a?s=void 0===t.name.color?n.globals.colors[parseInt(a.parentNode.getAttribute("rel"),10)-1]:t.name.color:n.globals.series.length>1&&t.total.show&&(s=t.total.color);var r=n.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),o=n.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,n),a||"function"!=typeof t.total.formatter||(i=t.total.formatter(n));var l=e===t.total.label;e=t.name.formatter(e,l,n),null!==r&&(r.textContent=e),null!==o&&(o.textContent=i),null!==r&&(r.style.fill=s)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,a=t.getAttribute("data:value"),s=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,s,a,t);var n=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==n&&(n.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,i=this.w,a=new S(this.ctx),s=i.config.plotOptions.polarArea.spokes;if(0!==s.strokeWidth){for(var n=[],r=360/i.globals.series.length,o=0;o<i.globals.series.length;o++)n.push(w.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+r*o));n.forEach((function(i,n){var r=a.drawLine(i.x,i.y,e.centerX,e.centerY,Array.isArray(s.connectorColors)?s.connectorColors[n]:s.connectorColors);t.add(r)}))}}},{key:"revertDataLabelsInner",value:function(t,e,i){var a=this,s=this.w,n=s.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),r=!1,o=s.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var i=t.makeSliceOut,s=t.printLabel;Array.prototype.forEach.call(o,(function(t){"true"===t.getAttribute("data:pieClicked")&&(i&&(r=!0),s&&a.printDataLabelsInner(t,e))}))};if(l({makeSliceOut:!0,printLabel:!1}),e.total.show&&s.globals.series.length>1)r&&!e.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(e,e.total.label,e.total.formatter(s));else if(l({makeSliceOut:!1,printLabel:!0}),!r)if(s.globals.selectedDataPoints.length&&s.globals.series.length>1)if(s.globals.selectedDataPoints[0].length>0){var h=s.globals.selectedDataPoints[0],c=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h));this.printDataLabelsInner(c,e)}else n&&s.globals.selectedDataPoints.length&&0===s.globals.selectedDataPoints[0].length&&(n.style.opacity=0);else n&&s.globals.series.length>1&&(n.style.opacity=0)}}]),t}(),Lt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new S(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.coreUtils=new A(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return h(t,[{key:"draw",value:function(t){var i=this,a=this.w,s=new N(this.ctx),e=[],n=new R(this.ctx);t.length&&(this.dataPointsLen=t[a.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var r=a.globals.gridWidth/2,o=a.globals.gridHeight/2,h=r+a.config.plotOptions.radar.offsetX,c=o+a.config.plotOptions.radar.offsetY,f=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(h||0,", ").concat(c||0,")")}),g=[],u=null,d=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach((function(t,r){var o=t.length===a.globals.dataPoints,h=i.graphics.group().attr({class:"apexcharts-series","data:longestSeries":o,seriesName:w.escapeString(a.globals.seriesNames[r]),rel:r+1,"data:realIndex":r});i.dataRadiusOfPercent[r]=[],i.dataRadius[r]=[],i.angleArr[r]=[],t.forEach((function(t,e){var a=Math.abs(i.maxValue-i.minValue);t+=Math.abs(i.minValue),i.isLog&&(t=i.coreUtils.getLogVal(t,0)),i.dataRadiusOfPercent[r][e]=t/a,i.dataRadius[r][e]=i.dataRadiusOfPercent[r][e]*i.size,i.angleArr[r][e]=e*i.disAngle})),g=i.getDataPointsPos(i.dataRadius[r],i.angleArr[r]);var c=i.createPaths(g,{x:0,y:0});u=i.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),d=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":r}),a.globals.delayedElements.push({el:u.node,index:r});var f={i:r,realIndex:r,animationDelay:r,initialSpeed:a.config.chart.animations.speed,dataChangeSpeed:a.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:a.globals.stroke.colors[r],strokeLineCap:a.config.stroke.lineCap},p=null;a.globals.previousPaths.length>0&&(p=i.getPreviousPath(r));for(var b=0;b<c.linePathsTo.length;b++){var y=i.graphics.renderPaths(l(l({},f),{},{pathFrom:null===p?c.linePathsFrom[b]:p,pathTo:c.linePathsTo[b],strokeWidth:Array.isArray(i.strokeWidth)?i.strokeWidth[r]:i.strokeWidth,fill:"none",drawShadow:!1}));h.add(y);var v=s.fillPath({seriesNumber:r}),m=i.graphics.renderPaths(l(l({},f),{},{pathFrom:null===p?c.areaPathsFrom[b]:p,pathTo:c.areaPathsTo[b],strokeWidth:0,fill:v,drawShadow:!1}));if(a.config.chart.dropShadow.enabled){var x=new _(i.ctx),S=a.config.chart.dropShadow;x.dropShadow(m,Object.assign({},S,{noUserSpaceOnUse:!0}),r)}h.add(m)}t.forEach((function(t,s){var e=new T(i.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:r,dataPointIndex:s}),o=i.graphics.drawMarker(g[s].x,g[s].y,e);o.attr("rel",s),o.attr("j",s),o.attr("index",r),o.node.setAttribute("default-marker-size",e.pSize);var c=i.graphics.group({class:"apexcharts-series-markers"});c&&c.add(o),u.add(c),h.add(u);var f=a.config.dataLabels;if(f.enabled){var p=f.formatter(a.globals.series[r][s],{seriesIndex:r,dataPointIndex:s,w:a});n.plotDataLabelsText({x:g[s].x,y:g[s].y,text:p,textAnchor:"middle",i:r,j:r,parent:d,offsetCorrection:!1,dataLabelsConfig:l({},f)})}h.add(d)})),e.push(h)})),this.drawPolygons({parent:f}),a.config.xaxis.labels.show){var p=this.drawXAxisTexts();f.add(p)}return e.forEach((function(t){f.add(t)})),f.add(this.yaxisLabels),f}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,a=t.parent,s=new kt(this.ctx),n=i.globals.yAxisScale[0].result.reverse(),r=n.length,o=[],l=this.size/(r-1),h=0;h<r;h++)o[h]=l*h;o.reverse();var c=[],f=[];o.forEach((function(t,i){var a=w.getPolygonPos(t,e.dataPointsLen),s="";a.forEach((function(t,a){if(0===i){var n=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[a]:e.polygons.connectorColors);f.push(n)}0===a&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),s+=t.x+","+t.y+" "})),c.push(s)})),c.forEach((function(t,s){var n=e.polygons.strokeColors,r=e.polygons.strokeWidth,o=e.graphics.drawPolygon(t,Array.isArray(n)?n[s]:n,Array.isArray(r)?r[s]:r,i.globals.radarPolygons.fill.colors[s]);a.add(o)})),f.forEach((function(t){a.add(t)})),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(t,i){var a=s.drawYAxisTexts(t.x,t.y,i,n[i]);e.yaxisLabels.add(a)}))}},{key:"drawXAxisTexts",value:function(){var t=this,i=this.w,a=i.config.xaxis.labels,s=this.graphics.group({class:"apexcharts-xaxis"}),e=w.getPolygonPos(this.size,this.dataPointsLen);return i.globals.labels.forEach((function(n,r){var o=i.config.xaxis.labels.formatter,h=new R(t.ctx);if(e[r]){var c=t.getTextPos(e[r],t.size),f=o(n,{seriesIndex:-1,dataPointIndex:r,w:i});h.plotDataLabelsText({x:c.newX,y:c.newY,text:f,textAnchor:c.textAnchor,i:r,j:r,parent:s,color:Array.isArray(a.style.colors)&&a.style.colors[r]?a.style.colors[r]:"#a8a8a8",dataLabelsConfig:l({textAnchor:c.textAnchor,dropShadow:{enabled:!1}},a),offsetCorrection:!1})}})),s}},{key:"createPaths",value:function(t,e){var i=this,a=[],s=[],n=[],r=[];if(t.length){s=[this.graphics.move(e.x,e.y)],r=[this.graphics.move(e.x,e.y)];var o=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach((function(e,a){o+=i.graphics.line(e.x,e.y),l+=i.graphics.line(e.x,e.y),a===t.length-1&&(o+="Z",l+="Z")})),a.push(o),n.push(l)}return{linePathsFrom:s,linePathsTo:a,areaPathsFrom:r,areaPathsTo:n}}},{key:"getTextPos",value:function(t,e){var i="middle",a=t.x,s=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",a+=10):t.x<0&&(i="end",a-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?s-=10:t.y>0&&(s+=10)),{textAnchor:i,newX:a,newY:s}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,a=0;a<e.globals.previousPaths.length;a++){var s=e.globals.previousPaths[a];s.paths.length>0&&parseInt(s.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[a].paths[0]&&(i=e.globals.previousPaths[a].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var a=[],s=0;s<i;s++){var n={};n.x=t[s]*Math.sin(e[s]),n.y=-t[s]*Math.cos(e[s]),a.push(n)}return a}}]),t}(),Mt=function(t){f(i,t);var e=m(i);function i(t){var s;a(this,i),(s=e.call(this,t)).ctx=t,s.w=t.w,s.animBeginArr=[0],s.animDur=0;var n=s.w;return s.startAngle=n.config.plotOptions.radialBar.startAngle,s.endAngle=n.config.plotOptions.radialBar.endAngle,s.totalAngle=Math.abs(n.config.plotOptions.radialBar.endAngle-n.config.plotOptions.radialBar.startAngle),s.trackStartAngle=n.config.plotOptions.radialBar.track.startAngle,s.trackEndAngle=n.config.plotOptions.radialBar.track.endAngle,s.donutDataLabels=s.w.config.plotOptions.radialBar.dataLabels,s.radialDataLabels=s.donutDataLabels,s.trackStartAngle||(s.trackStartAngle=s.startAngle),s.trackEndAngle||(s.trackEndAngle=s.endAngle),360===s.endAngle&&(s.endAngle=359.99),s.margin=parseInt(n.config.plotOptions.radialBar.track.margin,10),s}return h(i,[{key:"draw",value:function(t){var e=this.w,i=new S(this.ctx),a=i.group({class:"apexcharts-radialbar"});if(e.globals.noData)return a;var s=i.group(),n=this.defaultSize/2,r=e.globals.gridWidth/2,o=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(o=o-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var h=this.drawTracks({size:o,centerX:r,centerY:n,colorArr:l,series:t});s.add(h)}var c=this.drawArcs({size:o,centerX:r,centerY:n,colorArr:l,series:t}),f=360;e.config.plotOptions.radialBar.startAngle<0&&(f=this.totalAngle);var g=(360-f)/360;if(e.globals.radialSize=o-o*g,this.radialDataLabels.value.show){var u=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=u*g}return s.add(c.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(c.g.add(c.elHollow),c.dataLabels&&c.g.add(c.dataLabels)),a.add(s),a}},{key:"drawTracks",value:function(t){var e=this.w,i=new S(this.ctx),a=i.group({class:"apexcharts-tracks"}),s=new _(this.ctx),n=new N(this.ctx),r=this.getStrokeWidth(t);t.size=t.size-r/2;for(var o=0;o<t.series.length;o++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});a.add(l),l.attr({rel:o+1}),t.size=t.size-r-this.margin;var h=e.config.plotOptions.radialBar.track,c=n.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(h.background)?h.background[o]:h.background,solid:!0}),f=this.trackStartAngle,g=this.trackEndAngle;Math.abs(g)+Math.abs(f)>=360&&(g=360-Math.abs(this.startAngle)-.1);var u=i.drawPath({d:"",stroke:c,strokeWidth:r*parseInt(h.strokeWidth,10)/100,fill:"none",strokeOpacity:h.opacity,classes:"apexcharts-radialbar-area"});if(h.dropShadow.enabled){var d=h.dropShadow;s.dropShadow(u,d)}l.add(u),u.attr("id","apexcharts-radialbarTrack-"+o),this.animatePaths(u,{centerX:t.centerX,centerY:t.centerY,endAngle:g,startAngle:f,size:t.size,i:o,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return a}},{key:"drawArcs",value:function(t){var e=this.w,i=new S(this.ctx),a=new N(this.ctx),s=new _(this.ctx),n=i.group(),r=this.getStrokeWidth(t);t.size=t.size-r/2;var o=e.config.plotOptions.radialBar.hollow.background,l=t.size-r*t.series.length-this.margin*t.series.length-r*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,h=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(o=this.drawHollowImage(t,n,l,o));var c=this.drawHollow({size:h,centerX:t.centerX,centerY:t.centerY,fill:o||"transparent"});if(e.config.plotOptions.radialBar.hollow.dropShadow.enabled){var f=e.config.plotOptions.radialBar.hollow.dropShadow;s.dropShadow(c,f)}var g=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(g=0);var u=null;this.radialDataLabels.show&&(u=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:g})),"back"===e.config.plotOptions.radialBar.hollow.position&&(n.add(c),u&&n.add(u));var d=!1;e.config.plotOptions.radialBar.inverseOrder&&(d=!0);for(var p=d?t.series.length-1:0;d?p>=0:p<t.series.length;d?p--:p++){var b=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:w.escapeString(e.globals.seriesNames[p])});n.add(b),b.attr({rel:p+1,"data:realIndex":p}),this.ctx.series.addCollapsedClassToSeries(b,p),t.size=t.size-r-this.margin;var y=a.fillPath({seriesNumber:p,size:t.size,value:t.series[p]}),v=this.startAngle,m=void 0,x=w.negToZero(t.series[p]>100?100:t.series[p])/100,C=Math.round(this.totalAngle*x)+this.startAngle,E=void 0;e.globals.dataChanged&&(m=this.startAngle,E=Math.round(this.totalAngle*w.negToZero(e.globals.previousPaths[p])/100)+m),Math.abs(C)+Math.abs(v)>=360&&(C-=.01),Math.abs(E)+Math.abs(m)>=360&&(E-=.01);var A=C-v,I=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[p]:e.config.stroke.dashArray,k=i.drawPath({d:"",stroke:y,strokeWidth:r,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+p,strokeDashArray:I});if(S.setAttrs(k.node,{"data:angle":A,"data:value":t.series[p]}),e.config.chart.dropShadow.enabled){var P=e.config.chart.dropShadow;s.dropShadow(k,P,p)}s.setSelectionFilter(k,0,p),this.addListeners(k,this.radialDataLabels),b.add(k),k.attr({index:0,j:p});var L=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(L=e.config.chart.animations.speed),e.globals.dataChanged&&(L=e.config.chart.animations.dynamicAnimation.speed),this.animDur=L/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(k,{centerX:t.centerX,centerY:t.centerY,endAngle:C,startAngle:v,prevEndAngle:E,prevStartAngle:m,size:t.size,i:p,totalItems:2,animBeginArr:this.animBeginArr,dur:L,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:n,elHollow:c,dataLabels:u}}},{key:"drawHollow",value:function(t){var e=new S(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,i,a){var s=this.w,n=new N(this.ctx),r=w.randomId(),o=s.config.plotOptions.radialBar.hollow.image;if(s.config.plotOptions.radialBar.hollow.imageClipped)n.clippedImgArea({width:i,height:i,image:o,patternID:"pattern".concat(s.globals.cuid).concat(r)}),a="url(#pattern".concat(s.globals.cuid).concat(r,")");else{var l=s.config.plotOptions.radialBar.hollow.imageWidth,h=s.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===h){var c=s.globals.dom.Paper.image(o).loaded((function(e){this.move(t.centerX-e.width/2+s.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+s.config.plotOptions.radialBar.hollow.imageOffsetY)}));e.add(c)}else{var f=s.globals.dom.Paper.image(o).loaded((function(e){this.move(t.centerX-l/2+s.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-h/2+s.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,h)}));e.add(f)}}return a}},{key:"getStrokeWidth",value:function(t){var e=this.w;return t.size*(100-parseInt(e.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}}]),i}(Pt),Nt=function(){function t(e){a(this,t),this.w=e.w,this.lineCtx=e}return h(t,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if("line"===i.config.chart.type&&("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[t])&&new A(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var a=e[t].slice();a[a.length-1]=a[a.length-1]+1e-6,e[t]=a}return e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.realIndex,a=t.x,s=t.y,n=t.i,r=t.j,o=t.prevY,l=this.w,h=[],c=[];if(0===r){var f=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(f=(l.globals.seriesX[i][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),h.push(f),c.push(w.isNumber(e[n][0])?o+l.config.markers.offsetY:null),h.push(a+l.config.markers.offsetX),c.push(w.isNumber(e[n][r+1])?s+l.config.markers.offsetY:null)}else h.push(a+l.config.markers.offsetX),c.push(w.isNumber(e[n][r+1])?s+l.config.markers.offsetY:null);return{x:h,y:c}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,a=t.realIndex,s=this.w,n=0;n<s.globals.previousPaths.length;n++){var r=s.globals.previousPaths[n];("line"===r.type||"area"===r.type)&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(a,10)&&("line"===r.type?(this.lineCtx.appendPathFrom=!1,e=s.globals.previousPaths[n].paths[0].d):"area"===r.type&&(this.lineCtx.appendPathFrom=!1,i=s.globals.previousPaths[n].paths[0].d,s.config.stroke.show&&s.globals.previousPaths[n].paths[1]&&(e=s.globals.previousPaths[n].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e=t.i,i=t.series,a=t.prevY,s=t.lineYPosition,n=this.w;if(void 0!==i[e][0])a=(s=n.config.chart.stacked&&e>0?this.lineCtx.prevSeriesY[e-1][0]:this.lineCtx.zeroY)-i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(n.config.chart.stacked&&e>0&&void 0===i[e][0])for(var r=e-1;r>=0;r--)if(null!==i[r][0]&&void 0!==i[r][0]){a=s=this.lineCtx.prevSeriesY[r][0];break}return{prevY:a,lineYPosition:s}}}]),t}(),Tt=function(){function t(e,i,s){a(this,t),this.ctx=e,this.w=e.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||s,this.scatter=new O(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Nt(this),this.markers=new T(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return h(t,[{key:"draw",value:function(t,e,i){var a=this.w,s=new S(this.ctx),n=a.globals.comboCharts?e:a.config.chart.type,r=s.group({class:"apexcharts-".concat(n,"-series apexcharts-plot-series")}),o=new A(this.ctx,a);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=o.getLogSeries(t),this.yRatio=o.getLogYRatios(this.yRatio);for(var l=[],h=0;h<t.length;h++){t=this.lineHelpers.sameValueSeriesFix(h,t);var c=a.globals.comboCharts?i[h]:h;this._initSerieVariables(t,h,c);var f=[],g=[],u=a.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,c),a.globals.isXNumeric&&a.globals.seriesX.length>0&&(u=(a.globals.seriesX[c][0]-a.globals.minX)/this.xRatio),g.push(u);var d,p=u,y=p,b=this.zeroY;b=this.lineHelpers.determineFirstPrevY({i:h,series:t,prevY:b,lineYPosition:0}).prevY,f.push(b),d=b;var v=this._calculatePathsFrom({series:t,i:h,realIndex:c,prevX:y,prevY:b}),m=this._iterateOverDataPoints({series:t,realIndex:c,i:h,x:u,y:1,pX:p,pY:d,pathsFrom:v,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:g,yArrj:f});this._handlePaths({type:n,realIndex:c,i:h,paths:m}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),l.push(this.elSeries)}if(a.config.chart.stacked)for(var x=l.length;x>0;x--)r.add(l[x-1]);else for(var w=0;w<l.length;w++)r.add(l[w]);return r}},{key:"_initSerieVariables",value:function(t,e,i){var a=this.w,s=new S(this.ctx);this.xDivision=a.globals.gridWidth/(a.globals.dataPoints-("on"===a.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(a.config.stroke.width)?a.config.stroke.width[i]:a.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=i),this.isReversed=a.config.yaxis[this.yaxisIndex]&&a.config.yaxis[this.yaxisIndex].reversed,this.zeroY=a.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?a.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>a.globals.gridHeight||"end"===a.config.plotOptions.area.fillTo)&&(this.areaBottomY=a.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=s.group({class:"apexcharts-series",seriesName:w.escapeString(a.globals.seriesNames[i])}),this.elPointsMain=s.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=s.group({class:"apexcharts-datalabels","data:realIndex":i});var n=t[e].length===a.globals.dataPoints;this.elSeries.attr({"data:longestSeries":n,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,a,s,n=t.series,r=t.i,o=t.realIndex,l=t.prevX,h=t.prevY,c=this.w,f=new S(this.ctx);if(null===n[r][0]){for(var g=0;g<n[r].length;g++)if(null!==n[r][g]){l=this.xDivision*g,h=this.zeroY-n[r][g]/this.yRatio[this.yaxisIndex],e=f.move(l,h),i=f.move(l,this.areaBottomY);break}}else e=f.move(l,h),i=f.move(l,this.areaBottomY)+f.line(l,h);if(a=f.move(-1,this.zeroY)+f.line(-1,this.zeroY),s=f.move(-1,this.zeroY)+f.line(-1,this.zeroY),c.globals.previousPaths.length>0){var u=this.lineHelpers.checkPreviousPaths({pathFromLine:a,pathFromArea:s,realIndex:o});a=u.pathFromLine,s=u.pathFromArea}return{prevX:l,prevY:h,linePath:e,areaPath:i,pathFromLine:a,pathFromArea:s}}},{key:"_handlePaths",value:function(t){var i=t.type,a=t.realIndex,s=t.i,e=t.paths,n=this.w,r=new S(this.ctx),o=new N(this.ctx);this.prevSeriesY.push(e.yArrj),n.globals.seriesXvalues[a]=e.xArrj,n.globals.seriesYvalues[a]=e.yArrj;var h=n.config.forecastDataPoints;if(h.count>0){var c=n.globals.seriesXvalues[a][n.globals.seriesXvalues[a].length-h.count-1],f=r.drawRect(c,0,n.globals.gridWidth,n.globals.gridHeight,0);n.globals.dom.elForecastMask.appendChild(f.node);var g=r.drawRect(0,0,c,n.globals.gridHeight,0);n.globals.dom.elNonForecastMask.appendChild(g.node)}this.pointsChart||n.globals.delayedElements.push({el:this.elPointsMain.node,index:a});var u={i:s,realIndex:a,animationDelay:s,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(i)};if("area"===i)for(var d=o.fillPath({seriesNumber:a}),p=0;p<e.areaPaths.length;p++){var y=r.renderPaths(l(l({},u),{},{pathFrom:e.pathFromArea,pathTo:e.areaPaths[p],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:d}));this.elSeries.add(y)}if(n.config.stroke.show&&!this.pointsChart){var b=null;b="line"===i?o.fillPath({seriesNumber:a,i:s}):n.globals.stroke.colors[a];for(var v=0;v<e.linePaths.length;v++){var m=l(l({},u),{},{pathFrom:e.pathFromLine,pathTo:e.linePaths[v],stroke:b,strokeWidth:this.strokeWidth,strokeLineCap:n.config.stroke.lineCap,fill:"none"}),x=r.renderPaths(m);if(this.elSeries.add(x),h.count>0){var w=r.renderPaths(m);w.node.setAttribute("stroke-dasharray",h.dashArray),h.strokeWidth&&w.node.setAttribute("stroke-width",h.strokeWidth),this.elSeries.add(w),w.attr("clip-path","url(#forecastMask".concat(n.globals.cuid,")")),x.attr("clip-path","url(#nonForecastMask".concat(n.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){for(var e=t.series,i=t.realIndex,a=t.i,s=t.x,n=t.y,r=t.pX,o=t.pY,l=t.pathsFrom,h=t.linePaths,c=t.areaPaths,f=t.seriesIndex,g=t.lineYPosition,u=t.xArrj,d=t.yArrj,p=this.w,b=new S(this.ctx),y=this.yRatio,v=l.prevY,m=l.linePath,x=l.areaPath,_=l.pathFromLine,C=l.pathFromArea,E=w.isNumber(p.globals.minYArr[i])?p.globals.minYArr[i]:p.globals.minY,A=p.globals.dataPoints>1?p.globals.dataPoints-1:p.globals.dataPoints,I=0;I<A;I++){var k=void 0===e[a][I+1]||null===e[a][I+1];if(p.globals.isXNumeric){var P=p.globals.seriesX[i][I+1];void 0===p.globals.seriesX[i][I+1]&&(P=p.globals.seriesX[i][A-1]),s=(P-p.globals.minX)/this.xRatio}else s+=this.xDivision;g=p.config.chart.stacked&&a>0&&p.globals.collapsedSeries.length<p.config.series.length-1?this.prevSeriesY[function(t){for(var e=t,i=0;i<p.globals.series.length;i++)if(p.globals.collapsedSeriesIndices.indexOf(t)>-1){e--;break}return e>=0?e:0}(a-1)][I+1]:this.zeroY,n=k?g-E/y[this.yaxisIndex]+2*(this.isReversed?E/y[this.yaxisIndex]:0):g-e[a][I+1]/y[this.yaxisIndex]+2*(this.isReversed?e[a][I+1]/y[this.yaxisIndex]:0),u.push(s),d.push(n);var L=this.lineHelpers.calculatePoints({series:e,x:s,y:n,realIndex:i,i:a,j:I,prevY:v}),M=this._createPaths({series:e,i:a,realIndex:i,j:I,x:s,y:n,pX:r,pY:o,linePath:m,areaPath:x,linePaths:h,areaPaths:c,seriesIndex:f});c=M.areaPaths,h=M.linePaths,r=M.pX,o=M.pY,x=M.areaPath,m=M.linePath,this.appendPathFrom&&(_+=b.line(s,this.zeroY),C+=b.line(s,this.zeroY)),this.handleNullDataPoints(e,L,a,I,i),this._handleMarkersAndLabels({pointsPos:L,series:e,x:s,y:n,prevY:v,i:a,j:I,realIndex:i})}return{yArrj:d,xArrj:u,pathFromArea:C,areaPaths:c,pathFromLine:_,linePaths:h}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.pointsPos;t.series,t.x,t.y,t.prevY;var i=t.i,a=t.j,s=t.realIndex,n=this.w,r=new R(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,a,{realIndex:s,pointsPos:e,zRatio:this.zRatio,elParent:this.elPointsMain});else{n.globals.series[i].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var o=this.markers.plotChartMarkers(e,s,a+1);null!==o&&this.elPointsMain.add(o)}var l=r.drawDataLabel(e,s,a+1,null);null!==l&&this.elDataLabelsWrap.add(l)}},{key:"_createPaths",value:function(t){var e=t.series,i=t.i,a=t.realIndex,s=t.j,n=t.x,r=t.y,o=t.pX,l=t.pY,h=t.linePath,c=t.areaPath,f=t.linePaths,g=t.areaPaths,u=t.seriesIndex,d=this.w,p=new S(this.ctx),y=d.config.stroke.curve,b=this.areaBottomY;if(Array.isArray(d.config.stroke.curve)&&(y=Array.isArray(u)?d.config.stroke.curve[u[i]]:d.config.stroke.curve[i]),"smooth"===y){var v=.35*(n-o);d.globals.hasNullValues?(null!==e[i][s]&&(null!==e[i][s+1]?(h=p.move(o,l)+p.curve(o+v,l,n-v,r,n+1,r),c=p.move(o+1,l)+p.curve(o+v,l,n-v,r,n+1,r)+p.line(n,b)+p.line(o,b)+"z"):(h=p.move(o,l),c=p.move(o,l)+"z")),f.push(h),g.push(c)):(h+=p.curve(o+v,l,n-v,r,n,r),c+=p.curve(o+v,l,n-v,r,n,r)),o=n,l=r,s===e[i].length-2&&(c=c+p.curve(o,l,n,r,n,b)+p.move(n,r)+"z",d.globals.hasNullValues||(f.push(h),g.push(c)))}else{if(null===e[i][s+1]){h+=p.move(n,r);var m=d.globals.isXNumeric?(d.globals.seriesX[a][s]-d.globals.minX)/this.xRatio:n-this.xDivision;c=c+p.line(m,b)+p.move(n,r)+"z"}null===e[i][s]&&(h+=p.move(n,r),c+=p.move(n,b)),"stepline"===y?(h=h+p.line(n,null,"H")+p.line(null,r,"V"),c=c+p.line(n,null,"H")+p.line(null,r,"V")):"straight"===y&&(h+=p.line(n,r),c+=p.line(n,r)),s===e[i].length-2&&(c=c+p.line(n,b)+p.move(n,r)+"z",f.push(h),g.push(c))}return{linePaths:f,areaPaths:g,pX:o,pY:l,linePath:h,areaPath:c}}},{key:"handleNullDataPoints",value:function(t,e,i,a,s){var n=this.w;if(null===t[i][a]&&n.config.markers.showNullDataPoints||1===t[i].length){var r=this.markers.plotChartMarkers(e,s,a+1,this.strokeWidth-n.config.markers.strokeWidth/2,!0);null!==r&&this.elPointsMain.add(r)}}}]),t}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function t(e,i,a,s){this.xoffset=e,this.yoffset=i,this.height=s,this.width=a,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(t){var e,i=[],a=this.xoffset,s=this.yoffset,r=n(t)/this.height,o=n(t)/this.width;if(this.width>=this.height)for(e=0;e<t.length;e++)i.push([a,s,a+r,s+t[e]/r]),s+=t[e]/r;else for(e=0;e<t.length;e++)i.push([a,s,a+t[e]/o,s+o]),a+=t[e]/o;return i},this.cutArea=function(e){var i;if(this.width>=this.height){var a=e/this.height,s=this.width-a;i=new t(this.xoffset+a,this.yoffset,s,this.height)}else{var n=e/this.width,r=this.height-n;i=new t(this.xoffset,this.yoffset+n,this.width,r)}return i}}function e(e,a,s,r,o){return r=void 0===r?0:r,o=void 0===o?0:o,function(t){var e,i,a=[];for(e=0;e<t.length;e++)for(i=0;i<t[e].length;i++)a.push(t[e][i]);return a}(i(function(t,e){var i,a=[],s=e/n(t);for(i=0;i<t.length;i++)a[i]=t[i]*s;return a}(e,a*s),[],new t(r,o,a,s),[]))}function i(t,e,s,r){var o,l,h;if(0!==t.length)return o=s.shortestEdge(),function(t,e,i){var s;return 0===t.length||((s=t.slice()).push(e),a(t,i)>=a(s,i))}(e,l=t[0],o)?(e.push(l),i(t.slice(1),e,s,r)):(h=s.cutArea(n(e),r),r.push(s.getCoordinates(e)),i(t,[],h,r)),r;r.push(s.getCoordinates(e))}function a(t,e){var i=Math.min.apply(Math,t),a=Math.max.apply(Math,t),s=n(t);return Math.max(Math.pow(e,2)*a/Math.pow(s,2),Math.pow(s,2)/(Math.pow(e,2)*i))}function s(t){return t&&t.constructor===Array}function n(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e];return i}function r(t){var e,i=0;if(s(t[0]))for(e=0;e<t.length;e++)i+=r(t[e]);else i=n(t);return i}return function t(i,a,n,o,l){o=void 0===o?0:o,l=void 0===l?0:l;var h,c,f=[],g=[];if(s(i[0])){for(c=0;c<i.length;c++)f[c]=r(i[c]);for(h=e(f,a,n,o,l),c=0;c<i.length;c++)g.push(t(i[c],h[c][2]-h[c][0],h[c][3]-h[c][1],h[c][0],h[c][1]))}else g=e(i,a,n,o,l);return g}}();var Ot,Rt,Dt=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new At(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return h(t,[{key:"draw",value:function(t){var e=this,i=this.w,a=new S(this.ctx),s=new N(this.ctx),n=a.group({class:"apexcharts-treemap"});if(i.globals.noData)return n;var r=[];return t.forEach((function(t){var e=t.map((function(t){return Math.abs(t)}));r.push(e)})),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach((function(t,i){t.data.forEach((function(t){Array.isArray(e.labels[i])||(e.labels[i]=[]),e.labels[i].push(t.x)}))})),window.TreemapSquared.generate(r,i.globals.gridWidth,i.globals.gridHeight).forEach((function(r,o){var l=a.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:w.escapeString(i.globals.seriesNames[o]),rel:o+1,"data:realIndex":o});if(i.config.chart.dropShadow.enabled){var h=i.config.chart.dropShadow;new _(e.ctx).dropShadow(n,h,o)}var c=a.group({class:"apexcharts-data-labels"});r.forEach((function(n,r){var h=n[0],c=n[1],f=n[2],g=n[3],u=a.drawRect(h,c,f-h,g-c,0,"#fff",1,e.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?p:i.globals.stroke.colors[o]);u.attr({cx:h,cy:c,index:o,i:o,j:r,width:f-h,height:g-c});var d=e.helpers.getShadeColor(i.config.chart.type,o,r,e.negRange),p=d.color;void 0!==i.config.series[o].data[r]&&i.config.series[o].data[r].fillColor&&(p=i.config.series[o].data[r].fillColor);var y=s.fillPath({color:p,seriesNumber:o,dataPointIndex:r});u.node.classList.add("apexcharts-treemap-rect"),u.attr({fill:y}),e.helpers.addListeners(u);var b={x:h+(f-h)/2,y:c+(g-c)/2,width:0,height:0},v={x:h,y:c,width:f-h,height:g-c};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var m=1;i.globals.resized||(m=i.config.chart.animations.speed),e.animateTreemap(u,b,v,m)}if(i.globals.dataChanged){var x=1;e.dynamicAnim.enabled&&i.globals.shouldAnimate&&(x=e.dynamicAnim.speed,i.globals.previousPaths[o]&&i.globals.previousPaths[o][r]&&i.globals.previousPaths[o][r].rect&&(b=i.globals.previousPaths[o][r].rect),e.animateTreemap(u,b,v,x))}var w=e.getFontSize(n),_=i.config.dataLabels.formatter(e.labels[o][r],{value:i.globals.series[o][r],seriesIndex:o,dataPointIndex:r,w:i}),S=e.helpers.calculateDataLabels({text:_,x:(h+f)/2,y:(c+g)/2+e.strokeWidth/2+w/3,i:o,j:r,colorProps:d,fontSize:w,series:t});i.config.dataLabels.enabled&&S&&e.rotateToFitLabel(S,_,h,c,f,g),l.add(u),null!==S&&l.add(S)})),l.add(c),n.add(l)})),n}},{key:"getFontSize",value:function(t){var s,e,n=this.w,r=function t(e){var i,a=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)a+=t(e[i]);else for(i=0;i<e.length;i++)a+=e[i].length;return a}(this.labels)/function t(e){var i,a=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)a+=t(e[i]);else for(i=0;i<e.length;i++)a+=1;return a}(this.labels);return s=(t[2]-t[0])*(t[3]-t[1]),e=Math.pow(s,.5),Math.min(e/r,parseInt(n.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,e,i,a,s,n){var r=new S(this.ctx),o=r.getTextRects(e);if(o.width+5>s-i&&o.width<=n-a){var l=r.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(l.x," ").concat(l.y,")"))}}},{key:"animateTreemap",value:function(t,e,i,a){var s=new b(this.ctx);s.animateRect(t,{x:e.x,y:e.y,width:e.width,height:e.height},{x:i.x,y:i.y,width:i.width,height:i.height},a,(function(){s.animationCompleted(t)}))}}]),t}(),Ft=86400,zt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return h(t,[{key:"calculateTimeScaleTicks",value:function(t,i){var a=this,s=this.w;if(s.globals.allSeriesCollapsed)return s.globals.labels=[],s.globals.timescaleLabels=[],[];var e=new Y(this.ctx),n=(i-t)/864e5;this.determineInterval(n),s.globals.disableZoomIn=!1,s.globals.disableZoomOut=!1,n<.00011574074074074075?s.globals.disableZoomIn=!0:n>5e4&&(s.globals.disableZoomOut=!0);var r=e.getTimeUnitsfromTimestamp(t,i,this.utc),o=s.globals.gridWidth/n,h=o/24,c=h/60,f=c/60,g=Math.floor(24*n),u=Math.floor(1440*n),d=Math.floor(n*Ft),p=Math.floor(n),y=Math.floor(n/30),b=Math.floor(n/365),v={minMillisecond:r.minMillisecond,minSecond:r.minSecond,minMinute:r.minMinute,minHour:r.minHour,minDate:r.minDate,minMonth:r.minMonth,minYear:r.minYear},m={firstVal:v,currentMillisecond:v.minMillisecond,currentSecond:v.minSecond,currentMinute:v.minMinute,currentHour:v.minHour,currentMonthDate:v.minDate,currentDate:v.minDate,currentMonth:v.minMonth,currentYear:v.minYear,daysWidthOnXAxis:o,hoursWidthOnXAxis:h,minutesWidthOnXAxis:c,secondsWidthOnXAxis:f,numberOfSeconds:d,numberOfMinutes:u,numberOfHours:g,numberOfDays:p,numberOfMonths:y,numberOfYears:b};switch(this.tickInterval){case"years":this.generateYearScale(m);break;case"months":case"half_year":this.generateMonthScale(m);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(m);break;case"hours":this.generateHourScale(m);break;case"minutes_fives":case"minutes":this.generateMinuteScale(m);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(m)}var x=this.timeScaleArray.map((function(t){var i={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?l(l({},i),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?l(l({},i),{},{value:t.value}):"minute"===t.unit?l(l({},i),{},{value:t.value,minute:t.value}):"second"===t.unit?l(l({},i),{},{value:t.value,minute:t.minute,second:t.second}):t}));return x.filter((function(t){var e=1,i=Math.ceil(s.globals.gridWidth/120),n=t.value;void 0!==s.config.xaxis.tickAmount&&(i=s.config.xaxis.tickAmount),x.length>i&&(e=Math.floor(x.length/i));var r=!1,o=!1;switch(a.tickInterval){case"years":"year"===t.unit&&(r=!0);break;case"half_year":e=7,"year"===t.unit&&(r=!0);break;case"months":e=1,"year"===t.unit&&(r=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(r=!0),30===n&&(o=!0);break;case"months_days":e=10,"month"===t.unit&&(r=!0),30===n&&(o=!0);break;case"week_days":e=8,"month"===t.unit&&(r=!0);break;case"days":e=1,"month"===t.unit&&(r=!0);break;case"hours":"day"===t.unit&&(r=!0);break;case"minutes_fives":case"seconds_fives":n%5!=0&&(o=!0);break;case"seconds_tens":n%10!=0&&(o=!0)}if("hours"===a.tickInterval||"minutes_fives"===a.tickInterval||"seconds_tens"===a.tickInterval||"seconds_fives"===a.tickInterval){if(!o)return!0}else if((n%e==0||r)&&!o)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,a=this.formatDates(t),s=this.removeOverlappingTS(a);i.globals.timescaleLabels=s.slice(),new pt(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,a=t.currentYear,s=t.daysWidthOnXAxis,n=t.numberOfYears,r=e.minYear,o=0,l=new Y(this.ctx),h="year";if(e.minDate>1||e.minMonth>0){var c=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);o=(l.determineDaysOfYear(e.minYear)-c+1)*s,r=e.minYear+1,this.timeScaleArray.push({position:o,value:r,unit:h,year:r,month:w.monthMod(i+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:o,value:r,unit:h,year:a,month:w.monthMod(i+1)});for(var f=r,g=o,u=0;u<n;u++)f++,g=l.determineDaysOfYear(f-1)*s+g,this.timeScaleArray.push({position:g,value:f,unit:h,year:f,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,a=t.currentMonth,s=t.currentYear,n=t.daysWidthOnXAxis,r=t.numberOfMonths,o=a,l=0,h=new Y(this.ctx),c="month",f=0;if(e.minDate>1){l=(h.determineDaysOfMonths(a+1,e.minYear)-i+1)*n,o=w.monthMod(a+1);var g=s+f,u=w.monthMod(o),d=o;0===o&&(c="year",d=g,u=1,g+=f+=1),this.timeScaleArray.push({position:l,value:d,unit:c,year:g,month:u})}else this.timeScaleArray.push({position:l,value:o,unit:c,year:s,month:w.monthMod(a)});for(var p=o+1,b=l,y=0,v=1;y<r;y++,v++){0===(p=w.monthMod(p))?(c="year",f+=1):c="month";var m=this._getYear(s,p,f);b=h.determineDaysOfMonths(p,m)*n+b;var x=0===p?m:p;this.timeScaleArray.push({position:b,value:x,unit:c,year:m,month:0===p?1:p}),p++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,a=t.currentYear,s=t.hoursWidthOnXAxis,n=t.numberOfDays,r=new Y(this.ctx),o="day",l=e.minDate+1,h=l,c=function(t,e,i){return t>r.determineDaysOfMonths(e+1,i)?(h=1,o="month",g=e+=1,e):e},f=(24-e.minHour)*s,g=l,u=c(h,i,a);0===e.minHour&&1===e.minDate?(f=0,g=w.monthMod(e.minMonth),o="month",h=e.minDate,n++):1!==e.minDate&&0===e.minHour&&0===e.minMinute&&(f=0,l=e.minDate,g=l,u=c(h=l,i,a)),this.timeScaleArray.push({position:f,value:g,unit:o,year:this._getYear(a,u,0),month:w.monthMod(u),day:h});for(var d=f,p=0;p<n;p++){o="day",u=c(h+=1,u,this._getYear(a,u,0));var b=this._getYear(a,u,0);d=24*s+d;var y=1===h?w.monthMod(u):h;this.timeScaleArray.push({position:d,value:y,unit:o,year:b,month:w.monthMod(u),day:y})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,a=t.currentMonth,s=t.currentYear,n=t.minutesWidthOnXAxis,r=t.numberOfHours,o=new Y(this.ctx),l="hour",h=function(t,e){return t>o.determineDaysOfMonths(e+1,s)&&(p=1,e+=1),{month:e,date:p}},c=function(t,e){return t>o.determineDaysOfMonths(e+1,s)?e+=1:e},f=60-(e.minMinute+e.minSecond/60),g=f*n,u=e.minHour+1,d=u+1;60===f&&(g=0,d=(u=e.minHour)+1);var p=i,b=c(p,a);this.timeScaleArray.push({position:g,value:u,unit:l,day:p,hour:d,year:s,month:w.monthMod(b)});for(var y=g,v=0;v<r;v++){l="hour",d>=24&&(d=0,l="day",b=h(p+=1,b).month,b=c(p,b));var m=this._getYear(s,b,0);y=0===d&&0===v?f*n:60*n+y;var x=0===d?p:d;this.timeScaleArray.push({position:y,value:x,unit:l,hour:d,day:p,year:m,month:w.monthMod(b)}),d++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,a=t.currentMinute,s=t.currentHour,n=t.currentDate,r=t.currentMonth,o=t.currentYear,l=t.minutesWidthOnXAxis,h=t.secondsWidthOnXAxis,c=t.numberOfMinutes,f=a+1,g=n,u=r,d=o,p=s,b=(60-i-e/1e3)*h,y=0;y<c;y++)f>=60&&(f=0,24===(p+=1)&&(p=0)),this.timeScaleArray.push({position:b,value:f,unit:"minute",hour:p,minute:f,day:g,year:this._getYear(d,u,0),month:w.monthMod(u)}),b+=l,f++}},{key:"generateSecondScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,a=t.currentMinute,s=t.currentHour,n=t.currentDate,r=t.currentMonth,o=t.currentYear,l=t.secondsWidthOnXAxis,h=t.numberOfSeconds,c=i+1,f=a,g=n,u=r,d=o,p=s,b=(1e3-e)/1e3*l,y=0;y<h;y++)c>=60&&(c=0,++f>=60&&(f=0,24==++p&&(p=0))),this.timeScaleArray.push({position:b,value:c,unit:"second",hour:p,minute:f,second:c,day:g,year:this._getYear(d,u,0),month:w.monthMod(u)}),b+=l,c++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return 0===t.month&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),"day"===t.unit?i+="day"===t.unit?"-"+("0"+e).slice(-2):"-01":i+="-"+("0"+(t.day?t.day:"1")).slice(-2),"hour"===t.unit?i+="hour"===t.unit?"T"+("0"+e).slice(-2):"T00":i+="T"+("0"+(t.hour?t.hour:"0")).slice(-2),"minute"===t.unit?i+=":"+("0"+e).slice(-2):i+=":"+(t.minute?("0"+t.minute).slice(-2):"00"),"second"===t.unit?i+=":"+("0"+e).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map((function(t){var a=t.value.toString(),s=new Y(e.ctx),n=e.createRawDateString(t,a),r=s.getDate(s.parseDate(n));if(e.utc||(r=s.getDate(s.parseDateWithTimezone(n))),void 0===i.config.xaxis.labels.format){var o="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(o=l.year),"month"===t.unit&&(o=l.month),"day"===t.unit&&(o=l.day),"hour"===t.unit&&(o=l.hour),"minute"===t.unit&&(o=l.minute),"second"===t.unit&&(o=l.second),a=s.formatDate(r,o)}else a=s.formatDate(r,i.config.xaxis.labels.format);return{dateString:n,position:t.position,value:a,unit:t.unit,year:t.year,month:t.month}}))}},{key:"removeOverlappingTS",value:function(t){var e,i=this,a=new S(this.ctx),s=!1;t.length>0&&t[0].value&&t.every((function(e){return e.value.length===t[0].value.length}))&&(s=!0,e=a.getTextRects(t[0].value).width);var n=0,r=t.map((function(r,o){if(o>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=s?e:a.getTextRects(t[n].value).width,h=t[n].position;return r.position>h+l+10?(n=o,r):null}return r}));return r.filter((function(t){return null!==t}))}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),t}(),Xt=function(){function t(e,i){a(this,t),this.ctx=i,this.w=i.w,this.el=e}return h(t,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,i=e.chart.type;t.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i)>-1,t.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(i)>-1,t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type||"boxPlot"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.chartID,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),S.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background=e.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,a=i.config,s=i.globals,n={series:[],i:[]},r={series:[],i:[]},o={series:[],i:[]},l={series:[],i:[]},h={series:[],i:[]},c={series:[],i:[]},f={series:[],i:[]};s.series.map((function(e,g){var u=0;void 0!==t[g].type?("column"===t[g].type||"bar"===t[g].type?(s.series.length>1&&a.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),h.series.push(e),h.i.push(g),u++,i.globals.columnSeries=h.series):"area"===t[g].type?(r.series.push(e),r.i.push(g),u++):"line"===t[g].type?(n.series.push(e),n.i.push(g),u++):"scatter"===t[g].type?(o.series.push(e),o.i.push(g)):"bubble"===t[g].type?(l.series.push(e),l.i.push(g),u++):"candlestick"===t[g].type?(c.series.push(e),c.i.push(g),u++):"boxPlot"===t[g].type?(f.series.push(e),f.i.push(g),u++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),u>1&&(s.comboCharts=!0)):(n.series.push(e),n.i.push(g))}));var g=new Tt(this.ctx,e),u=new Et(this.ctx,e);this.ctx.pie=new Pt(this.ctx);var d=new Mt(this.ctx);this.ctx.rangeBar=new B(this.ctx,e);var p=new Lt(this.ctx),y=[];if(s.comboCharts){if(r.series.length>0&&y.push(g.draw(r.series,"area",r.i)),h.series.length>0)if(i.config.chart.stacked){var b=new Ct(this.ctx,e);y.push(b.draw(h.series,h.i))}else this.ctx.bar=new X(this.ctx,e),y.push(this.ctx.bar.draw(h.series,h.i));if(n.series.length>0&&y.push(g.draw(n.series,"line",n.i)),c.series.length>0&&y.push(u.draw(c.series,c.i)),f.series.length>0&&y.push(u.draw(f.series,f.i)),o.series.length>0){var v=new Tt(this.ctx,e,!0);y.push(v.draw(o.series,"scatter",o.i))}if(l.series.length>0){var m=new Tt(this.ctx,e,!0);y.push(m.draw(l.series,"bubble",l.i))}}else switch(a.chart.type){case"line":y=g.draw(s.series,"line");break;case"area":y=g.draw(s.series,"area");break;case"bar":a.chart.stacked?y=new Ct(this.ctx,e).draw(s.series):(this.ctx.bar=new X(this.ctx,e),y=this.ctx.bar.draw(s.series));break;case"candlestick":case"boxPlot":y=new Et(this.ctx,e).draw(s.series);break;case"rangeBar":y=this.ctx.rangeBar.draw(s.series);break;case"heatmap":y=new It(this.ctx,e).draw(s.series);break;case"treemap":y=new Dt(this.ctx,e).draw(s.series);break;case"pie":case"donut":case"polarArea":y=this.ctx.pie.draw(s.series);break;case"radialBar":y=d.draw(s.series);break;case"radar":y=p.draw(s.series);break;default:y=g.draw(s.series)}return y}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var i=w.getDimensions(this.el),a=e.chart.width.toString().split(/[0-9]+/g).pop();"%"===a?w.isNumber(i[0])&&(0===i[0].width&&(i=w.getDimensions(this.el.parentNode)),t.svgWidth=i[0]*parseInt(e.chart.width,10)/100):"px"!==a&&""!==a||(t.svgWidth=parseInt(e.chart.width,10));var s=e.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===s){var n=w.getDimensions(this.el.parentNode);t.svgHeight=n[1]*parseInt(e.chart.height,10)/100}else t.svgHeight=parseInt(e.chart.height,10);else t.axisCharts?t.svgHeight=t.svgWidth/1.61:t.svgHeight=t.svgWidth/1.2;if(t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),S.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),"%"!==s){var r=e.chart.sparkline.enabled?0:t.axisCharts?e.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+r+"px"}t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY,i={transform:"translate("+t.translateX+", "+e+")"};S.setAttrs(t.dom.elGraphical.node,i)}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,a=t.config.chart.sparkline.enabled?1:15;a+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(i=new gt(this.ctx).legendHelpers.getLegendBBox().clwh+10);var s=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),n=2.05*t.globals.radialSize;if(s&&!t.config.chart.sparkline.enabled&&0!==t.config.plotOptions.radialBar.startAngle){var r=w.getBoundingClientRect(s);n=r.bottom;var o=r.bottom-r.top;n=Math.max(2.05*t.globals.radialSize,o)}var l=n+e.translateY+i+a;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",l),e.dom.elWrap.style.height=l+"px",S.setAttrs(e.dom.Paper.node,{height:l}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px"}},{key:"coreCalculations",value:function(){new K(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map((function(t){return[]}))},i=new H,a=this.w.globals;i.initGlobalVars(a),a.seriesXvalues=e(),a.seriesYvalues=e()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,e=this.w;if(e.globals.axisCharts){if("back"===e.config.xaxis.crosshairs.position&&new ot(this.ctx).drawXCrosshairs(),"back"===e.config.yaxis[0].crosshairs.position&&new ot(this.ctx).drawYCrosshairs(),"datetime"===e.config.xaxis.type&&void 0===e.config.xaxis.labels.formatter){this.ctx.timeScale=new zt(this.ctx);var i=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}t=new A(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,i=this.w;if(i.config.chart.brush.enabled&&"function"!=typeof i.config.chart.events.selection){var a=i.config.chart.brush.targets||[i.config.chart.brush.target];a.forEach((function(e){var i=ApexCharts.getChartByID(e);i.w.globals.brushSource=t.ctx,"function"!=typeof i.w.config.chart.events.zoomed&&(i.w.config.chart.events.zoomed=function(){t.updateSourceChart(i)}),"function"!=typeof i.w.config.chart.events.scrolled&&(i.w.config.chart.events.scrolled=function(){t.updateSourceChart(i)})})),i.config.chart.events.selection=function(t,s){a.forEach((function(t){var a=ApexCharts.getChartByID(t),e=w.clone(i.config.yaxis);if(i.config.chart.brush.autoScaleYaxis&&1===a.w.globals.series.length){var n=new q(a);e=n.autoScaleY(a,e,s)}var r=a.w.config.yaxis.reduce((function(t,i,s){return[].concat(u(t),[l(l({},a.w.config.yaxis[s]),{},{min:e[0].min,max:e[0].max})])}),[]);a.ctx.updateHelpers._updateOptions({xaxis:{min:s.xaxis.min,max:s.xaxis.max},yaxis:r},!1,!1,!1,!1)}))}}}}]),t}(),Yt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"_updateOptions",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(o){var l=[e.ctx];n&&(l=e.ctx.getSyncedCharts()),e.ctx.w.globals.isExecCalled&&(l=[e.ctx],e.ctx.w.globals.isExecCalled=!1),l.forEach((function(n,h){var c=n.w;return c.globals.shouldAnimate=s,a||(c.globals.resized=!0,c.globals.dataChanged=!0,s&&n.series.getPreviousPaths()),t&&"object"===i(t)&&(n.config=new V(t),t=A.extendArrayProps(n.config,t,c),n.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,c.config=w.extend(c.config,t),r&&(c.globals.lastXAxis=t.xaxis?w.clone(t.xaxis):[],c.globals.lastYAxis=t.yaxis?w.clone(t.yaxis):[],c.globals.initialConfig=w.extend({},c.config),c.globals.initialSeries=w.clone(c.config.series))),n.update(t).then((function(){h===l.length-1&&o(n)}))}))}))}},{key:"_updateSeries",value:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(s){var n,r=i.w;return r.globals.shouldAnimate=e,r.globals.dataChanged=!0,e&&i.ctx.series.getPreviousPaths(),r.globals.axisCharts?(0===(n=t.map((function(t,e){return i._extendSeries(t,e)}))).length&&(n=[{data:[]}]),r.config.series=n):r.config.series=t.slice(),a&&(r.globals.initialSeries=w.clone(r.config.series)),i.ctx.update().then((function(){s(i.ctx)}))}))}},{key:"_extendSeries",value:function(t,i){var a=this.w,s=a.config.series[i];return l(l({},a.config.series[i]),{},{name:t.name?t.name:s&&s.name,color:t.color?t.color:s&&s.color,type:t.type?t.type:s&&s.type,data:t.data?t.data:s&&s.data})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,a=null,s=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?a=i.globals.dom.Paper.select("".concat(s," path[j='").concat(e,"'], ").concat(s," circle[j='").concat(e,"'], ").concat(s," rect[j='").concat(e,"']")).members[0]:void 0===e&&(a=i.globals.dom.Paper.select("".concat(s," path[j='").concat(t,"']")).members[0],"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(t)),a?(new S(this.ctx).pathMouseDown(a,null),a.node?a.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach((function(i){void 0!==t.xaxis[i]&&(e.config.xaxis[i]=t.xaxis[i],e.globals.lastXAxis[i]=t.xaxis[i])})),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new G(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){var e=this.w;return e.config.chart.stacked&&"100%"===e.config.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach((function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100})):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,i=this.w,a=i.globals.lastXAxis,s=i.globals.lastYAxis;t&&t.xaxis&&(a=t.xaxis),t&&t.yaxis&&(s=t.yaxis),i.config.xaxis.min=a.min,i.config.xaxis.max=a.max;var n=function(t){void 0!==s[t]&&(i.config.yaxis[t].min=s[t].min,i.config.yaxis[t].max=s[t].max)};i.config.yaxis.map((function(t,a){i.globals.zoomed||void 0!==s[a]?n(a):void 0!==e.ctx.opts.yaxis[a]&&(t.min=e.ctx.opts.yaxis[a].min,t.max=e.ctx.opts.yaxis[a].max)}))}}]),t}();Ot="undefined"!=typeof window?window:void 0,Rt=function(t,e){var a=(void 0!==this?this:t).SVG=function(t){if(a.supported)return t=new a.Doc(t),a.parser.draw||a.prepare(),t};if(a.ns="http://www.w3.org/2000/svg",a.xmlns="http://www.w3.org/2000/xmlns/",a.xlink="http://www.w3.org/1999/xlink",a.svgjs="http://svgjs.dev",a.supported=!0,!a.supported)return!1;a.did=1e3,a.eid=function(t){return"Svgjs"+f(t)+a.did++},a.create=function(t){var i=e.createElementNS(this.ns,t);return i.setAttribute("id",this.eid(t)),i},a.extend=function(){var t,e;e=(t=[].slice.call(arguments)).pop();for(var i=t.length-1;i>=0;i--)if(t[i])for(var s in e)t[i].prototype[s]=e[s];a.Set&&a.Set.inherit&&a.Set.inherit()},a.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,a.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&a.extend(e,t.extend),t.construct&&a.extend(t.parent||a.Container,t.construct),e},a.adopt=function(e){return e?e.instance?e.instance:((i="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new a.Nested:new a.Doc:"linearGradient"==e.nodeName?new a.Gradient("linear"):"radialGradient"==e.nodeName?new a.Gradient("radial"):a[f(e.nodeName)]?new(a[f(e.nodeName)]):new a.Element(e)).type=e.nodeName,i.node=e,e.instance=i,i instanceof a.Doc&&i.namespace().defs(),i.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),i):null;var i},a.prepare=function(){var t=e.getElementsByTagName("body")[0],i=(t?new a.Doc(t):a.adopt(e.documentElement).nested()).size(2,0);a.parser={body:t||e.documentElement,draw:i.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:i.polyline().node,path:i.path().node,native:a.create("svg")}},a.parser={native:a.create("svg")},e.addEventListener("DOMContentLoaded",(function(){a.parser.draw||a.prepare()}),!1),a.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},a.utils={map:function(t,e){for(var i=t.length,a=[],s=0;s<i;s++)a.push(e(t[s]));return a},filter:function(t,e){for(var i=t.length,a=[],s=0;s<i;s++)e(t[s])&&a.push(t[s]);return a},filterSVGElements:function(e){return this.filter(e,(function(e){return e instanceof t.SVGElement}))}},a.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},a.Color=function(t){var e,s;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?a.regex.isRgb.test(t)?(e=a.regex.rgb.exec(t.replace(a.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):a.regex.isHex.test(t)&&(e=a.regex.hex.exec(4==(s=t).length?["#",s.substring(1,2),s.substring(1,2),s.substring(2,3),s.substring(2,3),s.substring(3,4),s.substring(3,4)].join(""):s),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===i(t)&&(this.r=t.r,this.g=t.g,this.b=t.b))},a.extend(a.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+g(this.r)+g(this.g)+g(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new a.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new a.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),a.Color.test=function(t){return t+="",a.regex.isHex.test(t)||a.regex.isRgb.test(t)},a.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},a.Color.isColor=function(t){return a.Color.isRgb(t)||a.Color.test(t)},a.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},a.extend(a.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),a.PointArray=function(t,e){a.Array.call(this,t,e||[[0,0]])},a.PointArray.prototype=new a.Array,a.PointArray.prototype.constructor=a.PointArray;for(var s={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]}},n="mlhvqtcsaz".split(""),r=0,o=n.length;r<o;++r)s[n[r]]=function(t){return function(e,i,a){if("H"==t)e[0]=e[0]+i.x;else if("V"==t)e[0]=e[0]+i.y;else if("A"==t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var n=0,r=e.length;n<r;++n)e[n]=e[n]+(n%2?i.y:i.x);if(s&&"function"==typeof s[t])return s[t](e,i,a)}}(n[r].toUpperCase());a.PathArray=function(t,e){a.Array.call(this,t,e||[["M",0,0]])},a.PathArray.prototype=new a.Array,a.PathArray.prototype.constructor=a.PathArray,a.extend(a.PathArray,{toString:function(){return function(t){for(var e=0,i=t.length,a="";e<i;e++)a+=t[e][0],null!=t[e][1]&&(a+=t[e][1],null!=t[e][2]&&(a+=" ",a+=t[e][2],null!=t[e][3]&&(a+=" ",a+=t[e][3],a+=" ",a+=t[e][4],null!=t[e][5]&&(a+=" ",a+=t[e][5],a+=" ",a+=t[e][6],null!=t[e][7]&&(a+=" ",a+=t[e][7])))));return a+" "}(this.value)},move:function(t,e){var i=this.bbox();return i.x,i.y,this},at:function(t){if(!this.destination)return this;for(var e=this.value,i=this.destination.value,s=[],n=new a.PathArray,r=0,o=e.length;r<o;r++){s[r]=[e[r][0]];for(var l=1,h=e[r].length;l<h;l++)s[r][l]=e[r][l]+(i[r][l]-e[r][l])*t;"A"===s[r][0]&&(s[r][4]=+(0!=s[r][4]),s[r][5]=+(0!=s[r][5]))}return n.value=s,n},parse:function(t){if(t instanceof a.PathArray)return t.valueOf();var e,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(a.regex.numbersWithDots,h).replace(a.regex.pathLetters," $& ").replace(a.regex.hyphen,"$1 -").trim().split(a.regex.delimiter):t.reduce((function(t,e){return[].concat.call(t,e)}),[]);var n=[],r=new a.Point,o=new a.Point,l=0,c=t.length;do{a.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),n.push(s[e].call(null,t.slice(l,l+=i[e.toUpperCase()]).map(parseFloat),r,o))}while(c>l);return n},bbox:function(){return a.parser.draw||a.prepare(),a.parser.path.setAttribute("d",this.toString()),a.parser.path.getBBox()}}),a.Number=a.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(a.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof a.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new a.Number(t),new a.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new a.Number(t),new a.Number(this-t,this.unit||t.unit)},times:function(t){return t=new a.Number(t),new a.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new a.Number(t),new a.Number(this/t,this.unit||t.unit)},to:function(t){var e=new a.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new a.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new a.Number(this.destination).minus(this).times(t).plus(this):this}}}),a.Element=a.invent({create:function(t){this._stroke=a.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=u(this,t,e);return this.width(new a.Number(i.width)).height(new a.Number(i.height))},clone:function(t){this.writeDataToDom();var e=y(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(a.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!=t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return a.get(this.attr(t))},parent:function(e){var i=this;if(!i.node.parentNode)return null;if(i=a.adopt(i.node.parentNode),!e)return i;for(;i&&i.node instanceof t.SVGElement;){if("string"==typeof e?i.matches(e):i instanceof e)return i;if(!i.node.parentNode||"#document"==i.node.parentNode.nodeName)return null;i=a.adopt(i.node.parentNode)}},doc:function(){return this instanceof a.Doc?this:this.parent(a.Doc)},parents:function(t){var e=[],i=this;do{if(!(i=i.parent(t))||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var i=e.createElement("svg");if(!(t&&this instanceof a.Parent))return i.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var s=0,n=i.firstChild.childNodes.length;s<n;s++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),a.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},a.morph=function(t){return function(e,i){return new a.MorphObj(e,i).at(t)}},a.Situation=a.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new a.Number(t.duration).valueOf(),this.delay=new a.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),a.FX=a.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,s){"object"===i(t)&&(e=t.ease,s=t.delay,t=t.duration);var n=new a.Situation({duration:t||1e3,delay:s||0,ease:a.easing[e||"-"]||e});return this.queue(n),this},target:function(t){return t&&t instanceof a.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof a.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof a.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(var i in e.animations){t=this.target()[i](),Array.isArray(t)||(t=[t]),Array.isArray(e.animations[i])||(e.animations[i]=[e.animations[i]]);for(var s=t.length;s--;)e.animations[i][s]instanceof a.Number&&(t[s]=new a.Number(t[s])),e.animations[i][s]=t[s].morph(e.animations[i][s])}for(var i in e.attrs)e.attrs[i]=new a.MorphObj(this.target().attr(i),e.attrs[i]);for(var i in e.styles)e.styles[i]=new a.MorphObj(this.target().style(i),e.styles[i]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(t){var e=this.last();return this.target().on("finished.fx",(function i(a){a.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))})),this._callStart()},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,a.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after((function(){this.off("during.fx",i)})),this._callStart()},afterAll:function(t){var e=function e(i){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){var e,i,a;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),i=Math.floor(e),!0===this.situation.loops||i<this.situation.loops?(this.pos=e-i,a=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,a=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-a)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var s=this.situation.ease(this.pos);for(var n in this.situation.once)n>this.lastPos&&n<=s&&(this.situation.once[n].call(this.target(),this.pos,s),delete this.situation.once[n]);return this.active&&this.target().fire("during",{pos:this.pos,eased:s,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=s,this):this},eachAt:function(){var t,e=this,i=this.target(),s=this.situation;for(var n in s.animations)t=[].concat(s.animations[n]).map((function(t){return"string"!=typeof t&&t.at?t.at(s.ease(e.pos),e.pos):t})),i[n].apply(i,t);for(var n in s.attrs)t=[n].concat(s.attrs[n]).map((function(t){return"string"!=typeof t&&t.at?t.at(s.ease(e.pos),e.pos):t})),i.attr.apply(i,t);for(var n in s.styles)t=[n].concat(s.styles[n]).map((function(t){return"string"!=typeof t&&t.at?t.at(s.ease(e.pos),e.pos):t})),i.style.apply(i,t);if(s.transforms.length){t=s.initialTransformation,n=0;for(var r=s.transforms.length;n<r;n++){var o=s.transforms[n];o instanceof a.Matrix?t=o.relative?t.multiply((new a.Matrix).morph(o).at(s.ease(this.pos))):t.morph(o).at(s.ease(this.pos)):(o.relative||o.undo(t.extract()),t=t.multiply(o.at(s.ease(this.pos))))}i.matrix(t)}return this},once:function(t,e,i){var a=this.last();return i||(t=a.ease(t)),a.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:a.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new a.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new a.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),a.MorphObj=a.invent({create:function(t,e){return a.Color.isColor(e)?new a.Color(t).morph(e):a.regex.delimiter.test(t)?a.regex.pathLetters.test(t)?new a.PathArray(t).morph(e):new a.Array(t).morph(e):a.regex.numberAndUnit.test(e)?new a.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),a.extend(a.FX,{attr:function(t,e,a){if("object"===i(t))for(var s in t)this.attr(s,t[s]);else this.add(t,e,"attrs");return this},plot:function(t,e,i,a){return 4==arguments.length?this.plot([t,e,i,a]):this.add("plot",new(this.target().morphArray)(t))}}),a.Box=a.invent({create:function(t,e,s,n){if(!("object"!==i(t)||t instanceof a.Element))return a.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=s,this.height=n),b(this)}}),a.BBox=a.invent({create:function(t){if(a.Box.apply(this,[].slice.call(arguments)),t instanceof a.Element){var i;try{if(!e.documentElement.contains){for(var s=t.node;s.parentNode;)s=s.parentNode;if(s!=e)throw new Error("Element not in the dom")}i=t.node.getBBox()}catch(e){if(t instanceof a.Shape){a.parser.draw||a.prepare();var n=t.clone(a.parser.draw.instance).show();n&&n.node&&"function"==typeof n.node.getBBox&&(i=n.node.getBBox()),n&&"function"==typeof n.remove&&n.remove()}else i={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}a.Box.call(this,i)}},inherit:a.Box,parent:a.Element,construct:{bbox:function(){return new a.BBox(this)}}}),a.BBox.prototype.constructor=a.BBox,a.Matrix=a.invent({create:function(t){var e=p([1,0,0,1,0,0]);t=null===t?e:t instanceof a.Element?t.matrixify():"string"==typeof t?p(t.split(a.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(t)?p(t):t&&"object"===i(t)?t:e;for(var s=m.length-1;s>=0;--s)this[m[s]]=null!=t[m[s]]?t[m[s]]:e[m[s]]},extend:{extract:function(){var t=d(this,0,1);d(this,1,0);var e=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(e*Math.PI/180)+this.f*Math.sin(e*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(e*Math.PI/180)+this.e*Math.sin(-e*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new a.Matrix(this)}},clone:function(){return new a.Matrix(this)},morph:function(t){return this.destination=new a.Matrix(t),this},multiply:function(t){return new a.Matrix(this.native().multiply(function(t){return t instanceof a.Matrix||(t=new a.Matrix(t)),t}(t).native()))},inverse:function(){return new a.Matrix(this.native().inverse())},translate:function(t,e){return new a.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=a.parser.native.createSVGMatrix(),e=m.length-1;e>=0;e--)t[m[e]]=this[m[e]];return t},toString:function(){return"matrix("+v(this.a)+","+v(this.b)+","+v(this.c)+","+v(this.d)+","+v(this.e)+","+v(this.f)+")"}},parent:a.Element,construct:{ctm:function(){return new a.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof a.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new a.Matrix(e)}return new a.Matrix(this.node.getScreenCTM())}}}),a.Point=a.invent({create:function(t,e){var a;a=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===i(t)?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=a.x,this.y=a.y},extend:{clone:function(){return new a.Point(this)},morph:function(t,e){return this.destination=new a.Point(t,e),this}}}),a.extend(a.Element,{point:function(t,e){return new a.Point(t,e).transform(this.screenCTM().inverse())}}),a.extend(a.Element,{attr:function(t,e,s){if(null==t){for(t={},s=(e=this.node.attributes).length-1;s>=0;s--)t[e[s].nodeName]=a.regex.isNumber.test(e[s].nodeValue)?parseFloat(e[s].nodeValue):e[s].nodeValue;return t}if("object"===i(t))for(var n in t)this.attr(n,t[n]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?a.defaults.attrs[t]:a.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(a.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof a.Image&&(e=this.doc().defs().pattern(0,0,(function(){this.add(e)})))),"number"==typeof e?e=new a.Number(e):a.Color.isColor(e)?e=new a.Color(e):Array.isArray(e)&&(e=new a.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof s?this.node.setAttributeNS(s,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),a.extend(a.Element,{transform:function(t,e){var s;return"object"!==i(t)?(s=new a.Matrix(this).extract(),"string"==typeof t?s[t]:s):(s=new a.Matrix(this),e=!!e||!!t.relative,null!=t.a&&(s=e?s.multiply(new a.Matrix(t)):new a.Matrix(t)),this.attr("transform",s))}}),a.extend(a.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(a.regex.transforms).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(a.regex.delimiter).map((function(t){return parseFloat(t)}))]})).reduce((function(t,e){return"matrix"==e[0]?t.multiply(p(e[1])):t[e[0]].apply(t,e[1])}),new a.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),a.Transformation=a.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var a=0,s=this.arguments.length;a<s;++a)this[this.arguments[a]]=t[a];else if(t&&"object"===i(t))for(a=0,s=this.arguments.length;a<s;++a)this[this.arguments[a]]=t[this.arguments[a]];this.inversed=!1,!0===e&&(this.inversed=!0)}}),a.Translate=a.invent({parent:a.Matrix,inherit:a.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),a.extend(a.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===i(t))for(var s in t)this.style(s,t[s]);else{if(!a.regex.isCss.test(t))return this.node.style[c(t)];for(t=t.split(/\s*;\s*/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*:\s*/)}));e=t.pop();)this.style(e[0],e[1])}else this.node.style[c(t)]=null===e||a.regex.isBlank.test(e)?"":e;return this}}),a.Parent=a.invent({create:function(t){this.constructor.call(this,t)},inherit:a.Element,extend:{children:function(){return a.utils.map(a.utils.filterSVGElements(this.node.childNodes),(function(t){return a.adopt(t)}))},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return a.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var i=this.children(),s=0,n=i.length;s<n;s++)i[s]instanceof a.Element&&t.apply(i[s],[s,i]),e&&i[s]instanceof a.Container&&i[s].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),a.extend(a.Parent,{ungroup:function(t,e){return 0===e||this instanceof a.Defs||this.node==a.parser.draw||(t=t||(this instanceof a.Doc?this:this.parent(a.Parent)),e=e||1/0,this.each((function(){return this instanceof a.Defs?this:this instanceof a.Parent?this.ungroup(t,e-1):this.toParent(t)})),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),a.Container=a.invent({create:function(t){this.constructor.call(this,t)},inherit:a.Parent}),a.ViewBox=a.invent({parent:a.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(t){a.Element.prototype[t]=function(e){return a.on(this.node,t,e),this}})),a.listeners=[],a.handlerMap=[],a.listenerId=0,a.on=function(t,e,i,s,n){var r=i.bind(s||t.instance||t),o=(a.handlerMap.indexOf(t)+1||a.handlerMap.push(t))-1,l=e.split(".")[0],h=e.split(".")[1]||"*";a.listeners[o]=a.listeners[o]||{},a.listeners[o][l]=a.listeners[o][l]||{},a.listeners[o][l][h]=a.listeners[o][l][h]||{},i._svgjsListenerId||(i._svgjsListenerId=++a.listenerId),a.listeners[o][l][h][i._svgjsListenerId]=r,t.addEventListener(l,r,n||{passive:!0})},a.off=function(t,e,i){var s=a.handlerMap.indexOf(t),n=e&&e.split(".")[0],r=e&&e.split(".")[1],o="";if(-1!=s)if(i){if("function"==typeof i&&(i=i._svgjsListenerId),!i)return;a.listeners[s][n]&&a.listeners[s][n][r||"*"]&&(t.removeEventListener(n,a.listeners[s][n][r||"*"][i],!1),delete a.listeners[s][n][r||"*"][i])}else if(r&&n){if(a.listeners[s][n]&&a.listeners[s][n][r]){for(var l in a.listeners[s][n][r])a.off(t,[n,r].join("."),l);delete a.listeners[s][n][r]}}else if(r)for(var h in a.listeners[s])for(var o in a.listeners[s][h])r===o&&a.off(t,[h,r].join("."));else if(n){if(a.listeners[s][n]){for(var o in a.listeners[s][n])a.off(t,[n,o].join("."));delete a.listeners[s][n]}}else{for(var h in a.listeners[s])a.off(t,h);delete a.listeners[s],delete a.handlerMap[s]}},a.extend(a.Element,{on:function(t,e,i,s){return a.on(this.node,t,e,i,s),this},off:function(t,e){return a.off(this.node,t,e),this},fire:function(e,i){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new a.CustomEvent(e,{detail:i,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),a.Defs=a.invent({create:"defs",inherit:a.Container}),a.G=a.invent({create:"g",inherit:a.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new a.G)}}}),a.Doc=a.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,a.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:a.Container,extend:{namespace:function(){return this.attr({xmlns:a.ns,version:"1.1"}).attr("xmlns:xlink",a.xlink,a.xmlns).attr("xmlns:svgjs",a.svgjs,a.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=a.adopt(t):this._defs=new a.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,a.parser.draw&&!a.parser.draw.parentNode&&this.node.appendChild(a.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=y(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),a.extend(a.Element,{}),a.Gradient=a.invent({create:function(t){this.constructor.call(this,a.create(t+"Gradient")),this.type=t},inherit:a.Container,extend:{at:function(t,e,i){return this.put(new a.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),a.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),a.extend(a.Gradient,a.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new a.Number(t),fy:new a.Number(e)}):this.attr({x1:new a.Number(t),y1:new a.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new a.Number(t),cy:new a.Number(e)}):this.attr({x2:new a.Number(t),y2:new a.Number(e)})}}),a.extend(a.Defs,{gradient:function(t,e){return this.put(new a.Gradient(t)).update(e)}}),a.Stop=a.invent({create:"stop",inherit:a.Element,extend:{update:function(t){return("number"==typeof t||t instanceof a.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new a.Number(t.offset)),this}}}),a.Pattern=a.invent({create:"pattern",inherit:a.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),a.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),a.extend(a.Defs,{pattern:function(t,e,i){return this.put(new a.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),a.Shape=a.invent({create:function(t){this.constructor.call(this,t)},inherit:a.Element}),a.Symbol=a.invent({create:"symbol",inherit:a.Container,construct:{symbol:function(){return this.put(new a.Symbol)}}}),a.Use=a.invent({create:"use",inherit:a.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,a.xlink)}},construct:{use:function(t,e){return this.put(new a.Use).element(t,e)}}}),a.Rect=a.invent({create:"rect",inherit:a.Shape,construct:{rect:function(t,e){return this.put(new a.Rect).size(t,e)}}}),a.Circle=a.invent({create:"circle",inherit:a.Shape,construct:{circle:function(t){return this.put(new a.Circle).rx(new a.Number(t).divide(2)).move(0,0)}}}),a.extend(a.Circle,a.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),a.Ellipse=a.invent({create:"ellipse",inherit:a.Shape,construct:{ellipse:function(t,e){return this.put(new a.Ellipse).size(t,e).move(0,0)}}}),a.extend(a.Ellipse,a.Rect,a.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),a.extend(a.Circle,a.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new a.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new a.Number(t).divide(2))},size:function(t,e){var i=u(this,t,e);return this.rx(new a.Number(i.width).divide(2)).ry(new a.Number(i.height).divide(2))}}),a.Line=a.invent({create:"line",inherit:a.Shape,extend:{array:function(){return new a.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,s){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:s}:new a.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=u(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,i,s){return a.Line.prototype.plot.apply(this.put(new a.Line),null!=t?[t,e,i,s]:[0,0,0,0])}}}),a.Polyline=a.invent({create:"polyline",inherit:a.Shape,construct:{polyline:function(t){return this.put(new a.Polyline).plot(t||new a.PointArray)}}}),a.Polygon=a.invent({create:"polygon",inherit:a.Shape,construct:{polygon:function(t){return this.put(new a.Polygon).plot(t||new a.PointArray)}}}),a.extend(a.Polyline,a.Polygon,{array:function(){return this._array||(this._array=new a.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new a.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=u(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),a.extend(a.Line,a.Polyline,a.Polygon,{morphArray:a.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),a.Path=a.invent({create:"path",inherit:a.Shape,extend:{morphArray:a.PathArray,array:function(){return this._array||(this._array=new a.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new a.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new a.Path).plot(t||new a.PathArray)}}}),a.Image=a.invent({create:"image",inherit:a.Shape,extend:{load:function(e){if(!e)return this;var i=this,s=new t.Image;return a.on(s,"load",(function(){a.off(s);var t=i.parent(a.Pattern);null!==t&&(0==i.width()&&0==i.height()&&i.size(s.width,s.height),t&&0==t.width()&&0==t.height()&&t.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:s.width,height:s.height,ratio:s.width/s.height,url:e}))})),a.on(s,"error",(function(t){a.off(s),"function"==typeof i._error&&i._error.call(i,t)})),this.attr("href",s.src=this.src=e,a.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new a.Image).load(t).size(e||0,i||e||0)}}}),a.Text=a.invent({create:function(){this.constructor.call(this,a.create("text")),this.dom.leading=new a.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",a.defaults.attrs["font-family"])},inherit:a.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,i=0,s=e.length;i<s;++i)0!=i&&3!=e[i].nodeType&&1==a.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{i=0;for(var n=(t=t.split("\n")).length;i<n;i++)this.tspan(t[i]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new a.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=a.utils.map(a.utils.filterSVGElements(t.childNodes),(function(t){return a.adopt(t)}));return new a.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,s=this.dom.leading*new a.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?i+=s:(this.attr("dy",s+i),i=0))})),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new a.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new a.Text).text(t)},plain:function(t){return this.put(new a.Text).plain(t)}}}),a.Tspan=a.invent({create:"tspan",inherit:a.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(a.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),a.extend(a.Text,a.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new a.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),a.TextPath=a.invent({create:"textPath",inherit:a.Parent,parent:a.Text,construct:{morphArray:a.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return a.adopt(this.node.firstChild)}}}),a.Nested=a.invent({create:function(){this.constructor.call(this,a.create("svg")),this.style("overflow","visible")},inherit:a.Container,construct:{nested:function(){return this.put(new a.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function h(t,e,i,s){return i+s.replace(a.regex.dots," .")}function c(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function f(t){return t.charAt(0).toUpperCase()+t.slice(1)}function g(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function u(t,e,i){if(null==e||null==i){var a=t.bbox();null==e?e=a.width/a.height*i:null==i&&(i=a.height/a.width*e)}return{width:e,height:i}}function d(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function y(e){for(var i=e.childNodes.length-1;i>=0;i--)e.childNodes[i]instanceof t.SVGElement&&y(e.childNodes[i]);return a.adopt(e).id(a.eid(e.nodeName))}function b(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function v(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach((function(t){var e={};e[t]=function(e){if(void 0===e)return this;if("string"==typeof e||a.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(t,e);else for(var i=l[t].length-1;i>=0;i--)null!=e[l[t][i]]&&this.attr(l.prefix(t,l[t][i]),e[l[t][i]]);return this},a.extend(a.Element,a.FX,e)})),a.extend(a.Element,a.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new a.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new a.Number(t).plus(this instanceof a.FX?0:this.x()),!0)},dy:function(t){return this.y(new a.Number(t).plus(this instanceof a.FX?0:this.y()),!0)}}),a.extend(a.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),a.Set=a.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,i=t.length;e<i;e++)this.members.push(t[e]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new a.Set(t)}}}),a.FX.Set=a.invent({create:function(t){this.set=t}}),a.Set.inherit=function(){var t=[];for(var e in a.Shape.prototype)"function"==typeof a.Shape.prototype[e]&&"function"!=typeof a.Set.prototype[e]&&t.push(e);for(var e in t.forEach((function(t){a.Set.prototype[t]=function(){for(var e=0,i=this.members.length;e<i;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new a.FX.Set(this)):this}})),t=[],a.FX.prototype)"function"==typeof a.FX.prototype[e]&&"function"!=typeof a.FX.Set.prototype[e]&&t.push(e);t.forEach((function(t){a.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;e<i;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}}))},a.extend(a.Element,{}),a.extend(a.Element,{remember:function(t,e){if("object"===i(arguments[0]))for(var a in t)this.remember(a,t[a]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),a.get=function(t){var i=e.getElementById(function(t){var e=(t||"").toString().match(a.regex.reference);if(e)return e[1]}(t)||t);return a.adopt(i)},a.select=function(t,i){return new a.Set(a.utils.map((i||e).querySelectorAll(t),(function(t){return a.adopt(t)})))},a.extend(a.Parent,{select:function(t){return a.select(t,this.node)}});var m="abcdef".split("");if("function"!=typeof t.CustomEvent){var x=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var a=e.createEvent("CustomEvent");return a.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),a};x.prototype=t.Event.prototype,a.CustomEvent=x}else a.CustomEvent=t.CustomEvent;return a},void 0!==(r=function(){return Rt(Ot,Ot.document)}.call(e,n,e,t))&&(t.exports=r),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,i){return this.put(new SVG.BlendEffect(t,e,i))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,i){return this.put(new SVG.CompositeEffect(t,e,i))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,i){return this.put(new SVG.DiffuseLightingEffect(t,e,i))},displacementMap:function(t,e,i,a,s){return this.put(new SVG.DisplacementMapEffect(t,e,i,a,s))},specularLighting:function(t,e,i,a){return this.put(new SVG.SpecularLightingEffect(t,e,i,a))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,i,a,s){return this.put(new SVG.TurbulenceEffect(t,e,i,a,s))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,i){return this.parent()&&this.parent().diffuseLighting(t,e,i).in(this)},displacementMap:function(t,e,i,a){return this.parent()&&this.parent().displacementMap(this,t,e,i,a)},specularLighting:function(t,e,i,a){return this.parent()&&this.parent().specularLighting(t,e,i,a).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,i,a,s){return this.parent()&&this.parent().turbulence(t,e,i,a,s).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,i){this.attr({in:t,in2:e,mode:i||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=s(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=s(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,i){this.attr({in:t,in2:e,operator:i})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,i,a,s){this.attr({in:t,in2:e,scale:i,xChannelSelector:a,yChannelSelector:s})},gaussianBlur:function(t,e){null!=t||null!=e?this.attr("stdDeviation",n(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,i,a,s){this.attr({numOctaves:e,seed:i,stitchTiles:a,baseFrequency:t,type:s})}},i={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each((function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))}))}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var i=0;i<t.length;i++)t[i]instanceof SVG.MergeNode?this.put(t[i]):this.put(new SVG.MergeNode(t[i]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}.bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach(function(e){this[e].attr(t.rgb)}.bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,i){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:i})},specularLighting:function(t,e,i,a){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:i,kernelUnitLength:a})}},a={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,i){this.attr({x:t,y:e,z:i})},spotLight:function(t,e,i,a,s,n){this.attr({x:t,y:e,z:i,pointsAtX:a,pointsAtY:s,pointsAtZ:n})},mergeNode:function(t){this.attr("in",t)}};function s(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function n(t){if(!Array.isArray(t))return t;for(var e=0,i=t.length,a=[];e<i;e++)a.push(t[e]);return a.join(" ")}function r(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[e])t(arguments[e][i],i,arguments[e])}["r","g","b","a"].forEach((function(t){a["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),r(e,(function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),r(i,(function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),r(a,(function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function t(t,s,n,r,o,l,h){for(var c=t.slice(s,n||h),f=r.slice(o,l||h),g=0,u={pos:[0,0],start:[0,0]},d={pos:[0,0],start:[0,0]};c[g]=e.call(u,c[g]),f[g]=e.call(d,f[g]),c[g][0]!=f[g][0]||"M"==c[g][0]||"A"==c[g][0]&&(c[g][4]!=f[g][4]||c[g][5]!=f[g][5])?(Array.prototype.splice.apply(c,[g,1].concat(a.call(u,c[g]))),Array.prototype.splice.apply(f,[g,1].concat(a.call(d,f[g])))):(c[g]=i.call(u,c[g]),f[g]=i.call(d,f[g])),++g!=c.length||g!=f.length;)g==c.length&&c.push(["C",u.pos[0],u.pos[1],u.pos[0],u.pos[1],u.pos[0],u.pos[1]]),g==f.length&&f.push(["C",d.pos[0],d.pos[1],d.pos[0],d.pos[1],d.pos[0],d.pos[1]]);return{start:c,dest:f}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function i(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function a(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":t=(e=function(t,e){var i,a,s,n,r,o,l,h,c,f,g,u,d,p,y,b,v,m,x,w,_,S,C,E,A,I,k=Math.abs(e[1]),P=Math.abs(e[2]),L=e[3]%360,M=e[4],N=e[5],T=e[6],O=e[7],R=new SVG.Point(t),D=new SVG.Point(T,O),F=[];if(0===k||0===P||R.x===D.x&&R.y===D.y)return[["C",R.x,R.y,D.x,D.y,D.x,D.y]];for((a=(i=new SVG.Point((R.x-D.x)/2,(R.y-D.y)/2).transform((new SVG.Matrix).rotate(L))).x*i.x/(k*k)+i.y*i.y/(P*P))>1&&(k*=a=Math.sqrt(a),P*=a),s=(new SVG.Matrix).rotate(L).scale(1/k,1/P).rotate(-L),R=R.transform(s),o=(n=[(D=D.transform(s)).x-R.x,D.y-R.y])[0]*n[0]+n[1]*n[1],r=Math.sqrt(o),n[0]/=r,n[1]/=r,l=o<4?Math.sqrt(1-o/4):0,M===N&&(l*=-1),h=new SVG.Point((D.x+R.x)/2+l*-n[1],(D.y+R.y)/2+l*n[0]),c=new SVG.Point(R.x-h.x,R.y-h.y),f=new SVG.Point(D.x-h.x,D.y-h.y),g=Math.acos(c.x/Math.sqrt(c.x*c.x+c.y*c.y)),c.y<0&&(g*=-1),u=Math.acos(f.x/Math.sqrt(f.x*f.x+f.y*f.y)),f.y<0&&(u*=-1),N&&g>u&&(u+=2*Math.PI),!N&&g<u&&(u-=2*Math.PI),b=[],v=g,d=(u-g)/(p=Math.ceil(2*Math.abs(g-u)/Math.PI)),y=4*Math.tan(d/4)/3,_=0;_<=p;_++)x=Math.cos(v),m=Math.sin(v),w=new SVG.Point(h.x+x,h.y+m),b[_]=[new SVG.Point(w.x+y*m,w.y-y*x),w,new SVG.Point(w.x-y*m,w.y+y*x)],v+=d;for(b[0][0]=b[0][1].clone(),b[b.length-1][2]=b[b.length-1][1].clone(),s=(new SVG.Matrix).rotate(L).scale(k,P).rotate(-L),_=0,S=b.length;_<S;_++)b[_][0]=b[_][0].transform(s),b[_][1]=b[_][1].transform(s),b[_][2]=b[_][2].transform(s);for(_=1,S=b.length;_<S;_++)C=(w=b[_-1][2]).x,E=w.y,A=(w=b[_][0]).x,I=w.y,T=(w=b[_][1]).x,O=w.y,F.push(["C",C,E,A,I,T,O]);return F}(this.pos,t))[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function s(t,e){if(!1===e)return!1;for(var i=e,a=t.length;i<a;++i)if("M"==t[i][0])return i;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var i=this.value,a=this.parse(e),n=0,r=0,o=!1,l=!1;!1!==n||!1!==r;){var h;o=s(i,!1!==n&&n+1),l=s(a,!1!==r&&r+1),!1===n&&(n=0==(h=new SVG.PathArray(c.start).bbox()).height||0==h.width?i.push(i[0])-1:i.push(["M",h.x+h.width/2,h.y+h.height/2])-1),!1===r&&(r=0==(h=new SVG.PathArray(c.dest).bbox()).height||0==h.width?a.push(a[0])-1:a.push(["M",h.x+h.width/2,h.y+h.height/2])-1);var c=t(i,n,o,a,r,l);i=i.slice(0,n).concat(c.start,!1===o?[]:i.slice(o)),a=a.slice(0,r).concat(c.dest,!1===l?[]:a.slice(l)),n=!1!==o&&n+c.start.length,r=!1!==l&&r+c.dest.length}return this.value=i,this.destination=new SVG.PathArray,this.destination.value=a,this}})}(),function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var i=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",(function(t){i.start(t)})),this.el.on("touchstart.drag",(function(t){i.start(t)}))},t.prototype.transformPoint=function(t,e){var i=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=i.clientX-(e||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,a=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(t,i),box:a,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(t){e.drag(t)})),SVG.on(window,"touchmove.drag",(function(t){e.drag(t)})),SVG.on(window,"mouseup.drag",(function(t){e.end(t)})),SVG.on(window,"touchend.drag",(function(t){e.end(t)})),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),i=this.transformPoint(t),a=this.startPoints.box.x+i.x-this.startPoints.point.x,s=this.startPoints.box.y+i.y-this.startPoints.point.y,n=this.constraint,r=i.x-this.startPoints.point.x,o=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if("function"==typeof n){var l=n.call(this.el,a,s,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(a):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(s):!1!==l.y&&this.el.y(l.y)}else"object"==typeof n&&(null!=n.minX&&a<n.minX?r=(a=n.minX)-this.startPoints.box.x:null!=n.maxX&&a>n.maxX-e.width&&(r=(a=n.maxX-e.width)-this.startPoints.box.x),null!=n.minY&&s<n.minY?o=(s=n.minY)-this.startPoints.box.y:null!=n.maxY&&s>n.maxY-e.height&&(o=(s=n.maxY-e.height)-this.startPoints.box.y),null!=n.snapToGrid&&(a-=a%n.snapToGrid,s-=s%n.snapToGrid,r-=r%n.snapToGrid,o-=o%n.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:r,y:o},!0):this.el.move(a,s));return i},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,i){"function"!=typeof e&&"object"!=typeof e||(i=e,e=!0);var a=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?a.init(i||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function t(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,i){var a="string"!=typeof t?t:e[t];return i?a/2:a},this.pointCoords=function(t,e){var i=this.pointsList[t];return{x:this.pointCoord(i[0],e,"t"===t||"b"===t),y:this.pointCoord(i[1],e,"r"===t||"l"===t)}}}t.prototype.init=function(t,e){var i=this.el.bbox();this.options={};var a=this.el.selectize.defaults.points;for(var s in this.el.selectize.defaults)this.options[s]=this.el.selectize.defaults[s],void 0!==e[s]&&(this.options[s]=e[s]);var n=["points","pointsExclude"];for(var s in n){var r=this.options[n[s]];"string"==typeof r?r=r.length>0?r.split(/\s*,\s*/i):[]:"boolean"==typeof r&&"points"===n[s]&&(r=r?a:[]),this.options[n[s]]=r}this.options.points=[a,this.options.points].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},t.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},t.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map((function(e){return[e[0]-t.x,e[1]-t.y]}))},t.prototype.drawPoints=function(){for(var t=this,e=this.getPointArray(),i=0,a=e.length;i<a;++i){var s=function(e){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var a=i.pageX||i.touches[0].pageX,s=i.pageY||i.touches[0].pageY;t.el.fire("point",{x:a,y:s,i:e,event:i})}}(i),n=this.drawPoint(e[i][0],e[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",s).on("mousedown",s);this.pointSelection.set.add(n)}},t.prototype.drawPoint=function(t,e){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof i)return i.call(this,t,e);throw new Error("Unknown "+i+" point type!")}},t.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},t.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},t.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each((function(e){this.cx()===t[e][0]&&this.cy()===t[e][1]||this.center(t[e][0],t[e][1])}))},t.prototype.updateRectSelection=function(){var t=this,e=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:e.width,height:e.height}),this.options.points.length&&this.options.points.map((function(i,a){var s=t.pointCoords(i,e);t.rectSelection.set.get(a+1).center(s.x,s.y)})),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(e.width/2,20)}},t.prototype.selectRect=function(t){var e=this,i=this.el.bbox();function a(t){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var a=i.pageX||i.touches[0].pageX,s=i.pageY||i.touches[0].pageY;e.el.fire(t,{x:a,y:s,event:i})}}if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(t,s){var n=e.pointCoords(t,i),r=e.drawPoint(n.x,n.y).attr("class",e.options.classPoints+"_"+t).on("mousedown",a(t)).on("touchstart",a(t));e.rectSelection.set.add(r)})),this.rectSelection.set.each((function(){this.addClass(e.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var s=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var i=t.pageX||t.touches[0].pageX,a=t.pageY||t.touches[0].pageY;e.el.fire("rot",{x:i,y:a,event:t})},n=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",s).on("mousedown",s);this.rectSelection.set.add(n)}},t.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},t.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){t.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){t.handler()}))},t.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,i){return"object"==typeof e&&(i=e,e=!0),(this.remember("_selectHandler")||new t(this)).init(void 0===e||e,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function t(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}t.prototype.transformPoint=function(t,e,i){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},t.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},t.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==t[i]&&(this.options[i]=t[i]);this.el.on("lt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rb.resize",(function(t){e.resize(t||window.event)})),this.el.on("lb.resize",(function(t){e.resize(t||window.event)})),this.el.on("t.resize",(function(t){e.resize(t||window.event)})),this.el.on("r.resize",(function(t){e.resize(t||window.event)})),this.el.on("b.resize",(function(t){e.resize(t||window.event)})),this.el.on("l.resize",(function(t){e.resize(t||window.event)})),this.el.on("rot.resize",(function(t){e.resize(t||window.event)})),this.el.on("point.resize",(function(t){e.resize(t||window.event)})),this.update()}},t.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},t.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var a=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[a[t.detail.i][0],a[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(t,e){var i=this.snapToGrid(t,e);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y+i[1]).size(this.parameters.box.width-i[0],this.parameters.box.height-i[1])}};break;case"rt":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).size(this.parameters.box.width+i[0],this.parameters.box.height-i[1])}};break;case"rb":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+i[0],this.parameters.box.height+i[1])}};break;case"lb":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).size(this.parameters.box.width-i[0],this.parameters.box.height+i[1])}};break;case"t":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).height(this.parameters.box.height-i[1])}};break;case"r":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+i[0])}};break;case"b":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+i[1])}};break;case"l":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).width(this.parameters.box.width-i[0])}};break;case"rot":this.calc=function(t,e){var i=t+this.parameters.p.x,a=e+this.parameters.p.y,s=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),n=Math.atan2(a-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),r=this.parameters.rotation+180*(n-s)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(r-r%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){var i=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),a=this.el.array().valueOf();a[this.parameters.i][0]=this.parameters.pointCoords[0]+i[0],a[this.parameters.i][1]=this.parameters.pointCoords[1]+i[1],this.el.plot(a)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"touchend.resize",(function(){e.done()})),SVG.on(window,"mousemove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"mouseup.resize",(function(){e.done()}))},t.prototype.update=function(t){if(t){var e=this._extractPosition(t),i=this.transformPoint(e.x,e.y),a=i.x-this.parameters.p.x,s=i.y-this.parameters.p.y;this.lastUpdateCall=[a,s],this.calc(a,s),this.el.fire("resizing",{dx:a,dy:s,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},t.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},t.prototype.snapToGrid=function(t,e,i,a){var s;return void 0!==a?s=[(i+t)%this.options.snapToGrid,(a+e)%this.options.snapToGrid]:(i=null==i?3:i,s=[(this.parameters.box.x+t+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),t<0&&(s[0]-=this.options.snapToGrid),e<0&&(s[1]-=this.options.snapToGrid),t-=Math.abs(s[0])<this.options.snapToGrid/2?s[0]:s[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(s[1])<this.options.snapToGrid/2?s[1]:s[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,i,a)},t.prototype.constraintToBox=function(t,e,i,a){var s,n,r=this.options.constraint||{};return void 0!==a?(s=i,n=a):(s=this.parameters.box.x+(1&i?0:this.parameters.box.width),n=this.parameters.box.y+(2&i?0:this.parameters.box.height)),void 0!==r.minX&&s+t<r.minX&&(t=r.minX-s),void 0!==r.maxX&&s+t>r.maxX&&(t=r.maxX-s),void 0!==r.minY&&n+e<r.minY&&(e=r.minY-n),void 0!==r.maxY&&n+e>r.maxY&&(e=r.maxY-n),[t,e]},t.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var i=t.slice(),a=this.parameters.box.width/this.parameters.box.height,s=this.parameters.box.width+t[0],n=this.parameters.box.height-t[1],r=s/n;return r<a?(i[1]=s/a-this.parameters.box.height,e&&(i[1]=-i[1])):r>a&&(i[0]=this.parameters.box.width-n*a,e&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new t(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Bt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new b(this.ctx),this.ctx.axes=new nt(this.ctx),this.ctx.core=new Xt(this.ctx.el,this.ctx),this.ctx.config=new V({}),this.ctx.data=new W(this.ctx),this.ctx.grid=new Q(this.ctx),this.ctx.graphics=new S(this.ctx),this.ctx.coreUtils=new A(this.ctx),this.ctx.crosshairs=new ot(this.ctx),this.ctx.events=new et(this.ctx),this.ctx.exports=new $(this.ctx),this.ctx.localization=new it(this.ctx),this.ctx.options=new L,this.ctx.responsive=new st(this.ctx),this.ctx.series=new F(this.ctx),this.ctx.theme=new at(this.ctx),this.ctx.formatters=new U(this.ctx),this.ctx.titleSubtitle=new lt(this.ctx),this.ctx.legend=new gt(this.ctx),this.ctx.toolbar=new dt(this.ctx),this.ctx.dimensions=new pt(this.ctx),this.ctx.updateHelpers=new Yt(this.ctx),this.ctx.zoomPanSelection=new yt(this.ctx),this.ctx.w.globals.tooltip=new St(this.ctx)}}]),t}(),Gt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each((function(t,e){this.removeClass("*"),this.off(),this.stop()}),!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,i=t.isUpdating,a=this.w.globals.dom.Paper.node;a.parentNode&&a.parentNode.parentNode&&!i&&(a.parentNode.parentNode.style.minHeight="unset");var s=this.w.globals.dom.baseEl;s&&this.ctx.eventList.forEach((function(t){s.removeEventListener(t,e.ctx.events.documentEvent)}));var n=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(n.Paper),n.Paper.remove(),n.elWrap=null,n.elGraphical=null,n.elAnnotations=null,n.elLegendWrap=null,n.baseEl=null,n.elGridRect=null,n.elGridRectMask=null,n.elGridRectMarkerMask=null,n.elForecastMask=null,n.elNonForecastMask=null,n.elDefs=null}}]),t}(),Vt=new WeakMap;return function(){function t(e,i){a(this,t),this.opts=i,this.ctx=this,this.w=new j(i).init(),this.el=e,this.w.globals.cuid=w.randomId(),this.w.globals.chartID=this.w.config.chart.id?w.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Bt(this).initModules(),this.create=w.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return h(t,[{key:"render",value:function(){var t=this;return new Promise((function(e,i){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var a=t.w.config.chart.events.beforeMount;if("function"==typeof a&&a(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(t,e){var i=!1,a=t.getBoundingClientRect();"none"!==t.style.display&&0!==a.width||(i=!0);var s=new ResizeObserver((function(a){i&&e.call(t,a),i=!0}));t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(t.children).forEach((function(t){return s.observe(t)})):s.observe(t),Vt.set(e,s)}(t.el.parentNode,t.parentResizeHandler),!t.css){var s=t.el.getRootNode&&t.el.getRootNode(),n=w.is("ShadowRoot",s),r=t.el.ownerDocument,o=r.getElementById("apexcharts-css");!n&&o||(t.css=document.createElement("style"),t.css.id="apexcharts-css",t.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',n?s.prepend(t.css):r.head.appendChild(t.css))}var l=t.create(t.w.config.series,{});if(!l)return e(t);t.mount(l).then((function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(l)})).catch((function(t){i(t)}))}else i(new Error("Element not found"))}))}},{key:"create",value:function(t,e){var i=this.w;new Bt(this).initModules();var a=this.w.globals;if(a.noData=!1,a.animationEnded=!1,this.responsive.checkResponsiveConfig(e),i.config.xaxis.convertedCatToNumeric&&new G(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return a.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===i.config.chart.type&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),0===a.svgWidth)return a.animationEnded=!0,null;var s=A.checkComboSeries(t);a.comboCharts=s.comboCharts,a.comboBarCount=s.comboBarCount;var n=t.every((function(t){return t.data&&0===t.data.length}));(0===t.length||n)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new T(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),a.noData&&a.collapsedSeries.length!==a.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),a.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),new A(this).getLargestMarkerSize(),this.dimensions.plotCoords();var r=this.core.xySettings();this.grid.createGridMask();var o=this.core.plotChartType(t,r),l=new R(this);l.bringForward(),i.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition();var h={plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}};return{elGraph:o,xyRatios:r,elInner:i.globals.dom.elGraphical,dimensions:h}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,a=i.w;return new Promise((function(s,n){if(null===i.el)return n(new Error("Not enough data to display or target element not found"));(null===e||a.globals.allSeriesCollapsed)&&i.series.handleNoData(),"treemap"!==a.config.chart.type&&i.axes.drawAxis(a.config.chart.type,e.xyRatios),i.grid=new Q(i);var r=i.grid.drawGrid();i.annotations=new M(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===a.config.grid.position&&r&&a.globals.dom.elGraphical.add(r.el);var o=new J(t.ctx),l=new tt(t.ctx);if(null!==r&&(o.xAxisLabelCorrections(r.xAxisTickWidth),l.setYAxisTextAlignments(),a.config.yaxis.map((function(t,e){-1===a.globals.ignoreYAxisIndexes.indexOf(e)&&l.yAxisTitleRotate(e,t.opposite)}))),"back"===a.config.annotations.position&&(a.globals.dom.Paper.add(a.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),Array.isArray(e.elGraph))for(var h=0;h<e.elGraph.length;h++)a.globals.dom.elGraphical.add(e.elGraph[h]);else a.globals.dom.elGraphical.add(e.elGraph);if("front"===a.config.grid.position&&r&&a.globals.dom.elGraphical.add(r.el),"front"===a.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===a.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"front"===a.config.annotations.position&&(a.globals.dom.Paper.add(a.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),!a.globals.noData){if(a.config.tooltip.enabled&&!a.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),a.globals.axisCharts&&(a.globals.isXNumeric||a.config.xaxis.convertedCatToNumeric||a.globals.isRangeBar))(a.config.chart.zoom.enabled||a.config.chart.selection&&a.config.chart.selection.enabled||a.config.chart.pan&&a.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var c=a.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(t){c[t]=!1}))}a.config.chart.toolbar.show&&!a.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}a.globals.memory.methodsToExec.length>0&&a.globals.memory.methodsToExec.forEach((function(t){t.method(t.params,!1,t.context)})),a.globals.axisCharts||a.globals.noData||i.core.resizeNonAxisCharts(),s(i)}))}},{key:"destroy",value:function(){var t,e;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,t=this.parentResizeHandler,(e=Vt.get(t))&&(e.disconnect(),Vt.delete(t));var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach((function(t,e){t.id===w.escapeString(i)&&Apex._chartInstances.splice(e,1)})),new Gt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.w;return r.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map((function(t,i){return e.updateHelpers._extendSeries(t,i)}))),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),r.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,a,s,n)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.w.config.series.slice();return a.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(a,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var a=i.w.config.series.slice(),s=0;s<a.length;s++)if(null!==t[s]&&void 0!==t[s])for(var n=0;n<t[s].data.length;n++)a[s].data.push(t[s].data[n]);return i.w.config.series=a,e&&(i.w.globals.initialSeries=w.clone(i.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise((function(i,a){new Gt(e.ctx).clear({isUpdating:!0});var s=e.create(e.w.config.series,t);if(!s)return i(e);e.mount(s).then((function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)})).catch((function(t){a(t)}))}))}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach((function(t){e.push(t)}))),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter((function(t){if(t.group)return!0})).map((function(e){return t.w.config.chart.group===e.group?e.chart:t}))}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,e){return this.series.toggleSeriesOnHover(t,e)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;i&&(a=i),a.annotations.addXaxisAnnotationExternal(t,e,a)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;i&&(a=i),a.annotations.addYaxisAnnotationExternal(t,e,a)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;i&&(a=i),a.annotations.addPointAnnotationExternal(t,e,a)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new K(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new K(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new $(this.ctx).dataURI(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=w.escapeString(t),i=Apex._chartInstances.filter((function(t){return t.id===e}))[0];return i&&i.chart}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),i=0;i<e.length;i++)new t(e[i],JSON.parse(e[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var a=null;if(-1!==i.publicMethods.indexOf(e)){for(var s=arguments.length,n=new Array(s>2?s-2:0),r=2;r<s;r++)n[r-2]=arguments[r];a=i[e].apply(i,n)}return a}}},{key:"merge",value:function(t,e){return w.extend(t,e)}}]),t}()}()},523:function(t,e,n){"use strict";n(505)},524:function(t,e,n){var r=n(22)(!1);r.push([t.i,"svg.apexcharts-svg[data-v-63a9aab1]{background:transparent!important}.v-application a[data-v-63a9aab1]{color:#fff;text-decoration:none}",""]),t.exports=r},525:function(t,e,n){"use strict";n(10),n(7),n(8),n(3),n(16),n(9),n(17);var r=n(2),o=(n(31),n(489),n(244)),l=n(448),h=n(120),c=n(65),f=n(32),d=n(1).a.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),y=n(11),v=n(14);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=Object(y.a)(o.a,c.a,d).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"==typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var data={staticClass:"v-alert__border",class:Object(r.a)({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&((data=this.setBackgroundColor(this.computedColor,data)).class["v-alert__border--has-color"]=!0),this.$createElement("div",data)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(l.a,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(h.a,{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(h.a,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=x(x({},o.a.options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||f.a.options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(v.a)("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var data={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};this.coloredBorder||(data=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,data));return this.$createElement("div",data,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},545:function(t,e,n){"use strict";n.r(e);n(10),n(16),n(17);var r=n(21),o=n(2),l=(n(83),n(63),n(7),n(47),n(24),n(3),n(9),n(73),n(8),n(479)),h=n.n(l),c=n(499),f=n(1),d=n(12),y=n(68),v=n(37),m=n(38),x=(n(20),n(49),n(477),n(322),n(321),n(78),n(31),n(44),n(251),n(34),n(504)),w=n(518),_=n.n(w),S=(n(28),function(){function t(e){if(Object(v.a)(this,t),this.PRECISION=6,this.cache={},this.D2R=Math.PI/180,this.R2D=180/Math.PI,this.A=6378137,this.MAXEXTENT=20037508.342789244,e=e||{},this.size=e.size||256,!this.cache[this.size]){var n=this.size,r=this.cache[this.size]={};r.Bc=[],r.Cc=[],r.zc=[],r.Ac=[];for(var o=0;o<30;o++)r.Bc.push(n/360),r.Cc.push(n/(2*Math.PI)),r.zc.push(n/2),r.Ac.push(n),n*=2}this.Bc=this.cache[this.size].Bc,this.Cc=this.cache[this.size].Cc,this.zc=this.cache[this.size].zc,this.Ac=this.cache[this.size].Ac}return Object(m.a)(t,[{key:"toRad",value:function(t){return t*Math.PI/180}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"px",value:function(t,e){if(this.isFloat(e)){var n=this.size*Math.pow(2,e),r=n/2,o=n/360,l=n/(2*Math.PI),h=n,c=Math.min(Math.max(Math.sin(this.D2R*t[1]),-.9999),.9999),f=r+t[0]*o,d=r+.5*Math.log((1+c)/(1-c))*-l;return f>h&&(f=h),d>h&&(d=h),[f,d]}var y=this.zc[e],v=Math.min(Math.max(Math.sin(this.D2R*t[1]),-.9999),.9999),m=Math.round(y+t[0]*this.Bc[e]),x=Math.round(y+.5*Math.log((1+v)/(1-v))*-this.Cc[e]);return m>this.Ac[e]&&(m=this.Ac[e]),x>this.Ac[e]&&(x=this.Ac[e]),[m,x]}},{key:"ll",value:function(t,e){if(this.isFloat(e)){var n=this.size*Math.pow(2,e),r=n/360,o=n/(2*Math.PI),l=n/2,h=(t[1]-l)/-o;return[(t[0]-l)/r,this.R2D*(2*Math.atan(Math.exp(h))-.5*Math.PI)]}var g=(t[1]-this.zc[e])/-this.Cc[e];return[(t[0]-this.zc[e])/this.Bc[e],this.R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI)]}},{key:"bbox",value:function(t,e,n,r,o){r&&(e=Math.pow(2,n)-1-e);var l=[t*this.size,(+e+1)*this.size],h=[(+t+1)*this.size,e*this.size],c=this.ll(l,n).concat(this.ll(h,n));return"900913"===o?this.convert(c,"900913"):c}},{key:"xyz",value:function(t,e,n,r){"900913"===r&&(t=this.convert(t,"WGS84"));var o=[t[0],t[1]],l=[t[2],t[3]],h=this.px(o,e),c=this.px(l,e),f=[Math.floor(h[0]/this.size),Math.floor((c[0]-1)/this.size)],d=[Math.floor(c[1]/this.size),Math.floor((h[1]-1)/this.size)],y=Math.min.apply(Math,f),v=Math.min.apply(Math,d),m={maxX:Math.max.apply(Math,f),maxY:Math.max.apply(Math,d),minX:y<0?0:y,minY:v<0?0:v};if(n){var x={maxY:Math.pow(2,e)-1-m.minY,minY:Math.pow(2,e)-1-m.maxY};m.minY=x.minY,m.maxY=x.maxY}return m}},{key:"convert",value:function(t,e){return"900913"===e?this.forward(t.slice(0,2)).concat(this.forward(t.slice(2,4))):this.inverse(t.slice(0,2)).concat(this.inverse(t.slice(2,4)))}},{key:"forward",value:function(t){var e=[this.A*t[0]*this.D2R,this.A*Math.log(Math.tan(.25*Math.PI+.5*t[1]*this.D2R))];return e[0]>this.MAXEXTENT&&(e[0]=this.MAXEXTENT),e[0]<-this.MAXEXTENT&&(e[0]=-this.MAXEXTENT),e[1]>this.MAXEXTENT&&(e[1]=this.MAXEXTENT),e[1]<-this.MAXEXTENT&&(e[1]=-this.MAXEXTENT),e}},{key:"inverse",value:function(t){return[t[0]*this.R2D/this.A,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/this.A)))*this.R2D]}},{key:"bits",value:function(t){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return Object(y.a)(Array(b)).map((function(e,n,r){return t>>r.length-n-1&1}))}},{key:"tileToQuadkeyCompress",value:function(t){for(var e=[],n=t[2];n>0;n--){var r=0,mask=1<<n-1;0!=(t[0]&mask)&&(r=1),0!=(t[1]&mask)&&(r+=2),e=e.concat(this.bits(r,2))}return 100*e.reduce((function(t,e,n){return t+e*Math.pow(2,n)}))+t[2]}},{key:"quadkeyCompressToTile",value:function(t){var e=0,n=0,r=t%100;(t=Math.trunc(t/100).toString(2).split("")).length<2*r&&(t=Array(2*r-t.length).fill("0").concat(t));for(var i=t.length-1;i>0;--i){var o=2*+t[i--]+ +t[i],mask=1<<Math.floor(i/2);1===o?e|=mask:2===o?n|=mask:3===o&&(e|=mask,n|=mask)}return[e,n,r]}},{key:"quadkeyToBbox",value:function(t){var e=this.quadkeyCompressToTile(t);return this.bbox(e[0],e[1],e[2])}},{key:"quadkeyToPolygon",value:function(t){var e=this.quadkeyToBbox(t),n=[[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]],[e[0],e[1]]]];return x.polygon(n)}},{key:"tileToLngLat",value:function(t,e,n){var r=this.tile2lon(t,n),o=this.tile2lat(e,n);return[+r.toFixed(this.PRECISION),+o.toFixed(this.PRECISION)]}},{key:"tile2lon",value:function(t,e){return t/Math.pow(2,e)*360-180}},{key:"tile2lat",value:function(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return this.R2D*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}},{key:"getXYFromCoordinates",value:function(t,e){var n=t[0],r=t[1];return[parseInt(Math.floor((r+180)/360*Math.pow(2,e)),10),parseInt(Math.floor((1-Math.log(Math.tan(this.toRad(n))+1/Math.cos(this.toRad(n)))/Math.PI)/2*Math.pow(2,e)),10)]}},{key:"getTileIndexFromLatLng",value:function(t){var e=this.getXYFromCoordinates(t.reverse(),21);return C.tileToQuadkeyCompress([e[0],e[1],21])}}]),t}()),C=new S,E=C,A=180/Math.PI,I=function(t){return t*Math.PI/180},k=function(t){return t[Math.round(t.length/2)-(t.length%2==0?0:1)]},P=function(){function t(){Object(v.a)(this,t)}return Object(m.a)(t,[{key:"bits",value:function(t){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return Object(y.a)(Array(b)).map((function(e,n,r){return t>>r.length-n-1&1}))}},{key:"tileToQuadkeyCompress",value:function(t){for(var e=[],n=t[2];n>0;n--){var r=0,mask=1<<n-1;0!=(t[0]&mask)&&(r=1),0!=(t[1]&mask)&&(r+=2),e=e.concat(this.bits(r,2))}return 100*e.reduce((function(t,e,n){return t+e*Math.pow(2,n)}))+t[2]}},{key:"quadkeyCompressToTile",value:function(t){var e=0,n=0,r=t%100;(t=Math.trunc(t/100).toString(2).split("")).length<2*r&&(t=Array(2*r-t.length).fill("0").concat(t));for(var i=t.length-1;i>0;--i){var o=2*+t[i--]+ +t[i],mask=1<<Math.floor(i/2);1===o?e|=mask:2===o?n|=mask:3===o&&(e|=mask,n|=mask)}return[e,n,r]}},{key:"projectWindow",value:function(t,e){var n=document.querySelector(e);return[[0,0],[0,1*n.width()],[1*n.height(),1*n.width()],[1*n.height(),0],[0,0]].map((function(t){return t.reverse()})).map((function(e){return t.unproject(e)})).map((function(t){return[t.lng,t.lat]}))}},{key:"bboxify",value:function(t,e){return[[t.x-e,t.y-e],[t.x+e,t.y+e]]}},{key:"tileToLngLat",value:function(t,e,n){var r=this.tile2lon(t,n),o=this.tile2lat(e,n);return[+r.toFixed(6),+o.toFixed(6)]}},{key:"tile2lon",value:function(t,e){return t/Math.pow(2,e)*360-180}},{key:"tile2lat",value:function(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return A*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}},{key:"getXYFromCoordinates",value:function(t,e){var n=t[0],r=t[1];return[parseInt(Math.floor((r+180)/360*Math.pow(2,e)),10),parseInt(Math.floor((1-Math.log(Math.tan(I(n))+1/Math.cos(I(n)))/Math.PI)/2*Math.pow(2,e)),10)]}},{key:"quadkeyCompressToLngLat",value:function(t){var e=this.quadkeyCompressToTile(t);return this.tileToLngLat(e[0],e[1],e[2])}},{key:"quadkeyToBbox",value:function(t){var e=this.quadkeyCompressToTile(t);return E.bbox(e[0],e[1],e[2])}},{key:"quadkeysToPolygon",value:function(t){var e=this,n=_.a.union.apply(_.a,Object(y.a)(t.map((function(t){var n=e.quadkeyToBbox(t);return[[[n[0],n[1]],[n[0],n[3]],[n[2],n[3]],[n[2],n[1]]]]}))));return 0===n.length?null:1===n.length?x.polygon(n[0]):x.multiPolygon(n)}},{key:"lngLatArrayToString",value:function(t){return t.map((function(t){return"".concat(t).substring(0,9)})).join(", ")}},{key:"quadkeyCompressToLngLatString",value:function(t){return this.lngLatArrayToString(this.quadkeyCompressToLngLat(t).reverse())}},{key:"getCenterCoordinatesForCompressedQuadkeys",value:function(t){if(1===t.length)return this.quadkeyCompressToLngLat(t[0]);var e=[];for(var n in t)e.push(x.point(this.quadkeyCompressToLngLat(t[n])));if(e.length>0){var r=x.featureCollection(e),o=x.center(r).geometry.coordinates;return[+o[0].toFixed(6),+o[1].toFixed(6)]}return[0,0]}},{key:"getCenterCoordinatesForCompressedQuadkeysString",value:function(t){return this.lngLatArrayToString(this.getCenterCoordinatesForCompressedQuadkeys(t))}},{key:"isUUID",value:function(t){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}},{key:"convertZoom",value:function(t,e){var n=this,r=this.quadkeyCompressToTile(t),o=e-r[2],l=Math.pow(2,o);r[0]=Math.floor(r[0]*l),r[1]=Math.floor(r[1]*l),r[2]=e;var h=[];if(o>0)for(var a=0;a<l;++a)for(var b=0;b<l;++b)h.push([r[0]+a,r[1]+b,e]);else h.push(r);return h.map((function(t){return n.tileToQuadkeyCompress(t)}))}},{key:"getTilesForBounds",value:function(t,e){for(var n=Object(d.a)(t,2),r=Object(d.a)(n[0],2),o=r[0],l=r[1],h=Object(d.a)(n[1],2),c=h[0],f=h[1],y=this.getXYFromCoordinates([l,o],e),v=Object(d.a)(y,2),m=v[0],x=v[1],w=this.getXYFromCoordinates([f,c],e),_=Object(d.a)(w,2),S=_[0],C=_[1],E=[],A=m;A<=S;++A)for(var I=C;I<=x;++I)E.push([A,I,e,this.tileToQuadkeyCompress([A,I,e])]);return E}},{key:"getTilesForBoundsMapped",value:function(t,e){for(var n=Object(d.a)(t,2),r=Object(d.a)(n[0],2),o=r[0],l=r[1],h=Object(d.a)(n[1],2),c=h[0],f=h[1],y=this.getXYFromCoordinates([l,o],e),v=Object(d.a)(y,2),m=v[0],x=v[1],w=this.getXYFromCoordinates([f,c],e),_=Object(d.a)(w,2),S=_[0],C=_[1],E=[],A=m;A<=S;++A)for(var I=C;I<=x;++I)E.push({tileId:this.tileToQuadkeyCompress([A,I,e]),x:A,y:I,z:e});return E}},{key:"getTileLengthForPoint",value:function(t){var e=x.bbox(x.buffer(x.point(t),10,{steps:1,units:"meters"}));return this.getTileLength(e)}},{key:"getTileLength",value:function(t){var e=this.getXYFromCoordinates([t[1],t[0]],21)[0],n=this.getXYFromCoordinates([t[3],t[2]],21)[1],r=E.bbox(e,n,21);return x.distance([r[0],r[1]],[r[0],r[3]],{units:"meters"})}},{key:"getRealCenter",value:function(t){var e=this;if(null==t||!t.length)return null;var n=t.map((function(t){return x.bboxPolygon(x.bbox(x.point(e.quadkeyCompressToLngLat(t))))})).map((function(t){return x.center(t).geometry.coordinates})),r=n.reduce((function(t,e){return t.x.includes(e[0])||t.x.push(e[0]),t.y.includes(e[1])||t.y.push(e[1]),t}),{x:[],y:[]}),o=r.x.length>=r.y.length?"x":"y",l=k(r[o].slice().sort((function(a,b){return a-b}))),h="x"===o?0:1,c="x"===o?1:0,f=n.filter((function(t){return t[h]===l}));return k(f.slice().sort((function(a,b){return a[c]-b[c]})))}},{key:"getBboxForPolygons",value:function(t){var e=_.a.union.apply(_.a,Object(y.a)(t.map((function(t){return t.geometry.coordinates}))));return x.bbox(x.multiPolygon(e))}},{key:"getArea",value:function(t){var e=_.a.union.apply(_.a,Object(y.a)(t.map((function(t){return t.geometry.coordinates}))));return x.area(x.multiPolygon(e))}}]),t}(),L=new P,M=n(473);function N(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?N(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):N(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O={name:"CityDetails",components:{DiscordIcon:c.a},props:{city:{type:Object,default:null}},data:function(){return{accessToken:"pk.eyJ1Ijoid2FzcGlzY2hlIiwiYSI6ImNrazBidGRsNzBmdmIyeHJyYThjZG0wYzYifQ.qZQp-6ddFiyakTvvyCv8Gw",mapStyle:"mapbox://styles/mapbox/light-v10",loadTiles:!1,cityProperties:[],propertyLoaded:!1,forSaleToggle:!1,map:null,propertyPopup:null,popupContent:null,currentProperty:null,propertyLayer:{id:"property-layer",source:"properties",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["coalesce",["feature-state","tier"],["get","tier"]],1],"#fff",["get","color"]],"line-opacity":["case",["boolean",["coalesce",["feature-state","isSelected"],["get","isSelected"]],!1],1,.5],"line-width":2}},propertyFillLayer:{id:"property-fill-layer",source:"properties",type:"fill",paint:{"fill-color":["get","color"],"fill-opacity":.5}},propertyForSaleLayer:{id:"property-for-sale-layer",source:"properties",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["boolean",["coalesce",["feature-state","forSale"],["get","forSale"]],!1],"#ff0000","#e2e2e2"],"line-opacity":["case",["boolean",["coalesce",["feature-state","isSelected"],["get","isSelected"]],!1],1,.5],"line-width":2}},propertyForSaleFillLayer:{id:"property-for-sale-fill-layer",source:"properties",type:"fill",paint:{"fill-color":["case",["boolean",["coalesce",["feature-state","forSale"],["get","forSale"]],!1],"#ff0000","#e2e2e2"],"fill-opacity":.5}}}},computed:{showPropertiesButton:function(){return this.propertyLoaded?"city.refreshPropertiesButton":"city.showPropertiesButton"}},mounted:function(){h.a.accessToken=this.accessToken,this.map=new h.a.Map({container:"map",style:this.mapStyle,zoom:4,center:this.city.location.coordinates,sprite:"mapbox://sprites/mapbox/bright-v8"}),this.map.addControl(new h.a.FullscreenControl),this.map.on("load",this.onMapLoad),this.cityProperties=this.loadCachedProperties()},methods:{onMapLoad:function(t){(new h.a.Marker).setLngLat(this.city.location.coordinates).addTo(this.map),this.map.addSource("properties",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer(this.propertyLayer),this.map.addLayer(this.propertyFillLayer),this.map.addLayer(this.propertyForSaleLayer),this.map.addLayer(this.propertyForSaleFillLayer),this.map.setLayoutProperty("property-for-sale-layer","visibility","none"),this.map.setLayoutProperty("property-for-sale-fill-layer","visibility","none"),this.map.getCanvas().style.cursor="crosshair",this.map.on("mousemove","property-fill-layer",this.onMouseEnterProperty),this.map.on("mouseleave","property-fill-layer",this.onMouseLeaveProperty),this.map.on("click","property-fill-layer",this.onPropertyClick).on("click",this.onMapClick),this.propertyPopup=new h.a.Popup({closeButton:!1}),this.popupContent=new f.a(T(T({},M.default),{},{parent:this,propsData:{}})).$mount(),this.cityProperties.length>0&&(console.log("Add cached properties to map"),this.addPropertiesToMap(this.cityProperties),this.propertyLoaded=!0)},onMouseEnterProperty:function(t){this.map.getCanvas().style.cursor="pointer";var e=t.features[0];this.currentProperty=e.properties;var n=void 0===e.properties.description?"":e.properties.description;this.popupContent.title=n,this.popupContent.popupType="property",this.popupContent.popupData=e.properties,this.propertyPopup.setLngLat(t.lngLat).setDOMContent(this.popupContent.$el).addTo(this.map)},onMouseLeaveProperty:function(){this.map.getCanvas().style.cursor="crosshair";var t=document.getElementsByClassName("mapboxgl-popup");t[0]&&t[0].remove()},onPropertyClick:function(t){t.preventDefault(),t.originalEvent.preventDefault();var e=t.features[0],n=e.properties.propertyId;console.log(e),window.open("https://app.earth2.io/#thegrid/"+n)},showProperties:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadTiles=!0,e.next=3,t.getCityProperties();case 3:t.cityProperties=e.sent,t.propertyLoaded=!0,t.cityProperties.length>0&&(t.addPropertiesToMap(t.cityProperties),t.setCachedProperties(t.cityProperties));case 6:case"end":return e.stop()}}),e)})))()},onMapClick:function(t){t.defaultPrevented||(console.log("Map clicked"),console.log(t.lngLat),window.open("https://app.earth2.io/?lng=".concat(t.lngLat.lng,"&lat=").concat(t.lngLat.lat)))},getCityProperties:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getCityProperties"),n=t.$route.params.id,e.prev=2,e.next=5,t.$axios.$get("/earth-2-properties/city/"+n);case 5:return r=e.sent,console.log(r),t.loadTiles=!1,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(2),t.error=!0,t.loadTiles=!1,console.log("error"),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})))()},addPropertiesToMap:function(t){var e=this,n=[];t.forEach((function(t){var polygon=e.processTiles(t);n.push(polygon)})),this.map.getSource("properties").setData({type:"FeatureCollection",features:n}),console.log(n),this.map.fitBounds(L.getBboxForPolygons(n))},togglePropertiesForSale:function(){this.forSaleToggle?(this.map.setLayoutProperty("property-layer","visibility","none"),this.map.setLayoutProperty("property-layer","visibility","none"),this.map.setLayoutProperty("property-for-sale-layer","visibility","visible"),this.map.setLayoutProperty("property-for-sale-fill-layer","visibility","visible")):(this.map.setLayoutProperty("property-layer","visibility","visible"),this.map.setLayoutProperty("property-layer","visibility","visible"),this.map.setLayoutProperty("property-for-sale-layer","visibility","none"),this.map.setLayoutProperty("property-for-sale-fill-layer","visibility","none"))},processTiles:function(t){if(!t.indices.length)return null;var polygon=L.quadkeysToPolygon(t.indices);return polygon.properties=T(T({},t),{},{color:this.stringToColor(t.ownerId),type:"landfield"}),polygon},stringToColor:function(t){for(var e=0,i=0;i<t.length;i++)e=t.charCodeAt(i)+((e<<5)-e);for(var n="#",r=0;r<3;r++){n+=("00"+(e>>8*r&255).toString(16)).substr(-2)}return n},loadCachedProperties:function(){var t=this,e=localStorage.getItem("properties");return console.log("loadCachedProperties"),console.log(JSON.parse(e).filter((function(e){return e.cityId===t.city.id}))),e?JSON.parse(e).filter((function(e){return e.cityId===t.city.id})):[]},setCachedProperties:function(t){var e=this;console.log("setCachedProperties");var n=localStorage.getItem("properties");n=n?JSON.parse(n).filter((function(t){return t.cityId===e.city.id})):[],console.log(n),n=0===n.length?t:n.filter((function(t){return t.cityId!==e.city.id})).concat(t),localStorage.setItem("properties",JSON.stringify(n))}}},R=n(72),D=n(77),F=n.n(D),z=n(525),X=n(250),Y=n(474),B=n(465),G=n(227),V=n(228),H=n(135),j=n(96),W=n(118),U=n(467),Z=n(626),component=Object(R.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"pa-4",attrs:{elevation:"4",rounded:""}},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-card",{staticStyle:{"min-height":"450px",height:"100%"},attrs:{id:"map"}})],1),t._v(" "),n("v-col",{staticClass:"text-body-1",attrs:{cols:"12",md:"4"}},[n("v-list",[n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"primary"}},[t._v("\n              mdi-map-marker\n            ")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.city.location.coordinates))]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.$t("city.location")))])],1)],1),t._v(" "),n("v-list-item",{attrs:{href:t.city.url,target:"_blank",rel:"noopener noreferrer"}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"primary"}},[t._v("\n              mdi-open-in-new\n            ")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("\n              "+t._s(t.city.url)+"\n            ")]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.$t("city.e2Location")))])],1)],1),t._v(" "),t.city.website?n("v-list-item",{attrs:{href:t.city.website,target:"_blank",rel:"noopener noreferrer"}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"primary"}},[t._v("\n              mdi-web\n            ")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("\n              "+t._s(t.city.website)+"\n            ")]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.$t("cities.newCityModal.website")))])],1)],1):t._e(),t._v(" "),t.city.discord?n("v-list-item",{attrs:{href:t.city.discord,target:"_blank",rel:"noopener noreferrer"}},[n("v-list-item-icon",[n("discord-icon",{staticClass:"v-icon notranslate v-icon--dense mdi mdi-web theme--dark",attrs:{size:"1.2x",fill:"#21cff3"}})],1),t._v(" "),n("v-list-item-content",[t.city.discord?n("v-list-item-title",[t._v("\n              "+t._s(t.city.discord)+"\n            ")]):n("v-list-item-title",[t._v("\n              No discord\n            ")]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.$t("cities.newCityModal.discordServer")))])],1)],1):t._e(),t._v(" "),t.city.validated?n("v-list-item",[n("v-list-item-content",[n("v-btn",{staticClass:"mb-2",attrs:{color:"primary darken-1",dark:"",loading:t.loadTiles},on:{click:t.showProperties}},[t._v("\n              "+t._s(t.$t(t.showPropertiesButton))+"\n            ")]),t._v(" "),t.propertyLoaded&&0===t.cityProperties.length?n("v-alert",{attrs:{dense:"",type:"warning"}},[t._v("\n              "+t._s(t.$t("city.noProperty"))+"\n            ")]):t._e(),t._v(" "),t.propertyLoaded&&0!==t.cityProperties.length?n("v-switch",{attrs:{label:"Highlight properties for sale"},on:{change:t.togglePropertiesForSale},model:{value:t.forSaleToggle,callback:function(e){t.forSaleToggle=e},expression:"forSaleToggle"}}):t._e()],1)],1):t._e()],1)],1),t._v(" "),n("v-list",{staticClass:"pa-4"},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-medium"},[t._v("\n          "+t._s(t.$t("cities.newCityModal.description"))+"\n        ")]),t._v(" "),t.city.description?n("v-list-item-content",{staticClass:"text-justify"},[t._v("\n          "+t._s(t.city.description)+"\n        ")]):n("v-list-item-content",{staticClass:"text-justify"},[t._v("\n          "+t._s(t.$t("city.noDescription"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,"4272ed9d",null);e.default=component.exports;F()(component,{VAlert:z.a,VBtn:X.a,VCard:Y.a,VCol:B.a,VIcon:G.a,VList:V.a,VListItem:H.a,VListItemContent:j.a,VListItemIcon:W.a,VListItemSubtitle:j.b,VListItemTitle:j.c,VRow:U.a,VSwitch:Z.a})},546:function(t,e,n){"use strict";n.r(e);n(10),n(7),n(8),n(16),n(9),n(17);var r=n(2);n(477),n(63),n(321),n(183),n(20),n(73),n(97),n(3);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"PropertiesForSale",filters:{formatNumber:function(t){return(new Intl.NumberFormat).format(Math.trunc(t))}},props:{propertiesForSale:{type:Array,default:function(){return[]}}},data:function(){return{propertiesForSaleHeaders:[{text:"Description",align:"start",value:"description",width:"40%"},{text:"Tile count",value:"tileCount",width:"10%"},{text:"New land price",value:"newLandPrice",width:"15%"},{text:"Price",value:"price",width:"10%"},{text:"Discount",value:"discount",width:"15%"},{text:"Class",value:"tileClass",width:"5%"},{text:"",value:"buy",sortable:!1,width:"5%"}]}},computed:{normalizedProperties:function(){var t=this;return this.propertiesForSale.map((function(e){return l(l({},e),{},{discount:t.getDiscount(e),newLandPrice:t.getNewLandPrice(e),propertyUrl:"https://app.earth2.io/#thegrid/"+e.propertyId})}))}},methods:{discountColor:function(t){var e="red--text";return t<=0&&(e="green--text"),e},getDiscount:function(t){var e=(t.tradingValue*t.tileCount-t.price)/(t.tradingValue*t.tileCount)*100*-1;return e===1/0?1e4:this.toFixed(e,2)},getNewLandPrice:function(t){return this.toFixed(t.tradingValue*t.tileCount,2)},toFixed:function(t,e){var n=new RegExp("^-?\\d+(?:.\\d{0,"+(e||-1)+"})?");return t.toString().match(n)[0]}}},c=n(72),f=n(77),d=n.n(f),y=n(250),v=n(474),m=n(471),x=n(640),component=Object(c.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mt-4"},[n("v-card-text",{staticClass:"subtitle-2 text--secondary py-0 text-wrap"},[t._v("\n    "+t._s(t.$t("city.updateMessage"))+"\n  ")]),t._v(" "),n("v-data-table",{attrs:{headers:t.propertiesForSaleHeaders,items:t.normalizedProperties,"items-per-page":10},scopedSlots:t._u([{key:"item.discount",fn:function(e){var r=e.item;return[n("span",{class:t.discountColor(t.getDiscount(r))},[t._v(t._s(t._f("formatNumber")(r.discount))+"%")])]}},{key:"item.buy",fn:function(e){var r=e.item;return[n("v-btn",{attrs:{small:"",color:"primary darken-1","min-width":"0",target:"_blank",rel:"noopener noreferrer",href:r.propertyUrl}},[t._v("\n        "+t._s(t.$t("city.buyButton"))+"\n      ")])]}}])})],1)}),[],!1,null,"2746d57e",null);e.default=component.exports;d()(component,{VBtn:y.a,VCard:v.a,VCardText:m.b,VDataTable:x.a})},547:function(t,e,n){"use strict";n.r(e);n(477);var r=n(521),o={name:"CityStats",components:{apexchart:n.n(r).a},filters:{formatNumber:function(t){return(new Intl.NumberFormat).format(Math.trunc(t))}},props:["city","cityStats"],data:function(){return{lineChartOption:{chart:{height:"100%",type:"area",sparkline:{enabled:!0},toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},legend:{show:!1},dataLabels:{enabled:!1},stroke:{curve:"smooth"},grid:{show:!1},xaxis:{type:"datetime",labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1}},tooltip:{theme:"dark",x:{format:"dd/MM/yy HH:mm"}},noData:{text:"Loading..."}},classDistributionChartOptions:{chart:{height:"100%",type:"pie"},labels:["Class 1","Class 2","Class 3","Class 4","Class 5","No class"],dataLabels:{formatter:function(t,e){var n=e.seriesIndex;e.dataPointIndex;return e.w.config.labels[n]+":  "+Math.trunc(t)+"%"}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},legend:{show:!1},theme:{palette:"palette2"},stroke:{colors:["#1E1E1E"]},noData:{text:"Loading..."}},tierDistributionChartOptions:{chart:{height:"100%",type:"pie"},labels:["Tier 1","Tier 2"],dataLabels:{formatter:function(t,e){var n=e.seriesIndex;e.dataPointIndex;return e.w.config.labels[n]+":  "+Math.trunc(t)+"%"}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},legend:{show:!1},theme:{palette:"palette2"},stroke:{colors:["#1E1E1E"]},noData:{text:"Loading..."}},tilesSoldLastNumber:"",tilesSoldSeries:null,playersSeries:null,playersLastNumber:null}},computed:{hasData:function(){return""!==this.tilesSoldLastNumber}},mounted:function(){this.tilesSoldSeries=[{name:"Number of tiles",data:this.cityStats.tileNumberSoldData}],this.playersSeries=[{name:"Number of players",data:this.cityStats.playerNumberData}],this.tilesSoldLastNumber=this.cityStats.tileNumberSoldData[this.cityStats.tileNumberSoldData.length-1].y,this.playersLastNumber=this.cityStats.playerNumberData[this.cityStats.playerNumberData.length-1].y},methods:{playerColor:function(t){var e="grey";return 0===t?e="green":1===t?e="orange":2===t&&(e="red"),e},playerLink:function(t){return"https://app.earth2.io/#profile/"+t.playerId}}},l=(n(523),n(72)),h=n(77),c=n.n(h),f=n(250),d=n(474),y=n(471),v=n(465),m=n(228),x=n(135),w=n(96),_=n(467),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[n("v-col",{attrs:{cols:"12",md:"12"}}),t._v(" "),n("v-col",{staticClass:"d-flex",staticStyle:{"flex-direction":"column"},attrs:{cols:"12",md:"6",sm:"6"}},[n("v-card",{staticClass:"mb-2"},[n("v-card-title",[t._v(t._s(t.$t("city.numberOfTiles")))]),t._v(" "),t.hasData?[n("v-card-text",{staticClass:"text-center text-h4 text--primary pb-0"},[t._v("\n          "+t._s(t._f("formatNumber")(t.tilesSoldLastNumber))+"\n        ")]),t._v(" "),n("apexchart",{attrs:{type:"area",height:"60",options:t.lineChartOption,series:t.tilesSoldSeries}})]:[n("v-card-text",{staticClass:"text-center text--primary pb-2"},[t._v("\n          "+t._s(t.$t("city.noDataYet"))+"\n        ")])]],2),t._v(" "),n("v-card",{staticClass:"mt-2"},[n("v-card-title",[t._v(t._s(t.$t("city.numberOfPlayers")))]),t._v(" "),t.hasData?[n("v-card-text",{staticClass:"text-center text-h4 text--primary pb-0"},[t._v("\n          "+t._s(t._f("formatNumber")(t.playersLastNumber))+"\n        ")]),t._v(" "),n("apexchart",{attrs:{type:"area",height:"60",options:t.lineChartOption,series:t.playersSeries}})]:[n("v-card-text",{staticClass:"text-center text--primary pb-2"},[t._v("\n          "+t._s(t.$t("city.noDatayet"))+"\n        ")])]],2),t._v(" "),n("v-row",{staticClass:"mt-2"},[n("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"6",sm:"6"}},[n("v-card",{staticClass:"flex-grow-1"},[n("v-card-title",[t._v(t._s(t.$t("city.classDistribution")))]),t._v(" "),t.hasData?[n("div",{staticStyle:{"align-self":"center"}},[n("apexchart",{attrs:{type:"pie",height:"220",options:t.classDistributionChartOptions,series:t.cityStats.classDistributionFrom1to5}})],1)]:[n("v-card-text",{staticClass:"text-center text--primary pb-2"},[t._v("\n              "+t._s(t.$t("city.noDataYet"))+"\n            ")])]],2)],1),t._v(" "),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"6",sm:"6"}},[n("v-card",{staticClass:"flex-grow-1"},[n("v-card-title",[t._v(t._s(t.$t("city.tierDistribution")))]),t._v(" "),t.hasData?[n("div",{staticStyle:{"align-self":"center"}},[n("apexchart",{attrs:{type:"pie",height:"220",options:t.tierDistributionChartOptions,series:t.cityStats.tierDistribution}})],1)]:[n("v-card-text",{staticClass:"text-center text--primary pb-2"},[t._v("\n              "+t._s(t.$t("city.noDataYet"))+"\n            ")])]],2)],1)],1)],1),t._v(" "),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"6",sm:"6"}},[n("v-card",{staticClass:"flex-grow-1"},[n("v-card-title",[t._v(t._s(t.$t("city.top10Players")))]),t._v(" "),t.hasData?t._l(t.cityStats.top10Players,(function(e,r){return n("v-list",{key:e.title,staticClass:"py-1",attrs:{dense:""}},[n("v-list-item",[n("v-btn",{attrs:{color:t.playerColor(r),icon:"",outlined:""}},[t._v("\n              "+t._s(r+1)+"\n            ")]),t._v(" "),n("v-list-item-content",{staticClass:"ml-3"},[n("a",{attrs:{href:t.playerLink(e),target:"_blank",rel:"noopener noreferrer"}},[t._v("\n                "+t._s(e.username)+"\n              ")]),t._v(" "),n("span",{staticClass:"grey--text"},[t._v(" "+t._s(t._f("formatNumber")(e.tileNumber))+" tiles")])])],1)],1)})):[n("v-card-text",{staticClass:"text-center text--primary pb-2"},[t._v("\n          "+t._s(t.$t("city.noPlayerInfo"))+"\n        ")])]],2)],1)],1)}),[],!1,null,"63a9aab1",null);e.default=component.exports;c()(component,{VBtn:f.a,VCard:d.a,VCardText:y.b,VCardTitle:y.c,VCol:v.a,VList:m.a,VListItem:x.a,VListItemContent:w.a,VRow:_.a})},626:function(t,e,n){"use strict";n(10),n(7),n(8),n(3),n(16),n(9),n(17);var r=n(101),o=n(2),l=(n(245),n(246),n(502),n(519),n(501)),h=n(486),c=n(260),f=n(247),d=n(184),y=n(0),v=["title"];function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=l.a.extend({name:"v-switch",directives:{Touch:c.a},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return x(x({},h.a.options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var t=this.attrs$,e=(t.title,Object(r.a)(t,v));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",x(x({},this.attrs),e)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",x({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",x({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(f.c,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(d.a,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===y.x.left&&this.isActive||t.keyCode===y.x.right&&!this.isActive)&&this.onChange()}}})},652:function(t,e,n){"use strict";n.r(e);var r=n(21),o=(n(83),n(477),{name:"Id",filters:{formatNumber:function(t){return(new Intl.NumberFormat).format(Math.trunc(t))}},data:function(){return{city:null,loading:!0,loadingStats:!0,error:!1,tab:null,cityStats:null,propertiesForSale:[]}},head:function(){return{title:this.city?this.city.cityName:""}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCity();case 2:t.getCityStats(),console.log(t.city);case 4:case"end":return e.stop()}}),e)})))()},methods:{getCity:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getCity"),t.loading=!0,n=t.$route.params.id,e.prev=3,e.next=6,t.$axios.$get("/cities/"+n);case 6:r=e.sent,t.loading=!1,t.city=r,e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),t.loading=!1,t.error=!0,console.log("error"),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})))()},getCityStats:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getCityStats"),n=t.$route.params.id,e.prev=2,e.next=5,t.$axios.$get("/city-stats/"+n);case 5:r=e.sent,t.loadingStats=!1,t.cityStats=r,console.log(r),t.propertiesForSale=r.propertiesForSale?r.propertiesForSale:[],e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),t.loadingStats=!1,t.error=!0;case 17:case"end":return e.stop()}}),e,null,[[2,12]])})))()},head:function(){return{title:this.city?this.city.cityName:""}}}}),l=n(72),h=n(77),c=n.n(h),f=n(250),d=n(474),y=n(471),v=n(470),m=n(184),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"mt-2"},[t.loading?n("div",{staticClass:"text-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):n("section",[n("v-card",{staticClass:"pa-3 mb-4",attrs:{elevation:"4",rounded:""}},[n("v-card-title",{staticClass:"title pa-0 text-wrap"},[n("span",[t._v(t._s(t.city.cityName)+" "),t.city.group?n("span",[t._v(" "+t._s(t.$t("city.cityGroup"))+" "+t._s(t.city.group.groupName))]):t._e()])]),t._v(" "),n("v-card-text",{staticClass:"subtitle-2 text--secondary pa-0 text-wrap"},[t._v("\n        "+t._s(t.$t("city.lastUpdated"))+" "+t._s(t.$moment(t.city.lastUpdated).local().format("ddd, MMMM Do YYYY, hh:mm"))+"\n      ")])],1),t._v(" "),n("v-card",{staticClass:"mb-4",attrs:{elevation:"4",rounded:""}},[n("v-btn",{attrs:{color:"primary darken-1",text:"","x-large":""},on:{click:function(e){return t.$vuetify.goTo("#city-details")}}},[t._v("\n        "+t._s(t.$t("city.details"))+"\n      ")]),t._v(" "),n("v-btn",{attrs:{color:"primary darken-1",text:"","x-large":""},on:{click:function(e){return t.$vuetify.goTo("#properties-for-sale")}}},[t._v("\n        "+t._s(t.$t("city.propertiesForSale"))+"\n      ")]),t._v(" "),n("v-btn",{attrs:{color:"primary darken-1",text:"","x-large":""},on:{click:function(e){return t.$vuetify.goTo("#city-stats")}}},[t._v("\n        "+t._s(t.$t("city.stats"))+"\n      ")])],1),t._v(" "),n("CityDetails",{attrs:{id:"city-details",city:t.city}}),t._v(" "),t.loadingStats?n("div",{staticClass:"text-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._e(),t._v(" "),t.loadingStats?t._e():n("PropertiesForSale",{attrs:{id:"properties-for-sale","properties-for-sale":t.propertiesForSale}}),t._v(" "),t.loadingStats?t._e():n("CityStats",{attrs:{id:"city-stats",city:t.city,"city-stats":t.cityStats}})],1)])}),[],!1,null,"3a62983a",null);e.default=component.exports;c()(component,{CityDetails:n(545).default,PropertiesForSale:n(546).default,CityStats:n(547).default}),c()(component,{VBtn:f.a,VCard:d.a,VCardText:y.b,VCardTitle:y.c,VContainer:v.a,VProgressCircular:m.a})}}]);