(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{323:function(e,t,o){var content=o(328);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(30).default)("f43c1400",content,!0,{sourceMap:!1})},324:function(e,t,o){"use strict";o.r(t);var n={name:"Snackbar",data:function(){return{show:!1,message:"",timeout:4e3}},created:function(){var e=this;this.$store.watch((function(e){return e.snackbar.snack}),(function(){""!==e.$store.state.snackbar.snack&&(e.show=!0,e.message=e.$store.state.snackbar.snack,e.$store.commit("snackbar/setSnack",""))}))}},r=o(48),c=o(58),l=o.n(c),m=o(318),d=o(334),f=o(385),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-snackbar",{attrs:{timeout:e.timeout},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v("\n  "+e._s(e.message)+"\n  "),o("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://app.earth2.io/#thegrid/",color:"primary",text:""}},[o("v-icon",{attrs:{dark:""}},[e._v("\n      mdi-open-in-new\n    ")]),e._v(" Earth2 map\n  ")],1),e._v(" "),o("v-btn",{attrs:{text:"",color:"secondary"},nativeOn:{click:function(t){e.show=!1}}},[e._v("\n    Close\n  ")])],1)}),[],!1,null,"5c7e1d7d",null);t.default=component.exports;l()(component,{VBtn:m.a,VIcon:d.a,VSnackbar:f.a})},327:function(e,t,o){"use strict";o(323)},328:function(e,t,o){(t=o(29)(!1)).push([e.i,'.mapboxgl-popup-close-button{display:none}.mapboxgl-popup-content{font:400 15px/22px "Source Sans Pro","Helvetica Neue",Sans-serif;background-color:#757575;padding:0;border-radius:8px}.mapboxgl-popup-tip{border:15px solid transparent}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{border-top-color:#757575}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{border-right-color:#757575}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{border-left-color:#757575}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{border-bottom-color:#757575}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{border-top-color:#757575}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{border-bottom-color:#757575}',""]),e.exports=t},330:function(e,t,o){"use strict";o(11),o(56);var n=o(1),r=o(88);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}var l={name:"MapPopup",props:["popupName","lat","lng"],data:function(){return{geoposition:this.lat.toString().substring(0,10)+", "+this.lng.toString().substring(0,10),snackbar:!1,text:"Position copied in clipboard"}},computed:{},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({onCopy:function(e){console.log(e)},onCopyError:function(e){console.log(e)},snackTime:function(e){this.setSnack(this.text)}},Object(r.b)({setSnack:"snackbar/setSnack"}))},m=(o(327),o(48)),d=o(58),f=o.n(d),v=o(318),h=o(343),y=o(320),x=o(334),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"popup-wrapper"},[o("v-card",{staticClass:"grey darken-1 rounded-lg mx-2",attrs:{"max-width":"225px",outlined:""}},[o("v-card-title",{staticClass:"pa-2"},[e._v("\n      "+e._s(e.popupName)+"\n    ")]),e._v(" "),o("v-card-text",{staticClass:"pa-0"},[o("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.geoposition,expression:"geoposition",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.snackTime,expression:"snackTime",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{icon:""}},[o("v-icon",{attrs:{dark:""}},[e._v("\n          mdi-content-copy\n        ")])],1),e._v("\n      "+e._s(e.geoposition)+"\n    ")],1),e._v(" "),o("v-card-actions",{staticClass:"justify-center"},[o("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://www.openstreetmap.org/search?query="+e.lat+"%2C"+e.lng,small:"",color:"primary darken-1"}},[o("v-icon",{attrs:{dark:""}},[e._v("\n          mdi-open-in-new\n        ")]),e._v(" OpenStreetMap\n      ")],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;f()(component,{VBtn:v.a,VCard:h.a,VCardActions:y.a,VCardText:y.b,VCardTitle:y.c,VIcon:x.a})},342:function(e,t,o){var content=o(383);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(30).default)("1b7833da",content,!0,{sourceMap:!1})},382:function(e,t,o){"use strict";o(342)},383:function(e,t,o){(t=o(29)(!1)).push([e.i,"#menu-wrapper{position:relative;z-index:3;width:250px}#map-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}",""]),e.exports=t},400:function(e,t,o){"use strict";o.r(t);o(39),o(40);var n=o(1),r=(o(66),o(12)),c=o(0),l=o(326),m=o.n(l),d=o(344),f=o(324),v=o(330);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={name:"MapboxMap",components:{Snackbar:f.default},data:function(){return{biomes:[{name:"Quarries",landuses:[{name:"Gold",fileName:"goldMines",color:"#FFD700"},{name:"Clay",fileName:"clayMines",color:"#D4C59C"},{name:"Sand",fileName:"sandMines",color:"#c2b280"},{name:"Peat",fileName:"peatMines",color:"#766D52"},{name:"Coal",fileName:"coalMines",color:"#36454f"},{name:"Uranium",fileName:"uraniumMines",color:"#757575"},{name:"Silver",fileName:"silverMines",color:"#C0C0C0"},{name:"Iron ore",fileName:"ironOreMines",color:"#4e4f55"}]}],selectedLanduse:null,previousLanduse:null,accessToken:"pk.eyJ1Ijoid2FzcGlzY2hlIiwiYSI6ImNrazBidGRsNzBmdmIyeHJyYThjZG0wYzYifQ.qZQp-6ddFiyakTvvyCv8Gw",mapStyle:"mapbox://styles/mapbox/light-v10",minesBoundary:{id:"minesBoundary",source:"carte",type:"fill",minzoom:11,paint:{"fill-color":"#B42222","fill-opacity":.8},filter:["==","$type","Polygon"]},minesLocation:{id:"minesLocation",source:"carte",type:"circle",paint:{"circle-radius":3,"circle-color":"#90CAF9"},filter:["==","$type","Point"]},minesLabels:{id:"minesLabels",source:"labels",type:"circle",maxzoom:11,paint:{"circle-radius":4,"circle-color":"#ff001d","circle-stroke-color":"#000","circle-stroke-width":1}},minesLocationStroke:{id:"minesLocation-stroke",type:"line",source:"carte",minzoom:11,layout:{visibility:"visible","line-join":"round","line-cap":"round"},paint:{"line-width":4,"line-color":"#90CAF9"}}}},mounted:function(){m.a.accessToken="pk.eyJ1IjoiYWlzaHdlcnlhIiwiYSI6ImNrYzVyYXBlNzBrZGgzMG8wc3FtZjU5NDAifQ.u4azaXjkh41xSMC1NJLhTw",this.map=new m.a.Map({container:"map",style:this.mapStyle,zoom:1}),this.map.addControl(new m.a.NavigationControl,"top-right"),this.map.on("load",this.onMapLoad),this.map.on("zoom",this.onZoom)},methods:{onMapLoad:function(e){this.map.addSource("carte",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addSource("labels",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer(this.minesBoundary),this.map.addLayer(this.minesLocation),this.map.addLayer(this.minesLocationStroke),this.map.addLayer(this.minesLabels),this.map.on("click","minesBoundary",this.onFeatureClick),this.map.on("click","minesLabels",this.onFeatureClick),this.map.on("mouseenter","minesBoundary",this.onMouseEnter),this.map.on("mouseenter","minesLabels",this.onMouseEnter),this.map.on("mouseleave","minesBoundary",this.onMouseOut),this.map.on("mouseleave","minesLabels",this.onMouseOut)},onLanduseSelection:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log(t.selectedLanduse),t.selectedLanduse===t.previousLanduse){o.next=11;break}return t.previousLanduse=t.selectedLanduse,o.next=5,t.map.getSource("carte").setData("./data/"+e.fileName+".json");case 5:return o.next=7,t.map.getSource("labels").setData("./data/"+e.fileName+"Labels.json");case 7:t.map.setPaintProperty("minesBoundary","fill-color",e.color),t.map.setPaintProperty("minesLocation","circle-color",e.color),t.map.setPaintProperty("minesLabels","circle-color",e.color),t.map.setPaintProperty("minesLocation-stroke","line-color",e.color);case 11:case"end":return o.stop()}}),o)})))()},onZoom:function(){console.log(this.map.getZoom())},onMouseEnter:function(){this.map.getCanvas().style.cursor="pointer"},onMouseOut:function(){this.map.getCanvas().style.cursor=""},onFeatureClick:function(e){var t=e.features[0],o=document.getElementsByClassName("mapboxgl-popup");o[0]&&o[0].remove();var n=Object(d.a)(e.features[0]),r=n.geometry.coordinates[1],l=n.geometry.coordinates[0],f=void 0===t.properties.name?this.selectedLanduse:t.properties.name,h=new c.a(y(y({},v.a),{},{parent:this,propsData:{popupName:f,lat:r,lng:l}})).$mount();new m.a.Popup({closeButton:!1}).setLngLat(e.lngLat).setDOMContent(h.$el).addTo(this.map)}}},k=(o(382),o(48)),w=o(58),O=o.n(w),C=o(343),j=o(320),L=o(316),_=o(386),P=o(387),S=o(402),M=o(388),N=o(389),V=o(390),E=o(334),z=o(391),B=o(401),D=o(392),F=o(393),component=Object(k.a)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",[o("Snackbar"),e._v(" "),o("v-card",{attrs:{id:"menu-wrapper"}},[o("v-card-title",[o("span",[e._v("Earth2 Biomes")]),e._v(" "),o("v-spacer"),e._v(" "),o("v-icon",[e._v("mdi-earth")])],1),e._v(" "),o("v-expansion-panels",e._l(e.biomes,(function(t){return o("v-expansion-panel",{key:t.name,staticClass:"mt-0"},[o("v-divider"),e._v(" "),o("v-expansion-panel-header",[e._v("\n          "+e._s(t.name)+"\n        ")]),e._v(" "),o("v-expansion-panel-content",[o("v-radio-group",{staticClass:"ma-0",attrs:{"hide-details":"auto"},model:{value:e.selectedLanduse,callback:function(t){e.selectedLanduse=t},expression:"selectedLanduse"}},e._l(t.landuses,(function(t){return o("v-radio",{key:t.name,attrs:{value:t.name,label:""+t.name},on:{click:function(o){return e.onLanduseSelection(t)}}})})),1)],1)],1)})),1)],1),e._v(" "),o("v-layout",{attrs:{id:"map-wrapper",fluid:""}},[o("v-flex",{attrs:{id:"map"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;O()(component,{Snackbar:o(324).default}),O()(component,{VCard:C.a,VCardTitle:j.c,VContainer:L.a,VDivider:_.a,VExpansionPanel:P.a,VExpansionPanelContent:S.a,VExpansionPanelHeader:M.a,VExpansionPanels:N.a,VFlex:V.a,VIcon:E.a,VLayout:z.a,VRadio:B.a,VRadioGroup:D.a,VSpacer:F.a})}}]);